<script>

import { getContext } from 'svelte';

const { data, z, x, y, r, zGet, xGet, yGet, rGet, xScale, yScale, zRange, yRange, rRange, custom, width } = getContext('LayerCake');

    export let coordis
    // export let data
    // export let xScale
    // export let yScale
    $: console.log('cooooordis', coordis)

</script>

{#if coordis.length == $data.length}

<g class="scatter-group">
	{console.log('$coords')}

    {#each coordis as d, i}

        {console.log('SVG i', i)}

        <circle
            class=""
            cx={$xScale(d.x)}
            cy={$yScale(d.y)}
            r={d.r}
            fill="{$z ? $zGet($data[i]) : $zRange[0]}"
        />

    {/each}
	<!-- 
    {#each coordis as d, i}

		{console.log('SVG i', i)}
		<circle
			class=""
			cx={$xScale(d.x)}
			cy={$yScale(d.y)}
			r={d.r}
			fill="{$z ? $zGet($data[i]) : $zRange[0]}"
		/>
	{/each}

	{#if idKey && (hovered || selected || highlighted[0])}
		{#each $coords as d, i}
			{#if [hovered, selected, ...highlighted].includes($data[i][idKey])}
			{#if placeLabel == $data[i]['unique']}
			<circle
				class
				cx={$xScale(d.x)}
				cy={$yScale(d.y)}
				r={d.r}
				fill="{overlayFill && $data[i][idKey] == selected ? colorSelect : overlayFill & highlighted.includes($data[i][idKey]) ? colorHighlight : 'none'}"
				stroke="{$data[i][idKey] == hovered ? colorHover : $data[i][idKey] == selected ? colorSelect : colorHighlight}"
				stroke-width="{$data[i][idKey] == hovered || $data[i][idKey] == selected || highlighted.includes($data[i][idKey]) ? lineWidth : 0}"
			/>
			{/if}
			{/if}
		{/each}
	{/if} -->
</g>
{/if}
