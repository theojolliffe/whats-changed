var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function i(e){return e()}function a(){return Object.create(null)}function r(e){e.forEach(i)}function s(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let l;function c(e,t){return l||(l=document.createElement("a")),l.href=t,e===l.href}function u(t,...n){if(null==t)return e;const i=t.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}function h(e,t,n){e.$$.on_destroy.push(u(t,n))}function d(e,t,n,i){if(e){const a=f(e,t,n,i);return e[0](a)}}function f(e,t,i,a){return e[1]&&a?n(i.ctx.slice(),e[1](a(t))):i.ctx}function p(e,t,n,i){if(e[2]&&i){const a=e[2](i(n));if(void 0===t.dirty)return a;if("object"==typeof a){const e=[],n=Math.max(t.dirty.length,a.length);for(let i=0;i<n;i+=1)e[i]=t.dirty[i]|a[i];return e}return t.dirty|a}return t.dirty}function g(e,t,n,i,a,r){if(a){const s=f(t,n,i,r);e.p(s,a)}}function m(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}const y="undefined"!=typeof window;let v=y?()=>window.performance.now():()=>Date.now(),x=y?e=>requestAnimationFrame(e):e;const b=new Set;function $(e){b.forEach((t=>{t.c(e)||(b.delete(t),t.f())})),0!==b.size&&x($)}function k(e,t){e.appendChild(t)}function w(e,t,n){e.insertBefore(t,n||null)}function _(e){e.parentNode.removeChild(e)}function M(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function E(e){return document.createElement(e)}function T(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function N(e){return document.createTextNode(e)}function S(){return N(" ")}function A(){return N("")}function C(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function L(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function R(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function z(e,t){e.value=null==t?"":t}function j(e,t,n,i){e.style.setProperty(t,n,i?"important":"")}let D,P;function W(){if(void 0===D){D=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){D=!0}}return D}function F(e,t,n){e.classList[n?"add":"remove"](t)}class q{constructor(){this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.e=E(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)w(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(_)}}function I(e){P=e}function O(){if(!P)throw new Error("Function called outside component initialization");return P}function B(e){O().$$.on_destroy.push(e)}function K(){const e=O();return(t,n)=>{const i=e.$$.callbacks[t];if(i){const a=function(e,t,n=!1){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,!1,t),i}(t,n);i.slice().forEach((t=>{t.call(e,a)}))}}}function H(e,t){O().$$.context.set(e,t)}function U(e){return O().$$.context.get(e)}function G(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const Y=[],V=[],J=[],Z=[],X=Promise.resolve();let Q=!1;function ee(e){J.push(e)}function te(e){Z.push(e)}let ne=!1;const ie=new Set;function ae(){if(!ne){ne=!0;do{for(let e=0;e<Y.length;e+=1){const t=Y[e];I(t),re(t.$$)}for(I(null),Y.length=0;V.length;)V.pop()();for(let e=0;e<J.length;e+=1){const t=J[e];ie.has(t)||(ie.add(t),t())}J.length=0}while(Y.length);for(;Z.length;)Z.pop()();Q=!1,ne=!1,ie.clear()}}function re(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ee)}}const se=new Set;let oe;function le(){oe={r:0,c:[],p:oe}}function ce(){oe.r||r(oe.c),oe=oe.p}function ue(e,t){e&&e.i&&(se.delete(e),e.i(t))}function he(e,t,n,i){if(e&&e.o){if(se.has(e))return;se.add(e),oe.c.push((()=>{se.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}}const de="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function fe(e,t){e.d(1),t.delete(e.key)}function pe(e,t){he(e,1,1,(()=>{t.delete(e.key)}))}function ge(e,t,n,i,a,r,s,o,l,c,u,h){let d=e.length,f=r.length,p=d;const g={};for(;p--;)g[e[p].key]=p;const m=[],y=new Map,v=new Map;for(p=f;p--;){const e=h(a,r,p),o=n(e);let l=s.get(o);l?i&&l.p(e,t):(l=c(o,e),l.c()),y.set(o,m[p]=l),o in g&&v.set(o,Math.abs(p-g[o]))}const x=new Set,b=new Set;function $(e){ue(e,1),e.m(o,u),s.set(e.key,e),u=e.first,f--}for(;d&&f;){const t=m[f-1],n=e[d-1],i=t.key,a=n.key;t===n?(u=t.first,d--,f--):y.has(a)?!s.has(i)||x.has(i)?$(t):b.has(a)?d--:v.get(i)>v.get(a)?(b.add(i),$(t)):(x.add(a),d--):(l(n,s),d--)}for(;d--;){const t=e[d];y.has(t.key)||l(t,s)}for(;f;)$(m[f-1]);return m}function me(e,t,n){const i=e.$$.props[t];void 0!==i&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function ye(e){e&&e.c()}function ve(e,t,n,a){const{fragment:o,on_mount:l,on_destroy:c,after_update:u}=e.$$;o&&o.m(t,n),a||ee((()=>{const t=l.map(i).filter(s);c?c.push(...t):r(t),e.$$.on_mount=[]})),u.forEach(ee)}function xe(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function be(e,t){-1===e.$$.dirty[0]&&(Y.push(e),Q||(Q=!0,X.then(ae)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function $e(t,n,i,s,o,l,c,u=[-1]){const h=P;I(t);const d=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:o,bound:a(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(h?h.$$.context:[])),callbacks:a(),dirty:u,skip_bound:!1,root:n.target||h.$$.root};c&&c(d.root);let f=!1;if(d.ctx=i?i(t,n.props||{},((e,n,...i)=>{const a=i.length?i[0]:n;return d.ctx&&o(d.ctx[e],d.ctx[e]=a)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](a),f&&be(t,e)),n})):[],d.update(),f=!0,r(d.before_update),d.fragment=!!s&&s(d.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);d.fragment&&d.fragment.l(e),e.forEach(_)}else d.fragment&&d.fragment.c();n.intro&&ue(t.$$.fragment),ve(t,n.target,n.anchor,n.customElement),ae()}I(h)}class ke{$destroy(){xe(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function we(t){let n;return{c(){n=E("div"),n.innerHTML="<strong>Warning!</strong> This prototype uses 2011 data in lieu of the latest Census 2021 data. Data are likely to contain inaccuracies.",L(n,"class","warning svelte-srzfvi")},m(e,t){w(e,n,t)},p:e,i:e,o:e,d(e){e&&_(n)}}}class _e extends ke{constructor(e){super(),$e(this,e,null,we,o,{})}}var Me={},Ee={};function Te(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function Ne(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var i in e)i in t||n.push(t[i]=i)})),n}function Se(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function Ae(e){var t,n=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+Se(-t,6):t>9999?"+"+Se(t,6):Se(t,4))+"-"+Se(e.getUTCMonth()+1,2)+"-"+Se(e.getUTCDate(),2)+(r?"T"+Se(n,2)+":"+Se(i,2)+":"+Se(a,2)+"."+Se(r,3)+"Z":a?"T"+Se(n,2)+":"+Se(i,2)+":"+Se(a,2)+"Z":i||n?"T"+Se(n,2)+":"+Se(i,2)+"Z":"")}var Ce=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function i(e,t){var i,a=[],r=e.length,s=0,o=0,l=r<=0,c=!1;function u(){if(l)return Ee;if(c)return c=!1,Me;var t,i,a=s;if(34===e.charCodeAt(a)){for(;s++<r&&34!==e.charCodeAt(s)||34===e.charCodeAt(++s););return(t=s)>=r?l=!0:10===(i=e.charCodeAt(s++))?c=!0:13===i&&(c=!0,10===e.charCodeAt(s)&&++s),e.slice(a+1,t-1).replace(/""/g,'"')}for(;s<r;){if(10===(i=e.charCodeAt(t=s++)))c=!0;else if(13===i)c=!0,10===e.charCodeAt(s)&&++s;else if(i!==n)continue;return e.slice(a,t)}return l=!0,e.slice(a,r)}for(10===e.charCodeAt(r-1)&&--r,13===e.charCodeAt(r-1)&&--r;(i=u())!==Ee;){for(var h=[];i!==Me&&i!==Ee;)h.push(i),i=u();t&&null==(h=t(h,o++))||a.push(h)}return a}function a(t,n){return t.map((function(t){return n.map((function(e){return s(t[e])})).join(e)}))}function r(t){return t.map(s).join(e)}function s(e){return null==e?"":e instanceof Date?Ae(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,a,r=i(e,(function(e,i){if(n)return n(e,i-1);a=e,n=t?function(e,t){var n=Te(e);return function(i,a){return t(n(i),a,e)}}(e,t):Te(e)}));return r.columns=a||[],r},parseRows:i,format:function(t,n){return null==n&&(n=Ne(t)),[n.map(s).join(e)].concat(a(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=Ne(e)),a(e,t).join("\n")},formatRows:function(e){return e.map(r).join("\n")},formatRow:r,formatValue:s}}(","),Le=Ce.parse;function Re(e){for(var t in e){var n,i,a=e[t].trim();if(a)if("true"===a)a=!0;else if("false"===a)a=!1;else if("NaN"===a)a=NaN;else if(isNaN(n=+a)){if(!(i=a.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;ze&&i[4]&&!i[7]&&(a=a.replace(/-/g,"/").replace(/T/," ")),a=new Date(a)}else a=n;else a=null;e[t]=a}return e}const ze=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),je=e=>{if(e<10)return["","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth"][e];const t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"},De=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string, got "+typeof e);let n=1,i=e.charAt(0);const a=function(){return i},r=function(t){throw JSON.stringify({name:"Robo-journalist error",message:t,at:n,text:e})},s=function(t){return t&&t!==i&&r("Expected '"+t+"' instead of '"+i+"'"),i=e.charAt(n),n+=1,i},o=function(e){const n=e.split(".");let i=t;for(const t of n)try{i=i[t]}catch{r(`${e} is not in the data dictionary.`)}return i},l=function(e){const t=e.split(" "),n={"+":(e,t)=>e+t,"-":(e,t)=>e-t,"*":(e,t)=>e*t,"/":(e,t)=>e/t,"<":(e,t)=>e<t,">":(e,t)=>e>t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t},i=[];for(const e of t)if(/^-?\d+$/.test(e))i.push(Number(e));else if(e in n){const t=Number(i.pop()),a=Number(i.pop());i.push(n[e](a,t))}else if("'"===e)i[i.length-1]="s"===(a=i[i.length-1])[a.length-1]?a+"'":a+"'s";else if(","===e)i[i.length-1]=i[i.length-1].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");else if(".0"===e)i[i.length-1]=i[i.length-1].toFixed(0);else if(".1"===e)i[i.length-1]=i[i.length-1].toFixed(1);else if(".2"===e)i[i.length-1]=i[i.length-1].toFixed(2);else if("~abs"===e)i[i.length-1]=Math.abs(i[i.length-1]);else if("~ord"===e)i[i.length-1]=je(Number(i[i.length-1]));else if("~ord'"===e){let e=je(Number(i.pop()));"first"===e?e="":e+=" ",i.push(e)}else"^"===e.charAt(0)?i[i.length-1]=o(e.slice(1))(i[i.length-1]):i.push(o(e));var a;return 1!==i.length&&r("Invalid RPN"),i[0]},c=function(e){s("?");const t=h();s(":");const n=h();return s("}"),e?t:n},u=function(){if(s("{"),":"===i)return s(":"),s("}"),":";let e="";for(;a();){if("}"===i)return s("}"),l(e);if("?"===i)return c(l(e));e+=i,s()}r("Braces not closed")},h=function(){let e="";for(;a();){if(":"===i||"}"===i)return e;"{"!==i?(e+=i,s()):e+=u()}return e},d=h();return""!==i&&r(`Didn't expect '${i}'`),d};async function Pe(e){let t=await fetch(e),n=await t.text();return await Le(n,Re)}let We={good:["bad","fair"],bad:["good","fair"],white:["black","asian"],black:["white","asian"],asian:["white","black"],rented_private:["rented_social","owned"],rented_social:["rented_private","owned"],owned:["rented_private","rented_social"],student:["employee","unemployed","self-employed"],"self-employed":["employee","unemployed","student"],employee:["unemployed","self-employed","student"],unemployed:["employee","self-employed","student"],car_van:["bus","train_metro","foot","home"],bus:["car_van","train_metro","foot","home"],train_metro:["bus","car_van","foot","home"],foot:["bus","train_metro","car_van","home"],home:["bus","train_metro","foot","car_van"],OnePerson:["Cohabiting","Married"],Cohabiting:["OnePerson","Married"],LoneParent:["Married","Cohabiting"],Christian:["Muslim","Noreligion"],Muslim:["Christian","Noreligion"],Noreligion:["Christian","Muslim"],Buddhist:["Hindu","Sikh"],Hindu:["Sikh","Buddhist"],Jewish:["Christian","Muslim"],Sikh:["Hindu","Buddhist"],Single:["Married","Seperated"],Married:["Single","Seperated"],Seperated:["Married","Single"],"40PlushoursWeek":["20to49hoursWeek","1to19hoursWeek"],"20to49hoursWeek":["40PlushoursWeek","1to19hoursWeek"],"1to19hoursWeek":["40PlushoursWeek","20to49hoursWeek"],Kids:["NoKids","NonDepKids"],NoKids:["Kids","NonDepKids"],NonDepKids:["Kids","NoKids"],"Male1-15":["Male49plus"],Male49plus:["Male1-15"],"Female1-15":["Female49plus"],Female49plus:["Female1-15"]},Fe=["South East","South West","East","West Midlands","East Midlands","North East","North West"];function qe(e,t){return"East"==e&&(e+=" England"),!Fe.includes(e)|"NT"==t?e:"The "+e}function Ie(e){return"The"==e.slice(0,3)?e.charAt(0).toLowerCase()+e.slice(1):e}function Oe(e,t,n){return{1:"",2:"second-",3:"third-",4:"fourth-",5:"fifth-"}[Math.abs(e)]+(e<0?t:n)}let Be={"quarter of a million":25e4,"half a million":5e5,"three quarters of a million":75e4,"one million":1e6},Ke={"one in two":.5,"one in three":.333,"one in four":.25,"one in five":.2,"one in six":.167,"one in seven":.143,"one in eight":.125,"one in nine":.111,"1 in 10":.1,"1 in 11":.09,"1 in 12":.083,"1 in 13":.077,"1 in 14":.071,"1 in 15":.067,"1 in 16":.063,"1 in 17":.059,"1 in 18":.056,"1 in 19":.053,"1 in 20":.05,"1 in 25":.04,"1 in 30":.033,"1 in 40":.025,"1 in 50":.02,"2 in 10":.2,"3 in 10":.3,"4 in 10":.4,"6 in 10":.6,"7 in 10":.7,"8 in 10":.8,"9 in 10":.9,all:1};function He(e,t){let n;"frac"==t?t=Ke:"num"==t&&(t=Be);let i,a=2e6;for(const r in t)Math.abs(e-t[r])<a&&(a=Math.abs(e-t[r]),i=r,e-t[r]==0?n="about":e-t[r]>0?n="just over":e-t[r]<0&&(n="just under"));return[n,i]}function Ue(e,t){3!=t&&(t=2);let n,i=Number.parseFloat(Number.parseFloat(e).toPrecision(t));return e-i<-e/100&&(n="under "),n=e-i<-e/800?1==Math.round(Math.random())?"almost ":"just under ":e-i>e/100?" just over ":e-i>e/800?"just over ":"about",[n,i]}function Ge(e,t,n,i){return i="rl"==i?"_rank_local":"r"==i?"_rank":"",t.data[e[n][0]][e[n][1]+i][2001][e[n][3]]}function Ye(e,t,n,i){return i="rl"==i?"_rank_local":"r"==i?"_rank":"",t.data[e[n][0]][e[n][1]+i][2011][e[n][3]]}function Ve(e,t,n,i){let a;i="rl"==i?"_rank_local":"r"==i?"_rank":"";try{a=Math.round(10*t.data[e[n][0]][e[n][1]+i].change[e[n][3]])/10}catch(e){console.log(e.message)}return a}function Je(e){return Math.ceil(5*e/331)}function Ze(e,t,n,i,a){"number"==typeof i&i<0?i="highest":"number"==typeof i&&(i="lowest");let r,s=Object.assign({},t.data[e[n][0]][e[n][1]+"_rank_local"][a]),o=new Set(We[e[n][3]]);for(let e of Object.keys(s))o.has(e)||delete s[e];if(Object.keys(s).length>1){if("lowest"==i){for(let[e,t]of Object.entries(s))t>0&&delete s[e];r=s.length>0?Object.keys(s).reduce(((e,t)=>s[e]>s[t]?e:t)):void 0}if("highest"==i){for(let[e,t]of Object.entries(s))t<0&&delete s[e];r=s.length>0?Object.keys(s).reduce(((e,t)=>s[e]<s[t]?e:t)):void 0}}else r=Object.keys(s);return r}function Xe(e,t,n,i="r"){let a="";return"rl"==i&&(a="_local"),t.data[e[n][0]][e[n][1]+"_rank"+a].change[Ze(e,t,n,Ve(e,t,n,i),"change")]}function Qe(e,t,n){return e<0?n:t}var et;function tt(e,t){return Math.sign(e)==Math.sign(t)}et="London"==parent?"city":"region";var nt=["","","second-","third-","fourth-","fifth-","sixth-","seventh-","eighth-","ninth-"],it=["no","one","two","three","four","five","six","seven","eight","nine"];function at(e){return e<10?it[e]:e}function rt(e){let t;return t=Math.abs(e)<10?nt[Math.abs(e)]:function(e){let t;if(12==e)t="twelfth";else if(e>10&e<20)t=e+"th";else{let n=Math.round(e)%10;t=1==n?e+"st":2==n?e+"nd":3==n?e+"rd":e+"th"}return t}(Math.abs(e))+"-",t}var st={"0-9":["children under the age of nine years","under nine years"],"10-19":["people between the ages of 10 and 19 years","between 10 and 19 years"],"20-29":["people between the ages of 20 and 29 years","between 20 and 29 years"],"30-39":["people between the ages of 30 and 39 years","between 30 and 39 years"],"40-49":["people between the ages of 40 and 49 years","between 40 and 49 years"],"50-59":["people between the ages of 50 and 59 years","between 50 and 59 years"],"60-69":["people between the ages of 60 and 69 years","between 60 and 69 years"],"70-79":["people between the ages of 70 and 79 years","between 70 and 79 years"],"80plus":["people aged 80 years or over","over the age of 80 years"]};function ot(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every(((e,n)=>e===t[n]))}function lt(e,t,n){let i=Qe(e,t,n);return rt(e)+i}function ct(e,t){let n,i=(e-t)/t*100;return n=Math.abs(i)>7||Math.abs(i)>3?"":"slightly",n}function ut(e,t,n,i){return e<-1?n:e>1?t:i}function ht(e,t,n){const i=e.slice();return i[37]=t[n],i[40]=t,i[39]=n,i}function dt(e,t,n){const i=e.slice();return i[37]=t[n],i[38]=t,i[39]=n,i}function ft(e){let t,n,i,a,r,s,o,l=(e[0]?e[0]:"Select one")+"";return{c(){t=E("a"),n=E("span"),i=N(l),a=S(),r=E("span"),r.textContent=" ",L(n,"class","svelte-qdzmwx"),L(r,"class","button svelte-qdzmwx"),F(r,"search",e[3]),F(r,"down",!e[3]),L(t,"id","toggle"),L(t,"class","svelte-qdzmwx")},m(l,c){w(l,t,c),k(t,n),k(n,i),k(t,a),k(t,r),s||(o=C(t,"click",e[13]),s=!0)},p(e,t){1&t[0]&&l!==(l=(e[0]?e[0]:"Select one")+"")&&R(i,l),8&t[0]&&F(r,"search",e[3]),8&t[0]&&F(r,"down",!e[3])},d(e){e&&_(t),s=!1,o()}}}function pt(e){let t,n,i,a,s,o,l,c,u=e[6][e[1]]+"",h=e[2]&&gt(e);return{c(){t=E("a"),n=E("span"),i=N(u),a=S(),h&&h.c(),s=S(),o=E("span"),o.textContent=" ",L(n,"class","selection svelte-qdzmwx"),L(o,"class","button close svelte-qdzmwx"),L(t,"id","toggle"),L(t,"class","selected svelte-qdzmwx")},m(r,u){w(r,t,u),k(t,n),k(n,i),k(n,a),h&&h.m(n,null),k(t,s),k(t,o),l||(c=[C(o,"click",e[15]),C(t,"click",e[13])],l=!0)},p(e,t){66&t[0]&&u!==(u=e[6][e[1]]+"")&&R(i,u),e[2]?h?h.p(e,t):(h=gt(e),h.c(),h.m(n,null)):h&&(h.d(1),h=null)},d(e){e&&_(t),h&&h.d(),l=!1,r(c)}}}function gt(e){let t,n,i=e[6][e[2]]+"";return{c(){t=E("small"),n=N(i),L(t,"class","svelte-qdzmwx")},m(e,i){w(e,t,i),k(t,n)},p(e,t){68&t[0]&&i!==(i=e[6][e[2]]+"")&&R(n,i)},d(e){e&&_(t)}}}function mt(e){let t,n,i,a,s,o;function l(e,t){return e[4].length<0?bt:e[9][0]&&e[2]?xt:e[9][0]?vt:yt}let c=l(e),u=c(e);return{c(){t=E("div"),n=E("input"),i=S(),a=E("ul"),u.c(),L(n,"type","text"),L(n,"placeholder",""),L(n,"autocomplete","false"),L(n,"class","svelte-qdzmwx"),L(a,"class","svelte-qdzmwx"),L(t,"id","dropdown"),j(t,"top","0"),L(t,"class","svelte-qdzmwx")},m(r,l){w(r,t,l),k(t,n),z(n,e[4]),e[25](n),k(t,i),k(t,a),u.m(a,null),e[35](t),s||(o=[C(n,"input",e[24]),C(n,"keyup",e[17])],s=!0)},p(e,t){16&t[0]&&n.value!==e[4]&&z(n,e[4]),c===(c=l(e))&&u?u.p(e,t):(u.d(1),u=c(e),u&&(u.c(),u.m(a,null)))},d(n){n&&_(t),e[25](null),u.d(),e[35](null),s=!1,r(o)}}}function yt(t){let n;return{c(){n=E("li"),n.textContent="No results",L(n,"class","svelte-qdzmwx")},m(e,t){w(e,n,t)},p:e,d(e){e&&_(n)}}}function vt(e){let t,n=e[9],i=[];for(let t=0;t<n.length;t+=1)i[t]=$t(ht(e,n,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=A()},m(e,n){for(let t=0;t<i.length;t+=1)i[t].m(e,n);w(e,t,n)},p(e,a){if(19202&a[0]){let r;for(n=e[9],r=0;r<n.length;r+=1){const s=ht(e,n,r);i[r]?i[r].p(s,a):(i[r]=$t(s),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){M(i,e),e&&_(t)}}}function xt(e){let t,n=e[9],i=[];for(let t=0;t<n.length;t+=1)i[t]=wt(dt(e,n,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=A()},m(e,n){for(let t=0;t<i.length;t+=1)i[t].m(e,n);w(e,t,n)},p(e,a){if(23298&a[0]){let r;for(n=e[9],r=0;r<n.length;r+=1){const s=dt(e,n,r);i[r]?i[r].p(s,a):(i[r]=wt(s),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){M(i,e),e&&_(t)}}}function bt(t){let n;return{c(){n=E("li"),n.textContent="Type a name...",L(n,"class","svelte-qdzmwx")},m(e,t){w(e,n,t)},p:e,d(e){e&&_(n)}}}function $t(e){let t,n,i,a,s,o=e[37][e[1]]+"",l=e[39];function c(){return e[32](e[37])}function u(){return e[33](e[39])}const h=()=>e[34](t,l),d=()=>e[34](null,l);return{c(){t=E("li"),n=N(o),i=S(),L(t,"class","svelte-qdzmwx"),F(t,"highlight",e[8]==e[39])},m(e,r){w(e,t,r),k(t,n),k(t,i),h(),a||(s=[C(t,"click",c),C(t,"mouseover",u)],a=!0)},p(i,a){e=i,514&a[0]&&o!==(o=e[37][e[1]]+"")&&R(n,o),l!==e[39]&&(d(),l=e[39],h()),256&a[0]&&F(t,"highlight",e[8]==e[39])},d(e){e&&_(t),d(),a=!1,r(s)}}}function kt(e){let t,n=console.log("--666-----option",e[37][e[1]],e[12].find(i))+"";function i(...t){return e[26](e[37],...t)}return{c(){t=N(n)},m(e,n){w(e,t,n)},p(a,r){e=a,4610&r[0]&&n!==(n=console.log("--666-----option",e[37][e[1]],e[12].find(i))+"")&&R(t,n)},d(e){e&&_(t)}}}function wt(e){let t,n,i,a,s,o,l,c,u,h=!e[12].find(g),d=e[37][e[1]]+"",f=e[12].find(y)["Supergroup name"]+", "+e[12].find(v)["Region/Country"],p=e[39];function g(...t){return e[23](e[37],...t)}let m=h&&kt(e);function y(...t){return e[27](e[37],...t)}function v(...t){return e[28](e[37],...t)}function x(){return e[29](e[37])}function b(){return e[30](e[39])}const $=()=>e[31](n,p),M=()=>e[31](null,p);return{c(){m&&m.c(),t=S(),n=E("li"),i=N(d),a=S(),s=E("small"),o=N(f),l=S(),L(s,"class","svelte-qdzmwx"),L(n,"class","svelte-qdzmwx"),F(n,"highlight",e[8]==e[39])},m(e,r){m&&m.m(e,r),w(e,t,r),w(e,n,r),k(n,i),k(n,a),k(n,s),k(s,o),k(n,l),$(),c||(u=[C(n,"click",x),C(n,"mouseover",b)],c=!0)},p(a,r){e=a,4610&r[0]&&(h=!e[12].find(g)),h?m?m.p(e,r):(m=kt(e),m.c(),m.m(t.parentNode,t)):m&&(m.d(1),m=null),514&r[0]&&d!==(d=e[37][e[1]]+"")&&R(i,d),4610&r[0]&&f!==(f=e[12].find(y)["Supergroup name"]+", "+e[12].find(v)["Region/Country"])&&R(o,f),p!==e[39]&&(M(),p=e[39],$()),256&r[0]&&F(n,"highlight",e[8]==e[39])},d(e){m&&m.d(e),e&&_(t),e&&_(n),M(),c=!1,r(u)}}}function _t(t){let n,i,a,r;function s(e,t){return e[6]&&!e[3]?pt:ft}let o=s(t),l=o(t),c=t[7]&&mt(t);return{c(){n=E("div"),l.c(),i=S(),c&&c.c(),L(n,"id","select"),L(n,"class","svelte-qdzmwx"),F(n,"active",t[7])},m(e,s){w(e,n,s),l.m(n,null),k(n,i),c&&c.m(n,null),a||(r=C(n,"keydown",t[16]),a=!0)},p(e,t){o===(o=s(e))&&l?l.p(e,t):(l.d(1),l=o(e),l&&(l.c(),l.m(n,i))),e[7]?c?c.p(e,t):(c=mt(e),c.c(),c.m(n,null)):c&&(c.d(1),c=null),128&t[0]&&F(n,"active",e[7])},i:e,o:e,d(e){e&&_(n),l.d(),c&&c.d(),a=!1,r()}}}function Mt(e,t,n){let i;const a=K();let r,s,o,l,{options:c}=t,{selected:u=null}=t,{placeholder:h="Find an area..."}=t,{value:d="code"}=t,{label:f="name"}=t,{group:p=null}=t,{search:g=!1}=t,m=u,y=u?c.find((e=>{e[d],u[d]})):null,v=!1,x="",b=null,$=[];function k(e){n(18,u=e),n(7,v=!1),a("select",{selected:e,value:e[d]})}Pe("https://raw.githubusercontent.com/theojolliffe/census-data/main/csv/lists/Corresponding%20Local%20Authorities-Table%201.csv").then((e=>{e.forEach((e=>{})),n(12,l=e)}));return e.$$set=e=>{"options"in e&&n(19,c=e.options),"selected"in e&&n(18,u=e.selected),"placeholder"in e&&n(0,h=e.placeholder),"value"in e&&n(20,d=e.value),"label"in e&&n(1,f=e.label),"group"in e&&n(2,p=e.group),"search"in e&&n(3,g=e.search)},e.$$.update=()=>{16&e.$$.dirty[0]&&n(22,i=x?new RegExp(x,"i"):null),4718594&e.$$.dirty[0]&&(n(9,r=i?c.filter((e=>i.test(e[f]))):c),n(8,b=0)),32&e.$$.dirty[0]&&(document.onclick=function(e){e.target!==s&&(n(7,v=!1),n(8,b=0))}),3932160&e.$$.dirty[0]&&m!=u&&(n(6,y=c.find((e=>e[d]==u[d]))),n(21,m=u))},[h,f,p,g,x,s,y,v,b,r,o,$,l,function(e){var t;e.stopPropagation(),n(4,x=""),n(7,v=!v),(t=10,new Promise((e=>setTimeout(e,t)))).then((()=>{o&&v&&o.focus()}))},k,function(e){e.stopPropagation(),n(18,u=null),n(21,m=null),n(6,y=null),a("select",{selected:null,value:null})},function(e){v&&r[0]&&Number.isInteger(b)&&(38===e.keyCode?(n(8,b-=b>0?1:0),$[b].scrollIntoView({block:"nearest",inline:"start"})):40===e.keyCode&&(n(8,b+=b<r.length-1?1:0),$[b].scrollIntoView({block:"nearest",inline:"end"})))},function(e){r[0]&&Number.isInteger(b)&&13===e.keyCode&&k(r[b])},u,c,d,m,i,(e,t)=>t.Name==e[f],function(){x=this.value,n(4,x)},function(e){V[e?"unshift":"push"]((()=>{o=e,n(10,o)}))},(e,t)=>t.Name==e[f],(e,t)=>t.Name==e[f],(e,t)=>t.Name==e[f],e=>k(e),e=>n(8,b=e),function(e,t){V[e?"unshift":"push"]((()=>{$[t]=e,n(11,$)}))},e=>k(e),e=>n(8,b=e),function(e,t){V[e?"unshift":"push"]((()=>{$[t]=e,n(11,$)}))},function(e){V[e?"unshift":"push"]((()=>{s=e,n(5,s)}))}]}class Et extends ke{constructor(e){super(),$e(this,e,Mt,_t,o,{options:19,selected:18,placeholder:0,value:20,label:1,group:2,search:3},null,[-1,-1])}}var Tt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Nt(e){var t={exports:{}};return e(t,t.exports),t.exports}var St=Nt((function(e,t){(function(){var n={load:function(e,t){var n="\\u0000\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u200B\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF\\u005B\\u005C\\u005D\\u007B\\u007D\\u003A",i=new RegExp(".*((\r|\n)+)"),a=new RegExp("^\\s*([^"+n+"]+)[ \t\r]*:[ \t\r]*(.*(?:\n|\r|$))"),r=new RegExp("^\\s*:[ \t\r]*(endskip|ignore|skip|end).*?(\n|\r|$)","i"),s=new RegExp("^\\s*\\*[ \t\r]*(.*(?:\n|\r|$))"),o=new RegExp("^\\s*(\\[|\\{)[ \t\r]*([+.]*)[ \t\r]*([^"+n+"]*)[ \t\r]*(?:\\]|\\}).*?(\n|\r|$)"),l={},c=l,u=[],h=void 0,d=null,f=null,p="",g=!1;for(!0!==(t=t||{}).comments&&(t.comments=!1);e;){var m;r.exec(e)?x((m=r.exec(e))[1].toLowerCase()):g||!a.exec(e)||h&&"simple"===h.arrayType?!g&&s.exec(e)&&h&&h.array&&"complex"!==h.arrayType&&"freeform"!==h.arrayType&&h.flags.indexOf("+")<0?v((m=s.exec(e))[1]):!g&&o.exec(e)?b((m=o.exec(e))[1],m[2],m[3]):i.exec(e)?$((m=i.exec(e))[0]):($(e),e=""):y((m=a.exec(e))[1],m[2]||""),m&&(e=e.substring(m[0].length))}function y(e,t){_(),k(e),h&&h.flags.indexOf("+")>-1&&(e="value"),f=e,p=t,M(e,{replace:!0})}function v(e){_(),h.arrayType=h.arrayType||"simple",h.array.push(""),f=h.array,p=e,M(h.array,{replace:!0})}function x(t){if(g&&"endskip"!==t&&"ignore"!==t)return _();switch(t){case"end":return void(f&&M(f,{replace:!1}));case"ignore":e="";break;case"skip":g=!0;break;case"endskip":g=!1}_()}function b(e,t,n){if(_(),""==n){var i=u.pop();c=(i?i.scope:l)||l,h=u[u.length-1]}else if("["===e||"{"===e){var a=!1,r=l;if(t.indexOf(".")>-1?(k(n),a=!0,h&&(r=c)):(c=l,u=[]),h&&h.flags.indexOf("+")>-1)var s=n;else{for(var o=n.split("."),d=0;d<o.length-1;d++)r=r[o[d]]=r[o[d]]||{};s=o[o.length-1]}var f={array:null,arrayType:null,arrayFirstKey:null,flags:t,scope:c},p=h&&h.flags.indexOf("+")>-1&&t.indexOf(".")>-1;"["==e?(p&&(s="value"),f.array=r[s]=[],t.indexOf("+")>-1&&(f.arrayType="freeform"),a?u.push(f):u=[f],h=u[u.length-1]):"{"==e&&(a?(c=p?c.value={}:r[s]=r={},u.push(f)):(c=r[s]="object"==typeof r[s]?r[s]:{},u=[f]),h=u[u.length-1])}}function $(t){h&&h.flags.indexOf("+")>-1&&t.match(/[^\n\r\s]/)?h.array.push({type:"text",value:t.replace(/(^\s*)|(\s*$)/g,"")}):p+=e.substring(0,t.length)}function k(e){if(h&&h.array){if(h.arrayType=h.arrayType||"complex","simple"===h.arrayType)return;null!==h.arrayFirstKey&&h.arrayFirstKey!==e||h.array.push(c={}),h.flags.indexOf("+")>-1?c.type=e:h.arrayFirstKey=h.arrayFirstKey||e}}function w(e,n){return t.comments&&(e=(e=e.replace(/(?:^\\)?\[[^\[\]\n\r]*\](?!\])/gm,"")).replace(/\[\[([^\[\]\n\r]*)\]\]/g,"[$1]")),"append"==n&&(e=e.replace(new RegExp("^(\\s*)\\\\","gm"),"$1")),e}function _(){var e=p+"";return p="",f=null,e}function M(e,t){t=t||{};var n=f,i=_();if(t.replace?(i=w(i,"replace").replace(new RegExp("^\\s*"),""),p=new RegExp("\\s*$").exec(i)[0],f=n):i=w(i,"append"),"object"==typeof e)t.replace&&(e[e.length-1]=""),e[e.length-1]+=i.replace(new RegExp("\\s*$"),"");else{var a=e.split(".");d=c;for(var r=0;r<a.length-1;r++)"string"==typeof d[a[r]]&&(d[a[r]]={}),d=d[a[r]]=d[a[r]]||{};t.replace&&(d[a[a.length-1]]=""),d[a[a.length-1]]+=i.replace(new RegExp("\\s*$"),"")}}return _(),l}};e.exports&&(t=e.exports=n),t.archieml=n}).call(Tt)})),At=Nt((function(e,t){!function(t,n){e.exports=n()}(0,(function(){var e=[],t=[],n={},i={},a={};function r(e){return"string"==typeof e?new RegExp("^"+e+"$","i"):e}function s(e,t){return e===t?t:e===e.toLowerCase()?t.toLowerCase():e===e.toUpperCase()?t.toUpperCase():e[0]===e[0].toUpperCase()?t.charAt(0).toUpperCase()+t.substr(1).toLowerCase():t.toLowerCase()}function o(e,t){return e.replace(/\$(\d{1,2})/g,(function(e,n){return t[n]||""}))}function l(e,t){return e.replace(t[0],(function(n,i){var a=o(t[1],arguments);return s(""===n?e[i-1]:n,a)}))}function c(e,t,i){if(!e.length||n.hasOwnProperty(e))return t;for(var a=i.length;a--;){var r=i[a];if(r[0].test(t))return l(t,r)}return t}function u(e,t,n){return function(i){var a=i.toLowerCase();return t.hasOwnProperty(a)?s(i,a):e.hasOwnProperty(a)?s(i,e[a]):c(a,i,n)}}function h(e,t,n,i){return function(i){var a=i.toLowerCase();return!!t.hasOwnProperty(a)||!e.hasOwnProperty(a)&&c(a,a,n)===a}}function d(e,t,n){return(n?t+" ":"")+(1===t?d.singular(e):d.plural(e))}return d.plural=u(a,i,e),d.isPlural=h(a,i,e),d.singular=u(i,a,t),d.isSingular=h(i,a,t),d.addPluralRule=function(t,n){e.push([r(t),n])},d.addSingularRule=function(e,n){t.push([r(e),n])},d.addUncountableRule=function(e){"string"!=typeof e?(d.addPluralRule(e,"$0"),d.addSingularRule(e,"$0")):n[e.toLowerCase()]=!0},d.addIrregularRule=function(e,t){t=t.toLowerCase(),e=e.toLowerCase(),a[e]=t,i[t]=e},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach((function(e){return d.addIrregularRule(e[0],e[1])})),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach((function(e){return d.addPluralRule(e[0],e[1])})),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach((function(e){return d.addSingularRule(e[0],e[1])})),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(d.addUncountableRule),d}))}));function Ct(e){return Array.isArray?Array.isArray(e):"[object Array]"===Wt(e)}function Lt(e){return"string"==typeof e}function Rt(e){return"number"==typeof e}function zt(e){return!0===e||!1===e||function(e){return jt(e)&&null!==e}(e)&&"[object Boolean]"==Wt(e)}function jt(e){return"object"==typeof e}function Dt(e){return null!=e}function Pt(e){return!e.trim().length}function Wt(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Ft=Object.prototype.hasOwnProperty;class qt{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let n=It(e);t+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function It(e){let t=null,n=null,i=null,a=1;if(Lt(e)||Ct(e))i=e,t=Ot(e),n=Bt(e);else{if(!Ft.call(e,"name"))throw new Error((e=>`Missing ${e} property in key`)("name"));const r=e.name;if(i=r,Ft.call(e,"weight")&&(a=e.weight,a<=0))throw new Error((e=>`Property 'weight' in key '${e}' must be a positive integer`)(r));t=Ot(r),n=Bt(r)}return{path:t,id:n,weight:a,src:i}}function Ot(e){return Ct(e)?e:e.split(".")}function Bt(e){return Ct(e)?e.join("."):e}var Kt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(e,t){let n=[],i=!1;const a=(e,t,r)=>{if(Dt(e))if(t[r]){const s=e[t[r]];if(!Dt(s))return;if(r===t.length-1&&(Lt(s)||Rt(s)||zt(s)))n.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(s));else if(Ct(s)){i=!0;for(let e=0,n=s.length;e<n;e+=1)a(s[e],t,r+1)}else t.length&&a(s,t,r+1)}else n.push(e)};return a(e,Lt(t)?t.split("."):t,0),i?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const Ht=/[^ ]+/g;class Ut{constructor({getFn:e=Kt.getFn,fieldNormWeight:t=Kt.fieldNormWeight}={}){this.norm=function(e=1,t=3){const n=new Map,i=Math.pow(10,t);return{get(t){const a=t.match(Ht).length;if(n.has(a))return n.get(a);const r=1/Math.pow(a,.5*e),s=parseFloat(Math.round(r*i)/i);return n.set(a,s),s},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,Lt(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();Lt(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Dt(e)||Pt(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach(((t,i)=>{let a=this.getFn(e,t.path);if(Dt(a))if(Ct(a)){let e=[];const t=[{nestedArrIndex:-1,value:a}];for(;t.length;){const{nestedArrIndex:n,value:i}=t.pop();if(Dt(i))if(Lt(i)&&!Pt(i)){let t={v:i,i:n,n:this.norm.get(i)};e.push(t)}else Ct(i)&&i.forEach(((e,n)=>{t.push({nestedArrIndex:n,value:e})}))}n.$[i]=e}else if(!Pt(a)){let e={v:a,n:this.norm.get(a)};n.$[i]=e}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Gt(e,t,{getFn:n=Kt.getFn,fieldNormWeight:i=Kt.fieldNormWeight}={}){const a=new Ut({getFn:n,fieldNormWeight:i});return a.setKeys(e.map(It)),a.setSources(t),a.create(),a}function Yt(e,{errors:t=0,currentLocation:n=0,expectedLocation:i=0,distance:a=Kt.distance,ignoreLocation:r=Kt.ignoreLocation}={}){const s=t/e.length;if(r)return s;const o=Math.abs(i-n);return a?s+o/a:o?1:s}const Vt=32;function Jt(e,t,n,{location:i=Kt.location,distance:a=Kt.distance,threshold:r=Kt.threshold,findAllMatches:s=Kt.findAllMatches,minMatchCharLength:o=Kt.minMatchCharLength,includeMatches:l=Kt.includeMatches,ignoreLocation:c=Kt.ignoreLocation}={}){if(t.length>Vt)throw new Error(`Pattern length exceeds max of ${Vt}.`);const u=t.length,h=e.length,d=Math.max(0,Math.min(i,h));let f=r,p=d;const g=o>1||l,m=g?Array(h):[];let y;for(;(y=e.indexOf(t,p))>-1;){let e=Yt(t,{currentLocation:y,expectedLocation:d,distance:a,ignoreLocation:c});if(f=Math.min(e,f),p=y+u,g){let e=0;for(;e<u;)m[y+e]=1,e+=1}}p=-1;let v=[],x=1,b=u+h;const $=1<<u-1;for(let i=0;i<u;i+=1){let r=0,o=b;for(;r<o;){Yt(t,{errors:i,currentLocation:d+o,expectedLocation:d,distance:a,ignoreLocation:c})<=f?r=o:b=o,o=Math.floor((b-r)/2+r)}b=o;let l=Math.max(1,d-o+1),y=s?h:Math.min(d+o,h)+u,k=Array(y+2);k[y+1]=(1<<i)-1;for(let r=y;r>=l;r-=1){let s=r-1,o=n[e.charAt(s)];if(g&&(m[s]=+!!o),k[r]=(k[r+1]<<1|1)&o,i&&(k[r]|=(v[r+1]|v[r])<<1|1|v[r+1]),k[r]&$&&(x=Yt(t,{errors:i,currentLocation:s,expectedLocation:d,distance:a,ignoreLocation:c}),x<=f)){if(f=x,p=s,p<=d)break;l=Math.max(1,2*d-p)}}if(Yt(t,{errors:i+1,currentLocation:d,expectedLocation:d,distance:a,ignoreLocation:c})>f)break;v=k}const k={isMatch:p>=0,score:Math.max(.001,x)};if(g){const e=function(e=[],t=Kt.minMatchCharLength){let n=[],i=-1,a=-1,r=0;for(let s=e.length;r<s;r+=1){let s=e[r];s&&-1===i?i=r:s||-1===i||(a=r-1,a-i+1>=t&&n.push([i,a]),i=-1)}return e[r-1]&&r-i>=t&&n.push([i,r-1]),n}(m,o);e.length?l&&(k.indices=e):k.isMatch=!1}return k}function Zt(e){let t={};for(let n=0,i=e.length;n<i;n+=1){const a=e.charAt(n);t[a]=(t[a]||0)|1<<i-n-1}return t}class Xt{constructor(e,{location:t=Kt.location,threshold:n=Kt.threshold,distance:i=Kt.distance,includeMatches:a=Kt.includeMatches,findAllMatches:r=Kt.findAllMatches,minMatchCharLength:s=Kt.minMatchCharLength,isCaseSensitive:o=Kt.isCaseSensitive,ignoreLocation:l=Kt.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:i,includeMatches:a,findAllMatches:r,minMatchCharLength:s,isCaseSensitive:o,ignoreLocation:l},this.pattern=o?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(e,t)=>{this.chunks.push({pattern:e,alphabet:Zt(e),startIndex:t})},u=this.pattern.length;if(u>Vt){let e=0;const t=u%Vt,n=u-t;for(;e<n;)c(this.pattern.substr(e,Vt),e),e+=Vt;if(t){const e=u-Vt;c(this.pattern.substr(e),e)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:i,distance:a,threshold:r,findAllMatches:s,minMatchCharLength:o,ignoreLocation:l}=this.options;let c=[],u=0,h=!1;this.chunks.forEach((({pattern:t,alphabet:d,startIndex:f})=>{const{isMatch:p,score:g,indices:m}=Jt(e,t,d,{location:i+f,distance:a,threshold:r,findAllMatches:s,minMatchCharLength:o,includeMatches:n,ignoreLocation:l});p&&(h=!0),u+=g,p&&m&&(c=[...c,...m])}));let d={isMatch:h,score:h?u/this.chunks.length:1};return h&&n&&(d.indices=c),d}}class Qt{constructor(e){this.pattern=e}static isMultiMatch(e){return en(e,this.multiRegex)}static isSingleMatch(e){return en(e,this.singleRegex)}search(){}}function en(e,t){const n=e.match(t);return n?n[1]:null}class tn extends Qt{constructor(e,{location:t=Kt.location,threshold:n=Kt.threshold,distance:i=Kt.distance,includeMatches:a=Kt.includeMatches,findAllMatches:r=Kt.findAllMatches,minMatchCharLength:s=Kt.minMatchCharLength,isCaseSensitive:o=Kt.isCaseSensitive,ignoreLocation:l=Kt.ignoreLocation}={}){super(e),this._bitapSearch=new Xt(e,{location:t,threshold:n,distance:i,includeMatches:a,findAllMatches:r,minMatchCharLength:s,isCaseSensitive:o,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class nn extends Qt{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const i=[],a=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+a,i.push([t,n-1]);const r=!!i.length;return{isMatch:r,score:r?0:1,indices:i}}}const an=[class extends Qt{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},nn,class extends Qt{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends Qt{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends Qt{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends Qt{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends Qt{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},tn],rn=an.length,sn=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;const on=new Set([tn.type,nn.type]);class ln{constructor(e,{isCaseSensitive:t=Kt.isCaseSensitive,includeMatches:n=Kt.includeMatches,minMatchCharLength:i=Kt.minMatchCharLength,ignoreLocation:a=Kt.ignoreLocation,findAllMatches:r=Kt.findAllMatches,location:s=Kt.location,threshold:o=Kt.threshold,distance:l=Kt.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:i,findAllMatches:r,ignoreLocation:a,location:s,threshold:o,distance:l},this.pattern=t?e:e.toLowerCase(),this.query=function(e,t={}){return e.split("|").map((e=>{let n=e.trim().split(sn).filter((e=>e&&!!e.trim())),i=[];for(let e=0,a=n.length;e<a;e+=1){const a=n[e];let r=!1,s=-1;for(;!r&&++s<rn;){const e=an[s];let n=e.isMultiMatch(a);n&&(i.push(new e(n,t)),r=!0)}if(!r)for(s=-1;++s<rn;){const e=an[s];let n=e.isSingleMatch(a);if(n){i.push(new e(n,t));break}}}return i}))}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let a=0,r=[],s=0;for(let i=0,o=t.length;i<o;i+=1){const o=t[i];r.length=0,a=0;for(let t=0,i=o.length;t<i;t+=1){const i=o[t],{isMatch:l,indices:c,score:u}=i.search(e);if(!l){s=0,a=0,r.length=0;break}if(a+=1,s+=u,n){const e=i.constructor.type;on.has(e)?r=[...r,...c]:r.push(c)}}if(a){let e={isMatch:!0,score:s/a};return n&&(e.indices=r),e}}return{isMatch:!1,score:1}}}const cn=[];function un(e,t){for(let n=0,i=cn.length;n<i;n+=1){let i=cn[n];if(i.condition(e,t))return new i(e,t)}return new Xt(e,t)}const hn="$and",dn="$or",fn="$path",pn="$val",gn=e=>!(!e[hn]&&!e[dn]),mn=e=>({[hn]:Object.keys(e).map((t=>({[t]:e[t]})))});function yn(e,t,{auto:n=!0}={}){const i=e=>{let a=Object.keys(e);const r=(e=>!!e[fn])(e);if(!r&&a.length>1&&!gn(e))return i(mn(e));if((e=>!Ct(e)&&jt(e)&&!gn(e))(e)){const i=r?e[fn]:a[0],s=r?e[pn]:e[i];if(!Lt(s))throw new Error((e=>`Invalid value for key ${e}`)(i));const o={keyId:Bt(i),pattern:s};return n&&(o.searcher=un(s,t)),o}let s={children:[],operator:a[0]};return a.forEach((t=>{const n=e[t];Ct(n)&&n.forEach((e=>{s.children.push(i(e))}))})),s};return gn(e)||(e=mn(e)),i(e)}function vn(e,t){const n=e.matches;t.matches=[],Dt(n)&&n.forEach((e=>{if(!Dt(e.indices)||!e.indices.length)return;const{indices:n,value:i}=e;let a={indices:n,value:i};e.key&&(a.key=e.key.src),e.idx>-1&&(a.refIndex=e.idx),t.matches.push(a)}))}function xn(e,t){t.score=e.score}class bn{constructor(e,t={},n){this.options={...Kt,...t},this.options.useExtendedSearch,this._keyStore=new qt(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof Ut))throw new Error("Incorrect 'index' type");this._myIndex=t||Gt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Dt(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=(()=>!1)){const t=[];for(let n=0,i=this._docs.length;n<i;n+=1){const a=this._docs[n];e(a,n)&&(this.removeAt(n),n-=1,i-=1,t.push(a))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:a,sortFn:r,ignoreFieldNorm:s}=this.options;let o=Lt(e)?Lt(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=Kt.ignoreFieldNorm}){e.forEach((e=>{let n=1;e.matches.forEach((({key:e,norm:i,score:a})=>{const r=e?e.weight:null;n*=Math.pow(0===a&&r?Number.EPSILON:a,(r||1)*(t?1:i))})),e.score=n}))}(o,{ignoreFieldNorm:s}),a&&o.sort(r),Rt(t)&&t>-1&&(o=o.slice(0,t)),function(e,t,{includeMatches:n=Kt.includeMatches,includeScore:i=Kt.includeScore}={}){const a=[];return n&&a.push(vn),i&&a.push(xn),e.map((e=>{const{idx:n}=e,i={item:t[n],refIndex:n};return a.length&&a.forEach((t=>{t(e,i)})),i}))}(o,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(e){const t=un(e,this.options),{records:n}=this._myIndex,i=[];return n.forEach((({v:e,i:n,n:a})=>{if(!Dt(e))return;const{isMatch:r,score:s,indices:o}=t.searchIn(e);r&&i.push({item:e,idx:n,matches:[{score:s,value:e,norm:a,indices:o}]})})),i}_searchLogical(e){const t=yn(e,this.options),n=(e,t,i)=>{if(!e.children){const{keyId:n,searcher:a}=e,r=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:a});return r&&r.length?[{idx:i,item:t,matches:r}]:[]}const a=[];for(let r=0,s=e.children.length;r<s;r+=1){const s=e.children[r],o=n(s,t,i);if(o.length)a.push(...o);else if(e.operator===hn)return[]}return a},i=this._myIndex.records,a={},r=[];return i.forEach((({$:e,i:i})=>{if(Dt(e)){let s=n(t,e,i);s.length&&(a[i]||(a[i]={idx:i,item:e,matches:[]},r.push(a[i])),s.forEach((({matches:e})=>{a[i].matches.push(...e)})))}})),r}_searchObjectList(e){const t=un(e,this.options),{keys:n,records:i}=this._myIndex,a=[];return i.forEach((({$:e,i:i})=>{if(!Dt(e))return;let r=[];n.forEach(((n,i)=>{r.push(...this._findMatches({key:n,value:e[i],searcher:t}))})),r.length&&a.push({idx:i,item:e,matches:r})})),a}_findMatches({key:e,value:t,searcher:n}){if(!Dt(t))return[];let i=[];if(Ct(t))t.forEach((({v:t,i:a,n:r})=>{if(!Dt(t))return;const{isMatch:s,score:o,indices:l}=n.searchIn(t);s&&i.push({score:o,key:e,value:t,idx:a,norm:r,indices:l})}));else{const{v:a,n:r}=t,{isMatch:s,score:o,indices:l}=n.searchIn(a);s&&i.push({score:o,key:e,value:a,norm:r,indices:l})}return i}}bn.version="6.5.3",bn.createIndex=Gt,bn.parseIndex=function(e,{getFn:t=Kt.getFn,fieldNormWeight:n=Kt.fieldNormWeight}={}){const{keys:i,records:a}=e,r=new Ut({getFn:t,fieldNormWeight:n});return r.setKeys(i),r.setIndexRecords(a),r},bn.config=Kt,bn.parseQuery=yn,function(...e){cn.push(...e)}(ln);const $n=[];function kn(t,n=e){let i;const a=new Set;function r(e){if(o(t,e)&&(t=e,i)){const e=!$n.length;for(const e of a)e[1](),$n.push(e,t);if(e){for(let e=0;e<$n.length;e+=2)$n[e][0]($n[e+1]);$n.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(s,o=e){const l=[s,o];return a.add(l),1===a.size&&(i=n(r)||e),s(t),()=>{a.delete(l),0===a.size&&(i(),i=null)}}}}function wn(t,n,i){const a=!Array.isArray(t),o=a?[t]:t,l=n.length<2;return c=t=>{let i=!1;const c=[];let h=0,d=e;const f=()=>{if(h)return;d();const i=n(a?c[0]:c,t);l?t(i):d=s(i)?i:e},p=o.map(((e,t)=>u(e,(e=>{c[t]=e,h&=~(1<<t),i&&f()}),(()=>{h|=1<<t}))));return i=!0,f(),function(){r(p),d()}},{subscribe:kn(i,c).subscribe};var c}function _n(e){return 0===(t=e)||t?Array.isArray(e)?t=>e.map((e=>"function"!=typeof e?t[e]:e(t))):"function"!=typeof e?t=>t[e]:e:null;var t}function Mn(e,t={}){return function(e){const t={};for(const n of e){if(Object(n)!==n)throw new TypeError("iterable for fromEntries should yield objects");const{0:e,1:i}=n;Object.defineProperty(t,e,{configurable:!0,enumerable:!0,writable:!0,value:i})}return t}(Object.entries(e).filter((([e,n])=>void 0!==n&&void 0===t[e])))}function En(e,t){if(!Array.isArray(e))throw new TypeError("The first argument of calcExtents() must be an array.");if(Array.isArray(t)||null==t)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const n={},i=Object.keys(t),a=i.length;let r,s,o,l,c,u,h,d;const f=e.length;for(r=0;r<a;r+=1){for(l=i[r],h=t[l],c=null,u=null,s=0;s<f;s+=1)if(d=h(e[s]),Array.isArray(d)){const e=d.length;for(o=0;o<e;o+=1)void 0!==d[o]&&null!==d[o]&&!1===Number.isNaN(d[o])&&((null===c||d[o]<c)&&(c=d[o]),(null===u||d[o]>u)&&(u=d[o]))}else null!=d&&!1===Number.isNaN(d)&&((null===c||d<c)&&(c=d),(null===u||d>u)&&(u=d));n[l]=[c,u]}return n}function Tn(e=[],t){return!0===Array.isArray(t)?t.map(((t,n)=>null===t?e[n]:t)):e}function Nn(e){return function([t,n]){return t?Tn(t[e],n):n}}function Sn(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function An(e){let t=e,n=e;function i(e,t,i,a){for(null==i&&(i=0),null==a&&(a=e.length);i<a;){const r=i+a>>>1;n(e[r],t)<0?i=r+1:a=r}return i}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>Sn(e(t),n)}(e)),{left:i,center:function(e,n,a,r){null==a&&(a=0),null==r&&(r=e.length);const s=i(e,n,a,r-1);return s>a&&t(e[s-1],n)>-t(e[s],n)?s-1:s},right:function(e,t,i,a){for(null==i&&(i=0),null==a&&(a=e.length);i<a;){const r=i+a>>>1;n(e[r],t)>0?a=r:i=r+1}return i}}}const Cn=An(Sn).right;An((function(e){return null===e?NaN:+e})).center;var Ln=Cn,Rn=Math.sqrt(50),zn=Math.sqrt(10),jn=Math.sqrt(2);function Dn(e,t,n){var i=(t-e)/Math.max(0,n),a=Math.floor(Math.log(i)/Math.LN10),r=i/Math.pow(10,a);return a>=0?(r>=Rn?10:r>=zn?5:r>=jn?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(r>=Rn?10:r>=zn?5:r>=jn?2:1)}function Pn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Wn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Fn(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function qn(){}var In=.7,On=1/In,Bn="\\s*([+-]?\\d+)\\s*",Kn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Un=/^#([0-9a-f]{3,8})$/,Gn=new RegExp("^rgb\\("+[Bn,Bn,Bn]+"\\)$"),Yn=new RegExp("^rgb\\("+[Hn,Hn,Hn]+"\\)$"),Vn=new RegExp("^rgba\\("+[Bn,Bn,Bn,Kn]+"\\)$"),Jn=new RegExp("^rgba\\("+[Hn,Hn,Hn,Kn]+"\\)$"),Zn=new RegExp("^hsl\\("+[Kn,Hn,Hn]+"\\)$"),Xn=new RegExp("^hsla\\("+[Kn,Hn,Hn,Kn]+"\\)$"),Qn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ei(){return this.rgb().formatHex()}function ti(){return this.rgb().formatRgb()}function ni(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Un.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?ii(t):3===n?new oi(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?ai(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?ai(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Gn.exec(e))?new oi(t[1],t[2],t[3],1):(t=Yn.exec(e))?new oi(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Vn.exec(e))?ai(t[1],t[2],t[3],t[4]):(t=Jn.exec(e))?ai(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Zn.exec(e))?hi(t[1],t[2]/100,t[3]/100,1):(t=Xn.exec(e))?hi(t[1],t[2]/100,t[3]/100,t[4]):Qn.hasOwnProperty(e)?ii(Qn[e]):"transparent"===e?new oi(NaN,NaN,NaN,0):null}function ii(e){return new oi(e>>16&255,e>>8&255,255&e,1)}function ai(e,t,n,i){return i<=0&&(e=t=n=NaN),new oi(e,t,n,i)}function ri(e){return e instanceof qn||(e=ni(e)),e?new oi((e=e.rgb()).r,e.g,e.b,e.opacity):new oi}function si(e,t,n,i){return 1===arguments.length?ri(e):new oi(e,t,n,null==i?1:i)}function oi(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function li(){return"#"+ui(this.r)+ui(this.g)+ui(this.b)}function ci(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function ui(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function hi(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new fi(e,t,n,i)}function di(e){if(e instanceof fi)return new fi(e.h,e.s,e.l,e.opacity);if(e instanceof qn||(e=ni(e)),!e)return new fi;if(e instanceof fi)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),r=Math.max(t,n,i),s=NaN,o=r-a,l=(r+a)/2;return o?(s=t===r?(n-i)/o+6*(n<i):n===r?(i-t)/o+2:(t-n)/o+4,o/=l<.5?r+a:2-r-a,s*=60):o=l>0&&l<1?0:s,new fi(s,o,l,e.opacity)}function fi(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function pi(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Wn(qn,ni,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:ei,formatHex:ei,formatHsl:function(){return di(this).formatHsl()},formatRgb:ti,toString:ti}),Wn(oi,si,Fn(qn,{brighter:function(e){return e=null==e?On:Math.pow(On,e),new oi(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?In:Math.pow(In,e),new oi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:li,formatHex:li,formatRgb:ci,toString:ci})),Wn(fi,(function(e,t,n,i){return 1===arguments.length?di(e):new fi(e,t,n,null==i?1:i)}),Fn(qn,{brighter:function(e){return e=null==e?On:Math.pow(On,e),new fi(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?In:Math.pow(In,e),new fi(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,a=2*n-i;return new oi(pi(e>=240?e-240:e+120,a,i),pi(e,a,i),pi(e<120?e+240:e-120,a,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var gi=e=>()=>e;function mi(e){return 1==(e=+e)?yi:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):gi(isNaN(t)?n:t)}}function yi(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):gi(isNaN(e)?t:e)}var vi=function e(t){var n=mi(t);function i(e,t){var i=n((e=si(e)).r,(t=si(t)).r),a=n(e.g,t.g),r=n(e.b,t.b),s=yi(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=a(t),e.b=r(t),e.opacity=s(t),e+""}}return i.gamma=e,i}(1);function xi(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,a=t.slice();return function(r){for(n=0;n<i;++n)a[n]=e[n]*(1-r)+t[n]*r;return a}}function bi(e,t){var n,i=t?t.length:0,a=e?Math.min(i,e.length):0,r=new Array(a),s=new Array(i);for(n=0;n<a;++n)r[n]=Ti(e[n],t[n]);for(;n<i;++n)s[n]=t[n];return function(e){for(n=0;n<a;++n)s[n]=r[n](e);return s}}function $i(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function ki(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function wi(e,t){var n,i={},a={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?i[n]=Ti(e[n],t[n]):a[n]=t[n];return function(e){for(n in i)a[n]=i[n](e);return a}}var _i=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mi=new RegExp(_i.source,"g");function Ei(e,t){var n,i,a,r=_i.lastIndex=Mi.lastIndex=0,s=-1,o=[],l=[];for(e+="",t+="";(n=_i.exec(e))&&(i=Mi.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:ki(n,i)})),r=Mi.lastIndex;return r<t.length&&(a=t.slice(r),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,i=0;i<t;++i)o[(n=l[i]).i]=n.x(e);return o.join("")})}function Ti(e,t){var n,i,a=typeof t;return null==t||"boolean"===a?gi(t):("number"===a?ki:"string"===a?(n=ni(t))?(t=n,vi):Ei:t instanceof ni?vi:t instanceof Date?$i:(i=t,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(t)?bi:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?wi:ki:xi))(e,t)}function Ni(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Si(e){return+e}var Ai=[0,1];function Ci(e){return e}function Li(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function Ri(e,t,n){var i=e[0],a=e[1],r=t[0],s=t[1];return a<i?(i=Li(a,i),r=n(s,r)):(i=Li(i,a),r=n(r,s)),function(e){return r(i(e))}}function zi(e,t,n){var i=Math.min(e.length,t.length)-1,a=new Array(i),r=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)a[s]=Li(e[s],e[s+1]),r[s]=n(t[s],t[s+1]);return function(t){var n=Ln(e,t,1,i)-1;return r[n](a[n](t))}}function ji(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Di(){var e,t,n,i,a,r,s=Ai,o=Ai,l=Ti,c=Ci;function u(){var e,t,n,l=Math.min(s.length,o.length);return c!==Ci&&(e=s[0],t=s[l-1],e>t&&(n=e,e=t,t=n),c=function(n){return Math.max(e,Math.min(t,n))}),i=l>2?zi:Ri,a=r=null,h}function h(t){return null==t||isNaN(t=+t)?n:(a||(a=i(s.map(e),o,l)))(e(c(t)))}return h.invert=function(n){return c(t((r||(r=i(o,s.map(e),ki)))(n)))},h.domain=function(e){return arguments.length?(s=Array.from(e,Si),u()):s.slice()},h.range=function(e){return arguments.length?(o=Array.from(e),u()):o.slice()},h.rangeRound=function(e){return o=Array.from(e),l=Ni,u()},h.clamp=function(e){return arguments.length?(c=!!e||Ci,u()):c!==Ci},h.interpolate=function(e){return arguments.length?(l=e,u()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,i){return e=n,t=i,u()}}function Pi(){return Di()(Ci,Ci)}function Wi(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Fi(e){return(e=Wi(Math.abs(e)))?e[1]:NaN}var qi,Ii=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Oi(e){if(!(t=Ii.exec(e)))throw new Error("invalid format: "+e);var t;return new Bi({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Bi(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Ki(e,t){var n=Wi(e,t);if(!n)return e+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}Oi.prototype=Bi.prototype,Bi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Hi={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ki(100*e,t),r:Ki,s:function(e,t){var n=Wi(e,t);if(!n)return e+"";var i=n[0],a=n[1],r=a-(qi=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,s=i.length;return r===s?i:r>s?i+new Array(r-s+1).join("0"):r>0?i.slice(0,r)+"."+i.slice(r):"0."+new Array(1-r).join("0")+Wi(e,Math.max(0,t+r-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ui(e){return e}var Gi,Yi,Vi,Ji=Array.prototype.map,Zi=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Xi(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?Ui:(t=Ji.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var a=e.length,r=[],s=0,o=t[0],l=0;a>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),r.push(e.substring(a-=o,a+o)),!((l+=o+1)>i));)o=t[s=(s+1)%t.length];return r.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",r=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?Ui:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Ji.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"−":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=Oi(e)).fill,n=e.align,h=e.sign,d=e.symbol,f=e.zero,p=e.width,g=e.comma,m=e.precision,y=e.trim,v=e.type;"n"===v?(g=!0,v="g"):Hi[v]||(void 0===m&&(m=12),y=!0,v="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var x="$"===d?a:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===d?r:/[%p]/.test(v)?l:"",$=Hi[v],k=/[defgprs%]/.test(v);function w(e){var a,r,l,d=x,w=b;if("c"===v)w=$(e)+w,e="";else{var _=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:$(Math.abs(e),m),y&&(e=function(e){e:for(var t,n=e.length,i=1,a=-1;i<n;++i)switch(e[i]){case".":a=t=i;break;case"0":0===a&&(a=i),t=i;break;default:if(!+e[i])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),_&&0==+e&&"+"!==h&&(_=!1),d=(_?"("===h?h:c:"-"===h||"("===h?"":h)+d,w=("s"===v?Zi[8+qi/3]:"")+w+(_&&"("===h?")":""),k)for(a=-1,r=e.length;++a<r;)if(48>(l=e.charCodeAt(a))||l>57){w=(46===l?s+e.slice(a+1):e.slice(a))+w,e=e.slice(0,a);break}}g&&!f&&(e=i(e,1/0));var M=d.length+e.length+w.length,E=M<p?new Array(p-M+1).join(t):"";switch(g&&f&&(e=i(E+e,E.length?p-w.length:1/0),E=""),n){case"<":e=d+e+w+E;break;case"=":e=d+E+e+w;break;case"^":e=E.slice(0,M=E.length>>1)+d+e+w+E.slice(M);break;default:e=E+d+e+w}return o(e)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),w.toString=function(){return e+""},w}return{format:h,formatPrefix:function(e,t){var n=h(((e=Oi(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(Fi(t)/3))),a=Math.pow(10,-i),r=Zi[8+i/3];return function(e){return n(a*e)+r}}}}function Qi(e,t,n,i){var a,r=function(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),r=i/a;return r>=Rn?a*=10:r>=zn?a*=5:r>=jn&&(a*=2),t<e?-a:a}(e,t,n);switch((i=Oi(null==i?",f":i)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Fi(t)/3)))-Fi(Math.abs(e)))}(r,s))||(i.precision=a),Vi(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Fi(t)-Fi(e))+1}(r,Math.max(Math.abs(e),Math.abs(t))))||(i.precision=a-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(a=function(e){return Math.max(0,-Fi(Math.abs(e)))}(r))||(i.precision=a-2*("%"===i.type))}return Yi(i)}function ea(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var i,a,r,s,o=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((i=t<e)&&(a=e,e=t,t=a),0===(s=Dn(e,t,n))||!isFinite(s))return[];if(s>0){let n=Math.round(e/s),i=Math.round(t/s);for(n*s<e&&++n,i*s>t&&--i,r=new Array(a=i-n+1);++o<a;)r[o]=(n+o)*s}else{s=-s;let n=Math.round(e*s),i=Math.round(t*s);for(n/s<e&&++n,i/s>t&&--i,r=new Array(a=i-n+1);++o<a;)r[o]=(n+o)/s}return i&&r.reverse(),r}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var i=t();return Qi(i[0],i[i.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var i,a,r=t(),s=0,o=r.length-1,l=r[s],c=r[o],u=10;for(c<l&&(a=l,l=c,c=a,a=s,s=o,o=a);u-- >0;){if((a=Dn(l,c,n))===i)return r[s]=l,r[o]=c,t(r);if(a>0)l=Math.floor(l/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,c=Math.floor(c*a)/a}i=a}return e},e}function ta(){var e=Pi();return e.copy=function(){return ji(e,ta())},Pn.apply(e,arguments),ea(e)}function na(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ia(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function aa(e){return e<0?-e*e:e*e}function ra(e){var t=e(Ci,Ci),n=1;function i(){return 1===n?e(Ci,Ci):.5===n?e(ia,aa):e(na(n),na(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,i()):n},ea(t)}function sa(){var e=ra(Di());return e.copy=function(){return ji(e,sa()).exponent(e.exponent())},Pn.apply(e,arguments),e}Gi=Xi({thousands:",",grouping:[3],currency:["$",""]}),Yi=Gi.format,Vi=Gi.formatPrefix;var oa={x:ta,y:ta,z:ta,r:function(){return sa.apply(null,arguments).exponent(.5)}};function la(e){return e}function ca(e){return t=>Math.log(e*t)}function ua(e){return t=>e*Math.exp(t)}function ha(e){return t=>Math.sign(t)*Math.expm1(Math.abs(t))*e}function da(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function fa(e,t){if("function"!=typeof e.range)throw new Error("Scale method `range` must be a function");if("function"!=typeof e.domain)throw new Error("Scale method `domain` must be a function");if(!Array.isArray(t))return e.domain();2!==e.domain().length&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",e.domain()),2!==e.range().length&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",e.range());const{lift:n,ground:i}=function(e){const t=function(e){return e.constant?"symlog":e.base?"log":e.exponent?.5===e.exponent()?"sqrt":"pow":"other"}(e);if("log"===t){const n=Math.sign(e.domain()[0]);return{lift:ca(n),ground:ua(n),scaleType:t}}if("pow"===t){const e=1;return{lift:da(e),ground:da(1/e),scaleType:t}}if("sqrt"===t){const e=.5;return{lift:da(e),ground:da(1/e),scaleType:t}}if("symlog"===t){const e=1;return{lift:(n=e,e=>Math.sign(e)*Math.log1p(Math.abs(e/n))),ground:ha(e),scaleType:t}}var n;return{lift:la,ground:la,scaleType:t}}(e),a=e.domain()[0],r="[object Date]"===Object.prototype.toString.call(a),[s,o]=e.domain().map((e=>n(r?e.getTime():e))),[l,c]=e.range(),u=t[0]||0,h=t[1]||0,d=(o-s)/(Math.abs(c-l)-u-h);return[s-u*d,h*d+o].map((e=>i(r?new Date(e):e)))}function pa(e){return function([t,n,i,a,r,s,o,l,c,u]){if(null===n)return null;const h=function(e,t,n,i,a,r){return a?"function"==typeof a?a({width:t,height:n}):a:function(e,t,n,i,a){let r,s;return!0===a?(r=0,s=100):(r="r"===e?1:0,s="y"===e?n:"r"===e?25:t),!0===i?[s,r]:[r,s]}(e,t,n,i,r)}(e,o,l,s,c,u),d=t===oa[e]?t():t.copy();return d.domain(Tn(n[e],i)).range(h),a&&d.domain(fa(d,a)),!0===r&&("function"==typeof d.nice?d.nice():console.error(`[Layer Cake] You set \`${e}Nice: true\` but the ${e}Scale does not have a \`.nice\` method. Ignoring...`)),d}}function ga([e,t]){return n=>{const i=e(n);return Array.isArray(i)?i.map((e=>t(e))):t(i)}}function ma([e]){if("function"==typeof e){if("function"==typeof e.range)return e.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}var ya={x:!1,y:!0,z:!1,r:!1};const va=e=>({element:4&e[0],width:64&e[0],height:128&e[0],aspectRatio:256&e[0],containerWidth:512&e[0],containerHeight:1024&e[0]}),xa=e=>({element:e[2],width:e[6],height:e[7],aspectRatio:e[8],containerWidth:e[9],containerHeight:e[10]});function ba(e){let t,n,i,a;const r=e[54].default,s=d(r,e,e[53],xa);return{c(){t=E("div"),s&&s.c(),L(t,"class","layercake-container svelte-vhzpsp"),L(t,"style",n="position:"+e[5]+"; "+("absolute"===e[5]?"top:0;right:0;bottom:0;left:0;":"")+" "+(!1===e[4]?"pointer-events:none;":"")),ee((()=>e[56].call(t)))},m(n,r){w(n,t,r),s&&s.m(t,null),e[55](t),i=function(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const n=E("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const i=W();let a;return i?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",a=C(window,"message",(e=>{e.source===n.contentWindow&&t()}))):(n.src="about:blank",n.onload=()=>{a=C(n.contentWindow,"resize",t)}),k(e,n),()=>{(i||a&&n.contentWindow)&&a(),_(n)}}(t,e[56].bind(t)),a=!0},p(e,i){s&&s.p&&(!a||1988&i[0]|4194304&i[1])&&g(s,r,e,e[53],a?p(r,e[53],i,va):m(e[53]),xa),(!a||48&i[0]&&n!==(n="position:"+e[5]+"; "+("absolute"===e[5]?"top:0;right:0;bottom:0;left:0;":"")+" "+(!1===e[4]?"pointer-events:none;":"")))&&L(t,"style",n)},i(e){a||(ue(s,e),a=!0)},o(e){he(s,e),a=!1},d(n){n&&_(t),s&&s.d(n),e[55](null),i()}}}function $a(e){let t,n,i=(!0===e[3]||"undefined"!=typeof window)&&ba(e);return{c(){i&&i.c(),t=A()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,n){!0===e[3]||"undefined"!=typeof window?i?(i.p(e,n),8&n[0]&&ue(i,1)):(i=ba(e),i.c(),ue(i,1),i.m(t.parentNode,t)):i&&(le(),he(i,1,1,(()=>{i=null})),ce())},i(e){n||(ue(i),n=!0)},o(e){he(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function ka(e,t,n){let i,a,r,s,o,l,{$$slots:c={},$$scope:u}=t,{ssr:d=!1}=t,{pointerEvents:f=!0}=t,{position:p="relative"}=t,{percentRange:g=!1}=t,{width:m}=t,{height:y}=t,{containerWidth:v=m||100}=t,{containerHeight:x=y||100}=t,{element:b}=t,{x:$}=t,{y:k}=t,{z:w}=t,{r:_}=t,{custom:M={}}=t,{data:E=[]}=t,{xDomain:T}=t,{yDomain:N}=t,{zDomain:S}=t,{rDomain:A}=t,{xNice:C=!1}=t,{yNice:L=!1}=t,{zNice:R=!1}=t,{rNice:z=!1}=t,{xReverse:j=ya.x}=t,{yReverse:D=ya.y}=t,{zReverse:P=ya.z}=t,{rReverse:W=ya.r}=t,{xPadding:F}=t,{yPadding:q}=t,{zPadding:I}=t,{rPadding:O}=t,{xScale:B=oa.x}=t,{yScale:K=oa.y}=t,{zScale:U=oa.y}=t,{rScale:G=oa.r}=t,{xRange:Y}=t,{yRange:J}=t,{zRange:Z}=t,{rRange:X}=t,{padding:Q={}}=t,{extents:ee={}}=t,{flatData:te}=t;const ne={},ie=kn(),ae=kn();h(e,ae,(e=>n(9,o=e)));const re=kn();h(e,re,(e=>n(10,l=e)));const se=kn(),oe=kn(),le=kn(),ce=kn(),ue=kn(),he=kn(),de=kn(),fe=kn(),pe=kn(),ge=kn(),me=kn(),ye=kn(),ve=kn(),xe=kn(),be=kn(),$e=kn(),ke=kn(),we=kn(),_e=kn(),Me=kn(),Ee=kn(),Te=kn(),Ne=kn(),Se=kn(),Ae=kn(),Ce=kn(),Le=kn(),Re=kn(),ze=kn(),je=kn(),De=kn(),Pe=kn(),We=kn(),Fe=kn(ne),qe=wn([se,oe,le,ce],(([e,t,n,i])=>{const a={};return e&&(a.x=e),t&&(a.y=t),n&&(a.z=n),i&&(a.r=i),a})),Ie=wn([De,ae,re],(([e])=>Object.assign({top:0,right:0,bottom:0,left:0},e))),Oe=wn([ae,re,Ie],(([e,t,n])=>{const i={};return i.top=n.top,i.right=e-n.right,i.bottom=t-n.bottom,i.left=n.left,i.width=i.right-i.left,i.height=i.bottom-i.top,i.width<=0&&console.error("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),i.height<=0&&console.error("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),i})),Be=wn([Oe],(([e])=>e.width));h(e,Be,(e=>n(6,a=e)));const Ke=wn([Oe],(([e])=>e.height));h(e,Ke,(e=>n(7,r=e)));const He=wn([Pe,qe,We],(([e,t,n])=>{const i=Mn(t,n);return Object.keys(i).length>0?{...En(e,i),...n}:{}})),Ue=wn([He,de],Nn("x")),Ge=wn([He,fe],Nn("y")),Ye=wn([He,pe],Nn("z")),Ve=wn([He,ge],Nn("r")),Je=wn([Ne,He,Ue,_e,me,be,Be,Ke,Le,ie],pa("x")),Ze=wn([se,Je],ga),Xe=wn([Se,He,Ge,Me,ye,$e,Be,Ke,Re,ie],pa("y")),Qe=wn([oe,Xe],ga),et=wn([Ae,He,Ye,Ee,ve,ke,Be,Ke,ze,ie],pa("z")),tt=wn([le,et],ga),nt=wn([Ce,He,Ve,Te,xe,we,Be,Ke,je,ie],pa("r")),it=wn([ce,nt],ga),at=wn([Je],ma),rt=wn([Xe],ma),st=wn([et],ma),ot=wn([nt],ma),lt=wn([Be,Ke],(([e,t,n])=>t/n));return h(e,lt,(e=>n(8,s=e))),e.$$set=e=>{"ssr"in e&&n(3,d=e.ssr),"pointerEvents"in e&&n(4,f=e.pointerEvents),"position"in e&&n(5,p=e.position),"percentRange"in e&&n(16,g=e.percentRange),"width"in e&&n(17,m=e.width),"height"in e&&n(18,y=e.height),"containerWidth"in e&&n(0,v=e.containerWidth),"containerHeight"in e&&n(1,x=e.containerHeight),"element"in e&&n(2,b=e.element),"x"in e&&n(19,$=e.x),"y"in e&&n(20,k=e.y),"z"in e&&n(21,w=e.z),"r"in e&&n(22,_=e.r),"custom"in e&&n(23,M=e.custom),"data"in e&&n(24,E=e.data),"xDomain"in e&&n(25,T=e.xDomain),"yDomain"in e&&n(26,N=e.yDomain),"zDomain"in e&&n(27,S=e.zDomain),"rDomain"in e&&n(28,A=e.rDomain),"xNice"in e&&n(29,C=e.xNice),"yNice"in e&&n(30,L=e.yNice),"zNice"in e&&n(31,R=e.zNice),"rNice"in e&&n(32,z=e.rNice),"xReverse"in e&&n(33,j=e.xReverse),"yReverse"in e&&n(34,D=e.yReverse),"zReverse"in e&&n(35,P=e.zReverse),"rReverse"in e&&n(36,W=e.rReverse),"xPadding"in e&&n(37,F=e.xPadding),"yPadding"in e&&n(38,q=e.yPadding),"zPadding"in e&&n(39,I=e.zPadding),"rPadding"in e&&n(40,O=e.rPadding),"xScale"in e&&n(41,B=e.xScale),"yScale"in e&&n(42,K=e.yScale),"zScale"in e&&n(43,U=e.zScale),"rScale"in e&&n(44,G=e.rScale),"xRange"in e&&n(45,Y=e.xRange),"yRange"in e&&n(46,J=e.yRange),"zRange"in e&&n(47,Z=e.zRange),"rRange"in e&&n(48,X=e.rRange),"padding"in e&&n(49,Q=e.padding),"extents"in e&&n(50,ee=e.extents),"flatData"in e&&n(51,te=e.flatData),"$$scope"in e&&n(53,u=e.$$scope)},e.$$.update=()=>{524288&e.$$.dirty[0]&&$&&(ne.x=$),1048576&e.$$.dirty[0]&&k&&(ne.y=k),2097152&e.$$.dirty[0]&&w&&(ne.z=w),4194304&e.$$.dirty[0]&&_&&(ne.r=_),33554432&e.$$.dirty[0]&&T&&(ne.xDomain=T),67108864&e.$$.dirty[0]&&N&&(ne.yDomain=N),134217728&e.$$.dirty[0]&&S&&(ne.zDomain=S),268435456&e.$$.dirty[0]&&A&&(ne.rDomain=A),16384&e.$$.dirty[1]&&Y&&(ne.xRange=Y),32768&e.$$.dirty[1]&&J&&(ne.yRange=J),65536&e.$$.dirty[1]&&Z&&(ne.zRange=Z),131072&e.$$.dirty[1]&&X&&(ne.rRange=X),65536&e.$$.dirty[0]&&ie.set(g),1&e.$$.dirty[0]&&ae.set(v),2&e.$$.dirty[0]&&re.set(x),524288&e.$$.dirty[0]&&se.set(_n($)),1048576&e.$$.dirty[0]&&oe.set(_n(k)),2097152&e.$$.dirty[0]&&le.set(_n(w)),4194304&e.$$.dirty[0]&&ce.set(_n(_)),33554432&e.$$.dirty[0]&&de.set(T),67108864&e.$$.dirty[0]&&fe.set(N),134217728&e.$$.dirty[0]&&pe.set(S),268435456&e.$$.dirty[0]&&ge.set(A),8388608&e.$$.dirty[0]&&ue.set(M),16777216&e.$$.dirty[0]&&he.set(E),536870912&e.$$.dirty[0]&&me.set(C),1073741824&e.$$.dirty[0]&&ye.set(L),1&e.$$.dirty[1]&&ve.set(R),2&e.$$.dirty[1]&&xe.set(z),4&e.$$.dirty[1]&&be.set(j),8&e.$$.dirty[1]&&$e.set(D),16&e.$$.dirty[1]&&ke.set(P),32&e.$$.dirty[1]&&we.set(W),64&e.$$.dirty[1]&&_e.set(F),128&e.$$.dirty[1]&&Me.set(q),256&e.$$.dirty[1]&&Ee.set(I),512&e.$$.dirty[1]&&Te.set(O),1024&e.$$.dirty[1]&&Ne.set(B),2048&e.$$.dirty[1]&&Se.set(K),4096&e.$$.dirty[1]&&Ae.set(U),8192&e.$$.dirty[1]&&Ce.set(G),16384&e.$$.dirty[1]&&Le.set(Y),32768&e.$$.dirty[1]&&Re.set(J),65536&e.$$.dirty[1]&&ze.set(Z),131072&e.$$.dirty[1]&&je.set(X),262144&e.$$.dirty[1]&&De.set(Q),524288&e.$$.dirty[1]&&We.set(Mn(ee)),16777216&e.$$.dirty[0]|1048576&e.$$.dirty[1]&&Pe.set(te||E),2097152&e.$$.dirty[1]&&H("LayerCake",i)},n(52,i={activeGetters:qe,width:Be,height:Ke,percentRange:ie,aspectRatio:lt,containerWidth:ae,containerHeight:re,x:se,y:oe,z:le,r:ce,custom:ue,data:he,xNice:me,yNice:ye,zNice:ve,rNice:xe,xReverse:be,yReverse:$e,zReverse:ke,rReverse:we,xPadding:_e,yPadding:Me,zPadding:Ee,rPadding:Te,padding:Ie,flatData:Pe,extents:He,xDomain:Ue,yDomain:Ge,zDomain:Ye,rDomain:Ve,xRange:at,yRange:rt,zRange:st,rRange:ot,config:Fe,xScale:Je,xGet:Ze,yScale:Xe,yGet:Qe,zScale:et,zGet:tt,rScale:nt,rGet:it}),[v,x,b,d,f,p,a,r,s,o,l,ae,re,Be,Ke,lt,g,m,y,$,k,w,_,M,E,T,N,S,A,C,L,R,z,j,D,P,W,F,q,I,O,B,K,U,G,Y,J,Z,X,Q,ee,te,i,u,c,function(e){V[e?"unshift":"push"]((()=>{b=e,n(2,b)}))},function(){v=this.clientWidth,x=this.clientHeight,n(0,v),n(1,x)}]}class wa extends ke{constructor(e){super(),$e(this,e,ka,$a,o,{ssr:3,pointerEvents:4,position:5,percentRange:16,width:17,height:18,containerWidth:0,containerHeight:1,element:2,x:19,y:20,z:21,r:22,custom:23,data:24,xDomain:25,yDomain:26,zDomain:27,rDomain:28,xNice:29,yNice:30,zNice:31,rNice:32,xReverse:33,yReverse:34,zReverse:35,rReverse:36,xPadding:37,yPadding:38,zPadding:39,rPadding:40,xScale:41,yScale:42,zScale:43,rScale:44,xRange:45,yRange:46,zRange:47,rRange:48,padding:49,extents:50,flatData:51},null,[-1,-1,-1,-1])}}const _a=e=>({element:1&e}),Ma=e=>({element:e[0]});function Ea(e){let t,n,i;const a=e[8].default,r=d(a,e,e[7],Ma);return{c(){t=E("div"),r&&r.c(),L(t,"class","layercake-layout-html svelte-1bu60uu"),L(t,"style",n="top: "+e[3].top+"px; right:"+e[3].right+"px; bottom:"+e[3].bottom+"px; left:"+e[3].left+"px;"+e[1]+e[2])},m(n,a){w(n,t,a),r&&r.m(t,null),e[9](t),i=!0},p(e,[s]){r&&r.p&&(!i||129&s)&&g(r,a,e,e[7],i?p(a,e[7],s,_a):m(e[7]),Ma),(!i||14&s&&n!==(n="top: "+e[3].top+"px; right:"+e[3].right+"px; bottom:"+e[3].bottom+"px; left:"+e[3].left+"px;"+e[1]+e[2]))&&L(t,"style",n)},i(e){i||(ue(r,e),i=!0)},o(e){he(r,e),i=!1},d(n){n&&_(t),r&&r.d(n),e[9](null)}}}function Ta(e,t,n){let i,{$$slots:a={},$$scope:r}=t,{element:s}=t,{zIndex:o}=t,{pointerEvents:l}=t,c="",u="";const{padding:d}=U("LayerCake");return h(e,d,(e=>n(3,i=e))),e.$$set=e=>{"element"in e&&n(0,s=e.element),"zIndex"in e&&n(5,o=e.zIndex),"pointerEvents"in e&&n(6,l=e.pointerEvents),"$$scope"in e&&n(7,r=e.$$scope)},e.$$.update=()=>{32&e.$$.dirty&&n(1,c=void 0!==o?`z-index:${o};`:""),64&e.$$.dirty&&n(2,u=!1===l?"pointer-events:none;":"")},[s,c,u,i,d,o,l,r,a,function(e){V[e?"unshift":"push"]((()=>{s=e,n(0,s)}))}]}class Na extends ke{constructor(e){super(),$e(this,e,Ta,Ea,o,{element:0,zIndex:5,pointerEvents:6})}}const Sa=e=>({element:1&e}),Aa=e=>({element:e[0]}),Ca=e=>({element:1&e}),La=e=>({element:e[0]});function Ra(e){let t,n,i,a,r,s;const o=e[13].defs,l=d(o,e,e[12],La),c=e[13].default,u=d(c,e,e[12],Aa);return{c(){t=T("svg"),n=T("defs"),l&&l.c(),i=T("g"),u&&u.c(),L(i,"class","layercake-layout-svg_g"),L(i,"transform",a="translate("+e[6].left+", "+e[6].top+")"),L(t,"class","layercake-layout-svg svelte-u84d8d"),L(t,"viewBox",e[1]),L(t,"width",e[4]),L(t,"height",e[5]),L(t,"style",r=""+(e[2]+e[3]))},m(a,r){w(a,t,r),k(t,n),l&&l.m(n,null),k(t,i),u&&u.m(i,null),e[14](t),s=!0},p(e,[n]){l&&l.p&&(!s||4097&n)&&g(l,o,e,e[12],s?p(o,e[12],n,Ca):m(e[12]),La),u&&u.p&&(!s||4097&n)&&g(u,c,e,e[12],s?p(c,e[12],n,Sa):m(e[12]),Aa),(!s||64&n&&a!==(a="translate("+e[6].left+", "+e[6].top+")"))&&L(i,"transform",a),(!s||2&n)&&L(t,"viewBox",e[1]),(!s||16&n)&&L(t,"width",e[4]),(!s||32&n)&&L(t,"height",e[5]),(!s||12&n&&r!==(r=""+(e[2]+e[3])))&&L(t,"style",r)},i(e){s||(ue(l,e),ue(u,e),s=!0)},o(e){he(l,e),he(u,e),s=!1},d(n){n&&_(t),l&&l.d(n),u&&u.d(n),e[14](null)}}}function za(e,t,n){let i,a,r,{$$slots:s={},$$scope:o}=t,{element:l}=t,{viewBox:c}=t,{zIndex:u}=t,{pointerEvents:d}=t,f="",p="";const{containerWidth:g,containerHeight:m,padding:y}=U("LayerCake");return h(e,g,(e=>n(4,i=e))),h(e,m,(e=>n(5,a=e))),h(e,y,(e=>n(6,r=e))),e.$$set=e=>{"element"in e&&n(0,l=e.element),"viewBox"in e&&n(1,c=e.viewBox),"zIndex"in e&&n(10,u=e.zIndex),"pointerEvents"in e&&n(11,d=e.pointerEvents),"$$scope"in e&&n(12,o=e.$$scope)},e.$$.update=()=>{1024&e.$$.dirty&&n(2,f=void 0!==u?`z-index:${u};`:""),2048&e.$$.dirty&&n(3,p=!1===d?"pointer-events:none;":"")},[l,c,f,p,i,a,r,g,m,y,u,d,o,s,function(e){V[e?"unshift":"push"]((()=>{l=e,n(0,l)}))}]}class ja extends ke{constructor(e){super(),$e(this,e,za,Ra,o,{element:0,viewBox:1,zIndex:10,pointerEvents:11})}}function Da(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Pa(e){let t=e,n=e,i=e;function a(e,t,a=0,r=e.length){if(a<r){if(0!==n(t,t))return r;do{const n=a+r>>>1;i(e[n],t)<0?a=n+1:r=n}while(a<r)}return a}return 2!==e.length&&(t=(t,n)=>e(t)-n,n=Da,i=(t,n)=>Da(e(t),n)),{left:a,center:function(e,n,i=0,r=e.length){const s=a(e,n,i,r-1);return s>i&&t(e[s-1],n)>-t(e[s],n)?s-1:s},right:function(e,t,a=0,r=e.length){if(a<r){if(0!==n(t,t))return r;do{const n=a+r>>>1;i(e[n],t)<=0?a=n+1:r=n}while(a<r)}return a}}}const Wa=Pa(Da).right;Pa((function(e){return null===e?NaN:+e})).center;var Fa=Wa;class qa extends Map{constructor(e,t=Oa){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[t,n]of e)this.set(t,n)}get(e){return super.get(Ia(this,e))}has(e){return super.has(Ia(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){const i=t(n);e.has(i)&&(n=e.get(i),e.delete(i));return n}(this,e))}}function Ia({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function Oa(e){return null!==e&&"object"==typeof e?e.valueOf():e}var Ba=Math.sqrt(50),Ka=Math.sqrt(10),Ha=Math.sqrt(2);function Ua(e,t,n){var i=(t-e)/Math.max(0,n),a=Math.floor(Math.log(i)/Math.LN10),r=i/Math.pow(10,a);return a>=0?(r>=Ba?10:r>=Ka?5:r>=Ha?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(r>=Ba?10:r>=Ka?5:r>=Ha?2:1)}function Ga(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var i=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),r=new Array(a);++i<a;)r[i]=e+i*n;return r}function Ya(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}const Va=Symbol("implicit");function Ja(){var e=new qa,t=[],n=[],i=Va;function a(a){let r=e.get(a);if(void 0===r){if(i!==Va)return i;e.set(a,r=t.push(a)-1)}return n[r%n.length]}return a.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new qa;for(const i of n)e.has(i)||e.set(i,t.push(i)-1);return a},a.range=function(e){return arguments.length?(n=Array.from(e),a):n.slice()},a.unknown=function(e){return arguments.length?(i=e,a):i},a.copy=function(){return Ja(t,n).unknown(i)},Ya.apply(a,arguments),a}function Za(){var e,t,n=Ja().unknown(void 0),i=n.domain,a=n.range,r=0,s=1,o=!1,l=0,c=0,u=.5;function h(){var n=i().length,h=s<r,d=h?s:r,f=h?r:s;e=(f-d)/Math.max(1,n-l+2*c),o&&(e=Math.floor(e)),d+=(f-d-e*(n-l))*u,t=e*(1-l),o&&(d=Math.round(d),t=Math.round(t));var p=Ga(n).map((function(t){return d+e*t}));return a(h?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(i(e),h()):i()},n.range=function(e){return arguments.length?([r,s]=e,r=+r,s=+s,h()):[r,s]},n.rangeRound=function(e){return[r,s]=e,r=+r,s=+s,o=!0,h()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,h()):o},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),h()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),h()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,h()):c},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),h()):u},n.copy=function(){return Za(i(),[r,s]).round(o).paddingInner(l).paddingOuter(c).align(u)},Ya.apply(h(),arguments)}function Xa(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Qa(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function er(){}var tr=.7,nr=1/tr,ir="\\s*([+-]?\\d+)\\s*",ar="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",rr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sr=/^#([0-9a-f]{3,8})$/,or=new RegExp("^rgb\\("+[ir,ir,ir]+"\\)$"),lr=new RegExp("^rgb\\("+[rr,rr,rr]+"\\)$"),cr=new RegExp("^rgba\\("+[ir,ir,ir,ar]+"\\)$"),ur=new RegExp("^rgba\\("+[rr,rr,rr,ar]+"\\)$"),hr=new RegExp("^hsl\\("+[ar,rr,rr]+"\\)$"),dr=new RegExp("^hsla\\("+[ar,rr,rr,ar]+"\\)$"),fr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function pr(){return this.rgb().formatHex()}function gr(){return this.rgb().formatRgb()}function mr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=sr.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?yr(t):3===n?new $r(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?vr(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?vr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=or.exec(e))?new $r(t[1],t[2],t[3],1):(t=lr.exec(e))?new $r(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=cr.exec(e))?vr(t[1],t[2],t[3],t[4]):(t=ur.exec(e))?vr(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=hr.exec(e))?Mr(t[1],t[2]/100,t[3]/100,1):(t=dr.exec(e))?Mr(t[1],t[2]/100,t[3]/100,t[4]):fr.hasOwnProperty(e)?yr(fr[e]):"transparent"===e?new $r(NaN,NaN,NaN,0):null}function yr(e){return new $r(e>>16&255,e>>8&255,255&e,1)}function vr(e,t,n,i){return i<=0&&(e=t=n=NaN),new $r(e,t,n,i)}function xr(e){return e instanceof er||(e=mr(e)),e?new $r((e=e.rgb()).r,e.g,e.b,e.opacity):new $r}function br(e,t,n,i){return 1===arguments.length?xr(e):new $r(e,t,n,null==i?1:i)}function $r(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function kr(){return"#"+_r(this.r)+_r(this.g)+_r(this.b)}function wr(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function _r(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Mr(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Tr(e,t,n,i)}function Er(e){if(e instanceof Tr)return new Tr(e.h,e.s,e.l,e.opacity);if(e instanceof er||(e=mr(e)),!e)return new Tr;if(e instanceof Tr)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),r=Math.max(t,n,i),s=NaN,o=r-a,l=(r+a)/2;return o?(s=t===r?(n-i)/o+6*(n<i):n===r?(i-t)/o+2:(t-n)/o+4,o/=l<.5?r+a:2-r-a,s*=60):o=l>0&&l<1?0:s,new Tr(s,o,l,e.opacity)}function Tr(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function Nr(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Xa(er,mr,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:pr,formatHex:pr,formatHsl:function(){return Er(this).formatHsl()},formatRgb:gr,toString:gr}),Xa($r,br,Qa(er,{brighter:function(e){return e=null==e?nr:Math.pow(nr,e),new $r(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?tr:Math.pow(tr,e),new $r(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kr,formatHex:kr,formatRgb:wr,toString:wr})),Xa(Tr,(function(e,t,n,i){return 1===arguments.length?Er(e):new Tr(e,t,n,null==i?1:i)}),Qa(er,{brighter:function(e){return e=null==e?nr:Math.pow(nr,e),new Tr(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?tr:Math.pow(tr,e),new Tr(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,a=2*n-i;return new $r(Nr(e>=240?e-240:e+120,a,i),Nr(e,a,i),Nr(e<120?e+240:e-120,a,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Sr=e=>()=>e;function Ar(e){return 1==(e=+e)?Cr:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):Sr(isNaN(t)?n:t)}}function Cr(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Sr(isNaN(e)?t:e)}var Lr=function e(t){var n=Ar(t);function i(e,t){var i=n((e=br(e)).r,(t=br(t)).r),a=n(e.g,t.g),r=n(e.b,t.b),s=Cr(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=a(t),e.b=r(t),e.opacity=s(t),e+""}}return i.gamma=e,i}(1);function Rr(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,a=t.slice();return function(r){for(n=0;n<i;++n)a[n]=e[n]*(1-r)+t[n]*r;return a}}function zr(e,t){var n,i=t?t.length:0,a=e?Math.min(i,e.length):0,r=new Array(a),s=new Array(i);for(n=0;n<a;++n)r[n]=Ir(e[n],t[n]);for(;n<i;++n)s[n]=t[n];return function(e){for(n=0;n<a;++n)s[n]=r[n](e);return s}}function jr(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Dr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Pr(e,t){var n,i={},a={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?i[n]=Ir(e[n],t[n]):a[n]=t[n];return function(e){for(n in i)a[n]=i[n](e);return a}}var Wr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fr=new RegExp(Wr.source,"g");function qr(e,t){var n,i,a,r=Wr.lastIndex=Fr.lastIndex=0,s=-1,o=[],l=[];for(e+="",t+="";(n=Wr.exec(e))&&(i=Fr.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:Dr(n,i)})),r=Fr.lastIndex;return r<t.length&&(a=t.slice(r),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,i=0;i<t;++i)o[(n=l[i]).i]=n.x(e);return o.join("")})}function Ir(e,t){var n,i,a=typeof t;return null==t||"boolean"===a?Sr(t):("number"===a?Dr:"string"===a?(n=mr(t))?(t=n,Lr):qr:t instanceof mr?Lr:t instanceof Date?jr:(i=t,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(t)?zr:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Pr:Dr:Rr))(e,t)}function Or(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Br(e){return+e}var Kr=[0,1];function Hr(e){return e}function Ur(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function Gr(e,t,n){var i=e[0],a=e[1],r=t[0],s=t[1];return a<i?(i=Ur(a,i),r=n(s,r)):(i=Ur(i,a),r=n(r,s)),function(e){return r(i(e))}}function Yr(e,t,n){var i=Math.min(e.length,t.length)-1,a=new Array(i),r=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)a[s]=Ur(e[s],e[s+1]),r[s]=n(t[s],t[s+1]);return function(t){var n=Fa(e,t,1,i)-1;return r[n](a[n](t))}}function Vr(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Jr(){var e,t,n,i,a,r,s=Kr,o=Kr,l=Ir,c=Hr;function u(){var e,t,n,l=Math.min(s.length,o.length);return c!==Hr&&(e=s[0],t=s[l-1],e>t&&(n=e,e=t,t=n),c=function(n){return Math.max(e,Math.min(t,n))}),i=l>2?Yr:Gr,a=r=null,h}function h(t){return null==t||isNaN(t=+t)?n:(a||(a=i(s.map(e),o,l)))(e(c(t)))}return h.invert=function(n){return c(t((r||(r=i(o,s.map(e),Dr)))(n)))},h.domain=function(e){return arguments.length?(s=Array.from(e,Br),u()):s.slice()},h.range=function(e){return arguments.length?(o=Array.from(e),u()):o.slice()},h.rangeRound=function(e){return o=Array.from(e),l=Or,u()},h.clamp=function(e){return arguments.length?(c=!!e||Hr,u()):c!==Hr},h.interpolate=function(e){return arguments.length?(l=e,u()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,i){return e=n,t=i,u()}}function Zr(){return Jr()(Hr,Hr)}function Xr(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Qr(e){return(e=Xr(Math.abs(e)))?e[1]:NaN}var es,ts=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ns(e){if(!(t=ts.exec(e)))throw new Error("invalid format: "+e);var t;return new is({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function is(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function as(e,t){var n=Xr(e,t);if(!n)return e+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}ns.prototype=is.prototype,is.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var rs={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>as(100*e,t),r:as,s:function(e,t){var n=Xr(e,t);if(!n)return e+"";var i=n[0],a=n[1],r=a-(es=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,s=i.length;return r===s?i:r>s?i+new Array(r-s+1).join("0"):r>0?i.slice(0,r)+"."+i.slice(r):"0."+new Array(1-r).join("0")+Xr(e,Math.max(0,t+r-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ss(e){return e}var os,ls,cs,us=Array.prototype.map,hs=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ds(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?ss:(t=us.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var a=e.length,r=[],s=0,o=t[0],l=0;a>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),r.push(e.substring(a-=o,a+o)),!((l+=o+1)>i));)o=t[s=(s+1)%t.length];return r.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",r=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?ss:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(us.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"−":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=ns(e)).fill,n=e.align,h=e.sign,d=e.symbol,f=e.zero,p=e.width,g=e.comma,m=e.precision,y=e.trim,v=e.type;"n"===v?(g=!0,v="g"):rs[v]||(void 0===m&&(m=12),y=!0,v="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var x="$"===d?a:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===d?r:/[%p]/.test(v)?l:"",$=rs[v],k=/[defgprs%]/.test(v);function w(e){var a,r,l,d=x,w=b;if("c"===v)w=$(e)+w,e="";else{var _=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:$(Math.abs(e),m),y&&(e=function(e){e:for(var t,n=e.length,i=1,a=-1;i<n;++i)switch(e[i]){case".":a=t=i;break;case"0":0===a&&(a=i),t=i;break;default:if(!+e[i])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),_&&0==+e&&"+"!==h&&(_=!1),d=(_?"("===h?h:c:"-"===h||"("===h?"":h)+d,w=("s"===v?hs[8+es/3]:"")+w+(_&&"("===h?")":""),k)for(a=-1,r=e.length;++a<r;)if(48>(l=e.charCodeAt(a))||l>57){w=(46===l?s+e.slice(a+1):e.slice(a))+w,e=e.slice(0,a);break}}g&&!f&&(e=i(e,1/0));var M=d.length+e.length+w.length,E=M<p?new Array(p-M+1).join(t):"";switch(g&&f&&(e=i(E+e,E.length?p-w.length:1/0),E=""),n){case"<":e=d+e+w+E;break;case"=":e=d+E+e+w;break;case"^":e=E.slice(0,M=E.length>>1)+d+e+w+E.slice(M);break;default:e=E+d+e+w}return o(e)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),w.toString=function(){return e+""},w}return{format:h,formatPrefix:function(e,t){var n=h(((e=ns(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(Qr(t)/3))),a=Math.pow(10,-i),r=hs[8+i/3];return function(e){return n(a*e)+r}}}}function fs(e,t,n,i){var a,r=function(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),r=i/a;return r>=Ba?a*=10:r>=Ka?a*=5:r>=Ha&&(a*=2),t<e?-a:a}(e,t,n);switch((i=ns(null==i?",f":i)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Qr(t)/3)))-Qr(Math.abs(e)))}(r,s))||(i.precision=a),cs(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Qr(t)-Qr(e))+1}(r,Math.max(Math.abs(e),Math.abs(t))))||(i.precision=a-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(a=function(e){return Math.max(0,-Qr(Math.abs(e)))}(r))||(i.precision=a-2*("%"===i.type))}return ls(i)}function ps(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var i,a,r,s,o=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((i=t<e)&&(a=e,e=t,t=a),0===(s=Ua(e,t,n))||!isFinite(s))return[];if(s>0){let n=Math.round(e/s),i=Math.round(t/s);for(n*s<e&&++n,i*s>t&&--i,r=new Array(a=i-n+1);++o<a;)r[o]=(n+o)*s}else{s=-s;let n=Math.round(e*s),i=Math.round(t*s);for(n/s<e&&++n,i/s>t&&--i,r=new Array(a=i-n+1);++o<a;)r[o]=(n+o)/s}return i&&r.reverse(),r}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var i=t();return fs(i[0],i[i.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var i,a,r=t(),s=0,o=r.length-1,l=r[s],c=r[o],u=10;for(c<l&&(a=l,l=c,c=a,a=s,s=o,o=a);u-- >0;){if((a=Ua(l,c,n))===i)return r[s]=l,r[o]=c,t(r);if(a>0)l=Math.floor(l/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,c=Math.floor(c*a)/a}i=a}return e},e}function gs(){var e=Zr();return e.copy=function(){return Vr(e,gs())},Ya.apply(e,arguments),ps(e)}function ms(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ys(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function vs(e){var t=1,n=e(ms(t),ys(t));return n.constant=function(n){return arguments.length?e(ms(t=+n),ys(t)):t},ps(n)}function xs(){var e=vs(Jr());return e.copy=function(){return Vr(e,xs()).constant(e.constant())},Ya.apply(e,arguments)}function bs(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function $s(e){return"[object Date]"===Object.prototype.toString.call(e)}function ks(e,t){if(e===t||e!=e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const n=t.map(((t,n)=>ks(e[n],t)));return e=>n.map((t=>t(e)))}if("object"===n){if(!e||!t)throw new Error("Object cannot be null");if($s(e)&&$s(t)){e=e.getTime();const n=(t=t.getTime())-e;return t=>new Date(e+t*n)}const n=Object.keys(t),i={};return n.forEach((n=>{i[n]=ks(e[n],t[n])})),e=>{const t={};return n.forEach((n=>{t[n]=i[n](e)})),t}}if("number"===n){const n=t-e;return t=>e+t*n}throw new Error(`Cannot interpolate ${n} values`)}function ws(e,i={}){const a=kn(e);let r,s=e;function o(o,l){if(null==e)return a.set(e=o),Promise.resolve();s=o;let c=r,u=!1,{delay:h=0,duration:d=400,easing:f=t,interpolate:p=ks}=n(n({},i),l);if(0===d)return c&&(c.abort(),c=null),a.set(e=s),Promise.resolve();const g=v()+h;let m;return r=function(e){let t;return 0===b.size&&x($),{promise:new Promise((n=>{b.add(t={c:e,f:n})})),abort(){b.delete(t)}}}((t=>{if(t<g)return!0;u||(m=p(e,o),"function"==typeof d&&(d=d(e,o)),u=!0),c&&(c.abort(),c=null);const n=t-g;return n>d?(a.set(e=o),!1):(a.set(e=m(f(n/d))),!0)})),r.promise}return{set:o,update:(t,n)=>o(t(s,e),n),subscribe:a.subscribe}}!function(e){os=ds(e),ls=os.format,cs=os.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});class _s{constructor(e,t,n,i,a){this.items=e,this.radiusFun=t,this.xFun=n,this.padding=i,this.yOffset=a,this.tieBreakFn=this._sfc32(2654435769,608135816,3084996962,1),this.maxR=Math.max(...e.map((e=>t(e)))),this.rng=this._sfc32(1,2,3,1)}calculateYPositions(){let e=this.items.map(((e,t)=>({datum:e,originalIndex:t,x:this.xFun(e),r:this.radiusFun(e)+this.padding,y:null,placed:!1}))).sort(((e,t)=>e.x-t.x));e.forEach((function(e,t){e.index=t}));let t=this.tieBreakFn;e.forEach((function(e){e.tieBreaker=t(e.x)}));let n=[...e].sort(((e,t)=>{let n=this.radiusFun(e.datum)+5*e.tieBreaker,i=this.radiusFun(t.datum)+5*t.tieBreaker;return n!=i?i-n:e.x-t.x}));for(let t of n)t.placed=!0,t.y=this._getBestYPosition(t,e);return e.sort(((e,t)=>e.originalIndex-t.originalIndex)),e.map((e=>({x:e.x,y:e.y+this.yOffset,r:this.radiusFun(e.datum)})))}_sfc32(e,t,n,i){let a=function(){var a=(e>>>=0)+(t>>>=0)|0;return e=t^t>>>9,t=(n>>>=0)+(n<<3)|0,n=(n=n<<21|n>>>11)+(a=a+(i=(i>>>=0)+1|0)|0)|0,(a>>>0)/4294967296};for(let e=0;e<10;e++)a();return a}_getBestYPosition(e,t){let n=[];for(let i of[-1,1]){let a,r=e.r;for(let s=e.index+i;s>=0&&s<t.length&&(a=Math.abs(e.x-t[s].x))<r+this.maxR;s+=i){let e=t[s];if(!e.placed)continue;let i=r+e.r;if(a>=r+e.r)continue;let o=Math.sqrt(i*i-a*a),l=[e.y-o,e.y+o];n.push(l)}}if(0==n.length)return e.r*(this.rng()-.5)*2;let i=n.flat();i.push(0),i.sort(((e,t)=>{let n=Math.abs(e),i=Math.abs(t);return n<i?-1:n>i?1:e-t}));for(let e=0;e<i.length;e++){let t=i[e];if(n.every((e=>t<=e[0]||t>=e[1])))return t}}}function Ms(e,t,n){let i,a,r,s,o,l,c,u,d,f,p,g,m;const{data:y,x:v,y:x,r:b,xGet:$,yGet:k,rGet:w,xScale:_,yScale:M,yRange:E,rRange:T,custom:N,width:S}=U("LayerCake");h(e,y,(e=>n(18,m=e))),h(e,v,(e=>n(16,p=e))),h(e,x,(e=>n(15,f=e))),h(e,b,(e=>n(14,d=e))),h(e,$,(e=>n(23,s=e))),h(e,k,(e=>n(26,c=e))),h(e,w,(e=>n(25,l=e))),h(e,_,(e=>n(21,a=e))),h(e,M,(e=>n(20,i=e))),h(e,E,(e=>n(22,r=e))),h(e,T,(e=>n(24,o=e))),h(e,N,(e=>n(17,g=e))),h(e,S,(e=>n(13,u=e)));let A=g.coords,C=g.type,L=u;return e.$$.update=()=>{516096&e.$$.dirty&&function(e,t,n,u,h,d){let f,p=t.mode,g=t.padding,m=t.animation&&d==L?t.duration:0;if(L=d,"bar"==C)f=e.map(((t,a)=>t.map(((t,r)=>({x:"default"==p||"grouped"==p||("comparison"==p||"stacked"==p)&&0==a?0:n("stacked"==p?e[a-1][r]:t),y:"grouped"==p?c(t)+a*(1/e.length)*i.bandwidth():c(t),w:"default"==p||"grouped"==p||("comparison"==p||"stacked"==p)&&0==a?n(t):"stacked"==p?n(t)-n(e[a-1][r]):0,h:"grouped"==p?i.bandwidth()/e.length:i.bandwidth()})))));else if("column"==C)f=e.map(((t,n)=>t.map(((t,i)=>({x:"grouped"==p&&a.bandwidth?s(t)+n*(1/e.length)*a.bandwidth():"grouped"==p?s(t)[0]+n*(1/e.length)*Math.max(0,s(t)[1]-s(t)[0]):a.bandwidth?s(t):s(t)[0],y:u(t),w:"grouped"==p&&a.bandwidth?a.bandwidth()/e.length:"grouped"==p?Math.max(0,s(t)[1]-s(t)[0])/e.length:a.bandwidth?a.bandwidth():Math.max(0,s(t)[1]-s(t)[0]),h:"default"==p||"grouped"==p||("comparison"==p||"stacked"==p)&&0==n?u(t):"stacked"==p?u(t)-u(e[n-1][i]):0})))));else if("scatter"==C){let t=e=>h?l(e):o[0];f=u?e.map((e=>({x:n(e),y:u(e),r:t(e)}))):new _s(e,(e=>t(e)),(e=>s(e)),g,r[0]/2).calculateYPositions().map((e=>({x:a.invert(e.x),y:i.invert(e.y),r:e.r})))}else"line"==C&&(f=e.map((e=>e.map((e=>({x:n(e),y:u(e)}))))));A.set(f,{duration:m})}(m,g,p,f,d,u)},[y,v,x,b,$,k,w,_,M,E,T,N,S,u,d,f,p,g,m]}class Es extends ke{constructor(e){super(),$e(this,e,Ms,null,o,{})}}function Ts(e,t,n){const i=e.slice();return i[24]=t[n],i[26]=n,i}function Ns(e){let t,n;return{c(){t=T("line"),L(t,"class","gridline svelte-r9f2bw"),L(t,"y1",n=-1*e[17]),L(t,"y2","0"),L(t,"x1","0"),L(t,"x2","0"),j(t,"stroke",e[3]),F(t,"dashed",e[1])},m(e,n){w(e,t,n)},p(e,i){131072&i&&n!==(n=-1*e[17])&&L(t,"y1",n),8&i&&j(t,"stroke",e[3]),2&i&&F(t,"dashed",e[1])},d(e){e&&_(t)}}}function Ss(e){let t,n,i;return{c(){t=T("line"),L(t,"class","tick-mark svelte-r9f2bw"),L(t,"y1",0),L(t,"y2",6),L(t,"x1",n=e[7]||e[13]?e[14].bandwidth()/2:0),L(t,"x2",i=e[7]||e[13]?e[14].bandwidth()/2:0),j(t,"stroke",e[3])},m(e,n){w(e,t,n)},p(e,a){24704&a&&n!==(n=e[7]||e[13]?e[14].bandwidth()/2:0)&&L(t,"x1",n),24704&a&&i!==(i=e[7]||e[13]?e[14].bandwidth()/2:0)&&L(t,"x2",i),8&a&&j(t,"stroke",e[3])},d(e){e&&_(t)}}}function As(e){let t,n,i,a,r,s,o,l,c=(e[26]==e[15].length-1?e[11]+e[5](e[24])+e[12]:e[5](e[24]))+"",u=!1!==e[0]&&Ns(e),h=!0===e[2]&&Ss(e);return{c(){t=T("g"),u&&u.c(),n=A(),h&&h.c(),i=T("text"),a=N(c),L(i,"x",r=e[7]||e[13]?e[14].bandwidth()/2:0),L(i,"y",e[8]),L(i,"dx",e[9]),L(i,"dy",e[10]),L(i,"text-anchor",s=e[21](e[26])),j(i,"fill",e[4]),L(i,"class","svelte-r9f2bw"),L(t,"class",o="tick tick-"+e[24]+" svelte-r9f2bw"),L(t,"transform",l="translate("+e[14](e[24])+","+e[16][0]+")")},m(e,r){w(e,t,r),u&&u.m(t,null),k(t,n),h&&h.m(t,null),k(t,i),k(i,a)},p(e,s){!1!==e[0]?u?u.p(e,s):(u=Ns(e),u.c(),u.m(t,n)):u&&(u.d(1),u=null),!0===e[2]?h?h.p(e,s):(h=Ss(e),h.c(),h.m(t,i)):h&&(h.d(1),h=null),38944&s&&c!==(c=(e[26]==e[15].length-1?e[11]+e[5](e[24])+e[12]:e[5](e[24]))+"")&&R(a,c),24704&s&&r!==(r=e[7]||e[13]?e[14].bandwidth()/2:0)&&L(i,"x",r),256&s&&L(i,"y",e[8]),512&s&&L(i,"dx",e[9]),1024&s&&L(i,"dy",e[10]),16&s&&j(i,"fill",e[4]),32768&s&&o!==(o="tick tick-"+e[24]+" svelte-r9f2bw")&&L(t,"class",o),114688&s&&l!==(l="translate("+e[14](e[24])+","+e[16][0]+")")&&L(t,"transform",l)},d(e){e&&_(t),u&&u.d(),h&&h.d()}}}function Cs(t){let n,i=t[15],a=[];for(let e=0;e<i.length;e+=1)a[e]=As(Ts(t,i,e));return{c(){n=T("g");for(let e=0;e<a.length;e+=1)a[e].c();L(n,"class","axis x-axis svelte-r9f2bw"),F(n,"snapTicks",t[6])},m(e,t){w(e,n,t);for(let e=0;e<a.length;e+=1)a[e].m(n,null)},p(e,[t]){if(2359231&t){let r;for(i=e[15],r=0;r<i.length;r+=1){const s=Ts(e,i,r);a[r]?a[r].p(s,t):(a[r]=As(s),a[r].c(),a[r].m(n,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}64&t&&F(n,"snapTicks",e[6])},i:e,o:e,d(e){e&&_(n),M(a,e)}}}function Ls(e,t,n){let i,a,r,s,o;const{width:l,height:c,xScale:u,yRange:d}=U("LayerCake");h(e,c,(e=>n(17,o=e))),h(e,u,(e=>n(14,r=e))),h(e,d,(e=>n(16,s=e)));let{gridlines:f=!0}=t,{tickDashed:p=!1}=t,{tickMarks:g=!1}=t,{tickColor:m="#bbb"}=t,{textColor:y="#666"}=t,{formatTick:v=(e=>e)}=t,{snapTicks:x=!1}=t,{ticks:b}=t,{xTick:$}=t,{yTick:k=16}=t,{dxTick:w=0}=t,{dyTick:_=0}=t,{prefix:M=""}=t,{suffix:E=""}=t;return e.$$set=e=>{"gridlines"in e&&n(0,f=e.gridlines),"tickDashed"in e&&n(1,p=e.tickDashed),"tickMarks"in e&&n(2,g=e.tickMarks),"tickColor"in e&&n(3,m=e.tickColor),"textColor"in e&&n(4,y=e.textColor),"formatTick"in e&&n(5,v=e.formatTick),"snapTicks"in e&&n(6,x=e.snapTicks),"ticks"in e&&n(22,b=e.ticks),"xTick"in e&&n(7,$=e.xTick),"yTick"in e&&n(8,k=e.yTick),"dxTick"in e&&n(9,w=e.dxTick),"dyTick"in e&&n(10,_=e.dyTick),"prefix"in e&&n(11,M=e.prefix),"suffix"in e&&n(12,E=e.suffix)},e.$$.update=()=>{16384&e.$$.dirty&&n(13,i="function"==typeof r.bandwidth),4218880&e.$$.dirty&&n(15,a=Array.isArray(b)?b:i?r.domain():"function"==typeof b?b(r.ticks()):r.ticks(b))},[f,p,g,m,y,v,x,$,k,w,_,M,E,i,r,a,s,o,c,u,d,function(e){if(!0===x){if(0===e)return"start";if(e===a.length-1)return"end"}return"middle"},b]}class Rs extends ke{constructor(e){super(),$e(this,e,Ls,Cs,o,{gridlines:0,tickDashed:1,tickMarks:2,tickColor:3,textColor:4,formatTick:5,snapTicks:6,ticks:22,xTick:7,yTick:8,dxTick:9,dyTick:10,prefix:11,suffix:12})}}function zs(e,t,n){const i=e.slice();return i[22]=t[n],i[24]=n,i}function js(e){let t,n,i;return{c(){t=T("line"),L(t,"class","gridline svelte-f7wn4m"),L(t,"x2","100%"),L(t,"y1",n=e[7]+(e[13]?e[14].bandwidth()/2:0)),L(t,"y2",i=e[7]+(e[13]?e[14].bandwidth()/2:0)),j(t,"stroke",e[3]),F(t,"dashed",e[2])},m(e,n){w(e,t,n)},p(e,a){24704&a&&n!==(n=e[7]+(e[13]?e[14].bandwidth()/2:0))&&L(t,"y1",n),24704&a&&i!==(i=e[7]+(e[13]?e[14].bandwidth()/2:0))&&L(t,"y2",i),8&a&&j(t,"stroke",e[3]),4&a&&F(t,"dashed",e[2])},d(e){e&&_(t)}}}function Ds(e){let t,n,i,a;return{c(){t=T("line"),L(t,"class","tick-mark svelte-f7wn4m"),L(t,"x1","0"),L(t,"x2",n=e[13]?-6:6),L(t,"y1",i=e[7]+(e[13]?e[14].bandwidth()/2:0)),L(t,"y2",a=e[7]+(e[13]?e[14].bandwidth()/2:0)),j(t,"stroke",e[3])},m(e,n){w(e,t,n)},p(e,r){8192&r&&n!==(n=e[13]?-6:6)&&L(t,"x2",n),24704&r&&i!==(i=e[7]+(e[13]?e[14].bandwidth()/2:0))&&L(t,"y1",i),24704&r&&a!==(a=e[7]+(e[13]?e[14].bandwidth()/2:0))&&L(t,"y2",a),8&r&&j(t,"stroke",e[3])},d(e){e&&_(t)}}}function Ps(e){let t,n,i,a,r,s,o,l,c,u=(e[24]==e[15].length-1?e[11]+e[5](e[22])+e[12]:e[5](e[22]))+"",h=!1!==e[1]&&js(e),d=!0===e[0]&&Ds(e);return{c(){t=T("g"),h&&h.c(),n=A(),d&&d.c(),i=T("text"),a=N(u),L(i,"x",e[6]),L(i,"y",r=e[7]+(e[13]?e[14].bandwidth()/2:0)),L(i,"dx",s=e[13]?-4:e[8]),L(i,"dy",o=e[13]?4:e[9]),j(i,"text-anchor",e[13]?"end":e[10]),j(i,"fill",e[4]),L(t,"class",l="tick tick-"+e[22]+" svelte-f7wn4m"),L(t,"transform",c="translate("+(e[17][0]+(e[13]?e[16].left:0))+", "+e[14](e[22])+")")},m(e,r){w(e,t,r),h&&h.m(t,null),k(t,n),d&&d.m(t,null),k(t,i),k(i,a)},p(e,f){!1!==e[1]?h?h.p(e,f):(h=js(e),h.c(),h.m(t,n)):h&&(h.d(1),h=null),!0===e[0]?d?d.p(e,f):(d=Ds(e),d.c(),d.m(t,i)):d&&(d.d(1),d=null),38944&f&&u!==(u=(e[24]==e[15].length-1?e[11]+e[5](e[22])+e[12]:e[5](e[22]))+"")&&R(a,u),64&f&&L(i,"x",e[6]),24704&f&&r!==(r=e[7]+(e[13]?e[14].bandwidth()/2:0))&&L(i,"y",r),8448&f&&s!==(s=e[13]?-4:e[8])&&L(i,"dx",s),8704&f&&o!==(o=e[13]?4:e[9])&&L(i,"dy",o),9216&f&&j(i,"text-anchor",e[13]?"end":e[10]),16&f&&j(i,"fill",e[4]),32768&f&&l!==(l="tick tick-"+e[22]+" svelte-f7wn4m")&&L(t,"class",l),253952&f&&c!==(c="translate("+(e[17][0]+(e[13]?e[16].left:0))+", "+e[14](e[22])+")")&&L(t,"transform",c)},d(e){e&&_(t),h&&h.d(),d&&d.d()}}}function Ws(t){let n,i,a=t[15],r=[];for(let e=0;e<a.length;e+=1)r[e]=Ps(zs(t,a,e));return{c(){n=T("g");for(let e=0;e<r.length;e+=1)r[e].c();L(n,"class","axis y-axis"),L(n,"transform",i="translate("+-t[16].left+", 0)")},m(e,t){w(e,n,t);for(let e=0;e<r.length;e+=1)r[e].m(n,null)},p(e,[t]){if(262143&t){let i;for(a=e[15],i=0;i<a.length;i+=1){const s=zs(e,a,i);r[i]?r[i].p(s,t):(r[i]=Ps(s),r[i].c(),r[i].m(n,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=a.length}65536&t&&i!==(i="translate("+-e[16].left+", 0)")&&L(n,"transform",i)},i:e,o:e,d(e){e&&_(n),M(r,e)}}}function Fs(e,t,n){let i,a,r,s,o;const{padding:l,xRange:c,yScale:u}=U("LayerCake");h(e,l,(e=>n(16,s=e))),h(e,c,(e=>n(17,o=e))),h(e,u,(e=>n(14,r=e)));let{ticks:d=4}=t,{tickMarks:f=!1}=t,{gridlines:p=!0}=t,{tickDashed:g=!1}=t,{tickColor:m="#bbb"}=t,{textColor:y="#666"}=t,{formatTick:v=(e=>e)}=t,{xTick:x=0}=t,{yTick:b=0}=t,{dxTick:$=0}=t,{dyTick:k=-4}=t,{textAnchor:w="start"}=t,{prefix:_=""}=t,{suffix:M=""}=t;return e.$$set=e=>{"ticks"in e&&n(21,d=e.ticks),"tickMarks"in e&&n(0,f=e.tickMarks),"gridlines"in e&&n(1,p=e.gridlines),"tickDashed"in e&&n(2,g=e.tickDashed),"tickColor"in e&&n(3,m=e.tickColor),"textColor"in e&&n(4,y=e.textColor),"formatTick"in e&&n(5,v=e.formatTick),"xTick"in e&&n(6,x=e.xTick),"yTick"in e&&n(7,b=e.yTick),"dxTick"in e&&n(8,$=e.dxTick),"dyTick"in e&&n(9,k=e.dyTick),"textAnchor"in e&&n(10,w=e.textAnchor),"prefix"in e&&n(11,_=e.prefix),"suffix"in e&&n(12,M=e.suffix)},e.$$.update=()=>{16384&e.$$.dirty&&n(13,i="function"==typeof r.bandwidth),2121728&e.$$.dirty&&n(15,a=Array.isArray(d)?d:i?r.domain():"function"==typeof d?d(r.ticks()):r.ticks(d))},[f,p,g,m,y,v,x,b,$,k,w,_,M,i,r,a,s,o,l,c,u,d]}class qs extends ke{constructor(e){super(),$e(this,e,Fs,Ws,o,{ticks:21,tickMarks:0,gridlines:1,tickDashed:2,tickColor:3,textColor:4,formatTick:5,xTick:6,yTick:7,dxTick:8,dyTick:9,textAnchor:10,prefix:11,suffix:12})}}function Is(e,t,n){const i=e.slice();return i[8]=t[n],i[10]=n,i}function Os(e){let t,n=e[0],i=[];for(let t=0;t<n.length;t+=1)i[t]=Bs(Is(e,n,t));return{c(){t=E("ul");for(let e=0;e<i.length;e+=1)i[e].c();L(t,"class","legend svelte-1w19nmy")},m(e,n){w(e,t,n);for(let e=0;e<i.length;e+=1)i[e].m(t,null)},p(e,a){if(255&a){let r;for(n=e[0],r=0;r<n.length;r+=1){const s=Is(e,n,r);i[r]?i[r].p(s,a):(i[r]=Bs(s),i[r].c(),i[r].m(t,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){e&&_(t),M(i,e)}}}function Bs(e){let t,n,i,a,r,s=e[8]+"";return{c(){t=E("li"),n=E("div"),i=S(),a=N(s),r=S(),L(n,"class","bullet svelte-1w19nmy"),j(n,"background-color",e[1][e[10]]),j(n,"width",(!e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),j(n,"height",(e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),F(n,"round",e[7]),L(t,"class","svelte-1w19nmy")},m(e,s){w(e,t,s),k(t,n),k(t,i),k(t,a),k(t,r)},p(e,t){2&t&&j(n,"background-color",e[1][e[10]]),124&t&&j(n,"width",(!e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),124&t&&j(n,"height",(e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),128&t&&F(n,"round",e[7]),1&t&&s!==(s=e[8]+"")&&R(a,s)},d(e){e&&_(t)}}}function Ks(t){let n,i=Array.isArray(t[0])&&Array.isArray(t[1]),a=i&&Os(t);return{c(){a&&a.c(),n=A()},m(e,t){a&&a.m(e,t),w(e,n,t)},p(e,[t]){3&t&&(i=Array.isArray(e[0])&&Array.isArray(e[1])),i?a?a.p(e,t):(a=Os(e),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i:e,o:e,d(e){a&&a.d(e),e&&_(n)}}}function Hs(e,t,n){let{domain:i=null}=t,{colors:a=null}=t,{line:r=!1}=t,{comparison:s=!1}=t,{horizontal:o=!0}=t,{markerWidth:l=2.5}=t,{markerLength:c=13}=t,{round:u=!1}=t;return e.$$set=e=>{"domain"in e&&n(0,i=e.domain),"colors"in e&&n(1,a=e.colors),"line"in e&&n(2,r=e.line),"comparison"in e&&n(3,s=e.comparison),"horizontal"in e&&n(4,o=e.horizontal),"markerWidth"in e&&n(5,l=e.markerWidth),"markerLength"in e&&n(6,c=e.markerLength),"round"in e&&n(7,u=e.round)},[i,a,r,s,o,l,c,u]}class Us extends ke{constructor(e){super(),$e(this,e,Hs,Ks,o,{domain:0,colors:1,line:2,comparison:3,horizontal:4,markerWidth:5,markerLength:6,round:7})}}function Gs(e){let t,n;const i=e[1].default,a=d(i,e,e[0],null);return{c(){t=E("div"),a&&a.c(),L(t,"class","title svelte-b06b69")},m(e,i){w(e,t,i),a&&a.m(t,null),n=!0},p(e,[t]){a&&a.p&&(!n||1&t)&&g(a,i,e,e[0],n?p(i,e[0],t,null):m(e[0]),null)},i(e){n||(ue(a,e),n=!0)},o(e){he(a,e),n=!1},d(e){e&&_(t),a&&a.d(e)}}}function Ys(e,t,n){let{$$slots:i={},$$scope:a}=t;return e.$$set=e=>{"$$scope"in e&&n(0,a=e.$$scope)},[a,i]}class Vs extends ke{constructor(e){super(),$e(this,e,Ys,Gs,o,{})}}function Js(e){let t,n;const i=e[1].default,a=d(i,e,e[0],null);return{c(){t=E("div"),a&&a.c(),L(t,"class","footer svelte-7jvwfp")},m(e,i){w(e,t,i),a&&a.m(t,null),n=!0},p(e,[t]){a&&a.p&&(!n||1&t)&&g(a,i,e,e[0],n?p(i,e[0],t,null):m(e[0]),null)},i(e){n||(ue(a,e),n=!0)},o(e){he(a,e),n=!1},d(e){e&&_(t),a&&a.d(e)}}}function Zs(e,t,n){let{$$slots:i={},$$scope:a}=t;return e.$$set=e=>{"$$scope"in e&&n(0,a=e.$$scope)},[a,i]}class Xs extends ke{constructor(e){super(),$e(this,e,Zs,Js,o,{})}}function Qs(e,t,n){const i=e.slice();return i[15]=t[n],i[17]=n,i}function eo(e,t,n){const i=e.slice();return i[15]=t[n],i[17]=n,i}function to(e){let t;function n(e,t){return e[3][0]&&e[3][0].x?io:e[3][0]&&e[3][0][0]&&e[3][0][0].x?no:void 0}let i=n(e),a=i&&i(e);return{c(){t=T("g"),a&&a.c(),L(t,"class","label-group")},m(e,n){w(e,t,n),a&&a.m(t,null)},p(e,r){i===(i=n(e))&&a?a.p(e,r):(a&&a.d(1),a=i&&i(e),a&&(a.c(),a.m(t,null)))},d(e){e&&_(t),a&&a.d()}}}function no(e){let t,n=e[3],i=[];for(let t=0;t<n.length;t+=1)i[t]=ro(Qs(e,n,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=A()},m(e,n){for(let t=0;t<i.length;t+=1)i[t].m(e,n);w(e,t,n)},p(e,a){if(12413&a){let r;for(n=e[3],r=0;r<n.length;r+=1){const s=Qs(e,n,r);i[r]?i[r].p(s,a):(i[r]=ro(s),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){M(i,e),e&&_(t)}}}function io(e){let t,n=e[3],i=[];for(let t=0;t<n.length;t+=1)i[t]=lo(eo(e,n,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=A()},m(e,n){for(let t=0;t<i.length;t+=1)i[t].m(e,n);w(e,t,n)},p(e,a){if(12415&a){let r;for(n=e[3],r=0;r<n.length;r+=1){const s=eo(e,n,r);i[r]?i[r].p(s,a):(i[r]=lo(s),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){M(i,e),e&&_(t)}}}function ao(e){let t,n,i,a,r=e[4][e[17]][0][e[13]]+"";return{c(){t=T("text"),n=N(r),L(t,"class","label svelte-gjdahk"),L(t,"transform","translate(2,3)"),L(t,"filter","url(#bgfill)"),L(t,"fill","#333"),L(t,"x",i=e[5](e[15][e[15].length-1].x)),L(t,"y",a=e[6](e[15][e[15].length-1].y))},m(e,i){w(e,t,i),k(t,n)},p(e,s){16&s&&r!==(r=e[4][e[17]][0][e[13]]+"")&&R(n,r),40&s&&i!==(i=e[5](e[15][e[15].length-1].x))&&L(t,"x",i),72&s&&a!==(a=e[6](e[15][e[15].length-1].y))&&L(t,"y",a)},d(e){e&&_(t)}}}function ro(e){let t,n=[e[0],e[2]].includes(e[4][e[17]][0][e[12]]),i=n&&ao(e);return{c(){i&&i.c(),t=A()},m(e,n){i&&i.m(e,n),w(e,t,n)},p(e,a){21&a&&(n=[e[0],e[2]].includes(e[4][e[17]][0][e[12]])),n?i?i.p(e,a):(i=ao(e),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d(e){i&&i.d(e),e&&_(t)}}}function so(e){let t,n=e[1]==e[4][e[17]].unique&&oo(e);return{c(){n&&n.c(),t=A()},m(e,i){n&&n.m(e,i),w(e,t,i)},p(e,i){e[1]==e[4][e[17]].unique?n?n.p(e,i):(n=oo(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&_(t)}}}function oo(e){let t,n,i,a,r,s,o,l,c,u,h,d,f,p,g,m,y=Math.round(10*e[4][e[17]][e[13]])/10+"",v="("+(Math.round(10*e[4][e[17]].change)/10<0?"":"+")+Math.round(10*e[4][e[17]].change)/10+")";return{c(){t=T("rect"),a=T("text"),r=N(e[1]),l=T("text"),c=N(y),d=T("text"),f=N(v),L(t,"fill","rgba(255,255,255,0.8)"),L(t,"x",n=e[5](e[15].x)),L(t,"y",i=e[6](e[15].y)),L(t,"transform","translate(5,-45)"),L(t,"width","150"),L(t,"height","50"),L(t,"rx","15"),L(a,"class","label-bold svelte-gjdahk"),L(a,"transform","translate(10,-25)"),L(a,"fill","#333"),L(a,"x",s=e[5](e[15].x)),L(a,"y",o=e[6](e[15].y)),L(l,"class","label svelte-gjdahk"),L(l,"transform","translate(10,-5)"),L(l,"fill","#333"),L(l,"x",u=e[5](e[15].x)),L(l,"y",h=e[6](e[15].y)),L(d,"class","label svelte-gjdahk"),L(d,"transform","translate(55,-5)"),L(d,"fill",p=Math.round(10*e[4][e[17]].change)/10<0?"#FF0000":"#228C22"),L(d,"x",g=e[5](e[15].x)),L(d,"y",m=e[6](e[15].y))},m(e,n){w(e,t,n),w(e,a,n),k(a,r),w(e,l,n),k(l,c),w(e,d,n),k(d,f)},p(e,x){40&x&&n!==(n=e[5](e[15].x))&&L(t,"x",n),72&x&&i!==(i=e[6](e[15].y))&&L(t,"y",i),2&x&&R(r,e[1]),40&x&&s!==(s=e[5](e[15].x))&&L(a,"x",s),72&x&&o!==(o=e[6](e[15].y))&&L(a,"y",o),16&x&&y!==(y=Math.round(10*e[4][e[17]][e[13]])/10+"")&&R(c,y),40&x&&u!==(u=e[5](e[15].x))&&L(l,"x",u),72&x&&h!==(h=e[6](e[15].y))&&L(l,"y",h),16&x&&v!==(v="("+(Math.round(10*e[4][e[17]].change)/10<0?"":"+")+Math.round(10*e[4][e[17]].change)/10+")")&&R(f,v),16&x&&p!==(p=Math.round(10*e[4][e[17]].change)/10<0?"#FF0000":"#228C22")&&L(d,"fill",p),40&x&&g!==(g=e[5](e[15].x))&&L(d,"x",g),72&x&&m!==(m=e[6](e[15].y))&&L(d,"y",m)},d(e){e&&_(t),e&&_(a),e&&_(l),e&&_(d)}}}function lo(e){let t,n=[e[0],e[2]].includes(e[4][e[17]][e[12]]),i=n&&so(e);return{c(){i&&i.c(),t=A()},m(e,n){i&&i.m(e,n),w(e,t,n)},p(e,a){21&a&&(n=[e[0],e[2]].includes(e[4][e[17]][e[12]])),n?i?i.p(e,a):(i=so(e),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d(e){i&&i.d(e),e&&_(t)}}}function co(t){let n,i=t[3].length==t[4].length&&to(t);return{c(){i&&i.c(),n=A()},m(e,t){i&&i.m(e,t),w(e,n,t)},p(e,[t]){e[3].length==e[4].length?i?i.p(e,t):(i=to(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:e,o:e,d(e){i&&i.d(e),e&&_(n)}}}function uo(e,t,n){let i,a,r,s,o;const{data:l,xScale:c,yScale:u,custom:d}=U("LayerCake");h(e,l,(e=>n(4,r=e))),h(e,c,(e=>n(5,s=e))),h(e,u,(e=>n(6,o=e))),h(e,d,(e=>n(14,i=e)));let{hovered:f=null}=t,{placeLabel:p=null}=t,{selected:g=null}=t,m=i.coords;h(e,m,(e=>n(3,a=e)));let y=i.idKey,v=i.labelKey;return e.$$set=e=>{"hovered"in e&&n(0,f=e.hovered),"placeLabel"in e&&n(1,p=e.placeLabel),"selected"in e&&n(2,g=e.selected)},[f,p,g,a,r,s,o,l,c,u,d,m,y,v]}class ho extends ke{constructor(e){super(),$e(this,e,uo,co,o,{hovered:0,placeLabel:1,selected:2})}}function fo(e,t,n){const i=e.slice();return i[26]=t[n],i[28]=n,i}function po(e,t,n){const i=e.slice();return i[26]=t[n],i[28]=n,i}function go(e){let t,n,i=e[5],a=[];for(let t=0;t<i.length;t+=1)a[t]=mo(po(e,i,t));let r=e[20]&&(e[0]||e[2]||e[3][0])&&yo(e);return{c(){t=T("g");for(let e=0;e<a.length;e+=1)a[e].c();n=A(),r&&r.c(),L(t,"class","scatter-group")},m(e,i){w(e,t,i);for(let e=0;e<a.length;e+=1)a[e].m(t,null);k(t,n),r&&r.m(t,null)},p(e,s){if(4064&s){let r;for(i=e[5],r=0;r<i.length;r+=1){const o=po(e,i,r);a[r]?a[r].p(o,s):(a[r]=mo(o),a[r].c(),a[r].m(t,n))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}e[20]&&(e[0]||e[2]||e[3][0])?r?r.p(e,s):(r=yo(e),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},d(e){e&&_(t),M(a,e),r&&r.d()}}}function mo(e){let t,n,i,a,r;return{c(){t=T("circle"),L(t,"class",""),L(t,"cx",n=e[7](e[26].x)),L(t,"cy",i=e[8](e[26].y)),L(t,"r",a=e[26].r),L(t,"fill",r=e[9]?e[10](e[6][e[28]]):e[11][0])},m(e,n){w(e,t,n)},p(e,s){160&s&&n!==(n=e[7](e[26].x))&&L(t,"cx",n),288&s&&i!==(i=e[8](e[26].y))&&L(t,"cy",i),32&s&&a!==(a=e[26].r)&&L(t,"r",a),3648&s&&r!==(r=e[9]?e[10](e[6][e[28]]):e[11][0])&&L(t,"fill",r)},d(e){e&&_(t)}}}function yo(e){let t,n=e[5],i=[];for(let t=0;t<n.length;t+=1)i[t]=bo(fo(e,n,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=A()},m(e,n){for(let t=0;t<i.length;t+=1)i[t].m(e,n);w(e,t,n)},p(e,a){if(32506367&a){let r;for(n=e[5],r=0;r<n.length;r+=1){const s=fo(e,n,r);i[r]?i[r].p(s,a):(i[r]=bo(s),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){M(i,e),e&&_(t)}}}function vo(e){let t,n=e[1]==e[6][e[28]].unique&&xo(e);return{c(){n&&n.c(),t=A()},m(e,i){n&&n.m(e,i),w(e,t,i)},p(e,i){e[1]==e[6][e[28]].unique?n?n.p(e,i):(n=xo(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&_(t)}}}function xo(e){let t,n,i,a,r,s,o;return{c(){t=T("circle"),L(t,"class",""),L(t,"cx",n=e[7](e[26].x)),L(t,"cy",i=e[8](e[26].y)),L(t,"r",a=e[26].r),L(t,"fill",r=e[4]&&e[6][e[28]][e[20]]==e[2]?e[22]:e[4]&e[3].includes(e[6][e[28]][e[20]])?e[23]:"none"),L(t,"stroke",s=e[6][e[28]][e[20]]==e[0]?e[21]:e[6][e[28]][e[20]]==e[2]?e[22]:e[23]),L(t,"stroke-width",o=e[6][e[28]][e[20]]==e[0]||e[6][e[28]][e[20]]==e[2]||e[3].includes(e[6][e[28]][e[20]])?e[24]:0)},m(e,n){w(e,t,n)},p(e,l){160&l&&n!==(n=e[7](e[26].x))&&L(t,"cx",n),288&l&&i!==(i=e[8](e[26].y))&&L(t,"cy",i),32&l&&a!==(a=e[26].r)&&L(t,"r",a),92&l&&r!==(r=e[4]&&e[6][e[28]][e[20]]==e[2]?e[22]:e[4]&e[3].includes(e[6][e[28]][e[20]])?e[23]:"none")&&L(t,"fill",r),69&l&&s!==(s=e[6][e[28]][e[20]]==e[0]?e[21]:e[6][e[28]][e[20]]==e[2]?e[22]:e[23])&&L(t,"stroke",s),77&l&&o!==(o=e[6][e[28]][e[20]]==e[0]||e[6][e[28]][e[20]]==e[2]||e[3].includes(e[6][e[28]][e[20]])?e[24]:0)&&L(t,"stroke-width",o)},d(e){e&&_(t)}}}function bo(e){let t,n=[e[0],e[2],...e[3]].includes(e[6][e[28]][e[20]]),i=n&&vo(e);return{c(){i&&i.c(),t=A()},m(e,n){i&&i.m(e,n),w(e,t,n)},p(e,a){77&a&&(n=[e[0],e[2],...e[3]].includes(e[6][e[28]][e[20]])),n?i?i.p(e,a):(i=vo(e),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d(e){i&&i.d(e),e&&_(t)}}}function $o(t){let n,i=t[5].length==t[6].length&&go(t);return{c(){i&&i.c(),n=A()},m(e,t){i&&i.m(e,t),w(e,n,t)},p(e,[t]){e[5].length==e[6].length?i?i.p(e,t):(i=go(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:e,o:e,d(e){i&&i.d(e),e&&_(n)}}}function ko(e,t,n){let i,a,r,s,o,l,c,u;const{data:d,z:f,xScale:p,yScale:g,zGet:m,zRange:y,custom:v}=U("LayerCake");h(e,d,(e=>n(6,r=e))),h(e,f,(e=>n(9,l=e))),h(e,p,(e=>n(7,s=e))),h(e,g,(e=>n(8,o=e))),h(e,m,(e=>n(10,c=e))),h(e,y,(e=>n(11,u=e))),h(e,v,(e=>n(25,i=e)));let{hovered:x=null}=t,{placeLabel:b=null}=t,{selected:$=null}=t,{highlighted:k=[]}=t,{overlayFill:w=!1}=t,_=i.coords;h(e,_,(e=>n(5,a=e)));let M=i.idKey,E=i.colorHover?i.colorHover:"orange",T=i.colorSelect?i.colorSelect:"black",N=i.colorHighlight?i.colorHighlight:"black",S=i.lineWidth?i.lineWidth:2;return e.$$set=e=>{"hovered"in e&&n(0,x=e.hovered),"placeLabel"in e&&n(1,b=e.placeLabel),"selected"in e&&n(2,$=e.selected),"highlighted"in e&&n(3,k=e.highlighted),"overlayFill"in e&&n(4,w=e.overlayFill)},[x,b,$,k,w,a,r,s,o,l,c,u,d,f,p,g,m,y,v,_,M,E,T,N,S]}class wo extends ke{constructor(e){super(),$e(this,e,ko,$o,o,{hovered:0,placeLabel:1,selected:2,highlighted:3,overlayFill:4})}}const _o=134217729;function Mo(e,t,n,i,a){let r,s,o,l,c=t[0],u=i[0],h=0,d=0;u>c==u>-c?(r=c,c=t[++h]):(r=u,u=i[++d]);let f=0;if(h<e&&d<n)for(u>c==u>-c?(s=c+r,o=r-(s-c),c=t[++h]):(s=u+r,o=r-(s-u),u=i[++d]),r=s,0!==o&&(a[f++]=o);h<e&&d<n;)u>c==u>-c?(s=r+c,l=s-r,o=r-(s-l)+(c-l),c=t[++h]):(s=r+u,l=s-r,o=r-(s-l)+(u-l),u=i[++d]),r=s,0!==o&&(a[f++]=o);for(;h<e;)s=r+c,l=s-r,o=r-(s-l)+(c-l),c=t[++h],r=s,0!==o&&(a[f++]=o);for(;d<n;)s=r+u,l=s-r,o=r-(s-l)+(u-l),u=i[++d],r=s,0!==o&&(a[f++]=o);return 0===r&&0!==f||(a[f++]=r),f}function Eo(e){return new Float64Array(e)}const To=Eo(4),No=Eo(8),So=Eo(12),Ao=Eo(16),Co=Eo(4);function Lo(e,t,n,i,a,r){const s=(t-r)*(n-a),o=(e-a)*(i-r),l=s-o;if(0===s||0===o||s>0!=o>0)return l;const c=Math.abs(s+o);return Math.abs(l)>=33306690738754716e-32*c?l:-function(e,t,n,i,a,r,s){let o,l,c,u,h,d,f,p,g,m,y,v,x,b,$,k,w,_;const M=e-a,E=n-a,T=t-r,N=i-r;b=M*N,d=_o*M,f=d-(d-M),p=M-f,d=_o*N,g=d-(d-N),m=N-g,$=p*m-(b-f*g-p*g-f*m),k=T*E,d=_o*T,f=d-(d-T),p=T-f,d=_o*E,g=d-(d-E),m=E-g,w=p*m-(k-f*g-p*g-f*m),y=$-w,h=$-y,To[0]=$-(y+h)+(h-w),v=b+y,h=v-b,x=b-(v-h)+(y-h),y=x-k,h=x-y,To[1]=x-(y+h)+(h-k),_=v+y,h=_-v,To[2]=v-(_-h)+(y-h),To[3]=_;let S=function(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}(4,To),A=22204460492503146e-32*s;if(S>=A||-S>=A)return S;if(h=e-M,o=e-(M+h)+(h-a),h=n-E,c=n-(E+h)+(h-a),h=t-T,l=t-(T+h)+(h-r),h=i-N,u=i-(N+h)+(h-r),0===o&&0===l&&0===c&&0===u)return S;if(A=11093356479670487e-47*s+33306690738754706e-32*Math.abs(S),S+=M*u+N*o-(T*c+E*l),S>=A||-S>=A)return S;b=o*N,d=_o*o,f=d-(d-o),p=o-f,d=_o*N,g=d-(d-N),m=N-g,$=p*m-(b-f*g-p*g-f*m),k=l*E,d=_o*l,f=d-(d-l),p=l-f,d=_o*E,g=d-(d-E),m=E-g,w=p*m-(k-f*g-p*g-f*m),y=$-w,h=$-y,Co[0]=$-(y+h)+(h-w),v=b+y,h=v-b,x=b-(v-h)+(y-h),y=x-k,h=x-y,Co[1]=x-(y+h)+(h-k),_=v+y,h=_-v,Co[2]=v-(_-h)+(y-h),Co[3]=_;const C=Mo(4,To,4,Co,No);b=M*u,d=_o*M,f=d-(d-M),p=M-f,d=_o*u,g=d-(d-u),m=u-g,$=p*m-(b-f*g-p*g-f*m),k=T*c,d=_o*T,f=d-(d-T),p=T-f,d=_o*c,g=d-(d-c),m=c-g,w=p*m-(k-f*g-p*g-f*m),y=$-w,h=$-y,Co[0]=$-(y+h)+(h-w),v=b+y,h=v-b,x=b-(v-h)+(y-h),y=x-k,h=x-y,Co[1]=x-(y+h)+(h-k),_=v+y,h=_-v,Co[2]=v-(_-h)+(y-h),Co[3]=_;const L=Mo(C,No,4,Co,So);b=o*u,d=_o*o,f=d-(d-o),p=o-f,d=_o*u,g=d-(d-u),m=u-g,$=p*m-(b-f*g-p*g-f*m),k=l*c,d=_o*l,f=d-(d-l),p=l-f,d=_o*c,g=d-(d-c),m=c-g,w=p*m-(k-f*g-p*g-f*m),y=$-w,h=$-y,Co[0]=$-(y+h)+(h-w),v=b+y,h=v-b,x=b-(v-h)+(y-h),y=x-k,h=x-y,Co[1]=x-(y+h)+(h-k),_=v+y,h=_-v,Co[2]=v-(_-h)+(y-h),Co[3]=_;const R=Mo(L,So,4,Co,Ao);return Ao[R-1]}(e,t,n,i,a,r,c)}const Ro=Math.pow(2,-52),zo=new Uint32Array(512);class jo{static from(e,t=Io,n=Oo){const i=e.length,a=new Float64Array(2*i);for(let r=0;r<i;r++){const i=e[r];a[2*r]=t(i),a[2*r+1]=n(i)}return new jo(a)}constructor(e){const t=e.length>>1;if(t>0&&"number"!=typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:n,_hullTri:i,_hullHash:a}=this,r=e.length>>1;let s=1/0,o=1/0,l=-1/0,c=-1/0;for(let t=0;t<r;t++){const n=e[2*t],i=e[2*t+1];n<s&&(s=n),i<o&&(o=i),n>l&&(l=n),i>c&&(c=i),this._ids[t]=t}const u=(s+l)/2,h=(o+c)/2;let d,f,p,g=1/0;for(let t=0;t<r;t++){const n=Do(u,h,e[2*t],e[2*t+1]);n<g&&(d=t,g=n)}const m=e[2*d],y=e[2*d+1];g=1/0;for(let t=0;t<r;t++){if(t===d)continue;const n=Do(m,y,e[2*t],e[2*t+1]);n<g&&n>0&&(f=t,g=n)}let v=e[2*f],x=e[2*f+1],b=1/0;for(let t=0;t<r;t++){if(t===d||t===f)continue;const n=Wo(m,y,v,x,e[2*t],e[2*t+1]);n<b&&(p=t,b=n)}let $=e[2*p],k=e[2*p+1];if(b===1/0){for(let t=0;t<r;t++)this._dists[t]=e[2*t]-e[0]||e[2*t+1]-e[1];Fo(this._ids,this._dists,0,r-1);const t=new Uint32Array(r);let n=0;for(let e=0,i=-1/0;e<r;e++){const a=this._ids[e];this._dists[a]>i&&(t[n++]=a,i=this._dists[a])}return this.hull=t.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(Lo(m,y,v,x,$,k)<0){const e=f,t=v,n=x;f=p,v=$,x=k,p=e,$=t,k=n}const w=function(e,t,n,i,a,r){const s=n-e,o=i-t,l=a-e,c=r-t,u=s*s+o*o,h=l*l+c*c,d=.5/(s*c-o*l);return{x:e+(c*u-o*h)*d,y:t+(s*h-l*u)*d}}(m,y,v,x,$,k);this._cx=w.x,this._cy=w.y;for(let t=0;t<r;t++)this._dists[t]=Do(e[2*t],e[2*t+1],w.x,w.y);Fo(this._ids,this._dists,0,r-1),this._hullStart=d;let _=3;n[d]=t[p]=f,n[f]=t[d]=p,n[p]=t[f]=d,i[d]=0,i[f]=1,i[p]=2,a.fill(-1),a[this._hashKey(m,y)]=d,a[this._hashKey(v,x)]=f,a[this._hashKey($,k)]=p,this.trianglesLen=0,this._addTriangle(d,f,p,-1,-1,-1);for(let r,s,o=0;o<this._ids.length;o++){const l=this._ids[o],c=e[2*l],u=e[2*l+1];if(o>0&&Math.abs(c-r)<=Ro&&Math.abs(u-s)<=Ro)continue;if(r=c,s=u,l===d||l===f||l===p)continue;let h=0;for(let e=0,t=this._hashKey(c,u);e<this._hashSize&&(h=a[(t+e)%this._hashSize],-1===h||h===n[h]);e++);h=t[h];let g,m=h;for(;g=n[m],Lo(c,u,e[2*m],e[2*m+1],e[2*g],e[2*g+1])>=0;)if(m=g,m===h){m=-1;break}if(-1===m)continue;let y=this._addTriangle(m,l,n[m],-1,-1,i[m]);i[l]=this._legalize(y+2),i[m]=y,_++;let v=n[m];for(;g=n[v],Lo(c,u,e[2*v],e[2*v+1],e[2*g],e[2*g+1])<0;)y=this._addTriangle(v,l,g,i[l],-1,i[v]),i[l]=this._legalize(y+2),n[v]=v,_--,v=g;if(m===h)for(;g=t[m],Lo(c,u,e[2*g],e[2*g+1],e[2*m],e[2*m+1])<0;)y=this._addTriangle(g,l,m,-1,i[m],i[g]),this._legalize(y+2),i[g]=y,n[m]=m,_--,m=g;this._hullStart=t[l]=m,n[m]=t[v]=l,n[l]=v,a[this._hashKey(c,u)]=l,a[this._hashKey(e[2*m],e[2*m+1])]=m}this.hull=new Uint32Array(_);for(let e=0,t=this._hullStart;e<_;e++)this.hull[e]=t,t=n[t];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(function(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:i}=this;let a=0,r=0;for(;;){const s=n[e],o=e-e%3;if(r=o+(e+2)%3,-1===s){if(0===a)break;e=zo[--a];continue}const l=s-s%3,c=o+(e+1)%3,u=l+(s+2)%3,h=t[r],d=t[e],f=t[c],p=t[u];if(Po(i[2*h],i[2*h+1],i[2*d],i[2*d+1],i[2*f],i[2*f+1],i[2*p],i[2*p+1])){t[e]=p,t[s]=h;const i=n[u];if(-1===i){let t=this._hullStart;do{if(this._hullTri[t]===u){this._hullTri[t]=e;break}t=this._hullPrev[t]}while(t!==this._hullStart)}this._link(e,i),this._link(s,n[r]),this._link(r,u);const o=l+(s+1)%3;a<zo.length&&(zo[a++]=o)}else{if(0===a)break;e=zo[--a]}}return r}_link(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}_addTriangle(e,t,n,i,a,r){const s=this.trianglesLen;return this._triangles[s]=e,this._triangles[s+1]=t,this._triangles[s+2]=n,this._link(s,i),this._link(s+1,a),this._link(s+2,r),this.trianglesLen+=3,s}}function Do(e,t,n,i){const a=e-n,r=t-i;return a*a+r*r}function Po(e,t,n,i,a,r,s,o){const l=e-s,c=t-o,u=n-s,h=i-o,d=a-s,f=r-o,p=u*u+h*h,g=d*d+f*f;return l*(h*g-p*f)-c*(u*g-p*d)+(l*l+c*c)*(u*f-h*d)<0}function Wo(e,t,n,i,a,r){const s=n-e,o=i-t,l=a-e,c=r-t,u=s*s+o*o,h=l*l+c*c,d=.5/(s*c-o*l),f=(c*u-o*h)*d,p=(s*h-l*u)*d;return f*f+p*p}function Fo(e,t,n,i){if(i-n<=20)for(let a=n+1;a<=i;a++){const i=e[a],r=t[i];let s=a-1;for(;s>=n&&t[e[s]]>r;)e[s+1]=e[s--];e[s+1]=i}else{let a=n+1,r=i;qo(e,n+i>>1,a),t[e[n]]>t[e[i]]&&qo(e,n,i),t[e[a]]>t[e[i]]&&qo(e,a,i),t[e[n]]>t[e[a]]&&qo(e,n,a);const s=e[a],o=t[s];for(;;){do{a++}while(t[e[a]]<o);do{r--}while(t[e[r]]>o);if(r<a)break;qo(e,a,r)}e[n+1]=e[r],e[r]=s,i-a+1>=r-n?(Fo(e,t,a,i),Fo(e,t,n,r-1)):(Fo(e,t,n,r-1),Fo(e,t,a,i))}}function qo(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Io(e){return e[0]}function Oo(e){return e[1]}const Bo=1e-6;class Ko{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,n){const i=(e=+e)+(n=+n),a=t=+t;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${i},${a}`:(Math.abs(this._x1-i)>Bo||Math.abs(this._y1-a)>Bo)&&(this._+="L"+i+","+a),n&&(this._+=`A${n},${n},0,1,1,${e-n},${t}A${n},${n},0,1,1,${this._x1=i},${this._y1=a}`)}rect(e,t,n,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+n}v${+i}h${-n}Z`}value(){return this._||null}}class Ho{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class Uo{constructor(e,[t,n,i,a]=[0,0,960,500]){if(!((i=+i)>=(t=+t)&&(a=+a)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=i,this.xmin=t,this.ymax=a,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:n},vectors:i}=this,a=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let t,i,r=0,s=0,o=n.length;r<o;r+=3,s+=2){const o=2*n[r],l=2*n[r+1],c=2*n[r+2],u=e[o],h=e[o+1],d=e[l],f=e[l+1],p=e[c],g=e[c+1],m=d-u,y=f-h,v=p-u,x=g-h,b=2*(m*x-y*v);if(Math.abs(b)<1e-9){let a=1e9;const r=2*n[0];a*=Math.sign((e[r]-u)*x-(e[r+1]-h)*v),t=(u+p)/2-a*x,i=(h+g)/2+a*v}else{const e=1/b,n=m*m+y*y,a=v*v+x*x;t=u+(x*n-y*a)*e,i=h+(m*a-v*n)*e}a[s]=t,a[s+1]=i}let r,s,o,l=t[t.length-1],c=4*l,u=e[2*l],h=e[2*l+1];i.fill(0);for(let n=0;n<t.length;++n)l=t[n],r=c,s=u,o=h,c=4*l,u=e[2*l],h=e[2*l+1],i[r+2]=i[c]=o-h,i[r+3]=i[c+1]=u-s}render(e){const t=null==e?e=new Ko:void 0,{delaunay:{halfedges:n,inedges:i,hull:a},circumcenters:r,vectors:s}=this;if(a.length<=1)return null;for(let t=0,i=n.length;t<i;++t){const i=n[t];if(i<t)continue;const a=2*Math.floor(t/3),s=2*Math.floor(i/3),o=r[a],l=r[a+1],c=r[s],u=r[s+1];this._renderSegment(o,l,c,u,e)}let o,l=a[a.length-1];for(let t=0;t<a.length;++t){o=l,l=a[t];const n=2*Math.floor(i[l]/3),c=r[n],u=r[n+1],h=4*o,d=this._project(c,u,s[h+2],s[h+3]);d&&this._renderSegment(c,u,d[0],d[1],e)}return t&&t.value()}renderBounds(e){const t=null==e?e=new Ko:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const n=null==t?t=new Ko:void 0,i=this._clip(e);if(null===i||!i.length)return;t.moveTo(i[0],i[1]);let a=i.length;for(;i[0]===i[a-2]&&i[1]===i[a-1]&&a>1;)a-=2;for(let e=2;e<a;e+=2)i[e]===i[e-2]&&i[e+1]===i[e-1]||t.lineTo(i[e],i[e+1]);return t.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,n=e.length/2;t<n;++t){const e=this.cellPolygon(t);e&&(e.index=t,yield e)}}cellPolygon(e){const t=new Ho;return this.renderCell(e,t),t.value()}_renderSegment(e,t,n,i,a){let r;const s=this._regioncode(e,t),o=this._regioncode(n,i);0===s&&0===o?(a.moveTo(e,t),a.lineTo(n,i)):(r=this._clipSegment(e,t,n,i,s,o))&&(a.moveTo(r[0],r[1]),a.lineTo(r[2],r[3]))}contains(e,t,n){return(t=+t)==t&&(n=+n)==n&&this.delaunay._step(e,t,n)===e}*neighbors(e){const t=this._clip(e);if(t)for(const n of this.delaunay.neighbors(e)){const e=this._clip(n);if(e)e:for(let i=0,a=t.length;i<a;i+=2)for(let r=0,s=e.length;r<s;r+=2)if(t[i]==e[r]&&t[i+1]==e[r+1]&&t[(i+2)%a]==e[(r+s-2)%s]&&t[(i+3)%a]==e[(r+s-1)%s]){yield n;break e}}}_cell(e){const{circumcenters:t,delaunay:{inedges:n,halfedges:i,triangles:a}}=this,r=n[e];if(-1===r)return null;const s=[];let o=r;do{const n=Math.floor(o/3);if(s.push(t[2*n],t[2*n+1]),o=o%3==2?o-2:o+1,a[o]!==e)break;o=i[o]}while(o!==r&&-1!==o);return s}_clip(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(null===t)return null;const{vectors:n}=this,i=4*e;return n[i]||n[i+1]?this._clipInfinite(e,t,n[i],n[i+1],n[i+2],n[i+3]):this._clipFinite(e,t)}_clipFinite(e,t){const n=t.length;let i,a,r,s,o=null,l=t[n-2],c=t[n-1],u=this._regioncode(l,c),h=0;for(let d=0;d<n;d+=2)if(i=l,a=c,l=t[d],c=t[d+1],r=u,u=this._regioncode(l,c),0===r&&0===u)s=h,h=0,o?o.push(l,c):o=[l,c];else{let t,n,d,f,p;if(0===r){if(null===(t=this._clipSegment(i,a,l,c,r,u)))continue;[n,d,f,p]=t}else{if(null===(t=this._clipSegment(l,c,i,a,u,r)))continue;[f,p,n,d]=t,s=h,h=this._edgecode(n,d),s&&h&&this._edge(e,s,h,o,o.length),o?o.push(n,d):o=[n,d]}s=h,h=this._edgecode(f,p),s&&h&&this._edge(e,s,h,o,o.length),o?o.push(f,p):o=[f,p]}if(o)s=h,h=this._edgecode(o[0],o[1]),s&&h&&this._edge(e,s,h,o,o.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return o}_clipSegment(e,t,n,i,a,r){for(;;){if(0===a&&0===r)return[e,t,n,i];if(a&r)return null;let s,o,l=a||r;8&l?(s=e+(n-e)*(this.ymax-t)/(i-t),o=this.ymax):4&l?(s=e+(n-e)*(this.ymin-t)/(i-t),o=this.ymin):2&l?(o=t+(i-t)*(this.xmax-e)/(n-e),s=this.xmax):(o=t+(i-t)*(this.xmin-e)/(n-e),s=this.xmin),a?(e=s,t=o,a=this._regioncode(e,t)):(n=s,i=o,r=this._regioncode(n,i))}}_clipInfinite(e,t,n,i,a,r){let s,o=Array.from(t);if((s=this._project(o[0],o[1],n,i))&&o.unshift(s[0],s[1]),(s=this._project(o[o.length-2],o[o.length-1],a,r))&&o.push(s[0],s[1]),o=this._clipFinite(e,o))for(let t,n=0,i=o.length,a=this._edgecode(o[i-2],o[i-1]);n<i;n+=2)t=a,a=this._edgecode(o[n],o[n+1]),t&&a&&(n=this._edge(e,t,a,o,n),i=o.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(e,t,n,i,a){for(;t!==n;){let n,r;switch(t){case 5:t=4;continue;case 4:t=6,n=this.xmax,r=this.ymin;break;case 6:t=2;continue;case 2:t=10,n=this.xmax,r=this.ymax;break;case 10:t=8;continue;case 8:t=9,n=this.xmin,r=this.ymax;break;case 9:t=1;continue;case 1:t=5,n=this.xmin,r=this.ymin}i[a]===n&&i[a+1]===r||!this.contains(e,n,r)||(i.splice(a,0,n,r),a+=2)}if(i.length>4)for(let e=0;e<i.length;e+=2){const t=(e+2)%i.length,n=(e+4)%i.length;(i[e]===i[t]&&i[t]===i[n]||i[e+1]===i[t+1]&&i[t+1]===i[n+1])&&(i.splice(t,2),e-=2)}return a}_project(e,t,n,i){let a,r,s,o=1/0;if(i<0){if(t<=this.ymin)return null;(a=(this.ymin-t)/i)<o&&(s=this.ymin,r=e+(o=a)*n)}else if(i>0){if(t>=this.ymax)return null;(a=(this.ymax-t)/i)<o&&(s=this.ymax,r=e+(o=a)*n)}if(n>0){if(e>=this.xmax)return null;(a=(this.xmax-e)/n)<o&&(r=this.xmax,s=t+(o=a)*i)}else if(n<0){if(e<=this.xmin)return null;(a=(this.xmin-e)/n)<o&&(r=this.xmin,s=t+(o=a)*i)}return[r,s]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}}const Go=2*Math.PI,Yo=Math.pow;function Vo(e){return e[0]}function Jo(e){return e[1]}function Zo(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Xo{static from(e,t=Vo,n=Jo,i){return new Xo("length"in e?function(e,t,n,i){const a=e.length,r=new Float64Array(2*a);for(let s=0;s<a;++s){const a=e[s];r[2*s]=t.call(i,a,s,e),r[2*s+1]=n.call(i,a,s,e)}return r}(e,t,n,i):Float64Array.from(function*(e,t,n,i){let a=0;for(const r of e)yield t.call(i,r,a,e),yield n.call(i,r,a,e),++a}(e,t,n,i)))}constructor(e){this._delaunator=new jo(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&function(e){const{triangles:t,coords:n}=e;for(let e=0;e<t.length;e+=3){const i=2*t[e],a=2*t[e+1],r=2*t[e+2];if((n[r]-n[i])*(n[a+1]-n[i+1])-(n[a]-n[i])*(n[r+1]-n[i+1])>1e-10)return!1}return!0}(e)){this.collinear=Int32Array.from({length:t.length/2},((e,t)=>t)).sort(((e,n)=>t[2*e]-t[2*n]||t[2*e+1]-t[2*n+1]));const e=this.collinear[0],n=this.collinear[this.collinear.length-1],i=[t[2*e],t[2*e+1],t[2*n],t[2*n+1]],a=1e-8*Math.hypot(i[3]-i[1],i[2]-i[0]);for(let e=0,n=t.length/2;e<n;++e){const n=Zo(t[2*e],t[2*e+1],a);t[2*e]=n[0],t[2*e+1]=n[1]}this._delaunator=new jo(t)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,r=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let e=0,t=n.length;e<t;++e){const t=a[e%3==2?e-2:e+1];-1!==n[e]&&-1!==r[t]||(r[t]=e)}for(let e=0,t=i.length;e<t;++e)s[i[e]]=e;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],r[i[0]]=1,2===i.length&&(r[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(e){return new Uo(this,e)}*neighbors(e){const{inedges:t,hull:n,_hullIndex:i,halfedges:a,triangles:r,collinear:s}=this;if(s){const t=s.indexOf(e);return t>0&&(yield s[t-1]),void(t<s.length-1&&(yield s[t+1]))}const o=t[e];if(-1===o)return;let l=o,c=-1;do{if(yield c=r[l],l=l%3==2?l-2:l+1,r[l]!==e)return;if(l=a[l],-1===l){const t=n[(i[e]+1)%n.length];return void(t!==c&&(yield t))}}while(l!==o)}find(e,t,n=0){if((e=+e)!=e||(t=+t)!=t)return-1;const i=n;let a;for(;(a=this._step(n,e,t))>=0&&a!==n&&a!==i;)n=a;return a}_step(e,t,n){const{inedges:i,hull:a,_hullIndex:r,halfedges:s,triangles:o,points:l}=this;if(-1===i[e]||!l.length)return(e+1)%(l.length>>1);let c=e,u=Yo(t-l[2*e],2)+Yo(n-l[2*e+1],2);const h=i[e];let d=h;do{let i=o[d];const h=Yo(t-l[2*i],2)+Yo(n-l[2*i+1],2);if(h<u&&(u=h,c=i),d=d%3==2?d-2:d+1,o[d]!==e)break;if(d=s[d],-1===d){if(d=a[(r[e]+1)%a.length],d!==i&&Yo(t-l[2*d],2)+Yo(n-l[2*d+1],2)<u)return d;break}}while(d!==h);return c}render(e){const t=null==e?e=new Ko:void 0,{points:n,halfedges:i,triangles:a}=this;for(let t=0,r=i.length;t<r;++t){const r=i[t];if(r<t)continue;const s=2*a[t],o=2*a[r];e.moveTo(n[s],n[s+1]),e.lineTo(n[o],n[o+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t){void 0!==t||e&&"function"==typeof e.moveTo||(t=e,e=null),t=null==t?2:+t;const n=null==e?e=new Ko:void 0,{points:i}=this;for(let n=0,a=i.length;n<a;n+=2){const a=i[n],r=i[n+1];e.moveTo(a+t,r),e.arc(a,r,t,0,Go)}return n&&n.value()}renderHull(e){const t=null==e?e=new Ko:void 0,{hull:n,points:i}=this,a=2*n[0],r=n.length;e.moveTo(i[a],i[a+1]);for(let t=1;t<r;++t){const a=2*n[t];e.lineTo(i[a],i[a+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new Ho;return this.renderHull(e),e.value()}renderTriangle(e,t){const n=null==t?t=new Ko:void 0,{points:i,triangles:a}=this,r=2*a[e*=3],s=2*a[e+1],o=2*a[e+2];return t.moveTo(i[r],i[r+1]),t.lineTo(i[s],i[s+1]),t.lineTo(i[o],i[o+1]),t.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,n=e.length/3;t<n;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new Ho;return this.renderTriangle(e,t),t.value()}}function Qo(e,t,n){const i=e.slice();return i[29]=t[n],i[31]=n,i}function el(e){let t,n=e[1]&&tl(e);return{c(){n&&n.c(),t=A()},m(e,i){n&&n.m(e,i),w(e,t,i)},p(e,i){e[1]?n?n.p(e,i):(n=tl(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&_(t)}}}function tl(e){let t,n=e[2],i=[];for(let t=0;t<n.length;t+=1)i[t]=nl(Qo(e,n,t));return{c(){t=T("g");for(let e=0;e<i.length;e+=1)i[e].c();L(t,"class","voronoi-group")},m(e,n){w(e,t,n);for(let e=0;e<i.length;e+=1)i[e].m(t,null)},p(e,a){if(3078&a[0]){let r;for(n=e[2],r=0;r<n.length;r+=1){const s=Qo(e,n,r);i[r]?i[r].p(s,a):(i[r]=nl(s),i[r].c(),i[r].m(t,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){e&&_(t),M(i,e)}}}function nl(e){let t,n,i,a;function s(...t){return e[21](e[31],...t)}function o(...t){return e[23](e[31],...t)}function l(...t){return e[25](e[31],...t)}return{c(){t=T("path"),L(t,"class","voronoi-cell svelte-169satm"),L(t,"d",n=e[1].renderCell(e[31]))},m(n,r){w(n,t,r),i||(a=[C(t,"mouseover",s),C(t,"mouseleave",e[22]),C(t,"focus",o),C(t,"blur",e[24]),C(t,"click",l)],i=!0)},p(i,a){e=i,2&a[0]&&n!==(n=e[1].renderCell(e[31]))&&L(t,"d",n)},d(e){e&&_(t),i=!1,r(a)}}}function il(t){let n,i=t[0].length==t[2].length&&el(t);return{c(){i&&i.c(),n=A()},m(e,t){i&&i.m(e,t),w(e,n,t)},p(e,t){e[0].length==e[2].length?i?i.p(e,t):(i=el(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:e,o:e,d(e){i&&i.d(e),e&&_(n)}}}function al(e,t,n){let i,a,r,s,o,l,c,u,d;const{data:f,width:p,height:g,custom:m,xScale:y,yScale:v}=U("LayerCake");h(e,f,(e=>n(2,d=e))),h(e,p,(e=>n(18,s=e))),h(e,g,(e=>n(17,r=e))),h(e,m,(e=>n(26,u=e))),h(e,y,(e=>n(20,l=e))),h(e,v,(e=>n(19,o=e)));const x=K();let{hover:b=!1}=t,{hovered:$=null}=t,{select:k=!1}=t,{selected:w=null}=t,_=u.coords;h(e,_,(e=>n(0,c=e)));let M=u.idKey;function E(e,t){b&&(n(12,$=t?t[M]:null),x("hover",{id:$,data:t,event:e}))}function T(e,t){k&&(n(13,w=t?t[M]:null),x("select",{id:w,data:t,event:e}))}return e.$$set=e=>{"hover"in e&&n(14,b=e.hover),"hovered"in e&&n(12,$=e.hovered),"select"in e&&n(15,k=e.select),"selected"in e&&n(13,w=e.selected)},e.$$.update=()=>{1572865&e.$$.dirty[0]&&n(16,i=Array.isArray(c)?c.map((e=>[l(e.x),o(e.y)])):[]),458752&e.$$.dirty[0]&&n(1,a=Xo.from(i).voronoi([0,0,s,r]))},[c,a,d,f,p,g,m,y,v,_,E,T,$,w,b,k,i,r,s,o,l,(e,t)=>E(t,d[e]),e=>E(e,null),(e,t)=>E(t,d[e]),e=>E(e,null),(e,t)=>T(t,d[e])]}class rl extends ke{constructor(e){super(),$e(this,e,al,il,o,{hover:14,hovered:12,select:15,selected:13},null,[-1,-1])}}const sl=e=>({}),ol=e=>({}),ll=e=>({}),cl=e=>({}),ul=e=>({}),hl=e=>({}),dl=e=>({}),fl=e=>({});function pl(e){let t,n;return t=new Vs({props:{$$slots:{default:[gl]},$$scope:{ctx:e}}}),{c(){ye(t.$$.fragment)},m(e,i){ve(t,e,i),n=!0},p(e,n){const i={};4194304&n[0]|134217728&n[1]&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){he(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function gl(e){let t;return{c(){t=N(e[22])},m(e,n){w(e,t,n)},p(e,n){4194304&n[0]&&R(t,e[22])},d(e){e&&_(t)}}}function ml(e){let t,n,i,a,r,s;t=new Es({});const o=e[54].back,l=d(o,e,e[58],hl);a=new ja({props:{pointerEvents:e[30],$$slots:{default:[bl]},$$scope:{ctx:e}}});const c=e[54].front,u=d(c,e,e[58],ol);return{c(){ye(t.$$.fragment),n=S(),l&&l.c(),i=S(),ye(a.$$.fragment),r=S(),u&&u.c()},m(e,o){ve(t,e,o),w(e,n,o),l&&l.m(e,o),w(e,i,o),ve(a,e,o),w(e,r,o),u&&u.m(e,o),s=!0},p(e,t){l&&l.p&&(!s||134217728&t[1])&&g(l,o,e,e[58],s?p(o,e[58],t,ul):m(e[58]),hl);const n={};1073741824&t[0]&&(n.pointerEvents=e[30]),37740609&t[0]|134221487&t[1]&&(n.$$scope={dirty:t,ctx:e}),a.$set(n),u&&u.p&&(!s||134217728&t[1])&&g(u,c,e,e[58],s?p(c,e[58],t,sl):m(e[58]),ol)},i(e){s||(ue(t.$$.fragment,e),ue(l,e),ue(a.$$.fragment,e),ue(u,e),s=!0)},o(e){he(t.$$.fragment,e),he(l,e),he(a.$$.fragment,e),he(u,e),s=!1},d(e){xe(t,e),e&&_(n),l&&l.d(e),e&&_(i),xe(a,e),e&&_(r),u&&u.d(e)}}}function yl(e){let t,n;return t=new Rs({props:{ticks:e[17],formatTick:e[13],snapTicks:e[25],prefix:e[31],suffix:e[32],textColor:e[19],tickColor:e[20],tickDashed:e[21]}}),{c(){ye(t.$$.fragment)},m(e,i){ve(t,e,i),n=!0},p(e,n){const i={};131072&n[0]&&(i.ticks=e[17]),8192&n[0]&&(i.formatTick=e[13]),33554432&n[0]&&(i.snapTicks=e[25]),1&n[1]&&(i.prefix=e[31]),2&n[1]&&(i.suffix=e[32]),524288&n[0]&&(i.textColor=e[19]),1048576&n[0]&&(i.tickColor=e[20]),2097152&n[0]&&(i.tickDashed=e[21]),t.$set(i)},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){he(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function vl(e){let t,n;return t=new qs({props:{ticks:e[18],formatTick:e[14],prefix:e[33],suffix:e[34],textColor:e[19],tickColor:e[20],tickDashed:e[21]}}),{c(){ye(t.$$.fragment)},m(e,i){ve(t,e,i),n=!0},p(e,n){const i={};262144&n[0]&&(i.ticks=e[18]),16384&n[0]&&(i.formatTick=e[14]),4&n[1]&&(i.prefix=e[33]),8&n[1]&&(i.suffix=e[34]),524288&n[0]&&(i.textColor=e[19]),1048576&n[0]&&(i.tickColor=e[20]),2097152&n[0]&&(i.tickDashed=e[21]),t.$set(i)},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){he(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function xl(e){let t,n,i,a;function r(t){e[55](t)}function s(t){e[56](t)}let o={select:e[36],hover:El,highlighted:e[38]};return void 0!==e[0]&&(o.selected=e[0]),void 0!==e[41]&&(o.hovered=e[41]),t=new rl({props:o}),V.push((()=>me(t,"selected",r))),V.push((()=>me(t,"hovered",s))),t.$on("hover",e[46]),t.$on("select",e[57]),{c(){ye(t.$$.fragment)},m(e,n){ve(t,e,n),a=!0},p(e,a){const r={};32&a[1]&&(r.select=e[36]),128&a[1]&&(r.highlighted=e[38]),!n&&1&a[0]&&(n=!0,r.selected=e[0],te((()=>n=!1))),!i&&1024&a[1]&&(i=!0,r.hovered=e[41],te((()=>i=!1))),t.$set(r)},i(e){a||(ue(t.$$.fragment,e),a=!0)},o(e){he(t.$$.fragment,e),a=!1},d(e){xe(t,e)}}}function bl(e){let t,n,i,a,r,s,o,l=e[15]&&yl(e),c=e[16]&&e[6]&&vl(e);i=new wo({props:{selected:e[0],hovered:e[41],placeLabel:e[42],highlighted:e[38],overlayFill:e[40]}});let u=(e[36]||El)&&xl(e),h=function(e){let t,n;return t=new ho({props:{hovered:e[41],placeLabel:e[42],selected:e[0]}}),{c(){ye(t.$$.fragment)},m(e,i){ve(t,e,i),n=!0},p(e,n){const i={};1024&n[1]&&(i.hovered=e[41]),2048&n[1]&&(i.placeLabel=e[42]),1&n[0]&&(i.selected=e[0]),t.$set(i)},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){he(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}(e);const f=e[54].svg,y=d(f,e,e[58],cl);return{c(){l&&l.c(),t=S(),c&&c.c(),n=S(),ye(i.$$.fragment),a=S(),u&&u.c(),r=S(),h&&h.c(),s=S(),y&&y.c()},m(e,d){l&&l.m(e,d),w(e,t,d),c&&c.m(e,d),w(e,n,d),ve(i,e,d),w(e,a,d),u&&u.m(e,d),w(e,r,d),h&&h.m(e,d),w(e,s,d),y&&y.m(e,d),o=!0},p(e,a){e[15]?l?(l.p(e,a),32768&a[0]&&ue(l,1)):(l=yl(e),l.c(),ue(l,1),l.m(t.parentNode,t)):l&&(le(),he(l,1,1,(()=>{l=null})),ce()),e[16]&&e[6]?c?(c.p(e,a),65600&a[0]&&ue(c,1)):(c=vl(e),c.c(),ue(c,1),c.m(n.parentNode,n)):c&&(le(),he(c,1,1,(()=>{c=null})),ce());const s={};1&a[0]&&(s.selected=e[0]),1024&a[1]&&(s.hovered=e[41]),2048&a[1]&&(s.placeLabel=e[42]),128&a[1]&&(s.highlighted=e[38]),512&a[1]&&(s.overlayFill=e[40]),i.$set(s),e[36]||El?u?(u.p(e,a),32&a[1]&&ue(u,1)):(u=xl(e),u.c(),ue(u,1),u.m(r.parentNode,r)):u&&(le(),he(u,1,1,(()=>{u=null})),ce()),h.p(e,a),y&&y.p&&(!o||134217728&a[1])&&g(y,f,e,e[58],o?p(f,e[58],a,ll):m(e[58]),cl)},i(e){o||(ue(l),ue(c),ue(i.$$.fragment,e),ue(u),ue(h),ue(y,e),o=!0)},o(e){he(l),he(c),he(i.$$.fragment,e),he(u),he(h),he(y,e),o=!1},d(e){l&&l.d(e),e&&_(t),c&&c.d(e),e&&_(n),xe(i,e),e&&_(a),u&&u.d(e),e&&_(r),h&&h.d(e),e&&_(s),y&&y.d(e)}}}function $l(e){let t,n,i=e[65]>80&&ml(e);return{c(){i&&i.c(),t=A()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,n){e[65]>80?i?(i.p(e,n),8&n[2]&&ue(i,1)):(i=ml(e),i.c(),ue(i,1),i.m(t.parentNode,t)):i&&(le(),he(i,1,1,(()=>{i=null})),ce())},i(e){n||(ue(i),n=!0)},o(e){he(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function kl(e){let t,n;return t=new Us({props:{domain:e[44],colors:e[28],markerLength:13,round:!0}}),{c(){ye(t.$$.fragment)},m(e,i){ve(t,e,i),n=!0},p(e,n){const i={};8192&n[1]&&(i.domain=e[44]),268435456&n[0]&&(i.colors=e[28]),t.$set(i)},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){he(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function wl(e){let t,n;return t=new Xs({props:{$$slots:{default:[_l]},$$scope:{ctx:e}}}),{c(){ye(t.$$.fragment)},m(e,i){ve(t,e,i),n=!0},p(e,n){const i={};8388608&n[0]|134217728&n[1]&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){he(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function _l(e){let t;return{c(){t=N(e[23])},m(e,n){w(e,t,n)},p(e,n){8388608&n[0]&&R(t,e[23])},d(e){e&&_(t)}}}function Ml(e){let t,n,i,a,r,s,o,l,c=e[22]&&pl(e);const u=e[54].options,h=d(u,e,e[58],fl);a=new wa({props:{padding:e[26],x:e[5],y:e[6],z:e[7],r:e[8],xScale:"log"==e[11]?xs():gs(),yScale:"log"==e[12]?xs():gs(),zScale:Ja(),xDomain:e[43],yDomain:e[45],zDomain:e[44],zRange:e[28],rRange:Array.isArray(e[29])?e[29]:[e[29],e[29]],data:e[1],xPadding:[e[27],e[27]],yPadding:e[6]?[e[27],e[27]]:null,custom:{type:"scatter",idKey:e[9],labelKey:e[10],coords:e[47],colorSelect:e[37],colorHover:e[35],colorHighlight:e[39],padding:1,animation:e[3],duration:e[4]},$$slots:{default:[$l,({width:e})=>({65:e}),({width:e})=>[0,0,e?8:0]]},$$scope:{ctx:e}}});let f=e[24]&&e[44]&&kl(e),y=e[23]&&wl(e);return{c(){c&&c.c(),t=S(),h&&h.c(),n=S(),i=E("div"),ye(a.$$.fragment),r=S(),f&&f.c(),s=S(),y&&y.c(),o=A(),L(i,"class","chart-container svelte-1dnlmiu"),j(i,"height","number"==typeof e[2]?e[2]+"px":e[2])},m(e,u){c&&c.m(e,u),w(e,t,u),h&&h.m(e,u),w(e,n,u),w(e,i,u),ve(a,i,null),w(e,r,u),f&&f.m(e,u),w(e,s,u),y&&y.m(e,u),w(e,o,u),l=!0},p(e,n){e[22]?c?(c.p(e,n),4194304&n[0]&&ue(c,1)):(c=pl(e),c.c(),ue(c,1),c.m(t.parentNode,t)):c&&(le(),he(c,1,1,(()=>{c=null})),ce()),h&&h.p&&(!l||134217728&n[1])&&g(h,u,e,e[58],l?p(u,e[58],n,dl):m(e[58]),fl);const r={};67108864&n[0]&&(r.padding=e[26]),32&n[0]&&(r.x=e[5]),64&n[0]&&(r.y=e[6]),128&n[0]&&(r.z=e[7]),256&n[0]&&(r.r=e[8]),2048&n[0]&&(r.xScale="log"==e[11]?xs():gs()),4096&n[0]&&(r.yScale="log"==e[12]?xs():gs()),4096&n[1]&&(r.xDomain=e[43]),16384&n[1]&&(r.yDomain=e[45]),8192&n[1]&&(r.zDomain=e[44]),268435456&n[0]&&(r.zRange=e[28]),536870912&n[0]&&(r.rRange=Array.isArray(e[29])?e[29]:[e[29],e[29]]),2&n[0]&&(r.data=e[1]),134217728&n[0]&&(r.xPadding=[e[27],e[27]]),134217792&n[0]&&(r.yPadding=e[6]?[e[27],e[27]]:null),1560&n[0]|336&n[1]&&(r.custom={type:"scatter",idKey:e[9],labelKey:e[10],coords:e[47],colorSelect:e[37],colorHover:e[35],colorHighlight:e[39],padding:1,animation:e[3],duration:e[4]}),1111482433&n[0]|134221487&n[1]|8&n[2]&&(r.$$scope={dirty:n,ctx:e}),a.$set(r),(!l||4&n[0])&&j(i,"height","number"==typeof e[2]?e[2]+"px":e[2]),e[24]&&e[44]?f?(f.p(e,n),16777216&n[0]|8192&n[1]&&ue(f,1)):(f=kl(e),f.c(),ue(f,1),f.m(s.parentNode,s)):f&&(le(),he(f,1,1,(()=>{f=null})),ce()),e[23]?y?(y.p(e,n),8388608&n[0]&&ue(y,1)):(y=wl(e),y.c(),ue(y,1),y.m(o.parentNode,o)):y&&(le(),he(y,1,1,(()=>{y=null})),ce())},i(e){l||(ue(c),ue(h,e),ue(a.$$.fragment,e),ue(f),ue(y),l=!0)},o(e){he(c),he(h,e),he(a.$$.fragment,e),he(f),he(y),l=!1},d(e){c&&c.d(e),e&&_(t),h&&h.d(e),e&&_(n),e&&_(i),xe(a),e&&_(r),f&&f.d(e),e&&_(s),y&&y.d(e),e&&_(o)}}}let El=!0;function Tl(e,t,n,i){let a=e.map((e=>e[t]));return[n||(a[0]?Math.min(...a):-1),i||(a[0]?Math.max(...a):1)]}function Nl(e,t,n){let i,a,{$$slots:r={},$$scope:s}=t,{data:o}=t,{height:l=250}=t,{animation:c=!1}=t,{duration:u=800}=t,{xKey:d="x"}=t,{yKey:f=null}=t,{zKey:p=null}=t,{rKey:g=null}=t,{idKey:m=d}=t,{labelKey:y=m}=t,{xScale:v="linear"}=t,{yScale:x="linear"}=t,{xFormatTick:b=(e=>e)}=t,{yFormatTick:$=(e=>e)}=t,{xMax:k=null}=t,{xMin:w=null}=t,{yMax:_=null}=t,{yMin:M=null}=t,{xAxis:E=!0}=t,{yAxis:T=!0}=t,{xTicks:N=4}=t,{yTicks:S=4}=t,{textColor:A="#666"}=t,{tickColor:C="#ccc"}=t,{tickDashed:L=!1}=t,{title:R=null}=t,{footer:z=null}=t,{legend:j=!1}=t,{snapTicks:D=!1}=t,{padding:P={top:0,bottom:20,left:35,right:0}}=t,{buffer:W=5}=t,{color:F=null}=t,{colors:q=(F?[F]:["#3C388E","#DF0667","#00A3A6","#206095","#A8BD3A","#003C57","#27A0CC","#118C7B","#F66068","#746CB1","#22D0B6","lightgrey"])}=t,{r:I=4}=t,{interactive:O=!0}=t,{xPrefix:B=""}=t,{xSuffix:K=""}=t,{yPrefix:H=""}=t,{ySuffix:U=""}=t,{colorHover:Y="orange"}=t,{select:V=!1}=t,{selected:J=null}=t,{colorSelect:Z="black"}=t,{highlighted:X=[]}=t,{colorHighlight:Q="black"}=t,{overlayFill:ee=!1}=t,te=null,ne=!0;const ie={duration:u,easing:bs},ae=ws(void 0,ie),re=(e,t,n)=>n.indexOf(e)==t;let se=Tl(o,d,w,k);const oe=ws(se,ie);let le=Tl(o,f,M,_);const ce=ws(le,ie);return h(e,ce,(e=>n(45,a=e))),e.$$set=e=>{"data"in e&&n(1,o=e.data),"height"in e&&n(2,l=e.height),"animation"in e&&n(3,c=e.animation),"duration"in e&&n(4,u=e.duration),"xKey"in e&&n(5,d=e.xKey),"yKey"in e&&n(6,f=e.yKey),"zKey"in e&&n(7,p=e.zKey),"rKey"in e&&n(8,g=e.rKey),"idKey"in e&&n(9,m=e.idKey),"labelKey"in e&&n(10,y=e.labelKey),"xScale"in e&&n(11,v=e.xScale),"yScale"in e&&n(12,x=e.yScale),"xFormatTick"in e&&n(13,b=e.xFormatTick),"yFormatTick"in e&&n(14,$=e.yFormatTick),"xMax"in e&&n(49,k=e.xMax),"xMin"in e&&n(50,w=e.xMin),"yMax"in e&&n(51,_=e.yMax),"yMin"in e&&n(52,M=e.yMin),"xAxis"in e&&n(15,E=e.xAxis),"yAxis"in e&&n(16,T=e.yAxis),"xTicks"in e&&n(17,N=e.xTicks),"yTicks"in e&&n(18,S=e.yTicks),"textColor"in e&&n(19,A=e.textColor),"tickColor"in e&&n(20,C=e.tickColor),"tickDashed"in e&&n(21,L=e.tickDashed),"title"in e&&n(22,R=e.title),"footer"in e&&n(23,z=e.footer),"legend"in e&&n(24,j=e.legend),"snapTicks"in e&&n(25,D=e.snapTicks),"padding"in e&&n(26,P=e.padding),"buffer"in e&&n(27,W=e.buffer),"color"in e&&n(53,F=e.color),"colors"in e&&n(28,q=e.colors),"r"in e&&n(29,I=e.r),"interactive"in e&&n(30,O=e.interactive),"xPrefix"in e&&n(31,B=e.xPrefix),"xSuffix"in e&&n(32,K=e.xSuffix),"yPrefix"in e&&n(33,H=e.yPrefix),"ySuffix"in e&&n(34,U=e.ySuffix),"colorHover"in e&&n(35,Y=e.colorHover),"select"in e&&n(36,V=e.select),"selected"in e&&n(0,J=e.selected),"colorSelect"in e&&n(37,Z=e.colorSelect),"highlighted"in e&&n(38,X=e.highlighted),"colorHighlight"in e&&n(39,Q=e.colorHighlight),"overlayFill"in e&&n(40,ee=e.overlayFill),"$$scope"in e&&n(58,s=e.$$scope)},e.$$.update=()=>{34&e.$$.dirty[0]|786432&e.$$.dirty[1]&&function(e,t,i,a){let r=Tl(e,t,i,a);r[0]==se[0]&&r[1]==se[1]||(oe.set(r),n(43,se=r))}(o,d,w,k),66&e.$$.dirty[0]|3145728&e.$$.dirty[1]&&function(e,t,n,i){let a=t?Tl(e,t,n,i):le;a[0]==le[0]&&a[1]==le[1]||(ce.set(a,{duration:c?u:0}),le=a)}(o,f,M,_),130&e.$$.dirty[0]&&n(44,i=p?o.map((e=>e[p])).filter(re):null)},[J,o,l,c,u,d,f,p,g,m,y,v,x,b,$,E,T,N,S,A,C,L,R,z,j,D,P,W,q,I,O,B,K,H,U,Y,V,Z,X,Q,ee,te,ne,se,i,a,function(e){n(41,te=e.detail.id),te&&n(42,ne=e.detail.data.unique)},ae,ce,k,w,_,M,F,r,function(e){J=e,n(0,J)},function(e){te=e,n(41,te)},function(t){G.call(this,e,t)},s]}class Sl extends ke{constructor(e){super(),$e(this,e,Nl,Ml,o,{data:1,height:2,animation:3,duration:4,xKey:5,yKey:6,zKey:7,rKey:8,idKey:9,labelKey:10,xScale:11,yScale:12,xFormatTick:13,yFormatTick:14,xMax:49,xMin:50,yMax:51,yMin:52,xAxis:15,yAxis:16,xTicks:17,yTicks:18,textColor:19,tickColor:20,tickDashed:21,title:22,footer:23,legend:24,snapTicks:25,padding:26,buffer:27,color:53,colors:28,r:29,interactive:30,xPrefix:31,xSuffix:32,yPrefix:33,ySuffix:34,colorHover:35,select:36,selected:0,colorSelect:37,highlighted:38,colorHighlight:39,overlayFill:40},null,[-1,-1,-1])}get data(){return this.$$.ctx[1]}set data(e){this.$$set({data:e}),ae()}get height(){return this.$$.ctx[2]}set height(e){this.$$set({height:e}),ae()}get animation(){return this.$$.ctx[3]}set animation(e){this.$$set({animation:e}),ae()}get duration(){return this.$$.ctx[4]}set duration(e){this.$$set({duration:e}),ae()}get xKey(){return this.$$.ctx[5]}set xKey(e){this.$$set({xKey:e}),ae()}get yKey(){return this.$$.ctx[6]}set yKey(e){this.$$set({yKey:e}),ae()}get zKey(){return this.$$.ctx[7]}set zKey(e){this.$$set({zKey:e}),ae()}get rKey(){return this.$$.ctx[8]}set rKey(e){this.$$set({rKey:e}),ae()}get idKey(){return this.$$.ctx[9]}set idKey(e){this.$$set({idKey:e}),ae()}get labelKey(){return this.$$.ctx[10]}set labelKey(e){this.$$set({labelKey:e}),ae()}get xScale(){return this.$$.ctx[11]}set xScale(e){this.$$set({xScale:e}),ae()}get yScale(){return this.$$.ctx[12]}set yScale(e){this.$$set({yScale:e}),ae()}get xFormatTick(){return this.$$.ctx[13]}set xFormatTick(e){this.$$set({xFormatTick:e}),ae()}get yFormatTick(){return this.$$.ctx[14]}set yFormatTick(e){this.$$set({yFormatTick:e}),ae()}get xMax(){return this.$$.ctx[49]}set xMax(e){this.$$set({xMax:e}),ae()}get xMin(){return this.$$.ctx[50]}set xMin(e){this.$$set({xMin:e}),ae()}get yMax(){return this.$$.ctx[51]}set yMax(e){this.$$set({yMax:e}),ae()}get yMin(){return this.$$.ctx[52]}set yMin(e){this.$$set({yMin:e}),ae()}get xAxis(){return this.$$.ctx[15]}set xAxis(e){this.$$set({xAxis:e}),ae()}get yAxis(){return this.$$.ctx[16]}set yAxis(e){this.$$set({yAxis:e}),ae()}get xTicks(){return this.$$.ctx[17]}set xTicks(e){this.$$set({xTicks:e}),ae()}get yTicks(){return this.$$.ctx[18]}set yTicks(e){this.$$set({yTicks:e}),ae()}get textColor(){return this.$$.ctx[19]}set textColor(e){this.$$set({textColor:e}),ae()}get tickColor(){return this.$$.ctx[20]}set tickColor(e){this.$$set({tickColor:e}),ae()}get tickDashed(){return this.$$.ctx[21]}set tickDashed(e){this.$$set({tickDashed:e}),ae()}get title(){return this.$$.ctx[22]}set title(e){this.$$set({title:e}),ae()}get footer(){return this.$$.ctx[23]}set footer(e){this.$$set({footer:e}),ae()}get legend(){return this.$$.ctx[24]}set legend(e){this.$$set({legend:e}),ae()}get snapTicks(){return this.$$.ctx[25]}set snapTicks(e){this.$$set({snapTicks:e}),ae()}get padding(){return this.$$.ctx[26]}set padding(e){this.$$set({padding:e}),ae()}get buffer(){return this.$$.ctx[27]}set buffer(e){this.$$set({buffer:e}),ae()}get color(){return this.$$.ctx[53]}set color(e){this.$$set({color:e}),ae()}get colors(){return this.$$.ctx[28]}set colors(e){this.$$set({colors:e}),ae()}get r(){return this.$$.ctx[29]}set r(e){this.$$set({r:e}),ae()}get interactive(){return this.$$.ctx[30]}set interactive(e){this.$$set({interactive:e}),ae()}get xPrefix(){return this.$$.ctx[31]}set xPrefix(e){this.$$set({xPrefix:e}),ae()}get xSuffix(){return this.$$.ctx[32]}set xSuffix(e){this.$$set({xSuffix:e}),ae()}get yPrefix(){return this.$$.ctx[33]}set yPrefix(e){this.$$set({yPrefix:e}),ae()}get ySuffix(){return this.$$.ctx[34]}set ySuffix(e){this.$$set({ySuffix:e}),ae()}get colorHover(){return this.$$.ctx[35]}set colorHover(e){this.$$set({colorHover:e}),ae()}get select(){return this.$$.ctx[36]}set select(e){this.$$set({select:e}),ae()}get selected(){return this.$$.ctx[0]}set selected(e){this.$$set({selected:e}),ae()}get colorSelect(){return this.$$.ctx[37]}set colorSelect(e){this.$$set({colorSelect:e}),ae()}get highlighted(){return this.$$.ctx[38]}set highlighted(e){this.$$set({highlighted:e}),ae()}get colorHighlight(){return this.$$.ctx[39]}set colorHighlight(e){this.$$set({colorHighlight:e}),ae()}get overlayFill(){return this.$$.ctx[40]}set overlayFill(e){this.$$set({overlayFill:e}),ae()}}function Al(e,t,n){const i=e.slice();return i[23]=t[n],i[25]=n,i}function Cl(e){let t,n,i=e[15],a=[];for(let t=0;t<i.length;t+=1)a[t]=jl(Al(e,i,t));return{c(){t=T("g");for(let e=0;e<a.length;e+=1)a[e].c();L(t,"class","axis y-axis"),L(t,"transform",n="translate("+-e[16].left+", 0)")},m(e,n){w(e,t,n);for(let e=0;e<a.length;e+=1)a[e].m(t,null)},p(e,r){if(258047&r){let n;for(i=e[15],n=0;n<i.length;n+=1){const s=Al(e,i,n);a[n]?a[n].p(s,r):(a[n]=jl(s),a[n].c(),a[n].m(t,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=i.length}65536&r&&n!==(n="translate("+-e[16].left+", 0)")&&L(t,"transform",n)},d(e){e&&_(t),M(a,e)}}}function Ll(e){let t,n,i;return{c(){t=T("line"),L(t,"x2","100%"),L(t,"y1",n=e[5]+(e[13]?e[14].bandwidth()/2:0)),L(t,"y2",i=e[5]+(e[13]?e[14].bandwidth()/2:0)),L(t,"stroke",e[9]),L(t,"class","svelte-1ypvook"),F(t,"baseline",e[11])},m(e,n){w(e,t,n)},p(e,a){24608&a&&n!==(n=e[5]+(e[13]?e[14].bandwidth()/2:0))&&L(t,"y1",n),24608&a&&i!==(i=e[5]+(e[13]?e[14].bandwidth()/2:0))&&L(t,"y2",i),512&a&&L(t,"stroke",e[9]),2048&a&&F(t,"baseline",e[11])},d(e){e&&_(t)}}}function Rl(e){let t,n=e[3](e[23])+"";return{c(){t=N(n)},m(e,n){w(e,t,n)},p(e,i){32776&i&&n!==(n=e[3](e[23])+"")&&R(t,n)},d(e){e&&_(t)}}}function zl(e){let t,n,i,a=e[3](e[23])+"";return{c(){t=N(e[0]),n=N(a),i=N(e[1])},m(e,a){w(e,t,a),w(e,n,a),w(e,i,a)},p(e,r){1&r&&R(t,e[0]),32776&r&&a!==(a=e[3](e[23])+"")&&R(n,a),2&r&&R(i,e[1])},d(e){e&&_(t),e&&_(n),e&&_(i)}}}function jl(e){let t,n,i,a,r,s,o,l,c=!1!==e[2]&&Ll(e);function u(e,t){return e[25]==e[15].length-1?zl:Rl}let h=u(e),d=h(e);return{c(){t=T("g"),c&&c.c(),n=T("text"),d.c(),L(n,"x",i=e[4]-10),L(n,"y",a=e[5]+(e[13]?e[14].bandwidth()/2:0)-3),L(n,"dx",r=e[13]?3:e[6]),L(n,"dy",s=e[13]?4:e[7]),L(n,"fill",e[10]),j(n,"text-anchor",e[13]?"end":e[8]),L(t,"class",o="tick tick-"+e[23]+" svelte-1ypvook"),L(t,"transform",l="translate("+(e[17][0]+(e[13]?e[16].left:0))+", "+e[14](e[23])+")")},m(e,i){w(e,t,i),c&&c.m(t,null),k(t,n),d.m(n,null)},p(e,f){!1!==e[2]?c?c.p(e,f):(c=Ll(e),c.c(),c.m(t,n)):c&&(c.d(1),c=null),h===(h=u(e))&&d?d.p(e,f):(d.d(1),d=h(e),d&&(d.c(),d.m(n,null))),16&f&&i!==(i=e[4]-10)&&L(n,"x",i),24608&f&&a!==(a=e[5]+(e[13]?e[14].bandwidth()/2:0)-3)&&L(n,"y",a),8256&f&&r!==(r=e[13]?3:e[6])&&L(n,"dx",r),8320&f&&s!==(s=e[13]?4:e[7])&&L(n,"dy",s),1024&f&&L(n,"fill",e[10]),8448&f&&j(n,"text-anchor",e[13]?"end":e[8]),32768&f&&o!==(o="tick tick-"+e[23]+" svelte-1ypvook")&&L(t,"class",o),253952&f&&l!==(l="translate("+(e[17][0]+(e[13]?e[16].left:0))+", "+e[14](e[23])+")")&&L(t,"transform",l)},d(e){e&&_(t),c&&c.d(),d.d()}}}function Dl(t){let n,i=0==t[12]&&Cl(t);return{c(){i&&i.c(),n=A()},m(e,t){i&&i.m(e,t),w(e,n,t)},p(e,[t]){0==e[12]?i?i.p(e,t):(i=Cl(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:e,o:e,d(e){i&&i.d(e),e&&_(n)}}}function Pl(e,t,n){let i,a,r,s,o;const{padding:l,xRange:c,xScale:u,yScale:d}=U("LayerCake");h(e,l,(e=>n(16,s=e))),h(e,c,(e=>n(17,o=e))),h(e,d,(e=>n(14,r=e)));let{ticks:f=4}=t,{prefix:p=""}=t,{suffix:g=""}=t,{gridlines:m=!1}=t,{formatTick:y=(e=>e)}=t,{xTick:v=0}=t,{yTick:x=0}=t,{dxTick:b=0}=t,{dyTick:$=-4}=t,{textAnchor:k="start"}=t,{lineColor:w="#aaa"}=t,{textColor:_="#666"}=t,{solid:M=!1}=t,{nu:E}=t;return e.$$set=e=>{"ticks"in e&&n(21,f=e.ticks),"prefix"in e&&n(0,p=e.prefix),"suffix"in e&&n(1,g=e.suffix),"gridlines"in e&&n(2,m=e.gridlines),"formatTick"in e&&n(3,y=e.formatTick),"xTick"in e&&n(4,v=e.xTick),"yTick"in e&&n(5,x=e.yTick),"dxTick"in e&&n(6,b=e.dxTick),"dyTick"in e&&n(7,$=e.dyTick),"textAnchor"in e&&n(8,k=e.textAnchor),"lineColor"in e&&n(9,w=e.lineColor),"textColor"in e&&n(10,_=e.textColor),"solid"in e&&n(11,M=e.solid),"nu"in e&&n(12,E=e.nu)},e.$$.update=()=>{16384&e.$$.dirty&&n(13,i="function"==typeof r.bandwidth),2121728&e.$$.dirty&&n(15,a=Array.isArray(f)?f:i?r.domain():r.ticks(f))},[p,g,m,y,v,x,b,$,k,w,_,M,E,i,r,a,s,o,l,c,d,f]}class Wl extends ke{constructor(e){super(),$e(this,e,Pl,Dl,o,{ticks:21,prefix:0,suffix:1,gridlines:2,formatTick:3,xTick:4,yTick:5,dxTick:6,dyTick:7,textAnchor:8,lineColor:9,textColor:10,solid:11,nu:12})}}function Fl(e){let t;return{c(){t=T("line"),L(t,"class","baseline svelte-ej8ad5"),L(t,"y1",e[9]),L(t,"y2","0"),L(t,"x1","0"),L(t,"x2","0"),L(t,"stroke",e[5])},m(e,n){w(e,t,n)},p(e,n){512&n&&L(t,"y1",e[9]),32&n&&L(t,"stroke",e[5])},d(e){e&&_(t)}}}function ql(t){let n,i,a,r,s,o,l,c,u,h,d=!0===t[0]&&Fl(t);return{c(){n=T("g"),i=T("g"),a=T("line"),o=T("text"),l=N("15%\n\t"),d&&d.c(),L(a,"y1",r=-1*t[9]),L(a,"y2",s=-1*t[9]+t[9]),L(a,"x1","0"),L(a,"x2","0"),L(a,"stroke",t[5]),L(a,"class","svelte-ej8ad5"),F(a,"baseline",t[6]),L(o,"x",c=t[1]||t[7]?t[8].bandwidth()/2:0),L(o,"y",t[2]),L(o,"dx",u="start"==t[12](15)?t[3]-2:"end"==t[12](15)?t[3]+2:t[3]),L(o,"dy",t[4]),L(o,"text-anchor",t[12](15)),L(o,"fill",t[5]),L(i,"class","tick svelte-ej8ad5"),L(i,"transform",h="translate("+t[8](15)+","+t[9]+")"),L(n,"class","axis x-axis")},m(e,t){w(e,n,t),k(n,i),k(i,a),k(i,o),k(o,l),d&&d.m(n,null)},p(e,[t]){512&t&&r!==(r=-1*e[9])&&L(a,"y1",r),512&t&&s!==(s=-1*e[9]+e[9])&&L(a,"y2",s),32&t&&L(a,"stroke",e[5]),64&t&&F(a,"baseline",e[6]),386&t&&c!==(c=e[1]||e[7]?e[8].bandwidth()/2:0)&&L(o,"x",c),4&t&&L(o,"y",e[2]),8&t&&u!==(u="start"==e[12](15)?e[3]-2:"end"==e[12](15)?e[3]+2:e[3])&&L(o,"dx",u),16&t&&L(o,"dy",e[4]),32&t&&L(o,"fill",e[5]),768&t&&h!==(h="translate("+e[8](15)+","+e[9]+")")&&L(i,"transform",h),!0===e[0]?d?d.p(e,t):(d=Fl(e),d.c(),d.m(n,null)):d&&(d.d(1),d=null)},i:e,o:e,d(e){e&&_(n),d&&d.d()}}}function Il(e,t,n){let i,a,r,s;const{data:o,width:l,height:c,xScale:u,yScale:d,yRange:f}=U("LayerCake");h(e,c,(e=>n(9,s=e))),h(e,u,(e=>n(8,r=e)));let{gridlines:p=!0}=t,{formatTick:g=(e=>e)}=t,{baseline:m=!1}=t,{flipped:y=!1}=t,{snapTicks:v=!1}=t,{ticks:x}=t,{prefix:b=""}=t,{suffix:$=""}=t,{xTick:k}=t,{yTick:w=15}=t,{dxTick:_=0}=t,{dyTick:M=0}=t,{lineColor:E="#aaa"}=t,{textColor:T="#666"}=t,{solid:N=!1}=t;return e.$$set=e=>{"gridlines"in e&&n(13,p=e.gridlines),"formatTick"in e&&n(14,g=e.formatTick),"baseline"in e&&n(0,m=e.baseline),"flipped"in e&&n(15,y=e.flipped),"snapTicks"in e&&n(16,v=e.snapTicks),"ticks"in e&&n(17,x=e.ticks),"prefix"in e&&n(18,b=e.prefix),"suffix"in e&&n(19,$=e.suffix),"xTick"in e&&n(1,k=e.xTick),"yTick"in e&&n(2,w=e.yTick),"dxTick"in e&&n(3,_=e.dxTick),"dyTick"in e&&n(4,M=e.dyTick),"lineColor"in e&&n(5,E=e.lineColor),"textColor"in e&&n(20,T=e.textColor),"solid"in e&&n(6,N=e.solid)},e.$$.update=()=>{256&e.$$.dirty&&n(7,i="function"==typeof r.bandwidth),131456&e.$$.dirty&&(a=Array.isArray(x)?x:i?r.domain():r.ticks(x))},[m,k,w,_,M,E,N,i,r,s,c,u,function(e){if(!0===v){if(0===e)return"start";if(e===a.length-1)return"end"}return"middle"},p,g,y,v,x,b,$,T]}class Ol extends ke{constructor(e){super(),$e(this,e,Il,ql,o,{gridlines:13,formatTick:14,baseline:0,flipped:15,snapTicks:16,ticks:17,prefix:18,suffix:19,xTick:1,yTick:2,dxTick:3,dyTick:4,lineColor:5,textColor:20,solid:6})}}function Bl(t){let n,i,a,r,s,o=t[0][t[1]]+"";return{c(){n=T("rect"),i=S(),a=T("foreignObject"),r=E("div"),s=N(o),L(n,"x","0"),L(n,"y","0"),L(n,"width","140"),L(n,"height","20"),L(n,"fill","none"),j(r,"position","absolute"),j(r,"bottom","0"),L(r,"class","svelte-16861pb"),L(a,"x","5"),L(a,"y","-50"),L(a,"width","100"),L(a,"height","40")},m(e,t){w(e,n,t),w(e,i,t),w(e,a,t),k(a,r),k(r,s)},p(e,[t]){3&t&&o!==(o=e[0][e[1]]+"")&&R(s,o)},i:e,o:e,d(e){e&&_(n),e&&_(i),e&&_(a)}}}function Kl(e,t,n){let{labels:i}=t,{nu:a}=t;return U("LayerCake"),i[a].split(" "),e.$$set=e=>{"labels"in e&&n(0,i=e.labels),"nu"in e&&n(1,a=e.nu)},[i,a]}class Hl extends ke{constructor(e){super(),$e(this,e,Kl,Bl,o,{labels:0,nu:1})}}function Ul(e){let t,n=e[0].detail.data&&Gl(e);return{c(){n&&n.c(),t=A()},m(e,i){n&&n.m(e,i),w(e,t,i)},p(e,i){e[0].detail.data?n?n.p(e,i):(n=Gl(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&_(t)}}}function Gl(e){let t,n,i,a,r,s,o,l=Math.round(10*e[0].detail.data.y)/10+"% aged "+e[0].detail.data.x+" in "+e[0].detail.data.g;return{c(){t=T("g"),n=T("rect"),a=T("text"),r=N(l),L(n,"fill","rgba(255,255,255,0.9)"),L(n,"x",-20),L(n,"y",i=e[1](e[0].detail.data)+(2021==e[0].detail.data.g?10:0)-10),L(n,"transform","translate(5,-25)"),L(n,"width","170"),L(n,"height","25"),L(n,"rx","15"),L(a,"class","label-bold svelte-gjdahk"),L(a,"transform","translate(0,-7)"),L(a,"fill","#333"),L(a,"x",s=10),L(a,"y",o=e[1](e[0].detail.data)+(2021==e[0].detail.data.g?10:0)-10),L(t,"class","label-group")},m(e,i){w(e,t,i),k(t,n),k(t,a),k(a,r)},p(e,t){3&t&&i!==(i=e[1](e[0].detail.data)+(2021==e[0].detail.data.g?10:0)-10)&&L(n,"y",i),1&t&&l!==(l=Math.round(10*e[0].detail.data.y)/10+"% aged "+e[0].detail.data.x+" in "+e[0].detail.data.g)&&R(r,l),3&t&&o!==(o=e[1](e[0].detail.data)+(2021==e[0].detail.data.g?10:0)-10)&&L(a,"y",o)},d(e){e&&_(t)}}}function Yl(t){let n,i=t[0].detail&&Ul(t);return{c(){i&&i.c(),n=A()},m(e,t){i&&i.m(e,t),w(e,n,t)},p(e,[t]){e[0].detail?i?i.p(e,t):(i=Ul(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:e,o:e,d(e){i&&i.d(e),e&&_(n)}}}function Vl(e,t,n){let i;const{data:a,xScale:r,yScale:s,xDomain:o,y:l,xGet:c,yGet:u,Domain:d,custom:f}=U("LayerCake");h(e,u,(e=>n(1,i=e)));let{hovered:p=null}=t,{ageLabel:g=null}=t;return e.$$set=e=>{"hovered"in e&&n(3,p=e.hovered),"ageLabel"in e&&n(0,g=e.ageLabel)},[g,i,u,p]}class Jl extends ke{constructor(e){super(),$e(this,e,Vl,Yl,o,{hovered:3,ageLabel:0})}}function Zl(e,t,n){const i=e.slice();return i[16]=t[n],i[18]=n,i}function Xl(e,t,n){const i=e.slice();return i[19]=t[n],i[21]=n,i}function Ql(e){let t,n,i,a,s,o,l,c,u;function h(...t){return e[13](e[19],...t)}return{c(){t=T("rect"),L(t,"class","group-rect"),L(t,"data-id",e[21]),L(t,"x",n=e[2].range()[0]),L(t,"y",i=e[18]%2==0?e[3](e[19]):e[3](e[19])+12),L(t,"rx",5),L(t,"height",a=e[4].bandwidth()/2.3),L(t,"width",s=e[5](e[19])),L(t,"fill",e[18]%2==0?"#DF0667":"#3C388E"),L(t,"stroke",o=e[19]==e[0]?"orange":"white"),L(t,"stroke-width",l=e[19]==e[0]?"3":"2")},m(n,i){w(n,t,i),c||(u=[C(t,"mouseover",h),C(t,"mouseleave",e[14])],c=!0)},p(r,c){e=r,4&c&&n!==(n=e[2].range()[0])&&L(t,"x",n),10&c&&i!==(i=e[18]%2==0?e[3](e[19]):e[3](e[19])+12)&&L(t,"y",i),16&c&&a!==(a=e[4].bandwidth()/2.3)&&L(t,"height",a),34&c&&s!==(s=e[5](e[19]))&&L(t,"width",s),3&c&&o!==(o=e[19]==e[0]?"orange":"white")&&L(t,"stroke",o),3&c&&l!==(l=e[19]==e[0]?"3":"2")&&L(t,"stroke-width",l)},d(e){e&&_(t),c=!1,r(u)}}}function ec(e){let t,n=e[16],i=[];for(let t=0;t<n.length;t+=1)i[t]=Ql(Xl(e,n,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=A()},m(e,n){for(let t=0;t<i.length;t+=1)i[t].m(e,n);w(e,t,n)},p(e,a){if(2111&a){let r;for(n=e[16],r=0;r<n.length;r+=1){const s=Xl(e,n,r);i[r]?i[r].p(s,a):(i[r]=Ql(s),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){M(i,e),e&&_(t)}}}function tc(t){let n,i=t[1],a=[];for(let e=0;e<i.length;e+=1)a[e]=ec(Zl(t,i,e));return{c(){n=T("g");for(let e=0;e<a.length;e+=1)a[e].c();L(n,"class","bar-group")},m(e,t){w(e,n,t);for(let e=0;e<a.length;e+=1)a[e].m(n,null)},p(e,[t]){if(2111&t){let r;for(i=e[1],r=0;r<i.length;r+=1){const s=Zl(e,i,r);a[r]?a[r].p(s,t):(a[r]=ec(s),a[r].c(),a[r].m(n,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},i:e,o:e,d(e){e&&_(n),M(a,e)}}}function nc(e,t,n){let i,a,r,s,o;const{data:l,xGet:c,yGet:u,xScale:d,yScale:f}=U("LayerCake");h(e,l,(e=>n(1,i=e))),h(e,c,(e=>n(5,o=e))),h(e,u,(e=>n(3,r=e))),h(e,d,(e=>n(2,a=e))),h(e,f,(e=>n(4,s=e)));const p=K();let g,{hovered:m=null}=t;function y(e,t){n(0,g=t),p("hover",{data:t,event:e})}return e.$$set=e=>{"hovered"in e&&n(12,m=e.hovered)},[g,i,a,r,s,o,l,c,u,d,f,y,m,(e,t)=>y(t,e),e=>y(e,null)]}class ic extends ke{constructor(e){super(),$e(this,e,nc,tc,o,{hovered:12})}}function ac(e){let t,n,i,a,r,s,o,l,c,u;return t=new Hl({props:{labels:e[1],nu:e[2]}}),i=new Wl({props:{nu:e[2]}}),r=new Ol({}),o=new ic({}),o.$on("hover",e[5]),c=new Jl({props:{hovered:e[3],ageLabel:e[4]}}),{c(){ye(t.$$.fragment),n=S(),ye(i.$$.fragment),a=S(),ye(r.$$.fragment),s=S(),ye(o.$$.fragment),l=S(),ye(c.$$.fragment)},m(e,h){ve(t,e,h),w(e,n,h),ve(i,e,h),w(e,a,h),ve(r,e,h),w(e,s,h),ve(o,e,h),w(e,l,h),ve(c,e,h),u=!0},p(e,n){const a={};2&n&&(a.labels=e[1]),4&n&&(a.nu=e[2]),t.$set(a);const r={};4&n&&(r.nu=e[2]),i.$set(r);const s={};8&n&&(s.hovered=e[3]),16&n&&(s.ageLabel=e[4]),c.$set(s)},i(e){u||(ue(t.$$.fragment,e),ue(i.$$.fragment,e),ue(r.$$.fragment,e),ue(o.$$.fragment,e),ue(c.$$.fragment,e),u=!0)},o(e){he(t.$$.fragment,e),he(i.$$.fragment,e),he(r.$$.fragment,e),he(o.$$.fragment,e),he(c.$$.fragment,e),u=!1},d(e){xe(t,e),e&&_(n),xe(i,e),e&&_(a),xe(r,e),e&&_(s),xe(o,e),e&&_(l),xe(c,e)}}}function rc(e){let t,n;return t=new ja({props:{$$slots:{default:[ac]},$$scope:{ctx:e}}}),{c(){ye(t.$$.fragment)},m(e,i){ve(t,e,i),n=!0},p(e,n){const i={};1054&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){he(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function sc(e){let t,n;return t=new wa({props:{ssr:!0,padding:{top:40,right:6,bottom:2,left:60},x:"y",y:"x",data:e[0],xScale:gs(),yScale:Za().paddingInner([.05]).round(!0),xDomain:[0,15],yDomain:["0-9","10-19","20-29","30-39","40-49","50-59","60-69","70-79","80plus"].reverse(),height:300,$$slots:{default:[rc]},$$scope:{ctx:e}}}),{c(){ye(t.$$.fragment)},m(e,i){ve(t,e,i),n=!0},p(e,[n]){const i={};1&n&&(i.data=e[0]),1054&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){he(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function oc(e,t,n){let{data:i}=t,{labels:a}=t,{nu:r}=t,{fullExtents:s}=t,{scale:o}=t,{extentGetters:l}=t,c=null,u=!0;return En(i,l),e.$$set=e=>{"data"in e&&n(0,i=e.data),"labels"in e&&n(1,a=e.labels),"nu"in e&&n(2,r=e.nu),"fullExtents"in e&&n(6,s=e.fullExtents),"scale"in e&&n(7,o=e.scale),"extentGetters"in e&&n(8,l=e.extentGetters)},[i,a,r,c,u,function(e){n(3,c=e.detail.id),n(4,u=e)},s,o,l]}class lc extends ke{constructor(e){super(),$e(this,e,oc,sc,o,{data:0,labels:1,nu:2,fullExtents:6,scale:7,extentGetters:8})}}function cc(e,t,n){const i=e.slice();return i[8]=t[n],i[10]=n,i}function uc(e){let t,n,i,a,r,s=e[8]+"";return{c(){t=E("li"),n=E("div"),i=S(),a=N(s),r=S(),L(n,"class","bullet svelte-o1q0c0"),j(n,"background-color",e[1][e[10]]),j(n,"width",(!e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),j(n,"height",(e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),F(n,"round",e[7]),L(t,"class","svelte-o1q0c0")},m(e,s){w(e,t,s),k(t,n),k(t,i),k(t,a),k(t,r)},p(e,t){2&t&&j(n,"background-color",e[1][e[10]]),124&t&&j(n,"width",(!e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),124&t&&j(n,"height",(e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),128&t&&F(n,"round",e[7]),1&t&&s!==(s=e[8]+"")&&R(a,s)},d(e){e&&_(t)}}}function hc(t){let n,i=t[0],a=[];for(let e=0;e<i.length;e+=1)a[e]=uc(cc(t,i,e));return{c(){n=E("ul");for(let e=0;e<a.length;e+=1)a[e].c();L(n,"class","legend svelte-o1q0c0")},m(e,t){w(e,n,t);for(let e=0;e<a.length;e+=1)a[e].m(n,null)},p(e,[t]){if(255&t){let r;for(i=e[0],r=0;r<i.length;r+=1){const s=cc(e,i,r);a[r]?a[r].p(s,t):(a[r]=uc(s),a[r].c(),a[r].m(n,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},i:e,o:e,d(e){e&&_(n),M(a,e)}}}function dc(e,t,n){let{domain:i=null}=t,{colors:a=null}=t,{line:r=!1}=t,{comparison:s=!1}=t,{horizontal:o=!0}=t,{markerWidth:l=2.5}=t,{markerLength:c=13}=t,{round:u=!1}=t;return e.$$set=e=>{"domain"in e&&n(0,i=e.domain),"colors"in e&&n(1,a=e.colors),"line"in e&&n(2,r=e.line),"comparison"in e&&n(3,s=e.comparison),"horizontal"in e&&n(4,o=e.horizontal),"markerWidth"in e&&n(5,l=e.markerWidth),"markerLength"in e&&n(6,c=e.markerLength),"round"in e&&n(7,u=e.round)},[i,a,r,s,o,l,c,u]}class fc extends ke{constructor(e){super(),$e(this,e,dc,hc,o,{domain:0,colors:1,line:2,comparison:3,horizontal:4,markerWidth:5,markerLength:6,round:7})}}function pc(e,t,n){const i=e.slice();return i[4]=t[n],i[6]=n,i}function gc(e){let t,n,i,a;return n=new lc({props:{data:e[4],fullExtents:e[3],scale:yc,extentGetters:e[2],nu:e[6],labels:e[1]}}),{c(){t=E("div"),ye(n.$$.fragment),i=S(),L(t,"class","chart-container svelte-5oxew")},m(e,r){w(e,t,r),ve(n,t,null),k(t,i),a=!0},p(e,t){const i={};1&t&&(i.data=e[4]),2&t&&(i.labels=e[1]),n.$set(i)},i(e){a||(ue(n.$$.fragment,e),a=!0)},o(e){he(n.$$.fragment,e),a=!1},d(e){e&&_(t),xe(n)}}}function mc(e){let t,n,i,a,r=e[0],s=[];for(let t=0;t<r.length;t+=1)s[t]=gc(pc(e,r,t));const o=e=>he(s[e],1,1,(()=>{s[e]=null}));return i=new fc({props:{domain:[2011,2021],colors:["#DF0667","#3C388E"]}}),{c(){t=E("div");for(let e=0;e<s.length;e+=1)s[e].c();n=S(),ye(i.$$.fragment),L(t,"class","group-container svelte-5oxew")},m(e,r){w(e,t,r);for(let e=0;e<s.length;e+=1)s[e].m(t,null);w(e,n,r),ve(i,e,r),a=!0},p(e,[n]){if(15&n){let i;for(r=e[0],i=0;i<r.length;i+=1){const a=pc(e,r,i);s[i]?(s[i].p(a,n),ue(s[i],1)):(s[i]=gc(a),s[i].c(),ue(s[i],1),s[i].m(t,null))}for(le(),i=r.length;i<s.length;i+=1)o(i);ce()}},i(e){if(!a){for(let e=0;e<r.length;e+=1)ue(s[e]);ue(i.$$.fragment,e),a=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)he(s[e]);he(i.$$.fragment,e),a=!1},d(e){e&&_(t),M(s,e),e&&_(n),xe(i,e)}}}let yc="individual";function vc(e,t,n){let{chartData:i}=t,{labels:a}=t;const r={x:e=>e.x,y:e=>e.y},s=En(function(e){if(Array.isArray(e)&&Array.isArray(e[0])){let t=[];const n=e.length;for(let i=0;i<n;i+=1)t=t.concat(e[i]);return t}return e}(i),r);return i.sort(((e,t)=>t[t.length-1].y-e[e.length-1].y)),e.$$set=e=>{"chartData"in e&&n(0,i=e.chartData),"labels"in e&&n(1,a=e.labels)},[i,a,r,s]}class xc extends ke{constructor(e){super(),$e(this,e,vc,mc,o,{chartData:0,labels:1})}}function bc(e,t,n){const i=e.slice();return i[14]=t[n],i}function $c(e,t,n){const i=e.slice();return i[17]=t[n],i[19]=n,i}function kc(e){let t,n,i,a;return{c(){t=T("circle"),L(t,"cx",n=e[17]),L(t,"cy",i=e[4](e[14])+e[1]),L(t,"r",e[0]),L(t,"fill",a=e[5](e[6].x[e[19]])),L(t,"class","svelte-1mc14eq")},m(e,n){w(e,t,n)},p(e,r){12&r&&n!==(n=e[17])&&L(t,"cx",n),22&r&&i!==(i=e[4](e[14])+e[1])&&L(t,"cy",i),1&r&&L(t,"r",e[0]),96&r&&a!==(a=e[5](e[6].x[e[19]]))&&L(t,"fill",a)},d(e){e&&_(t)}}}function wc(e){let t,n,i,a,r,s,o,l,c,u,h,d,f,p,g=e[3](e[14]),m=[];for(let t=0;t<g.length;t+=1)m[t]=kc($c(e,g,t));return{c(){t=T("g"),n=T("defs"),i=T("linearGradient"),a=T("stop"),r=T("stop"),s=T("defs"),o=T("linearGradient"),l=T("stop"),c=T("stop"),u=T("rect");for(let e=0;e<m.length;e+=1)m[e].c();L(a,"offset","5%"),L(a,"stop-color","#3C388E10"),L(r,"offset","95%"),L(r,"stop-color","#3C388E80"),L(i,"id","myGradient"),L(i,"gradientTransform","rotate(0)"),L(l,"offset","5%"),L(l,"stop-color","#3C388E80"),L(c,"offset","95%"),L(c,"stop-color","#3C388E10"),L(o,"id","myGradientRev"),L(o,"gradientTransform","rotate(0)"),L(u,"x",h=Math.min(...e[3](e[14]))),L(u,"y",d=e[4](e[14])+e[1]-7),L(u,"width",f=Math.max(...e[3](e[14]))-Math.min(...e[3](e[14]))),L(u,"height","14"),L(u,"fill",p=e[14][2021]-e[14][2011]>0?"url('#myGradient')":"url('#myGradientRev')"),L(u,"opacity","0.85"),L(t,"class","dot-row")},m(e,h){w(e,t,h),k(t,n),k(n,i),k(i,a),k(i,r),k(t,s),k(s,o),k(o,l),k(o,c),k(t,u);for(let e=0;e<m.length;e+=1)m[e].m(t,null)},p(e,n){if(12&n&&h!==(h=Math.min(...e[3](e[14])))&&L(u,"x",h),22&n&&d!==(d=e[4](e[14])+e[1]-7)&&L(u,"y",d),12&n&&f!==(f=Math.max(...e[3](e[14]))-Math.min(...e[3](e[14])))&&L(u,"width",f),4&n&&p!==(p=e[14][2021]-e[14][2011]>0?"url('#myGradient')":"url('#myGradientRev')")&&L(u,"fill",p),127&n){let i;for(g=e[3](e[14]),i=0;i<g.length;i+=1){const a=$c(e,g,i);m[i]?m[i].p(a,n):(m[i]=kc(a),m[i].c(),m[i].m(t,null))}for(;i<m.length;i+=1)m[i].d(1);m.length=g.length}},d(e){e&&_(t),M(m,e)}}}function _c(t){let n,i=t[2],a=[];for(let e=0;e<i.length;e+=1)a[e]=wc(bc(t,i,e));return{c(){n=T("g");for(let e=0;e<a.length;e+=1)a[e].c();L(n,"class","dot-plot")},m(e,t){w(e,n,t);for(let e=0;e<a.length;e+=1)a[e].m(n,null)},p(e,[t]){if(127&t){let r;for(i=e[2],r=0;r<i.length;r+=1){const s=bc(e,i,r);a[r]?a[r].p(s,t):(a[r]=wc(s),a[r].c(),a[r].m(n,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},i:e,o:e,d(e){e&&_(n),M(a,e)}}}function Mc(e,t,n){let i,a,r,s,o,l,c;const{data:u,xGet:d,yGet:f,yScale:p,zScale:g,config:m}=U("LayerCake");h(e,u,(e=>n(2,r=e))),h(e,d,(e=>n(3,s=e))),h(e,f,(e=>n(4,o=e))),h(e,p,(e=>n(13,a=e))),h(e,g,(e=>n(5,l=e))),h(e,m,(e=>n(6,c=e)));let{r:y=7}=t;return e.$$set=e=>{"r"in e&&n(0,y=e.r)},e.$$.update=()=>{8192&e.$$.dirty&&n(1,i=a.bandwidth()/2)},[y,i,r,s,o,l,c,u,d,f,p,g,m,a]}class Ec extends ke{constructor(e){super(),$e(this,e,Mc,_c,o,{r:0})}}function Tc(e,t,n){const i=e.slice();return i[11]=t[n],i}function Nc(e,t,n){const i=e.slice();return i[14]=t[n],i[16]=n,i}function Sc(e){let t,n,i,a=0==e[16]?"least deprived":1==e[16]?"most deprived":"average";return{c(){t=E("div"),n=N(a),L(t,"class",i="label "+(2==e[16]?"below":"above")+" svelte-1cj7kw2"),j(t,"top",e[3](e[11])+e[0]+"px"),j(t,"left",e[14]+"px")},m(e,i){w(e,t,i),k(t,n)},p(e,n){11&n&&j(t,"top",e[3](e[11])+e[0]+"px"),6&n&&j(t,"left",e[14]+"px")},d(e){e&&_(t)}}}function Ac(e){let t,n=e[2](e[11]),i=[];for(let t=0;t<n.length;t+=1)i[t]=Sc(Nc(e,n,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=A()},m(e,n){for(let t=0;t<i.length;t+=1)i[t].m(e,n);w(e,t,n)},p(e,a){if(15&a){let r;for(n=e[2](e[11]),r=0;r<n.length;r+=1){const s=Nc(e,n,r);i[r]?i[r].p(s,a):(i[r]=Sc(s),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){M(i,e),e&&_(t)}}}function Cc(t){let n,i=t[1],a=[];for(let e=0;e<i.length;e+=1)a[e]=Ac(Tc(t,i,e));return{c(){for(let e=0;e<a.length;e+=1)a[e].c();n=A()},m(e,t){for(let n=0;n<a.length;n+=1)a[n].m(e,t);w(e,n,t)},p(e,[t]){if(15&t){let r;for(i=e[1],r=0;r<i.length;r+=1){const s=Tc(e,i,r);a[r]?a[r].p(s,t):(a[r]=Ac(s),a[r].c(),a[r].m(n.parentNode,n))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},i:e,o:e,d(e){M(a,e),e&&_(n)}}}function Lc(e,t,n){let i,a,r,s,o;const{data:l,xGet:c,yGet:u,yScale:d,zScale:f,config:p}=U("LayerCake");return h(e,l,(e=>n(1,r=e))),h(e,c,(e=>n(2,s=e))),h(e,u,(e=>n(3,o=e))),h(e,d,(e=>n(8,a=e))),e.$$.update=()=>{256&e.$$.dirty&&n(0,i=a.bandwidth()/2)},[i,r,s,o,l,c,u,d,a]}class Rc extends ke{constructor(e){super(),$e(this,e,Lc,Cc,o,{})}}function zc(e,t,n){const i=e.slice();return i[27]=t[n],i[29]=n,i}function jc(e){let t,n;return{c(){t=T("line"),L(t,"y1",n=-1*e[17]),L(t,"y2",e[9]),L(t,"x1","0"),L(t,"x2","0"),L(t,"stroke",e[10]),L(t,"class","svelte-1u7vzrc"),F(t,"baseline",e[12])},m(e,n){w(e,t,n)},p(e,i){131072&i&&n!==(n=-1*e[17])&&L(t,"y1",n),512&i&&L(t,"y2",e[9]),1024&i&&L(t,"stroke",e[10]),4096&i&&F(t,"baseline",e[12])},d(e){e&&_(t)}}}function Dc(e){let t,n=e[1](e[27])+"";return{c(){t=N(n)},m(e,n){w(e,t,n)},p(e,i){32770&i&&n!==(n=e[1](e[27])+"")&&R(t,n)},d(e){e&&_(t)}}}function Pc(e){let t,n,i,a=e[1](e[27])+"";return{c(){t=N(e[4]),n=N(a),i=N(e[5])},m(e,a){w(e,t,a),w(e,n,a),w(e,i,a)},p(e,r){16&r&&R(t,e[4]),32770&r&&a!==(a=e[1](e[27])+"")&&R(n,a),32&r&&R(i,e[5])},d(e){e&&_(t),e&&_(n),e&&_(i)}}}function Wc(e){let t,n,i,a,r,s,o,l,c=!1!==e[0]&&jc(e);function u(e,t){return e[29]==e[15].length-1?Pc:Dc}let h=u(e),d=h(e);return{c(){t=T("g"),c&&c.c(),n=T("text"),d.c(),L(n,"x",i=e[6]||e[13]?e[14].bandwidth()/2:0),L(n,"y",a=e[3]?-1*e[17]-6:e[7]),L(n,"dx",r="start"==e[21](e[29])?e[8]-2:"end"==e[21](e[29])?e[8]+2:e[8]),L(n,"dy",e[9]),L(n,"text-anchor",s=e[21](e[29])),L(n,"fill",e[11]),L(t,"class",o="tick tick-"+e[27]+" svelte-1u7vzrc"),L(t,"transform",l="translate("+e[14](e[27])+","+e[16][0]+")")},m(e,i){w(e,t,i),c&&c.m(t,null),k(t,n),d.m(n,null)},p(e,s){!1!==e[0]?c?c.p(e,s):(c=jc(e),c.c(),c.m(t,n)):c&&(c.d(1),c=null),h===(h=u(e))&&d?d.p(e,s):(d.d(1),d=h(e),d&&(d.c(),d.m(n,null))),24640&s&&i!==(i=e[6]||e[13]?e[14].bandwidth()/2:0)&&L(n,"x",i),131208&s&&a!==(a=e[3]?-1*e[17]-6:e[7])&&L(n,"y",a),256&s&&r!==(r="start"==e[21](e[29])?e[8]-2:"end"==e[21](e[29])?e[8]+2:e[8])&&L(n,"dx",r),512&s&&L(n,"dy",e[9]),2048&s&&L(n,"fill",e[11]),32768&s&&o!==(o="tick tick-"+e[27]+" svelte-1u7vzrc")&&L(t,"class",o),114688&s&&l!==(l="translate("+e[14](e[27])+","+e[16][0]+")")&&L(t,"transform",l)},d(e){e&&_(t),c&&c.d(),d.d()}}}function Fc(e){let t;return{c(){t=T("line"),L(t,"class","baseline svelte-1u7vzrc"),L(t,"y1",e[17]),L(t,"y2","0"),L(t,"x1","0"),L(t,"x2","0"),L(t,"stroke",e[10])},m(e,n){w(e,t,n)},p(e,n){131072&n&&L(t,"y1",e[17]),1024&n&&L(t,"stroke",e[10])},d(e){e&&_(t)}}}function qc(t){let n,i,a=t[15],r=[];for(let e=0;e<a.length;e+=1)r[e]=Wc(zc(t,a,e));let s=!0===t[2]&&Fc(t);return{c(){n=T("g");for(let e=0;e<r.length;e+=1)r[e].c();i=A(),s&&s.c(),L(n,"class","axis x-axis")},m(e,t){w(e,n,t);for(let e=0;e<r.length;e+=1)r[e].m(n,null);k(n,i),s&&s.m(n,null)},p(e,[t]){if(2359291&t){let s;for(a=e[15],s=0;s<a.length;s+=1){const o=zc(e,a,s);r[s]?r[s].p(o,t):(r[s]=Wc(o),r[s].c(),r[s].m(n,i))}for(;s<r.length;s+=1)r[s].d(1);r.length=a.length}!0===e[2]?s?s.p(e,t):(s=Fc(e),s.c(),s.m(n,null)):s&&(s.d(1),s=null)},i:e,o:e,d(e){e&&_(n),M(r,e),s&&s.d()}}}function Ic(e,t,n){let i,a,r,s,o;const{data:l,width:c,height:u,xScale:d,yScale:f,yRange:p}=U("LayerCake");h(e,u,(e=>n(17,o=e))),h(e,d,(e=>n(14,r=e))),h(e,p,(e=>n(16,s=e)));let{gridlines:g=!0}=t,{formatTick:m=(e=>e)}=t,{baseline:y=!1}=t,{flipped:v=!1}=t,{snapTicks:x=!1}=t,{ticks:b}=t,{prefix:$=""}=t,{suffix:k=""}=t,{xTick:w}=t,{yTick:_=15}=t,{dxTick:M=0}=t,{dyTick:E=0}=t,{lineColor:T="#aaa"}=t,{textColor:N="#666"}=t,{solid:S=!1}=t;return e.$$set=e=>{"gridlines"in e&&n(0,g=e.gridlines),"formatTick"in e&&n(1,m=e.formatTick),"baseline"in e&&n(2,y=e.baseline),"flipped"in e&&n(3,v=e.flipped),"snapTicks"in e&&n(22,x=e.snapTicks),"ticks"in e&&n(23,b=e.ticks),"prefix"in e&&n(4,$=e.prefix),"suffix"in e&&n(5,k=e.suffix),"xTick"in e&&n(6,w=e.xTick),"yTick"in e&&n(7,_=e.yTick),"dxTick"in e&&n(8,M=e.dxTick),"dyTick"in e&&n(9,E=e.dyTick),"lineColor"in e&&n(10,T=e.lineColor),"textColor"in e&&n(11,N=e.textColor),"solid"in e&&n(12,S=e.solid)},e.$$.update=()=>{16384&e.$$.dirty&&n(13,i="function"==typeof r.bandwidth),8413184&e.$$.dirty&&n(15,a=Array.isArray(b)?b:i?r.domain():r.ticks(b))},[g,m,y,v,$,k,w,_,M,E,T,N,S,i,r,a,s,o,u,d,p,function(e){if(!0===x){if(0===e)return"start";if(e===a.length-1)return"end"}return"middle"},x,b]}class Oc extends ke{constructor(e){super(),$e(this,e,Ic,qc,o,{gridlines:0,formatTick:1,baseline:2,flipped:3,snapTicks:22,ticks:23,prefix:4,suffix:5,xTick:6,yTick:7,dxTick:8,dyTick:9,lineColor:10,textColor:11,solid:12})}}function Bc(e,t,n){const i=e.slice();return i[22]=t[n],i[24]=n,i}function Kc(e){let t,n,i;return{c(){t=T("line"),L(t,"x2","100%"),L(t,"y1",n=e[5]+(e[12]?e[13].bandwidth()/2:0)),L(t,"y2",i=e[5]+(e[12]?e[13].bandwidth()/2:0)),L(t,"stroke",e[9]),L(t,"class","svelte-e79qfe"),F(t,"baseline",e[11])},m(e,n){w(e,t,n)},p(e,a){12320&a&&n!==(n=e[5]+(e[12]?e[13].bandwidth()/2:0))&&L(t,"y1",n),12320&a&&i!==(i=e[5]+(e[12]?e[13].bandwidth()/2:0))&&L(t,"y2",i),512&a&&L(t,"stroke",e[9]),2048&a&&F(t,"baseline",e[11])},d(e){e&&_(t)}}}function Hc(e){let t,n=e[3](e[22])+"";return{c(){t=N(n)},m(e,n){w(e,t,n)},p(e,i){16392&i&&n!==(n=e[3](e[22])+"")&&R(t,n)},d(e){e&&_(t)}}}function Uc(e){let t,n,i,a=e[3](e[22])+"";return{c(){t=N(e[0]),n=N(a),i=N(e[1])},m(e,a){w(e,t,a),w(e,n,a),w(e,i,a)},p(e,r){1&r&&R(t,e[0]),16392&r&&a!==(a=e[3](e[22])+"")&&R(n,a),2&r&&R(i,e[1])},d(e){e&&_(t),e&&_(n),e&&_(i)}}}function Gc(e){let t,n,i,a,r,s,o,l=!1!==e[2]&&Kc(e);function c(e,t){return e[24]==e[14].length-1?Uc:Hc}let u=c(e),h=u(e);return{c(){t=T("g"),l&&l.c(),n=T("text"),h.c(),L(n,"x",e[4]),L(n,"y",i=e[5]+(e[12]?e[13].bandwidth()/2:0)),L(n,"dx",a=e[12]?3:e[6]),L(n,"dy",r=e[12]?4:e[7]),L(n,"fill",e[10]),j(n,"text-anchor",e[12]?"end":e[8]),L(t,"class",s="tick tick-"+e[22]+" svelte-e79qfe"),L(t,"transform",o="translate("+(e[16][0]+(e[12]?e[15].left:0))+", "+e[13](e[22])+")")},m(e,i){w(e,t,i),l&&l.m(t,null),k(t,n),h.m(n,null)},p(e,d){!1!==e[2]?l?l.p(e,d):(l=Kc(e),l.c(),l.m(t,n)):l&&(l.d(1),l=null),u===(u=c(e))&&h?h.p(e,d):(h.d(1),h=u(e),h&&(h.c(),h.m(n,null))),16&d&&L(n,"x",e[4]),12320&d&&i!==(i=e[5]+(e[12]?e[13].bandwidth()/2:0))&&L(n,"y",i),4160&d&&a!==(a=e[12]?3:e[6])&&L(n,"dx",a),4224&d&&r!==(r=e[12]?4:e[7])&&L(n,"dy",r),1024&d&&L(n,"fill",e[10]),4352&d&&j(n,"text-anchor",e[12]?"end":e[8]),16384&d&&s!==(s="tick tick-"+e[22]+" svelte-e79qfe")&&L(t,"class",s),126976&d&&o!==(o="translate("+(e[16][0]+(e[12]?e[15].left:0))+", "+e[13](e[22])+")")&&L(t,"transform",o)},d(e){e&&_(t),l&&l.d(),h.d()}}}function Yc(t){let n,i,a=t[14],r=[];for(let e=0;e<a.length;e+=1)r[e]=Gc(Bc(t,a,e));return{c(){n=T("g");for(let e=0;e<r.length;e+=1)r[e].c();L(n,"class","axis y-axis"),L(n,"transform",i="translate("+-t[15].left+", 0)")},m(e,t){w(e,n,t);for(let e=0;e<r.length;e+=1)r[e].m(n,null)},p(e,[t]){if(131071&t){let i;for(a=e[14],i=0;i<a.length;i+=1){const s=Bc(e,a,i);r[i]?r[i].p(s,t):(r[i]=Gc(s),r[i].c(),r[i].m(n,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=a.length}32768&t&&i!==(i="translate("+-e[15].left+", 0)")&&L(n,"transform",i)},i:e,o:e,d(e){e&&_(n),M(r,e)}}}function Vc(e,t,n){let i,a,r,s,o;const{padding:l,xRange:c,xScale:u,yScale:d}=U("LayerCake");h(e,l,(e=>n(15,s=e))),h(e,c,(e=>n(16,o=e))),h(e,d,(e=>n(13,r=e)));let{ticks:f=4}=t,{prefix:p=""}=t,{suffix:g=""}=t,{gridlines:m=!0}=t,{formatTick:y=(e=>e)}=t,{xTick:v=0}=t,{yTick:x=0}=t,{dxTick:b=0}=t,{dyTick:$=-4}=t,{textAnchor:k="start"}=t,{lineColor:w="#aaa"}=t,{textColor:_="#666"}=t,{solid:M=!1}=t;return e.$$set=e=>{"ticks"in e&&n(20,f=e.ticks),"prefix"in e&&n(0,p=e.prefix),"suffix"in e&&n(1,g=e.suffix),"gridlines"in e&&n(2,m=e.gridlines),"formatTick"in e&&n(3,y=e.formatTick),"xTick"in e&&n(4,v=e.xTick),"yTick"in e&&n(5,x=e.yTick),"dxTick"in e&&n(6,b=e.dxTick),"dyTick"in e&&n(7,$=e.dyTick),"textAnchor"in e&&n(8,k=e.textAnchor),"lineColor"in e&&n(9,w=e.lineColor),"textColor"in e&&n(10,_=e.textColor),"solid"in e&&n(11,M=e.solid)},e.$$.update=()=>{8192&e.$$.dirty&&n(12,i="function"==typeof r.bandwidth),1060864&e.$$.dirty&&n(14,a=Array.isArray(f)?f:i?r.domain():r.ticks(f))},[p,g,m,y,v,x,b,$,k,w,_,M,i,r,a,s,o,l,c,d,f]}class Jc extends ke{constructor(e){super(),$e(this,e,Vc,Yc,o,{ticks:20,prefix:0,suffix:1,gridlines:2,formatTick:3,xTick:4,yTick:5,dxTick:6,dyTick:7,textAnchor:8,lineColor:9,textColor:10,solid:11})}}function Zc(e,t,n){const i=e.slice();return i[8]=t[n],i[10]=n,i}function Xc(e){let t,n,i,a,r,s=e[8]+"";return{c(){t=E("li"),n=E("div"),i=S(),a=N(s),r=S(),L(n,"class","bullet svelte-o1q0c0"),j(n,"background-color",e[1][e[10]]),j(n,"width",(!e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),j(n,"height",(e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),F(n,"round",e[7]),L(t,"class","svelte-o1q0c0")},m(e,s){w(e,t,s),k(t,n),k(t,i),k(t,a),k(t,r)},p(e,t){2&t&&j(n,"background-color",e[1][e[10]]),124&t&&j(n,"width",(!e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),124&t&&j(n,"height",(e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),128&t&&F(n,"round",e[7]),1&t&&s!==(s=e[8]+"")&&R(a,s)},d(e){e&&_(t)}}}function Qc(t){let n,i=t[0],a=[];for(let e=0;e<i.length;e+=1)a[e]=Xc(Zc(t,i,e));return{c(){n=E("ul");for(let e=0;e<a.length;e+=1)a[e].c();L(n,"class","legend svelte-o1q0c0")},m(e,t){w(e,n,t);for(let e=0;e<a.length;e+=1)a[e].m(n,null)},p(e,[t]){if(255&t){let r;for(i=e[0],r=0;r<i.length;r+=1){const s=Zc(e,i,r);a[r]?a[r].p(s,t):(a[r]=Xc(s),a[r].c(),a[r].m(n,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},i:e,o:e,d(e){e&&_(n),M(a,e)}}}function eu(e,t,n){let{domain:i=null}=t,{colors:a=null}=t,{line:r=!1}=t,{comparison:s=!1}=t,{horizontal:o=!0}=t,{markerWidth:l=2.5}=t,{markerLength:c=13}=t,{round:u=!1}=t;return e.$$set=e=>{"domain"in e&&n(0,i=e.domain),"colors"in e&&n(1,a=e.colors),"line"in e&&n(2,r=e.line),"comparison"in e&&n(3,s=e.comparison),"horizontal"in e&&n(4,o=e.horizontal),"markerWidth"in e&&n(5,l=e.markerWidth),"markerLength"in e&&n(6,c=e.markerLength),"round"in e&&n(7,u=e.round)},[i,a,r,s,o,l,c,u]}class tu extends ke{constructor(e){super(),$e(this,e,eu,Qc,o,{domain:0,colors:1,line:2,comparison:3,horizontal:4,markerWidth:5,markerLength:6,round:7})}}function nu(t){let n,i,a,r,s,o;return n=new Oc({}),a=new Jc({props:{gridlines:!1}}),s=new Ec({}),{c(){ye(n.$$.fragment),i=S(),ye(a.$$.fragment),r=S(),ye(s.$$.fragment)},m(e,t){ve(n,e,t),w(e,i,t),ve(a,e,t),w(e,r,t),ve(s,e,t),o=!0},p:e,i(e){o||(ue(n.$$.fragment,e),ue(a.$$.fragment,e),ue(s.$$.fragment,e),o=!0)},o(e){he(n.$$.fragment,e),he(a.$$.fragment,e),he(s.$$.fragment,e),o=!1},d(e){xe(n,e),e&&_(i),xe(a,e),e&&_(r),xe(s,e)}}}function iu(e){let t,n;return t=new Na({props:{$$slots:{default:[au]},$$scope:{ctx:e}}}),{c(){ye(t.$$.fragment)},m(e,i){ve(t,e,i),n=!0},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){he(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function au(e){let t,n;return t=new Rc({}),{c(){ye(t.$$.fragment)},m(e,i){ve(t,e,i),n=!0},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){he(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function ru(e){let t,n,i,a;t=new ja({props:{$$slots:{default:[nu]},$$scope:{ctx:e}}});let r=e[2]&&iu(e);return{c(){ye(t.$$.fragment),n=S(),r&&r.c(),i=A()},m(e,s){ve(t,e,s),w(e,n,s),r&&r.m(e,s),w(e,i,s),a=!0},p(e,n){const a={};64&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a),e[2]?r?4&n&&ue(r,1):(r=iu(e),r.c(),ue(r,1),r.m(i.parentNode,i)):r&&(le(),he(r,1,1,(()=>{r=null})),ce())},i(e){a||(ue(t.$$.fragment,e),ue(r),a=!0)},o(e){he(t.$$.fragment,e),he(r),a=!1},d(e){xe(t,e),e&&_(n),r&&r.d(e),e&&_(i)}}}function su(e){let t,n,i,a,r;return n=new wa({props:{padding:{right:0,bottom:20,left:0},x:e[3],y:ou,yScale:Za().paddingInner([.05]).round(!0),yDomain:e[0].map(e[5]),xPadding:[15,0],zScale:Ja(),zDomain:e[3],zRange:e[4],data:e[0],$$slots:{default:[ru]},$$scope:{ctx:e}}}),a=new tu({props:{domain:e[3],colors:e[4]}}),{c(){t=E("div"),ye(n.$$.fragment),i=S(),ye(a.$$.fragment),L(t,"class","chart-container svelte-ivcd9i"),j(t,"height",e[1]+"px")},m(e,s){w(e,t,s),ve(n,t,null),w(e,i,s),ve(a,e,s),r=!0},p(e,[i]){const a={};1&i&&(a.yDomain=e[0].map(e[5])),1&i&&(a.data=e[0]),68&i&&(a.$$scope={dirty:i,ctx:e}),n.$set(a),(!r||2&i)&&j(t,"height",e[1]+"px")},i(e){r||(ue(n.$$.fragment,e),ue(a.$$.fragment,e),r=!0)},o(e){he(n.$$.fragment,e),he(a.$$.fragment,e),r=!1},d(e){e&&_(t),xe(n),e&&_(i),xe(a,e)}}}const ou="label";function lu(e,t,n){let{data:i}=t,{height:a=400}=t,{labels:r=!1}=t;const s=Object.keys(i[0]).filter((e=>e!==ou));i.forEach((e=>{s.forEach((t=>{e[t]=+e[t]}))}));return e.$$set=e=>{"data"in e&&n(0,i=e.data),"height"in e&&n(1,a=e.height),"labels"in e&&n(2,r=e.labels)},[i,a,r,s,["#DF0667","#3C388E","#2166ac","#b2182b","grey"],e=>e[ou]]}class cu extends ke{constructor(e){super(),$e(this,e,lu,su,o,{data:0,height:1,labels:2})}}const{document:uu}=de;function hu(e,t,n){const i=e.slice();return i[40]=t[n],i[42]=n,i}function du(e){let t,n,i=e[6]&&fu(e);return{c(){i&&i.c(),t=A()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,n){e[6]?i?(i.p(e,n),64&n[0]&&ue(i,1)):(i=fu(e),i.c(),ue(i,1),i.m(t.parentNode,t)):i&&(le(),he(i,1,1,(()=>{i=null})),ce())},i(e){n||(ue(i),n=!0)},o(e){he(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function fu(e){let t,n,i=e[8]&&pu(e);return{c(){i&&i.c(),t=A()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,n){e[8]?i?(i.p(e,n),256&n[0]&&ue(i,1)):(i=pu(e),i.c(),ue(i,1),i.m(t.parentNode,t)):i&&(le(),he(i,1,1,(()=>{i=null})),ce())},i(e){n||(ue(i),n=!0)},o(e){he(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function pu(e){let t,n,i=e[3]&&gu(e);return{c(){i&&i.c(),t=A()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,n){e[3]?i?(i.p(e,n),8&n[0]&&ue(i,1)):(i=gu(e),i.c(),ue(i,1),i.m(t.parentNode,t)):i&&(le(),he(i,1,1,(()=>{i=null})),ce())},i(e){n||(ue(i),n=!0)},o(e){he(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function gu(e){let t,n,i=e[4]&&mu(e);return{c(){i&&i.c(),t=A()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,n){e[4]?i?(i.p(e,n),16&n[0]&&ue(i,1)):(i=mu(e),i.c(),ue(i,1),i.m(t.parentNode,t)):i&&(le(),he(i,1,1,(()=>{i=null})),ce())},i(e){n||(ue(i),n=!0)},o(e){he(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function mu(e){let t,n,i,a,s,o,l,c,u,h,d,f,p,g,m,y,v,x,b,$,M,A,z,D,P,W,F,I,O,B,K,H,U,G,Y,J,Z,X,Q,ee,ne,ie=$u(e[2].name)+"",ae=e[12](e[2],e[5])+"",re=(e[2].gss?e[2].gss.long:"local authority district")+"",se=[],oe=new Map,de=e[7]?"Read less":"Read more";function fe(t){e[16](t)}let be={options:e[0],group:"typenm",search:!0};void 0!==e[1]&&(be.selected=e[1]),h=new Et({props:be}),V.push((()=>me(h,"selected",fe))),h.$on("select",e[17]);let $e=e[9](e[4],e[2],e[5]);const ke=e=>e[42];for(let t=0;t<$e.length;t+=1){let n=hu(e,$e,t),i=ke(n);oe.set(i,se[t]=yu(i,n))}function we(e,t){return e[7]?xu:vu}let _e=we(e),Me=_e(e);return{c(){t=E("div"),n=E("div"),i=E("h1"),a=N(ie),s=N(": "),o=E("span"),o.textContent="Changes over time",l=S(),c=E("div"),u=E("div"),ye(h.$$.fragment),f=S(),p=new q,g=S(),m=E("p"),y=N("Here are some of the "),v=E("span"),v.textContent="most notable changes",x=N(" from across the "),b=N(re),$=N("."),M=S(),A=E("main");for(let e=0;e<se.length;e+=1)se[e].c();z=S(),D=E("button"),P=E("div"),W=T("svg"),Me.c(),F=S(),I=N(de),O=S(),B=E("hr"),K=S(),H=E("h2"),H.textContent="Creating this article",U=S(),G=E("p"),G.textContent="This article was generated using some automation. Topics are selected based on the most notable changes seen in each local authority.",Y=S(),J=E("p"),J.textContent="Notable changes include a high percentage point shift, a pattern of change that differs from the pattern seen at the regional or national level, and the shifting of a variable for which the area ranks considerably high or low.",Z=S(),X=E("div"),j(o,"font-weight","400"),L(i,"class","svelte-1eybmbe"),j(u,"width","640px"),j(u,"margin","50px auto"),p.a=g,L(v,"class","back-to-top svelte-1eybmbe"),j(n,"width","640px"),j(n,"margin","0 auto"),L(t,"id","sf"),L(t,"class","svelte-1eybmbe"),L(W,"height","25"),L(W,"width","50"),L(P,"class","triangle-container svelte-1eybmbe"),L(D,"class","svelte-1eybmbe"),L(B,"class","svelte-1eybmbe"),L(H,"id","create"),j(X,"height","200px"),L(A,"class","svelte-1eybmbe")},m(r,d){w(r,t,d),k(t,n),k(n,i),k(i,a),k(i,s),k(i,o),k(n,l),k(n,c),k(c,u),ve(h,u,null),k(n,f),p.m(ae,n),k(n,g),k(n,m),k(m,y),k(m,v),k(m,x),k(m,b),k(m,$),w(r,M,d),w(r,A,d);for(let e=0;e<se.length;e+=1)se[e].m(A,null);k(A,z),k(A,D),k(D,P),k(P,W),Me.m(W,null),k(D,F),k(D,I),k(A,O),k(A,B),k(A,K),k(A,H),k(A,U),k(A,G),k(A,Y),k(A,J),k(A,Z),k(A,X),Q=!0,ee||(ne=[C(v,"click",ku),C(D,"click",e[15])],ee=!0)},p(e,t){(!Q||4&t[0])&&ie!==(ie=$u(e[2].name)+"")&&R(a,ie);const n={};1&t[0]&&(n.options=e[0]),!d&&2&t[0]&&(d=!0,n.selected=e[1],te((()=>d=!1))),h.$set(n),(!Q||36&t[0])&&ae!==(ae=e[12](e[2],e[5])+"")&&p.p(ae),(!Q||4&t[0])&&re!==(re=(e[2].gss?e[2].gss.long:"local authority district")+"")&&R(b,re),25140&t[0]&&($e=e[9](e[4],e[2],e[5]),le(),se=ge(se,t,ke,1,e,$e,oe,A,pe,yu,z,hu),ce()),_e!==(_e=we(e))&&(Me.d(1),Me=_e(e),Me&&(Me.c(),Me.m(W,null))),(!Q||128&t[0])&&de!==(de=e[7]?"Read less":"Read more")&&R(I,de)},i(e){if(!Q){ue(h.$$.fragment,e);for(let e=0;e<$e.length;e+=1)ue(se[e]);Q=!0}},o(e){he(h.$$.fragment,e);for(let e=0;e<se.length;e+=1)he(se[e]);Q=!1},d(e){e&&_(t),xe(h),e&&_(M),e&&_(A);for(let e=0;e<se.length;e+=1)se[e].d();Me.d(),ee=!1,r(ne)}}}function yu(e,t){let i,a,r,s,o,l,c=t[40]+"";const u=[t[13](t[42])];var h=t[14](t[42]);function d(e){let t={};for(let e=0;e<u.length;e+=1)t=n(t,u[e]);return{props:t}}return h&&(o=new h(d())),{key:e,first:null,c(){i=A(),a=new q,r=S(),s=E("div"),o&&ye(o.$$.fragment),a.a=r,j(s,"width","100%"),this.first=i},m(e,t){w(e,i,t),a.m(c,e,t),w(e,r,t),w(e,s,t),o&&ve(o,s,null),l=!0},p(e,n){t=e,(!l||564&n[0])&&c!==(c=t[40]+"")&&a.p(c);const i=8756&n[0]?function(e,t){const n={},i={},a={$$scope:1};let r=e.length;for(;r--;){const s=e[r],o=t[r];if(o){for(const e in s)e in o||(i[e]=1);for(const e in o)a[e]||(n[e]=o[e],a[e]=1);e[r]=o}else for(const e in s)a[e]=1}for(const e in i)e in n||(n[e]=void 0);return n}(u,[(r=t[13](t[42]),"object"==typeof r&&null!==r?r:{})]):{};var r;if(h!==(h=t[14](t[42]))){if(o){le();const e=o;he(e.$$.fragment,1,0,(()=>{xe(e,1)})),ce()}h?(o=new h(d()),ye(o.$$.fragment),ue(o.$$.fragment,1),ve(o,s,null)):o=null}else h&&o.$set(i)},i(e){l||(o&&ue(o.$$.fragment,e),l=!0)},o(e){o&&he(o.$$.fragment,e),l=!1},d(e){e&&_(i),e&&a.d(),e&&_(r),e&&_(s),o&&xe(o)}}}function vu(e){let t;return{c(){t=T("polygon"),L(t,"points","25,20 15,10 25,20 35,10"),L(t,"class","triangle svelte-1eybmbe")},m(e,n){w(e,t,n)},d(e){e&&_(t)}}}function xu(e){let t;return{c(){t=T("polygon"),L(t,"points","25,10 15,20 25,10 35,20"),L(t,"class","triangle svelte-1eybmbe")},m(e,n){w(e,t,n)},d(e){e&&_(t)}}}function bu(e){let t,n,i,a,r,s,o,l,u,h=e[2]&&du(e);return{c(){t=E("script"),i=E("script"),r=S(),s=E("div"),h&&h.c(),c(t.src,n="https://d3js.org/d3.v3.min.js")||L(t,"src","https://d3js.org/d3.v3.min.js"),L(t,"charset","utf-8"),c(i.src,a="https://unpkg.com/rosaenlg@3.0.1/dist/rollup/rosaenlg_tiny_en_US_3.0.1_comp.js")||L(i,"src","https://unpkg.com/rosaenlg@3.0.1/dist/rollup/rosaenlg_tiny_en_US_3.0.1_comp.js")},m(n,a){k(uu.head,t),k(uu.head,i),w(n,r,a),w(n,s,a),h&&h.m(s,null),o=!0,l||(u=C(i,"load",e[10]),l=!0)},p(e,t){e[2]?h?(h.p(e,t),4&t[0]&&ue(h,1)):(h=du(e),h.c(),ue(h,1),h.m(s,null)):h&&(le(),he(h,1,1,(()=>{h=null})),ce())},i(e){o||(ue(h),o=!0)},o(e){he(h),o=!1},d(e){_(t),_(i),e&&_(r),e&&_(s),h&&h.d(),l=!1,u()}}}function $u(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ku(){document.getElementById("create").scrollIntoView()}function wu(e){return Number.parseFloat(Number.parseFloat(.714*e).toPrecision(2))}function _u(e,t,n){function i(e,t){return!(new bn([e],{includeScore:!0}).search(t).length>0)}var a,r,s,o,l,c,u,h,d,f,p,g,m,y,v,x,b;const $=(e,t)=>t.some((t=>e.includes(t)));var k,w,_,M=!1;fetch("./archie.aml").then((e=>e.text())).then((e=>n(5,k=St.load(e)))),fetch("./puggy.pug").then((e=>e.text())).then((e=>w=e)),fetch("./standf.pug").then((e=>e.text())).then((e=>_=e));let E=!1;Pe("https://raw.githubusercontent.com/theojolliffe/census-data/main/laddata.csv").then((e=>{e.forEach((e=>{e.code=e[""],delete e[""]})),m=e,n(6,x=!0)}));var T={};Pe("https://raw.githubusercontent.com/theojolliffe/census-data/main/csv/lists/Corresponding%20Local%20Authorities-Table%201.csv").then((e=>{e.forEach((e=>{T[e.Name]=e["Region/Country"]}))}));var N={};function S(e){fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/"+e+".json").then((e=>e.json())).then((t=>{t.children=a.filter((t=>t.parent==e)),t.siblings=a.filter((e=>e.parent==t.parents[0].code)),n(2,s=t),u=s.parents[0].code,fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/"+u+".json").then((e=>e.json())).then((t=>{t.children=a.filter((t=>t.parent==e)),t.siblings=a.filter((e=>e.parent==t.parents[0].code)),n(4,h=t),console.log("rgn",h)})),v=s.data.population.value.change.all>8?"expanded":s.data.population.value.change.all>3?"grew":s.data.population.value.change.all>0?"did not change much":"shrunk",s.data.health.perc.change.good>0?y="improved":s.data.health.perc.change.good<0&&(y="deteriorated"),(d=s.stories.map((e=>e.label.split("_")))).forEach((e=>{e.length>4&&(e[3]=e[3]+"_"+e[4],e.pop())})),o=d.map((e=>parseInt(s.data[e[0]][e[1]+"_rank_local"][e[2]][e[3]]))),f=d.map((e=>parseInt(s.data[e[0]][e[1]+"_rank"][e[2]][e[3]]))),l=d.map((e=>parseInt(s.data[e[0]][e[1]+"_rank_local"][2011][e[3]]))),p=d.map((e=>parseInt(s.data[e[0]][e[1]+"_rank"][2011][e[3]])))})),fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/E92000001.json").then((e=>e.json())).then((t=>{t.children=a.filter((t=>t.parent==e)),t.siblings=a.filter((e=>e.parent==t.parents[0].code)),n(3,c=t)})),fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/W92000004.json").then((e=>e.json())).then((t=>{t.children=a.filter((t=>t.parent==e)),t.siblings=a.filter((e=>e.parent==t.parents[0].code)),g=t}))}Pe("https://raw.githubusercontent.com/theojolliffe/census-data/main/csv/lists/Local_Authority_District_to_County_(April_2021)_Lookup_in_England.csv").then((e=>{e.forEach((e=>{N[e.LAD21NM]=e.CTY21NM}))})),Pe("https://raw.githubusercontent.com/theojolliffe/census-data/main/csv/lists/Local_Authority_Districts_(May_2021)_UK_BFE_V3.csv").then((e=>{e.forEach((e=>{e.code=e.LAD21CD,e.name=e.LAD21NM})),e=e.filter((e=>"S"!=e.LAD21CD.substring(0,1)&"N"!=e.LAD21CD.substring(0,1))),n(0,a=e.sort(((e,t)=>e.LAD21NM.localeCompare(t.LAD21NM))));let t=a[Math.round(331*Math.random())].LAD21NM;t="Somerset West and Taunton",console.log(t),n(1,r=a.find((e=>e.LAD21NM==t))),console.log(r.LAD21CD),S(r.LAD21CD)}));let A={1:"expanded",2:"grew",3:"grew",4:"remained relatively stable",5:"fell"};function C(e,t){Object.keys(e).forEach((n=>{"object"==typeof e[n]?C(e[n],t):e[n]=De(e[n],{health:y,health:y,expanded:v,plcname:t})}))}function L(e,t,n){var a=JSON.parse(JSON.stringify(n));return C(a,t.name),console.log("topics",a),b="Wales"==t.parents[0].name?g:c,rosaenlg_en_US.render(w,{language:"en_UK",place:t,data:t.data,cou:b,eng:c,rgn:e,uncap1:Ie,regionThe:qe,parent:Ie(qe(t.parents[0].name)),parentNT:Ie(qe(t.parents[0].name,"NT")),s:d,stories:t.stories,priorities:t.Priorities,grewSyn:A,locRankCha:o,natRankCha:f,locRankCur:l,natRankCur:p,hiRank:t.hiRank,topic:function(e,t){let n;return n=t||d[e][3],a[d[e][0]][n]},topics:a,chains:We,country:"Wales"==t.parents[0].name?"Wales":"England",get_word:He,figs:Ue,otherEst:Ze,cur:Ye,cha:Ve,qui:Je,cap:$u,cap:$u,otherRank:Xe,ud:Qe,city:et,drop:Oe,drop:Oe,ord:rt,ageBandLU:st,eq:ot,nuword:at,sign:tt,udord:lt,near:t.nearbyArea.nearTops,simi:t.similar,adv:ct,uds:ut,more:M,pluralize:At,pluralize:At,countyLU:N,fuzz:i,prev:Ge,regionLU:T,findOne:$}).split('<div id="esc123"></div>')}var R;R=()=>{setInterval((function(){d3.selectAll("div#visph").attr("style","\n\t\t\tbackground-color: #f6f6f6; \n\t\t\tcolor: #e1e7ea; \n\t\t\theight: 240px;\n\t\t\tpadding: 80px;\n\t\t\tfont-size: 2.8rem;\n\t\t\tfont-weight: 600;\n\t\t\tmargin-bottom: 80px;")}),1e3)},O().$$.on_mount.push(R);return[a,r,s,c,h,k,x,M,E,L,()=>{n(8,E=!0)},S,function(e,t){var n=JSON.parse(JSON.stringify(t));C(n,e.name);let i=[],a=0;return e.stories.forEach((e=>{i.length<4&Math.abs(e.value)>3&&(i.push(e.label.split("_")),a+=Math.abs(e.value))})),rosaenlg_en_US.render(_,{language:"en_UK",place:e,topics:n,s:d,sf:i,changeMag:a,grewSyn:A,qui:Je,natRankCha:f})},function(e){let t=s.stories[e].label.split("_");if(t.length>4&&(t[3]=t[3]+"_"+t[4],t.pop()),"agemed"==t[0]){function e(e,t){let n=[];return Object.keys(e).forEach((i=>{n.push({x:i,y:e[i],g:t})})),n}return{legend:!0,height:120,chartData:[[e(b.data.age10yr.perc[2001],2011),e(b.data.age10yr.perc[2011],2021)],[e(h.data.age10yr.perc[2001],2011),e(h.data.age10yr.perc[2011],2021)],[e(s.data.age10yr.perc[2001],2011),e(s.data.age10yr.perc[2011],2021)]],labels:[b.name,h.name,s.name],xKey:"value",yKey:"year"}}return s.stories[e].type.includes("size")?"population"==t[0]?"Wales"==h.name?{height:120,data:[{label:c.name,2011:wu(c.data.density.value[2001].all),2021:wu(c.data.density.value[2011].all)},{label:h.name,2011:wu(h.data.density.value[2001].all),2021:wu(h.data.density.value[2011].all)},{label:s.name,2011:wu(s.data.density.value[2001].all),2021:wu(s.data.density.value[2011].all)}]}:{height:120,data:[{label:h.name,2011:wu(h.data.density.value[2001].all),2021:wu(h.data.density.value[2011].all)},{label:s.nearbyArea.nearTops.name.name,2011:wu(s.nearbyArea.nearTops.name.data.density.value[2001].all),2021:wu(s.nearbyArea.nearTops.name.data.density.value[2011].all)},{label:s.name,2011:wu(s.data.density.value[2001].all),2021:wu(s.data.density.value[2011].all)}]}:"Wales"==h.name?{legend:!0,height:120,data:[{label:h.name,2011:h.data[t[0]][t[1]][2001][t[3]],2021:h.data[t[0]][t[1]][2011][t[3]]},{label:s.nearbyArea.nearTops.name,2011:s.nearbyArea.nearTops.data[t[0]][t[1]][2001][t[3]],2021:s.nearbyArea.nearTops.data[t[0]][t[1]][2011][t[3]]},{label:s.name,2011:s.data[t[0]][t[1]][2001][t[3]],2021:s.data[t[0]][t[1]][2011][t[3]]}]}:{legend:!0,height:120,data:[{label:c.name,2011:c.data[t[0]][t[1]][2001][t[3]],2021:c.data[t[0]][t[1]][2011][t[3]]},{label:s.parents[0].name,2011:h.data[t[0]][t[1]][2001][t[3]],2021:h.data[t[0]][t[1]][2011][t[3]]},{label:s.name,2011:s.data[t[0]][t[1]][2001][t[3]],2021:s.data[t[0]][t[1]][2011][t[3]]}]}:("population"==t[0]&&(t[0]="density",t[3]="all"),(n=(n=m.filter((e=>e.parent==s.parents[0].name&e.topic==t[0]+"_"+t[3]))).map((e=>({change:e.change,value:"density"==t[0]?.714*parseFloat(e[2011]):parseFloat(e[2011]),unique:e.lad,id:e.parent})))).forEach(((e,t)=>{e.unique==s.name?e.id=s.name:e.id==s.parents[0].name?e.id="Rest of "+Ie(qe(s.parents[0].name)):e.id="Rest of England"})),n.push({change:+b.data[t[0]][t[1]].change[t[3]],value:+b.data[t[0]][t[1]][2011][t[3]],unique:"Average across "+b.name,id:"Average across "+b.name}),{mode:"stacked",line:!1,legend:!0,data:n,xKey:"value",yKey:null,rKey:"change",r:[3,9],zKey:"id"});var n},function(e){let t=s.stories[e].label.split("_");return t.length>4&&(t[3]=t[3]+"_"+t[4],t.pop()),"agemed"==t[0]?xc:s.stories[e].type.includes("size")?cu:Sl},function(){n(7,M=!M),n(9,L)},function(e){n(1,r=e)},()=>{r&&S(r.code)}]}class Mu extends ke{constructor(e){super(),$e(this,e,_u,bu,o,{},null,[-1,-1])}}function Eu(e,t,n){const i=e.slice();return i[32]=t[n],i[35]=t,i[34]=n,i}function Tu(e,t,n){const i=e.slice();return i[32]=t[n],i[33]=t,i[34]=n,i}function Nu(e){let t,n,i,a,r,s,o,l=(e[0]?e[0]:"Select one")+"";return{c(){t=E("a"),n=E("span"),i=N(l),a=S(),r=E("span"),r.textContent=" ",L(n,"class","svelte-qdzmwx"),L(r,"class","button svelte-qdzmwx"),F(r,"search",e[3]),F(r,"down",!e[3]),L(t,"id","toggle"),L(t,"class","svelte-qdzmwx")},m(l,c){w(l,t,c),k(t,n),k(n,i),k(t,a),k(t,r),s||(o=C(t,"click",e[12]),s=!0)},p(e,t){1&t[0]&&l!==(l=(e[0]?e[0]:"Select one")+"")&&R(i,l),8&t[0]&&F(r,"search",e[3]),8&t[0]&&F(r,"down",!e[3])},d(e){e&&_(t),s=!1,o()}}}function Su(e){let t,n,i,a,s,o,l,c,u=e[6][e[1]]+"",h=e[2]&&Au(e);return{c(){t=E("a"),n=E("span"),i=N(u),a=S(),h&&h.c(),s=S(),o=E("span"),o.textContent=" ",L(n,"class","selection svelte-qdzmwx"),L(o,"class","button close svelte-qdzmwx"),L(t,"id","toggle"),L(t,"class","selected svelte-qdzmwx")},m(r,u){w(r,t,u),k(t,n),k(n,i),k(n,a),h&&h.m(n,null),k(t,s),k(t,o),l||(c=[C(o,"click",e[14]),C(t,"click",e[12])],l=!0)},p(e,t){66&t[0]&&u!==(u=e[6][e[1]]+"")&&R(i,u),e[2]?h?h.p(e,t):(h=Au(e),h.c(),h.m(n,null)):h&&(h.d(1),h=null)},d(e){e&&_(t),h&&h.d(),l=!1,r(c)}}}function Au(e){let t,n,i=e[6][e[2]]+"";return{c(){t=E("small"),n=N(i),L(t,"class","svelte-qdzmwx")},m(e,i){w(e,t,i),k(t,n)},p(e,t){68&t[0]&&i!==(i=e[6][e[2]]+"")&&R(n,i)},d(e){e&&_(t)}}}function Cu(e){let t,n,i,a,s,o;function l(e,t){return e[4].length<0?ju:e[9][0]&&e[2]?zu:e[9][0]?Ru:Lu}let c=l(e),u=c(e);return{c(){t=E("div"),n=E("input"),i=S(),a=E("ul"),u.c(),L(n,"type","text"),L(n,"placeholder",""),L(n,"autocomplete","false"),L(n,"class","svelte-qdzmwx"),L(a,"class","svelte-qdzmwx"),L(t,"id","dropdown"),j(t,"top","0"),L(t,"class","svelte-qdzmwx")},m(r,l){w(r,t,l),k(t,n),z(n,e[4]),e[23](n),k(t,i),k(t,a),u.m(a,null),e[30](t),s||(o=[C(n,"input",e[22]),C(n,"keyup",e[16])],s=!0)},p(e,t){16&t[0]&&n.value!==e[4]&&z(n,e[4]),c===(c=l(e))&&u?u.p(e,t):(u.d(1),u=c(e),u&&(u.c(),u.m(a,null)))},d(n){n&&_(t),e[23](null),u.d(),e[30](null),s=!1,r(o)}}}function Lu(t){let n;return{c(){n=E("li"),n.textContent="No results",L(n,"class","svelte-qdzmwx")},m(e,t){w(e,n,t)},p:e,d(e){e&&_(n)}}}function Ru(e){let t,n=e[9],i=[];for(let t=0;t<n.length;t+=1)i[t]=Du(Eu(e,n,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=A()},m(e,n){for(let t=0;t<i.length;t+=1)i[t].m(e,n);w(e,t,n)},p(e,a){if(11010&a[0]){let r;for(n=e[9],r=0;r<n.length;r+=1){const s=Eu(e,n,r);i[r]?i[r].p(s,a):(i[r]=Du(s),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){M(i,e),e&&_(t)}}}function zu(e){let t,n=e[9],i=[];for(let t=0;t<n.length;t+=1)i[t]=Pu(Tu(e,n,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=A()},m(e,n){for(let t=0;t<i.length;t+=1)i[t].m(e,n);w(e,t,n)},p(e,a){if(11014&a[0]){let r;for(n=e[9],r=0;r<n.length;r+=1){const s=Tu(e,n,r);i[r]?i[r].p(s,a):(i[r]=Pu(s),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){M(i,e),e&&_(t)}}}function ju(t){let n;return{c(){n=E("li"),n.textContent="Type a name...",L(n,"class","svelte-qdzmwx")},m(e,t){w(e,n,t)},p:e,d(e){e&&_(n)}}}function Du(e){let t,n,i,a,s,o=e[32][e[1]]+"",l=e[34];function c(){return e[27](e[32])}function u(){return e[28](e[34])}const h=()=>e[29](t,l),d=()=>e[29](null,l);return{c(){t=E("li"),n=N(o),i=S(),L(t,"class","svelte-qdzmwx"),F(t,"highlight",e[8]==e[34])},m(e,r){w(e,t,r),k(t,n),k(t,i),h(),a||(s=[C(t,"click",c),C(t,"mouseover",u)],a=!0)},p(i,a){e=i,514&a[0]&&o!==(o=e[32][e[1]]+"")&&R(n,o),l!==e[34]&&(d(),l=e[34],h()),256&a[0]&&F(t,"highlight",e[8]==e[34])},d(e){e&&_(t),d(),a=!1,r(s)}}}function Pu(e){let t,n,i,a,s,o,l,c,u=e[32][e[1]]+"",h=e[32][e[2]]+"",d=e[34];function f(){return e[24](e[32])}function p(){return e[25](e[34])}const g=()=>e[26](t,d),m=()=>e[26](null,d);return{c(){t=E("li"),n=N(u),i=S(),a=E("small"),s=N(h),o=S(),L(a,"class","svelte-qdzmwx"),L(t,"class","svelte-qdzmwx"),F(t,"highlight",e[8]==e[34])},m(e,r){w(e,t,r),k(t,n),k(t,i),k(t,a),k(a,s),k(t,o),g(),l||(c=[C(t,"click",f),C(t,"mouseover",p)],l=!0)},p(i,a){e=i,514&a[0]&&u!==(u=e[32][e[1]]+"")&&R(n,u),516&a[0]&&h!==(h=e[32][e[2]]+"")&&R(s,h),d!==e[34]&&(m(),d=e[34],g()),256&a[0]&&F(t,"highlight",e[8]==e[34])},d(e){e&&_(t),m(),l=!1,r(c)}}}function Wu(t){let n,i,a,r;function s(e,t){return e[6]&&!e[3]?Su:Nu}let o=s(t),l=o(t),c=t[7]&&Cu(t);return{c(){n=E("div"),l.c(),i=S(),c&&c.c(),L(n,"id","select"),L(n,"class","svelte-qdzmwx"),F(n,"active",t[7])},m(e,s){w(e,n,s),l.m(n,null),k(n,i),c&&c.m(n,null),a||(r=C(n,"keydown",t[15]),a=!0)},p(e,t){o===(o=s(e))&&l?l.p(e,t):(l.d(1),l=o(e),l&&(l.c(),l.m(n,i))),e[7]?c?c.p(e,t):(c=Cu(e),c.c(),c.m(n,null)):c&&(c.d(1),c=null),128&t[0]&&F(n,"active",e[7])},i:e,o:e,d(e){e&&_(n),l.d(),c&&c.d(),a=!1,r()}}}function Fu(e,t,n){let i;const a=K();let r,s,o,{options:l}=t,{selectedb:c=null}=t,{placeholder:u="Find an area..."}=t,{value:h="code"}=t,{label:d="name"}=t,{group:f=null}=t,{search:p=!1}=t,g=c,m=c?l.find((e=>{e[h],c[h]})):null,y=!1,v="",x=null,b=[];function $(e){n(17,c=e),n(7,y=!1),a("select",{selectedb:e,value:e[h]})}return e.$$set=e=>{"options"in e&&n(18,l=e.options),"selectedb"in e&&n(17,c=e.selectedb),"placeholder"in e&&n(0,u=e.placeholder),"value"in e&&n(19,h=e.value),"label"in e&&n(1,d=e.label),"group"in e&&n(2,f=e.group),"search"in e&&n(3,p=e.search)},e.$$.update=()=>{16&e.$$.dirty[0]&&n(21,i=v?new RegExp(v,"i"):null),2359298&e.$$.dirty[0]&&(n(9,r=i?l.filter((e=>i.test(e[d]))):l),n(8,x=0)),32&e.$$.dirty[0]&&(document.onclick=function(e){e.target!==s&&(n(7,y=!1),n(8,x=0))}),1966080&e.$$.dirty[0]&&g!=c&&(n(6,m=l.find((e=>e[h]==c[h]))),n(20,g=c))},[u,d,f,p,v,s,m,y,x,r,o,b,function(e){var t;e.stopPropagation(),n(4,v=""),n(7,y=!y),(t=10,new Promise((e=>setTimeout(e,t)))).then((()=>{o&&y&&o.focus()}))},$,function(e){e.stopPropagation(),n(17,c=null),n(20,g=null),n(6,m=null),a("select",{selectedb:null,value:null})},function(e){y&&r[0]&&Number.isInteger(x)&&(38===e.keyCode?(n(8,x-=x>0?1:0),b[x].scrollIntoView({block:"nearest",inline:"start"})):40===e.keyCode&&(n(8,x+=x<r.length-1?1:0),b[x].scrollIntoView({block:"nearest",inline:"end"})))},function(e){r[0]&&Number.isInteger(x)&&13===e.keyCode&&$(r[x])},c,l,h,g,i,function(){v=this.value,n(4,v)},function(e){V[e?"unshift":"push"]((()=>{o=e,n(10,o)}))},e=>$(e),e=>n(8,x=e),function(e,t){V[e?"unshift":"push"]((()=>{b[t]=e,n(11,b)}))},e=>$(e),e=>n(8,x=e),function(e,t){V[e?"unshift":"push"]((()=>{b[t]=e,n(11,b)}))},function(e){V[e?"unshift":"push"]((()=>{s=e,n(5,s)}))}]}class qu extends ke{constructor(e){super(),$e(this,e,Fu,Wu,o,{options:18,selectedb:17,placeholder:0,value:19,label:1,group:2,search:3},null,[-1,-1])}}function Iu(e,t,n){const i=e.slice();return i[45]=t[n],i[47]=n,i}function Ou(e){let t;return{c(){t=E("div"),t.textContent="Please wait a moment after selecting a topic while we search for relevant stories...",j(t,"padding","180px"),j(t,"padding","20px 20px 20px 20px"),j(t,"font-size","x-large")},m(e,n){w(e,t,n)},d(e){e&&_(t)}}}function Bu(t){let n;return{c(){n=E("div"),n.textContent="Loading...",j(n,"padding","50px"),j(n,"padding-left","40%"),j(n,"font-size","x-large")},m(e,t){w(e,n,t)},p:e,i:e,o:e,d(e){e&&_(n)}}}function Ku(e){let t,n,i,a;const r=[Uu,Hu],s=[];function o(e,t){return e[3]?0:1}return t=o(e),n=s[t]=r[t](e),{c(){n.c(),i=A()},m(e,n){s[t].m(e,n),w(e,i,n),a=!0},p(e,a){let l=t;t=o(e),t===l?s[t].p(e,a):(le(),he(s[l],1,1,(()=>{s[l]=null})),ce(),n=s[t],n?n.p(e,a):(n=s[t]=r[t](e),n.c()),ue(n,1),n.m(i.parentNode,i))},i(e){a||(ue(n),a=!0)},o(e){he(n),a=!1},d(e){s[t].d(e),e&&_(i)}}}function Hu(t){let n;return{c(){n=E("div"),n.textContent="Loading...",j(n,"padding","50px"),j(n,"padding-left","40%"),j(n,"font-size","x-large")},m(e,t){w(e,n,t)},p:e,i:e,o:e,d(e){e&&_(n)}}}function Uu(e){let t,n,i,a,r;function s(t){e[18](t)}let o={options:e[13],placeholder:"Search a topic",value:"value",label:"label",search:!0};return void 0!==e[0]&&(o.selected=e[0]),i=new Et({props:o}),V.push((()=>me(i,"selected",s))),i.$on("select",e[19]),{c(){t=E("div"),n=E("div"),ye(i.$$.fragment),j(n,"width","640px"),j(n,"margin","50px auto")},m(e,a){w(e,t,a),k(t,n),ve(i,n,null),r=!0},p(e,t){const n={};!a&&1&t[0]&&(a=!0,n.selected=e[0],te((()=>a=!1))),i.$set(n)},i(e){r||(ue(i.$$.fragment,e),r=!0)},o(e){he(i.$$.fragment,e),r=!1},d(e){e&&_(t),xe(i)}}}function Gu(e){let t,n,i=e[9]&&Yu(e);return{c(){i&&i.c(),t=A()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,n){e[9]?i?(i.p(e,n),512&n[0]&&ue(i,1)):(i=Yu(e),i.c(),ue(i,1),i.m(t.parentNode,t)):i&&(le(),he(i,1,1,(()=>{i=null})),ce())},i(e){n||(ue(i),n=!0)},o(e){he(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function Yu(e){let t,n,i=e[11]&&Vu(e);return{c(){i&&i.c(),t=A()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,n){e[11]?i?(i.p(e,n),2048&n[0]&&ue(i,1)):(i=Vu(e),i.c(),ue(i,1),i.m(t.parentNode,t)):i&&(le(),he(i,1,1,(()=>{i=null})),ce())},i(e){n||(ue(i),n=!0)},o(e){he(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function Vu(e){let t,n,i=e[5]&&Ju(e);return{c(){i&&i.c(),t=A()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,n){e[5]?i?(i.p(e,n),32&n[0]&&ue(i,1)):(i=Ju(e),i.c(),ue(i,1),i.m(t.parentNode,t)):i&&(le(),he(i,1,1,(()=>{i=null})),ce())},i(e){n||(ue(i),n=!0)},o(e){he(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function Ju(e){let t,n,i=e[4]&&Zu(e);return{c(){i&&i.c(),t=A()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,n){e[4]?i?(i.p(e,n),16&n[0]&&ue(i,1)):(i=Zu(e),i.c(),ue(i,1),i.m(t.parentNode,t)):i&&(le(),he(i,1,1,(()=>{i=null})),ce())},i(e){n||(ue(i),n=!0)},o(e){he(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function Zu(e){let t,n,i,a,r,s,o,l,c,u,h,d,f,p,g,m=e[0].label+"",y=[],v=new Map,x=e[2]&&Xu(e),b=e[12];const $=e=>e[47];for(let t=0;t<b.length;t+=1){let n=Iu(e,b,t),i=$(n);v.set(i,y[t]=eh(i,n))}return{c(){t=E("div"),n=E("h1"),i=N(m),a=S(),x&&x.c(),r=S(),s=E("main");for(let e=0;e<y.length;e+=1)y[e].c();o=S(),l=E("hr"),c=S(),u=E("h2"),u.textContent="Creating this article",h=S(),d=E("p"),d.textContent="This article was generated using some automation. Topics are automatically chosen based on how relevant they are for each area.",f=S(),p=E("div"),L(n,"class","svelte-qu9vuh"),j(t,"width","640px"),j(t,"margin","0 auto"),j(l,"width","40%"),j(l,"margin","60px auto 30px auto"),L(u,"id","create"),j(p,"height","200px"),L(s,"class","svelte-qu9vuh")},m(e,m){w(e,t,m),k(t,n),k(n,i),w(e,a,m),x&&x.m(e,m),w(e,r,m),w(e,s,m);for(let e=0;e<y.length;e+=1)y[e].m(s,null);k(s,o),k(s,l),k(s,c),k(s,u),k(s,h),k(s,d),k(s,f),k(s,p),g=!0},p(e,t){(!g||1&t[0])&&m!==(m=e[0].label+"")&&R(i,m),e[2]?x?(x.p(e,t),4&t[0]&&ue(x,1)):(x=Xu(e),x.c(),ue(x,1),x.m(r.parentNode,r)):x&&(le(),he(x,1,1,(()=>{x=null})),ce()),135232&t[0]&&(b=e[12],y=ge(y,t,$,1,e,b,v,s,fe,eh,o,Iu))},i(e){g||(ue(x),g=!0)},o(e){he(x),g=!1},d(e){e&&_(t),e&&_(a),x&&x.d(e),e&&_(r),e&&_(s);for(let e=0;e<y.length;e+=1)y[e].d()}}}function Xu(e){let t,n,i,a,r,s,o;function l(t){e[20](t)}let c={options:e[2],placeholder:"Search a subtopic",value:"value",label:"label",search:!0};void 0!==e[1]&&(c.selectedb=e[1]),i=new qu({props:c}),V.push((()=>me(i,"selectedb",l))),i.$on("select",e[21]);let u=e[10]&&Qu(e);return{c(){t=E("div"),n=E("div"),ye(i.$$.fragment),r=S(),u&&u.c(),s=A(),j(n,"width","640px"),j(n,"margin","50px auto")},m(e,a){w(e,t,a),k(t,n),ve(i,n,null),w(e,r,a),u&&u.m(e,a),w(e,s,a),o=!0},p(e,t){const n={};4&t[0]&&(n.options=e[2]),!a&&2&t[0]&&(a=!0,n.selectedb=e[1],te((()=>a=!1))),i.$set(n),e[10]?u?u.p(e,t):(u=Qu(e),u.c(),u.m(s.parentNode,s)):u&&(u.d(1),u=null)},i(e){o||(ue(i.$$.fragment,e),o=!0)},o(e){he(i.$$.fragment,e),o=!1},d(e){e&&_(t),xe(i),e&&_(r),u&&u.d(e),e&&_(s)}}}function Qu(e){let t,n,i,a=e[1].label+"";return{c(){t=E("div"),n=E("h1"),i=N(a),L(n,"class","svelte-qu9vuh"),j(t,"width","640px"),j(t,"margin","0 auto")},m(e,a){w(e,t,a),k(t,n),k(n,i)},p(e,t){2&t[0]&&a!==(a=e[1].label+"")&&R(i,a)},d(e){e&&_(t)}}}function eh(e,t){let n,i,a,r,s,o=t[45].place.name+"",l=t[17](t[45].place,t[45].region,t[6],t[45].s,t[45].story)+"";return{key:e,first:null,c(){n=E("h2"),i=N(o),a=S(),r=new q,s=A(),j(n,"text-decoration","underline"),r.a=s,this.first=n},m(e,t){w(e,n,t),k(n,i),w(e,a,t),r.m(l,e,t),w(e,s,t)},p(e,n){t=e,4096&n[0]&&o!==(o=t[45].place.name+"")&&R(i,o),4160&n[0]&&l!==(l=t[17](t[45].place,t[45].region,t[6],t[45].s,t[45].story)+"")&&r.p(l)},d(e){e&&_(n),e&&_(a),e&&_(s),e&&r.d()}}}function th(e){let t,n,i,a,r,s,o,l,u,h,d,f,p,g=e[8]&&Ou();const m=[Ku,Bu],y=[];function v(e,t){return e[5]?0:1}o=v(e),l=y[o]=m[o](e);let x=e[7]&&Gu(e);return{c(){t=E("script"),i=E("script"),r=S(),g&&g.c(),s=S(),l.c(),u=S(),h=E("div"),x&&x.c(),c(t.src,n="https://d3js.org/d3.v3.min.js")||L(t,"src","https://d3js.org/d3.v3.min.js"),L(t,"charset","utf-8"),c(i.src,a="https://unpkg.com/rosaenlg@3.0.1/dist/rollup/rosaenlg_tiny_en_US_3.0.1_comp.js")||L(i,"src","https://unpkg.com/rosaenlg@3.0.1/dist/rollup/rosaenlg_tiny_en_US_3.0.1_comp.js")},m(n,a){k(document.head,t),k(document.head,i),w(n,r,a),g&&g.m(n,a),w(n,s,a),y[o].m(n,a),w(n,u,a),w(n,h,a),x&&x.m(h,null),d=!0,f||(p=C(i,"load",e[14]),f=!0)},p(e,t){e[8]?g||(g=Ou(),g.c(),g.m(s.parentNode,s)):g&&(g.d(1),g=null);let n=o;o=v(e),o===n?y[o].p(e,t):(le(),he(y[n],1,1,(()=>{y[n]=null})),ce(),l=y[o],l?l.p(e,t):(l=y[o]=m[o](e),l.c()),ue(l,1),l.m(u.parentNode,u)),e[7]?x?(x.p(e,t),128&t[0]&&ue(x,1)):(x=Gu(e),x.c(),ue(x,1),x.m(h,null)):x&&(le(),he(x,1,1,(()=>{x=null})),ce())},i(e){d||(ue(l),ue(x),d=!0)},o(e){he(l),he(x),d=!1},d(e){_(t),_(i),e&&_(r),g&&g.d(e),e&&_(s),y[o].d(e),e&&_(u),e&&_(h),x&&x.d(),f=!1,p()}}}function nh(e,t,n){let i,a;var r,s,o,l,c,u,h,d=!1;function f(e,t){return!(new bn([e],{includeScore:!0}).search(t).length>0)}const p=(e,t)=>t.some((t=>e.includes(t)));let g=[{label:"Average age",value:"agemed_value_change"},{label:"Employment status",value:"economic_perc_change"},{label:"Ethnicity",value:"ethnicity_perc_change"},{label:"Health",value:"health_perc_change"},{label:"Hours worked",value:"hoursworked_perc_change"},{label:"Households with children",value:"children_perc_change"},{label:"Households by family",value:"household_perc_change"},{label:"Marital status",value:"marital_perc_change"},{label:"Population",value:"population_value_change"},{label:"Religion",value:"religion_perc_change"},{label:"Tenure",value:"tenure_perc_change"},{label:"Welsh",value:"welsh_perc_change"}];s=g.find((e=>"agemed_value_change"==e.value));var m={};Pe("https://raw.githubusercontent.com/theojolliffe/census-data/main/csv/lists/Corresponding%20Local%20Authorities-Table%201.csv").then((e=>{e.forEach((e=>{m[e.Name]=e["Region/Country"]})),console.log("regionLU",m)}));var y={};Pe("https://raw.githubusercontent.com/theojolliffe/census-data/main/csv/lists/Local_Authority_District_to_County_(April_2021)_Lookup_in_England.csv").then((e=>{e.forEach((e=>{y[e.LAD21NM]=e.CTY21NM})),console.log("countyLU",y)})),console.log("topicOptions",g);var v={agemed_value_change:!1,economic_perc_change:[{label:"All",value:"all"},{label:"Employed",value:"employee"},{label:"Self-employed",value:"self-employed"},{label:"Student",value:"student"},{label:"Unemployed",value:"unemployed"}],ethnicity_perc_change:[{label:"All",value:"all"},{label:"Asian",value:"asian"},{label:"Black",value:"black"},{label:"White",value:"white"}],health_perc_change:[{label:"All",value:"all"},{label:"Good",value:"good"},{label:"Bad",value:"bad"}],hoursworked_perc_change:[{label:"All",value:"all"},{label:"1-15 hours per week",value:"Male1-15"},{label:"Over 49 hours per week",value:"Male49plus"}],children_perc_change:[{label:"All",value:"all"},{label:"Households with children",value:"Kids"},{label:"Households without children",value:"NoKids"},{label:"Households with only non-dependent children",value:"NonDepKids"}],household_perc_change:[{label:"All",value:"all"},{label:"Cohabiting",value:"Cohabiting"},{label:"Married couple",value:"Married"},{label:"Single parent",value:"LoneParent"},{label:"Single person",value:"OnePerson"}],marital_perc_change:[{label:"All",value:"all"},{label:"Married",value:"Married"},{label:"Seperated",value:"Seperated"},{label:"Single",value:"Single"}],population_value_change:!1,religion_perc_change:[{label:"All",value:"all"},{label:"Christian",value:"Christian"},{label:"Hindu",value:"Hindu"},{label:"Jewish",value:"Jewish"},{label:"Muslim",value:"Muslim"},{label:"No religion",value:"Noreligion"}],tenure_perc_change:[{label:"All",value:"all"},{label:"Homeownership",value:"owned"},{label:"Private renting",value:"rented_private"},{label:"Social renting",value:"rented_social"}],welsh_perc_change:!1},x=["E12000001","E12000002","E12000003","E12000004","E12000005","E12000006","E12000007","E12000008","E12000009","W92000004"],b=[];fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/W92000004.json").then((e=>e.json())).then((e=>{r=e})),fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/E92000001.json").then((e=>e.json())).then((e=>{n(4,l=e),n(9,k=!0)})).then((e=>{x.forEach((e=>{fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/"+e+".json").then((e=>e.json())).then((e=>{b.push(e)}))}))})).then((e=>{n(5,c=!0),n(8,d=!0)})),console.log("regions",b);var $,k=!1,w=!1,_=[];["E06000047","E06000005","E06000001","E06000002","E06000057","E06000003","E06000004","E08000037","E08000021","E08000022","E08000023","E08000024","E06000008","E06000009","E06000049","E06000050","E06000006","E06000007","E07000026","E07000027","E07000028","E07000029","E07000030","E07000031","E08000001","E08000002","E08000003","E08000004","E08000005","E08000006","E08000007","E08000008","E08000009","E08000010","E07000117","E07000118","E07000119","E07000120","E07000121","E07000122","E07000123","E07000124","E07000125","E07000126","E07000127","E07000128","E08000011","E08000012","E08000014","E08000013","E08000015","E06000011","E06000010","E06000012","E06000013","E06000014","E07000163","E07000164","E07000165","E07000166","E07000167","E07000168","E07000169","E08000016","E08000017","E08000018","E08000019","E08000032","E08000033","E08000034","E08000035","E08000036","E06000015","E06000016","E06000018","E06000017","E07000032","E07000033","E07000034","E07000035","E07000036","E07000037","E07000038","E07000039","E07000129","E07000130","E07000131","E07000132","E07000133","E07000134","E07000135","E07000136","E07000137","E07000138","E07000139","E07000140","E07000141","E07000142","E07000170","E07000171","E07000172","E07000173","E07000174","E07000175","E07000176","E06000019","E06000051","E06000021","E06000020","E07000192","E07000193","E07000194","E07000195","E07000196","E07000197","E07000198","E07000199","E07000218","E07000219","E07000220","E07000221","E07000222","E08000025","E08000026","E08000027","E08000028","E08000029","E08000030","E08000031","E07000234","E07000235","E07000236","E07000237","E07000238","E07000239","E06000055","E06000056","E06000032","E06000031","E06000033","E06000034","E07000008","E07000009","E07000010","E07000011","E07000012","E07000066","E07000067","E07000068","E07000069","E07000070","E07000071","E07000072","E07000073","E07000074","E07000075","E07000076","E07000077","E07000095","E07000096","E07000242","E07000098","E07000099","E07000240","E07000243","E07000102","E07000103","E07000241","E07000143","E07000144","E07000145","E07000146","E07000147","E07000148","E07000149","E07000200","E07000202","E07000203","E09000007","E09000012","E09000013","E09000014","E09000019","E09000020","E09000022","E09000023","E09000025","E09000028","E09000030","E09000032","E09000001","E09000033","E09000002","E09000003","E09000004","E09000005","E09000006","E09000008","E09000009","E09000010","E09000011","E09000015","E09000016","E09000017","E09000018","E09000021","E09000024","E09000026","E09000027","E09000029","E09000031","E06000036","E06000043","E06000046","E06000035","E06000042","E06000044","E06000038","E06000039","E06000045","E06000037","E06000040","E06000041","E07000061","E07000062","E07000063","E07000064","E07000065","E07000084","E07000085","E07000086","E07000087","E07000088","E07000089","E07000090","E07000091","E07000092","E07000093","E07000094","E07000105","E07000106","E07000107","E07000108","E07000109","E07000110","E07000111","E07000112","E07000113","E07000114","E07000115","E07000116","E07000177","E07000178","E07000179","E07000180","E07000181","E07000207","E07000208","E07000209","E07000210","E07000211","E07000212","E07000213","E07000214","E07000215","E07000216","E07000217","E07000223","E07000224","E07000225","E07000226","E07000227","E07000228","E07000229","E06000022","E06000023","E06000052","E06000024","E06000026","E06000025","E06000030","E06000027","E06000054","E07000040","E07000041","E07000042","E07000043","E07000044","E07000045","E07000046","E07000047","E07000078","E07000079","E07000080","E07000081","E07000082","E07000083","E07000187","E07000188","E07000189","W06000001","W06000002","W06000003","W06000004","W06000005","W06000006","W06000023","W06000008","W06000009","W06000010","W06000011","W06000012","W06000013","W06000014","W06000015","W06000016","W06000024","W06000018","W06000019","W06000020","W06000021","W06000022"].forEach((e=>{fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/"+e+".json").then((e=>e.json())).then((e=>{_.push(e)}))})),setTimeout((function(){n(3,i=!0)}),1e3),fetch("./archie.aml").then((e=>e.text())).then((e=>n(6,$=St.load(e))));var M=!1;let E={1:"expanded",2:"grew",3:"grew",4:"remained relatively stable",5:"fell"};var T=[],N=[];function S(e){if("all"==e)C(s.value);else{e=s.value+"_"+e,console.log("codesub",e),N=[];for(let t=0;t<_.length;t++){let n,i=_[t].stories.filter((t=>t.label==e));i.length>0&&(n=i[0].label.split("_"),n.length>4&&(n[3]=n[3]+"_"+n[4],n.pop()));let a={place:_[t],story:i,region:b.find((e=>e.code==_[t].parents[0].code)),s:[n]};N=[...N,a]}for(let e=0;e<N.length;e++)0==N[e].story.length&&(N.splice(e,1),e-=1);let t=N.sort((function(e,t){return e.story[0].value-t.story[0].value})).slice(0,3),i=N.sort((function(e,t){return t.story[0].value-e.story[0].value})).slice(0,3),a=N.sort((function(e,t){return Math.abs(e.story[0].value)-Math.abs(t.story[0].value)})).slice(0,3);N=i.concat(a,t),console.log("subplacesOb",N),n(12,T=N),n(12,T=[...new Set(T)])}n(10,w=!0)}function A(e){n(8,d=!1),C(e)}function C(e){console.log("code",e),n(12,T=[]);for(let t=0;t<_.length;t++){let i,a=_[t].stories.filter((t=>t.label.split("_")[0]+"_"+t.label.split("_")[1]+"_"+t.label.split("_")[2]==e));a.length>0&&(i=a[0].label.split("_"),i.length>4&&(i[3]=i[3]+"_"+i[4],i.pop()));let r={place:_[t],story:a,region:b.find((e=>e.code==_[t].parents[0].code)),s:[i]};n(12,T=[...T,r])}for(let e=0;e<T.length;e++)0==T[e].story.length&&(T.splice(e,1),e-=1);let t=T.sort((function(e,t){return e.story[0].value-t.story[0].value})).slice(0,3),i=T.sort((function(e,t){return t.story[0].value-e.story[0].value})).slice(0,3),a=T.sort((function(e,t){return Math.abs(e.story[0].value)-Math.abs(t.story[0].value)})).slice(0,3);n(12,T=i.concat(a,t)),n(12,T=[...new Set(T)]),console.log("places: sort ",T),n(7,u=!0)}function L(e,t){Object.keys(e).forEach((n=>{"object"==typeof e[n]?L(e[n],t):e[n]=De(e[n],{health:h,health:h,plcname:t})}))}setTimeout((function(){setInterval((function(){d3.selectAll("div#visph").attr("style","\n\t\t\tbackground-color: #f6f6f6; \n\t\t\tcolor: #e1e7ea; \n\t\t\theight: 240px;\n\t\t\tpadding: 80px;\n\t\t\tfont-size: 2.8rem;\n\t\t\tfont-weight: 600;\n\t\t\tmargin-bottom: 80px;")}),1e3)}),2e3);return e.$$.update=()=>{8&e.$$.dirty[0]&&console.log("placesload",i),1&e.$$.dirty[0]&&n(2,a=v[s.value]),4&e.$$.dirty[0]&&console.log("subTopicOpt",a),1&e.$$.dirty[0]&&console.log("*****selected",s),2&e.$$.dirty[0]&&console.log("*****selectedb",o)},n(3,i=!1),[s,o,a,i,l,c,$,u,d,k,w,M,T,g,()=>{n(11,M=!0)},S,A,function(e,t,n,i,a){e.data.population.value.change.all>8||e.data.population.value.change.all>3||e.data.population.value.change.all,e.data.health.perc.change.good>0?h="improved":e.data.health.perc.change.good<0&&(h="deteriorated");var s=JSON.parse(JSON.stringify(n));function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}return L(s,e.name),rosaenlg_en_US.render("\n// Population passes half a million\nmixin subheadVal(i)\n    if (Math.round(data[s[i][0]][s[i][1]][2001][s[i][3]]/1000) == Math.round(data[s[i][0]][s[i][1]][2011][s[i][3]]/1000))\n        | Population plateaus\n    else if (cha(s, place, i)<0)\n        | Population drops\n    else if ((data[s[i][0]][s[i][1]]['2001'][s[i][3]]<100000)&(data[s[i][0]][s[i][1]]['2011'][s[i][3]]>100000))\n        | Population passes #[+value(100000)]\n    else if ((data[s[i][0]][s[i][1]]['2001'][s[i][3]]<200000)&(data[s[i][0]][s[i][1]]['2011'][s[i][3]]>200000))\n        | Population passes #[+value(200000)]\n    else if ((data[s[i][0]][s[i][1]]['2001'][s[i][3]]<50000)&(data[s[i][0]][s[i][1]]['2011'][s[i][3]]>50000))\n        | Population passes #[+value(50000)]\n    else if ((data[s[i][0]][s[i][1]]['2001'][s[i][3]]<250000)&(data[s[i][0]][s[i][1]]['2011'][s[i][3]]>250000))\n        | Population passes quarter of a million\n    else if ((data[s[i][0]][s[i][1]]['2001'][s[i][3]]<500000)&(data[s[i][0]][s[i][1]]['2011'][s[i][3]]>500000))\n        | Population passes half a million\n    else if ((data[s[i][0]][s[i][1]]['2001'][s[i][3]]<1000000)&(data[s[i][0]][s[i][1]]['2011'][s[i][3]]>1000000))\n        | Population passes a million\n    else if ([250000, 500000, 1000000].includes(Number.parseFloat(Number.parseFloat(cur(s, place, i)).toPrecision(2))))\n        | Population\n        if (get_word(data[s[i][0]][s[i][1]]['2011'][s[i][3]], \"num\")[0]==\"just under\")\n            | nears \n        else\n            | passes\n        | #[+value(get_word(data[s[i][0]][s[i][1]]['2011'][s[i][3]], \"num\")[1])]\n    else\n        | Population\n        if ((cur(s, place, i)<(Number.parseFloat(Number.parseFloat(cur(s, place, i)).toPrecision(2)))))\n            | nears\n        else if (cur(s, place, i)>(Number.parseFloat(Number.parseFloat(cur(s, place, i))).toPrecision(2)))\n            | passes\n        else \n            | reaches\n        |  #[+value(Number.parseFloat(Number.parseFloat(cur(s, place, i)).toPrecision(2)))]\n\n\n// A younger Manchester\nmixin subheadAge(i)\n    | #[+value(ud(cha(s, place, i), place.name + ' grows older', 'A younger ' + place.name))]\n\nmixin tenYears\n  synz {mode:'sequence'}\n    syn\n      | in the decade to 2021\n    syn\n      | between the last two censuses\n    syn\n      | in the 10 years leading up to 2021\n    syn\n      | in the decade leading up to the last census\n    syn\n      | in the 10 years leading up to the last census\n\n// Between the last two censuses, the average age in Manchester fell by two years, from 34 to 32 years of age.\nmixin sent1Age(i)\n    p\n        | Census 2021 data also shows a #[+value(topics[s[i][0]].synonym)].\n        p\n            | Between the last two censuses, the median age\n            | of #[+value(place.name)] \n            | #[+value(ud(cha(s, place, i), 'rose by', 'fell by'))]\n            | #[+value(Math.abs(cha(s, place, i)), {'TEXTUAL':true })] \n            | #[+value(Math.abs(cha(s, place, i))==1?'year':'years')],\n            | from #[+value(data[s[i][0]][s[i][1]][2001][s[i][3]])]\n            | to #[+value(data[s[i][0]][s[i][1]][2011][s[i][3]])] years of age.\n\n// Manchester's average age is the lowest in the North West and remains considerably lower than the average age across England (38 years of age).\nmixin sent2Age(i)        \n    - let lra = data[s[i][0]][s[i][1]+\"_rank_local\"][2011][s[i][3]]\n    - let agediff = data[s[i][0]][s[i][1]][2011][s[i][3]]-cou.data.agemed.value[2011].all\n    - let agediff01 = data[s[i][0]][s[i][1]][2001][s[i][3]]-cou.data.agemed.value[2001].all\n    if (country==\"England\")\n        | This #[+value((place.classification!='unk')?place.classification:'area')] has \n        if (Math.abs(lra)<4)\n            | the #[+value(ud(lra, ord(lra) + \"highest\", ord(lra) + \"lowest\"))]\n            | average age in #[+value(parent)] and \n        else\n            | a #[+value(adv(cur(s, place, i), cur(s, rgn, i)))] \n            | #[+value(ud(cur(s, place, i)-cur(s, rgn, i), 'higher', 'lower'))]\n            | average age than #[+value(parent)] and\n        if (data[s[i][0]][s[i][1]][2011][s[i][3]]==eng.data.agemed.value[2011].all)\n            | has a similar age to the average local authority area across England (#[+value(eng.data.agemed.value[2011].all)] years of age).\n        else\n            | #[+value((Math.sign(agediff) == Math.sign(agediff01)?'remains':'has become'))] \n            | #[+value(Math.abs(agediff)>4?'': Math.abs(agediff)>2?'somewhat':'slightly')] \n            | #[+value(ud(agediff, 'older', 'younger'))] \n            | than the average local authority area across England (#[+value(eng.data.agemed.value[2011].all)] years of age).\n    else\n        | This #[+value((place.classification!='unk')?place.classification:'area')] has\n        | a #[+value(adv(cur(s, place, i), cur(s, simi, i)))] \n        | #[+value(ud(cur(s, place, i)-cur(s, simi, i), 'higher', 'lower'))]\n        | average age than #[+similarname] (#[+value(cur(s, simi, i))] years of age) and\n        if (Math.abs(lra)<4)\n            | the #[+value(ud(lra, ord(lra) + \"highest\", ord(lra) + \"lowest\"))]\n            | average age in #[+value(parent)].\n        else if (cur(s, place, i)==cur(s, rgn, i))\n            | has a similar age to the average local authority area across Wales (#[+value(rgn.data.agemed.value[2011].all)] years of age).\n        else\n            | #[+value((Math.sign(agediff) == Math.sign(agediff01)?'remains':'has become'))] \n            | #[+value(Math.abs(agediff)>4?'': Math.abs(agediff)>2?'somewhat':'slightly')] \n            | #[+value(ud(agediff, 'older', 'younger'))] \n            | than the average local authority area across Wales (#[+value(rgn.data.agemed.value[2011].all)] years of age).\n\n\n// The drop in age was largely driven by an increase of nearly 50,000 people between the ages of 20 and 29 years, while the population over the age of 70 years decreased by almost two thousand.\nmixin sent3Age(i)\n    - let agediff = data[s[i][0]][s[i][1]][2011][s[i][3]]-cou.data.agemed.value[2011].all\n    | The #[+value(ud(agediff, 'rise', 'drop'))] in age was because of an increase of \n    | #[+value(figs(data.age10yr.absChange['pos'][0][1])[0])]  \n    | #[+value(figs(data.age10yr.absChange['pos'][0][1])[1])]  \n    | #[+value(ageBandLU[data.age10yr.absChange['pos'][0][0]][0])]\n    if (data.age10yr.absChange['neg'][0])\n        | , while the population #[+value(ageBandLU[data.age10yr.absChange['neg'][0][0]][1])] decreased by \n        | #[+value(figs(data.age10yr.absChange['neg'][0][1])[0])]  \n        | #[+value(Math.abs(figs(data.age10yr.absChange['neg'][0][1])[1]))]  \n    | . \n\nmixin rou(x)\n    if (Math.abs(x)<10)\n        | #[+value(Math.round(x*10)/10)]\n    else \n        | #[+value(Math.round(x))]\n\nmixin pc(x)\n    if (Math.abs(x)<10)\n        | #[+value((x/100), {'FORMAT': '0.0%'})]\n    else \n        | #[+value((x/100), {'FORMAT': '0%'})] \n\n// In the decade to 2021, the population of Manchester rose by over 28% from 391,221 to 503,127, giving it the largest headcount of any local authority area in the North West of England.\nmixin sent1pop(i)\n    | #[+tenYears],\n    | the population\n    | of #[+value(place.name)]\n    if (Math.round(data[s[i][0]][s[i][1]][2001][s[i][3]]/1000) == Math.round(data[s[i][0]][s[i][1]][2011][s[i][3]]/1000))\n        | remained close to #[+value(figs(data[s[i][0]][s[i][1]][2011][s[i][3]], 3)[1])].\n    else\n        | #[+value(ud(cha(s, place, i), 'rose', 'fell by'))]\n        | #[+pc(Math.abs(data[s[i][0]][s[i][1]]['change'][s[i][3]]))],\n        | from #[+value(figs(data[s[i][0]][s[i][1]][2001][s[i][3]], 3)[0])]\n        | #[+value(figs(data[s[i][0]][s[i][1]][2001][s[i][3]], 3)[1])]\n        | to #[+value(figs(data[s[i][0]][s[i][1]][2011][s[i][3]], 3)[1])].\n\nmixin geog \n    if (country==\"Wales\")\n        | Wales\n    else\n        | #[+value((parent==\"London\")?\"Greater London\":\"the region\")]\n\n// The addition of over 100,000 people means Manchester's population is also the fastest-growing in the North West and the second-fastest-growing across England. Only Tower Hamlets in London, with an increase of almost 30%, has a faster-growing population.\nmixin sent2pop(i)\n    - var lra = data[s[i][0]][s[i][1]+'_rank_local']['change'][s[i][3]]\n    | The \n    | #[+value(ud(cha(s, place, i), \"addition\", \"loss\"))]\n    | of about\n    | #[+value(Math.abs(figs(data[s[i][0]][s[i][1]][2011][s[i][3]]-data[s[i][0]][s[i][1]][2001][s[i][3]], \"num\")[1]))]\n    | people means this area's population\n    //- If population decreased but not at a high rank\n    if ((cha(s, place, i)<0)&(Math.abs(lra)>3))\n        | decreased by #[+pc(Math.abs(cha(s, place, i)))] between that last two censuses, \n        | while the population of !{cou.name} increased by #[+pc(Math.abs(cha(s, cou, i)))]\n    else\n        | is\n        if (rgn.name!='Wales')\n            if ((Math.abs(lra)<4) & (sign(lra, cha(s, place, i))))\n                | the #[+value(ud(lra, (ord(Math.abs(lra))+\"fastest-growing\"), (ord(Math.abs(lra))+\"most rapidly-declining\")))]\n                | in !{parent}\n                | #[+value((Math.sign(data[s[i][0]][s[i][1]+'_rank']['change'][s[i][3]])!=(Math.sign(data[s[i][0]][s[i][1]+'_rank_local']['change'][s[i][3]])))?\"but\":\"and\")]\n            if (Math.abs(data[s[i][0]][s[i][1]+'_rank']['change'][s[i][3]])<6)\n                if (Math.abs(data[s[i][0]][s[i][1]+'_rank']['change'][s[i][3]])>1)\n                    | the #[+value(Math.abs(data[s[i][0]][s[i][1]+'_rank']['change'][s[i][3]]), {'ORDINAL_TEXTUAL':true})]\n                | #[+value(ud(cha(s, place, i), 'fastest-growing', 'most rapidly-declining'))]\n                | across \n                | #[+value(country)].\n            else\n                if (place.stories[i].value<(eng.data[s[i][0]][s[i][1]]['change'][s[i][3]]-1))\n                    | increasing at a slower rate than the total population of \n                else if (place.stories[i].value>(eng.data[s[i][0]][s[i][1]]['change'][s[i][3]]+1))\n                    | increasing faster than the rate of growth across \n                else\n                    | increasing at a similar rate to the overall population of\n                | #[+value(country)] (#[+value((cha(s, place, i)==cha(s, eng, i))?'also':'')]\n                | up #[+pc(eng.data[s[i][0]][s[i][1]]['change'][s[i][3]])] since the 2011 census).\n        else\n            if ((Math.abs(lra)<4) & (sign(lra, cha(s, place, i))))\n                | the #[+value(ud(lra, (ord(Math.abs(lra))+\"fastest-growing\"), (ord(Math.abs(lra))+\"most rapidly-declining\")))]\n                | in #[+geog]\n                | , while #[+value(place.name)] #[+value(data.population.value_rank[2011].all==data.population.value_rank[2001].all?\"remains\":\"becomes\")] the \n                | #[+value(udord(data.population.value_rank[2011].all, \"most\", \"least\"))] populous\n                | local authority area in the country. \n            else\n                if (place.stories[i].value<(rgn.data[s[i][0]][s[i][1]]['change'][s[i][3]]-1))\n                    | increasing at a slower rate than the total population of \n                else if (place.stories[i].value>(rgn.data[s[i][0]][s[i][1]]['change'][s[i][3]]+1))\n                    | increasing faster than the rate of growth across \n                else\n                    | increasing at a similar rate to the overall population of\n                | Wales (\n                | #[+value((cha(s, place, i)==cha(s, rgn, i))?'also':'')]\n                |up #[+pc(rgn.data[s[i][0]][s[i][1]]['change'][s[i][3]])] since the 2011 census).\n\nmixin val(x)\n    if (Math.abs(x)<10)\n        | #[+value(x, {'FORMAT': '0.0'})]\n    else\n        | #[+value(x, {'FORMAT': '0'})] \n\n// For each football pitch-sized piece of land (about 7,140 square metres), Manchester is now home to, on average, about 31 people, compared to 24 in 2011.\nmixin density \n    if (rgn.name=='Wales')\n        - country = 'Wales'\n    - let ppfp = Number.parseFloat(Number.parseFloat(0.714*data.density.value[2011].all).toPrecision(2))\n    if (ppfp==ppfp)\n        | #[+value(place.name)] is home to, on average, #[+value(ppfp)] #[+value(pluralize('person', ppfp))] per football pitch-sized piece of land (about #[+value(7140)] square metres).\n    else\n        | #[+value(place.name)] is now home to, on average, \n        | #[+value(ppfp)] #[+value(pluralize('person', ppfp))]\n        | per football pitch-sized piece of land (about #[+value(7140)] square metres), compared to \n        | #[+value(Number.parseFloat(Number.parseFloat(0.714*data.density.value[2001].all).toPrecision(2)))] in 2011.\n    if (Math.abs(data.density.value_rank[2011].all)==1)\n        | This makes it #[+value(country)]'s #[+value(udord(data.density.value_rank[2011].all, \"most densely-populated\", \"least densely-populated\"))] #[+value(place.gss.short)].\n    else if (Math.abs(data.density.value_rank_local[2011].all)==1)\n        | This makes it #[+value(parent)]'s #[+value(udord(data.density.value_rank_local[2011].all, \"most densely-populated\", \"least densely-populated\"))] #[+value(place.gss.short)].\n    else if (Math.abs(data.density.value_rank[2011].all)<4)\n        | This makes it #[+value(country)]'s #[+value(udord(data.density.value_rank[2011].all, \"most densely-populated\", \"least densely-populated\"))] #[+value(place.gss.short)].\n    else if (Math.abs(data.density.value_rank_local[2011].all)<4)\n        | This makes it #[+value(parent)]'s #[+value(udord(data.density.value_rank_local[2011].all, \"most densely-populated\", \"least densely-populated\"))] #[+value(place.gss.short)].\n\n// Between 2011 and 2021, Manchester overtook Wiltshire and Liverpool to become England's eighth-most populated local authority.\nmixin sent4Pop(i)\n    | Between 2011 and 2021, this #[+value(place.gss.short)] overtook \n    if (data['density'][s[i][1]+'_rank']['overtake'][s[i][3]].length<4)\n        eachz item in data['density'][s[i][1]+'_rank']['overtake'][s[i][3]] with { separator: ',', last_separator: 'and' }\n            | #{item}\n    else if (data['density'][s[i][1]+'_rank']['overtake'][s[i][3]].length>3)\n        | #[+value(data['density'][s[i][1]+'_rank']['overtake'][s[i][3]].length)] areas, \n        | including #[+value(data['density'][s[i][1]+'_rank']['overtake'][s[i][3]][0])] \n        | and #[+value(data['density'][s[i][1]+'_rank']['overtake'][s[i][3]][1])],\n    | to become England's #[+value(Math.abs(data.density.value_rank[2011].all), {'ORDINAL_TEXTUAL':true})]\n    | most densely populated local authority area.\n\n\nmixin overtake(i, loc)\n    | During this period, !{place.name} \n    if (rgn.name=='Wales')\n        - loc = \"_local\"\n    - var ove = data[s[i][0]][s[i][1]+\"_rank\"+loc]['overtake'][s[i][3]]\n    - var ra = data[s[i][0]][s[i][1]+\"_rank\"+loc][2011][s[i][3]]\n    if (Math.abs(ra)<11)\n        | #[+value(ud(ra, 'overtook', 'fell below'))] \n        if (ove.length<4)\n            eachz item in ove with { separator: ',', last_separator: 'and' }\n                | #{item}\n        else if (ove.length>3)\n            | #[+value(nuword(ove.length))] \n            | local authorities, \n            | including #[+value(ove[0])] \n            | and #[+value(ove[1])],\n        | to become the #[+value((loc == \"_local\") ? parentNT : (country==\"Wales\")?\"Welsh\":\"English\")] local authority area with the\n        | #[+value(ud(ra, (ord(Math.abs(ra))+\"highest\"), (ord(Math.abs(ra))+\"lowest\")))]\n        | percentage of #[+value(topics[s[i][0]][s[i][3]].adj_noun_s)].\n    else\n        | went from having the\n        | #[+value(ord(Math.abs(data[s[i][0]][s[i][1]+\"_rank\"+loc][2001][s[i][3]]))+ud(data[s[i][0]][s[i][1]+\"_rank\"+loc][2001][s[i][3]],\"highest\", \"lowest\"))]\n        | to the #[+value(ud(ra, (ord(Math.abs(ra))+\"highest\"), (ord(Math.abs(ra))+\"lowest\")))] percentage of #[+value(topics[s[i][0]][s[i][3]].adj_noun_s)] out of \n        | #[+value((country==\"England\")?\"309 English\":\"22 Welsh\")] local authorities.\n\n//- mixin percOfRes(place)\n//-     synz {mode:'sequence'}\n//-         syn\n//-             | the percentage of #[+value(place.name)] residents\n//-         syn\n//-             | the percentage of people living in #[+value(place.name)] \n\n// In the 10 years leading up to the last census, the percentage of Manchester residents describing their health as good increased from just over 66% to about 80%.\nmixin sent1Perc(i)\n    if (i==1)\n        p Census 2021 data also shows a #[+value(topics[s[i][0]].synonym)].\n    p the percentage of\n        | #[+value(topic(i).clausal_modifier)] \n        if (cha(s, place, i)<0)\n            | decreased\n        else\n            | increased \n        | from \n        | #[+pc(data[s[i][0]][s[i][1]][2001][s[i][3]])]\n        if (i==1)\n            | in 2011\n        | to \n        | #[+pc(cur(s, place, i))] \n        if (i!=1)\n            | #[+tenYears]\n        | .\n\n// About one in eight (13%) described their health as fair, compared with just over 23% in 2011. The percentage reporting bad health decreased from just under 13% to just over 7%.\nmixin sent2Perc(i, chain0_01, chain0_11, chain1_01, chain1_11)\n    if (Math.round(chain0_01)==Math.round(chain0_11))\n        | The proportion \n        | #[+value((topics[s[i][0]].measure_s=='households')?'that':'who')] \n        | #[+value(topic(i, chains[s[i][3]][0]).verb_past_samp)]\n        | remained close to #[+pc(chain0_01)], while\n    else\n        | In 2021,\n        if (data[s[i][0]][s[i][1]][2011][chains[s[i][3]][0]]<1.7)\n            | #[+pc(data[s[i][0]][s[i][1]][2011][chains[s[i][3]][0]])] of\n        else \n            | #[+value(get_word((data[s[i][0]][s[i][1]][2011][chains[s[i][3]][0]])/100, 'frac')[0])]\n            | #[+value(get_word((data[s[i][0]][s[i][1]][2011][chains[s[i][3]][0]])/100, 'frac')[1])]\n            | (#[+pc(data[s[i][0]][s[i][1]][2011][chains[s[i][3]][0]])])\n        | #[+value(topics[s[i][0]].measure_s)]\n        | #[+value(topic(i, chains[s[i][3]][0]).verb_past_samp)],\n        | compared with\n        | #[+pc(chain0_01)]\n        | in 2011. \n    if (chains[s[i][3]].length>1)\n        | the percentage of\n        | #[+value(topic(i, chains[s[i][3]][1]).clausal_modifier)] \n        | #[+value(ud(chain1_11-chain1_01, 'increased', 'decreased'))]\n        | from \n        | #[+pc(chain1_01)]\n        | to \n        | #[+pc(chain1_11)]\n        | .\n\nmixin inRegion\n    synz {mode:'sequence'}\n        syn \n            | in any other local authority district across\n        syn\n            | anywhere else in\n\n// The proportion of healthy residents in Manchester is growing at the third fastest rate of all local authority disricts across England.\n// The population of Manchester is becoming more healthy at the third fastest of all local authority districts across England.\nmixin topRank(i)\n    | The proportion of #[+value(topic(i).adj_noun)] is \n    | #[+value(ud(cha(s, place, i, \"r\"), 'growing', 'falling'))]\n    if (Math.abs(cha(s, place, i, \"r\"))==1)\n        | faster here than #[+inRegion] #[+value(country)]\n    else \n        | at the third fastest rate of all local authority districts across #[+value(country)]\n    if ((Math.abs(otherRank(s, place, i, 'cou'))==1)&(!hasSaid('OtherChange')))\n        | , while the percentage of \n        | #[+value(topic(i, otherEst(s, place, i, cha(s, place, i, \"r\"), 'change')).adj_noun)] is \n        | #[+value(ud(otherRank(s, place, i, 'cou'), 'increasing', 'decreasing'))]\n        | faster than anywhere else in the #[+value(city)].\n        if ((i!=hiRank.rankIn)&(s[i][0]!='health'))\n            p #[+nowHasReg(i)] \n        recordSaid('OtherChange')\n    else\n        | .\n        if (Math.abs(cur(s, place, i, \"r\"))<11)\n            | #[+nowHasCou(i)]\n        else\n            | #[+considImprov(i)]\n\n// The proportion of healthy residents is increasing faster here than in any other local authority district across the region.\nmixin topRankLoc(i)\n    | The proportion of #[+value(topic(i).adj_noun)] is \n    if (cha(s, place, i, \"rl\")<0)\n        | decreasing\n    else\n        | increasing\n    | faster here than #[+inRegion] #[+value(parent)]\n    if ((Math.abs(otherRank(s, place, i, \"rl\"))==1)&(!hasSaid('OtherChange')))\n        | , while the percentage of \n        | #[+value(topic(i, otherEst(s, place, i, cha(s, place, i, \"rl\"), 'change')).adj_noun)] is \n        | #[+value(ud(otherRank(s, place, i, \"rl\"), 'growing', 'falling'))]\n        | faster than anywhere else in the #[+value(city)]\n        if ((i!=hiRank.rankIn)&(s[i][0]!='health'))\n            p #[+nowHasReg(i)] \n        recordSaid('OtherChange')\n    else\n        | .\n        if (Math.abs(cur(s, place, i, \"rl\"))<4)\n            | As a result, #[+nowHasReg(i)]\n            if ((i!=hiRank.rankIn)&(s[i][0]!='health'))\n                p #[+nextHighest(i)]\n        else\n            | #[+considImprov(i)]\n\n// This mixin determines how the rest of the section will be generated\nmixin sent3Perc(i)\n    if (Math.abs(cha(s, place, i, \"r\"))<4)\n        | #[+topRank(i)]\n    else if (Math.abs(cha(s, place, i, \"rl\"))==1)\n        | #[+topRankLoc(i)] \n    else\n        | The proportion of  #[+value(topic(i).adj_noun)] has been\n        | #[+value(ud(cha(s, place, i), 'growing', 'falling'))]\n        if (country==\"England\")\n            if ((cha(s, place, i)>cha(s, near, i)-1)&(cha(s, place, i)<cha(s, near, i)+1))\n                | at a similar rate to \n            else\n                | #[+value(uds((Math.abs(cha(s, place, i)) - Math.abs(cha(s, rgn, i))), 'faster here than', 'at a slower rate here than', 'here at a similar rate to'))]\n            | the figure for the whole of #[+value(parent)]\n            | (from #[+pc((rgn.data[s[i][0]][s[i][1]][2001][s[i][3]]))] in 2011 to \n            | #[+pc((cur(s, rgn, i)))] in 2021)\n            if ((sign(Math.abs(cha(s, place, i))-Math.abs(cha(s, rgn, i))), sign(Math.abs(cha(s, place, i))-Math.abs(cha(s, eng, i)))))\n                | and across #[+value(country)] \n                | (from #[+pc((eng.data[s[i][0]][s[i][1]][2001][s[i][3]]))] to \n                | #[+pc((eng.data[s[i][0]][s[i][1]][2011][s[i][3]]))]).\n            else\n                | . Across #[+value(country)], the proportion #[+value(ud(cha(s, rgn, i), 'rose', 'fell'))]\n                | from #[+pc((eng.data[s[i][0]][s[i][1]][2001][s[i][3]]))] to \n                | #[+pc((eng.data[s[i][0]][s[i][1]][2011][s[i][3]]))].\n        else\n            if ((cha(s, place, i)>cha(s, near, i)-1)&(cha(s, place, i)<cha(s, near, i)+1))\n                | at a similar rate to \n            else\n                | #[+value(ud(Math.abs(cha(s, place, i))-Math.abs(cha(s, near, i)), 'faster', 'at a slower rate'))]\n                | here than in \n            | #[+nearbyname]\n            | (from #[+pc((near.data[s[i][0]][s[i][1]][2001][s[i][3]]))] in 2011 to \n            | #[+pc((near.data[s[i][0]][s[i][1]][2011][s[i][3]]))] in 2021)\n            if ((sign(Math.abs(cha(s, place, i))-Math.abs(cha(s, near, i))), sign(Math.abs(cha(s, place, i))-Math.abs(cha(s, rgn, i)))))\n                | and across #[+value(parent)]\n                | (from #[+pc((rgn.data[s[i][0]][s[i][1]][2001][s[i][3]]))] to \n                | #[+pc((rgn.data[s[i][0]][s[i][1]][2011][s[i][3]]))]) .\n            else \n                | . Across Wales, the proportion #[+value(ud(cha(s, rgn, i), 'rose', 'fell'))]\n                | from #[+pc((rgn.data[s[i][0]][s[i][1]][2001][s[i][3]]))] to \n                | #[+pc((rgn.data[s[i][0]][s[i][1]][2011][s[i][3]]))].\n\n// Blackburn with Darwen has the region's next lowest proportion of residents from a White ethnic group (69.2%), while 90.1% in nearby Salford are from a White ethnic group.\nmixin nextHighest(i)\n    if (cur(s, place, i, \"rl\")<0)\n        | #[+value(data[s[i][0]][s[i][1]+\"_rank_local\"]['above_below'][s[i][3]].above.name)] \n        | has the region's next lowest proportion of \n        | #[+value(topic(i).adj_noun)]\n        | (#[+pc((data[s[i][0]][s[i][1]+\"_rank_local\"]['above_below'][s[i][3]].above.value))]), \n    else\n        | #[+value(data[s[i][0]][s[i][1]+\"_rank_local\"]['above_below'][s[i][3]].below.name)] \n        | has the region's next highest proportion of \n        | #[+value(topic(i).adj_noun)]\n        | (#[+pc((data[s[i][0]][s[i][1]+\"_rank_local\"]['above_below'][s[i][3]].below.value))]),\n    | while the proportion is\n    | #[+pc((near.data[s[i][0]][s[i][1]][2011][s[i][3]]))]\n    | in #[+value(near.name)].\n\n// As a result, this area now has the country's highest proportion of private renters and the lowest proportion of homeowners.\nmixin nowHasCou(i)\n    | As a result, this area now has the country's \n    if (Math.abs(data[s[i][0]][s[i][1]+'_rank']['2011'][s[i][3]])!=1)\n        | #[+value(data[s[i][0]][s[i][1]+'_rank']['2011'][s[i][3]], {'ORDINAL_TEXTUAL':true})]\n    if (data[s[i][0]][s[i][1]+'_rank']['2011'][s[i][3]]<0)\n        | lowest\n    else\n        | highest \n    | proportion of \n    | #[+value(topic(i).adj_noun)]\n    | and the lowest proportion of homeowners\n    | .\n\n// As a result, this area now has the region’s highest proportion of private renters and the lowest proportion of homeowners.\nmixin nowHasReg(i)\n    | this area now has \n    if (parent==\"London\")\n        | Greater London's\n    else\n        | the region’s \n    if (Math.abs(data[s[i][0]][s[i][1]+'_rank_local']['2011'][s[i][3]])!=1)\n        | #[+value(Math.abs(data[s[i][0]][s[i][1]+'_rank_local']['2011'][s[i][3]]), {'ORDINAL_TEXTUAL':true})]\n    if (data[s[i][0]][s[i][1]+'_rank_local']['2011'][s[i][3]]<0)\n        | lowest proportion of #[+value(topic(i).adj_noun)]\n        if (data[s[i][0]][s[i][1]+'_rank_local']['2011'][otherEst(s, place, i, 'highest', '2011')]==1)\n            | and the \n            | highest proportion of \n            | #[+value(topic(i, otherEst(s, place, i, 'highest', '2011')).adj_noun)]\n    else\n        | highest proportion of #[+value(topic(i).adj_noun)]\n        if (data[s[i][0]][s[i][1]+'_rank_local']['2011'][otherEst(s, place, i, 'lowest', '2011')]==-1)\n            | and the \n            | lowest proportion of\n            | #[+value(topic(i, otherEst(s, place, i, 'lowest', '2011')).adj_noun)]\n    | .\n\n// The considerable improvement has brought health in Manchester close to the national average (about 81% in England described their health as good in 2021).\nmixin considImprov(i)\n    if (data[s[i][0]][s[i][1]+'_rank_local']['change'][s[i][3]]==1)\n        if (data[s[i][0]][s[i][1]][2011][s[i][3]]<(eng.data[s[i][0]][s[i][1]][2011][s[i][3]]-2))\n            | But despite the improvement, \n            | #[+value(place.name)] \n            | remains \n            | less healthy than \n        else if (data[s[i][0]][s[i][1]][2011][s[i][3]]>(eng.data[s[i][0]][s[i][1]][2011][s[i][3]]+2))\n            | As a result, #[+value(place.name)] \n            | has become more healthy than\n        else\n            | The improvement has brought health in \n            | #[+value(place.name)] close to \n        | the national average\n        | #[+pc(eng.data[s[i][0]][s[i][1]][2011][s[i][3]])]\n        | in #[+value(country)] described their health as good in 2021).\n    else\n        if (data[s[i][0]][s[i][1]][2011][s[i][3]]<(eng.data[s[i][0]][s[i][1]][2011][s[i][3]]-2))\n            | But despite the improvement, \n            | #[+value(place.name)] \n            | remains \n            | less healthy than \n        else if (data[s[i][0]][s[i][1]][2011][s[i][3]]>(eng.data[s[i][0]][s[i][1]][2011][s[i][3]]+2))\n            | As a result, #[+value(place.name)] \n            | has become more healthy than   \n        else\n            | The improvement has brought health in \n            | #[+value(place.name)] close to \n        | the regional average\n        | #[+pc(rgn.data[s[i][0]][s[i][1]][2011][s[i][3]])]\n        | in #[+value(parent)] described their health as good in 2021).\n\nmixin healthExplain\n    | These data are people’s own opinions in describing their overall health. They may be inconsistent with other measures of health, such as NHS records.\n\n//- The rate of self-employment rose in Darlington, but at a slower rate than all other local authorities in the the North East.\n//- Private renting rose in Maldon, but at a slower rate than all other local authorities in East England, except Luton and Watford.\nmixin butSlower(i, loc)\n    p \n        | #[+value(topic(i, s[i][3]).sample)] \n        | #[+value(ud(cha(s, place, i), 'rose', 'fell'))]\n        | in #[+value(place.name)], but at\n        if (data[s[i][0]][s[i][1]+'_rank'+loc][s[i][2]][s[i][3]]>3)|(rgn.name==\"Wales\")\n            - loc = \"_local\"\n        if (data[s[i][0]][s[i][1]+'_rank'+loc][s[i][2]][s[i][3]]>3)\n            | the #[+value(ord(data[s[i][0]][s[i][1]+'_rank'+loc][s[i][2]][s[i][3]]))] \n            | slowest rate of any local authority are across #[+value(country)]. \n        else\n            | a slower rate than all other\n            | #[+value((loc!=\"_local\")? (\"local authority areas across \" + country): (parent==\"London\")? place.gss.long+\"s\" :\"local authorities in \"+parent)]\n            if (Math.abs(data[s[i][0]][s[i][1]+'_rank'+loc][s[i][2]][s[i][3]])!=1)\n                | , except #[+value(data[s[i][0]][s[i][1]+'_rank'+loc].top_bottom[s[i][3]][1].name)]\n                if (Math.abs(data[s[i][0]][s[i][1]+'_rank'+loc][s[i][2]][s[i][3]])!=2)\n                    | and #[+value(data[s[i][0]][s[i][1]+'_rank'+loc].top_bottom[s[i][3]][2].name)] \n        | .\n\n\nmixin rank1reg(i)\n    // In the rare occasion that the bottom rank is a positive change, vice versa\n    if (Math.sign(data[s[i][0]][s[i][1]+'_rank_local'][s[i][2]][s[i][3]]) != Math.sign(cha(s, place, i)))\n        | #[+butSlower(i, \"_local\")]\n    else\n        | This area saw #[+value(parent)]'s \n        | #[+value(drop(data[s[i][0]][s[i][1]+'_rank_local'][s[i][2]][s[i][3]], 'largest drop', 'largest rise'))]\n        | in the proportion of #[+value(topic(i, s[i][3]).adj_noun)].\n        p #[+acrossRegion(i)]\n\n//- This district saw England's second-largest drop in the proportion of people who describe themselves as Christian.\nmixin rank1nat(i)\n    // In the rare occasion that the bottom rank is a positive change, vice versa\n    if (Math.sign(data[s[i][0]][s[i][1]+'_rank'][s[i][2]][s[i][3]]) != Math.sign(cha(s, place, i)))\n        | #[+butSlower(i, \"\")]\n    else\n        | This area saw #[+value(country)]'s \n        | #[+value(drop(data[s[i][0]][s[i][1]+'_rank'][s[i][2]][s[i][3]], 'largest drop', 'largest rise'))]\n        | in the proportion of #[+value(topic(i, s[i][3]).adj_noun)].\n        p #[+acrossCountry(i)]\n\nmixin rank2(i)\n    | In 2021,\n    if (data[s[i][0]][s[i][1]][2011][s[i][3]]<1.7)\n        | #[+pc(data[s[i][0]][s[i][1]][2011][s[i][3]])] of\n    else \n        | #[+value(get_word((data[s[i][0]][s[i][1]][2011][s[i][3]])/100, 'frac')[0])]\n        | #[+value(get_word((data[s[i][0]][s[i][1]][2011][s[i][3]])/100, 'frac')[1])]\n        | (#[+pc(data[s[i][0]][s[i][1]][2011][s[i][3]])])\n    | #[+value(topics[s[i][0]].measure_s)] in !{place.name}\n    | #[+value(topic(i, s[i][3]).verb_past_samp)],\n    | compared with\n    | #[+pc(data[s[i][0]][s[i][1]][2001][s[i][3]])]\n    | in 2011. \n    | The percentage\n    | #[+value(topic(i, chains[s[i][3]][0]).verb)] \n    if (data[s[i][0]][s[i][1]][2001][chains[s[i][3]][0]]>data[s[i][0]][s[i][1]][2011][chains[s[i][3]][0]])\n        | decreased \n    else\n        | increased\n    | from \n    | #[+pc(data[s[i][0]][s[i][1]][2001][chains[s[i][3]][0]])]\n    | to \n    | #[+pc(data[s[i][0]][s[i][1]][2011][chains[s[i][3]][0]])]\n    | .\n\nmixin regional \n    if (parent==\"Wales\")\n        | Welsh\n    else\n        | regional\n\nmixin region\n    if (parent==\"Wales\")\n        | Wales\n    else if (parent==\"London\")\n        | Greater London\n    else\n        | the region\n\n//- Across the North East, Manchester (from 50% in 2011 to 30% in 2021) saw the next greatest drop in the proportion of people working long hours, while the regional average decreased from 40% to 20%.\nmixin acrossRegion(i)\n    | Across the region, \n    - var rl = data[s[i][0]][s[i][1]+'_rank_local'][s[i][2]][s[i][3]]\n    if (Math.abs(rl)==1)\n        | #[+value(data[s[i][0]][s[i][1]+'_rank_local'].top_bottom[s[i][3]][rl<0?\"-2\":\"2\"].name)] \n        | #[+county(data[s[i][0]][s[i][1]+'_rank_local'].top_bottom[s[i][3]][rl<0?\"-2\":\"2\"].name)]\n        | saw the next greatest #[+value([rl<0?\"decrease\":\"increase\"])] in the proportion of #[+value(topic(i).adj_noun)]\n        | (from #[+pc((data[s[i][0]][s[i][1]+'_rank_local'].top_bottom[s[i][3]][rl<0?\"-2\":\"2\"][2001]))] in 2011 \n        | to #[+pc((data[s[i][0]][s[i][1]+'_rank_local'].top_bottom[s[i][3]][rl<0?\"-2\":\"2\"][2011]))] in 2021) \n        | .\n    else if (Math.abs(data[s[i][0]][s[i][1]+'_rank_local'][s[i][2]][s[i][3]])==2)\n        | only \n        | #[+value(data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-1\":\"1\"]['name'])]\n        | #[+county(data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-1\":\"1\"]['name'])]\n        | saw a greater #[+value((rl<0)?'fall':'rise')] in the proportion of #[+value(topic(i).adj_noun)]\n        | (from \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-1\":\"1\"]['2001']))] to \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-1\":\"1\"]['2011']))]) \n        | .\n    else if (Math.abs(data[s[i][0]][s[i][1]+'_rank_local'][s[i][2]][s[i][3]])==3)\n        | only \n        | #[+value(data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-1\":\"1\"]['name'])]\n        | #[+county(data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-1\":\"1\"]['name'])]\n        | (from \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-1\":\"1\"]['2001']))] to \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-1\":\"1\"]['2011']))]) \n        | and \n        | #[+value(data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-2\":\"2\"]['name'])]\n        | #[+county(data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-2\":\"2\"]['name'])]\n        | (from \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-2\":\"2\"]['2001']))] to \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-2\":\"2\"]['2011']))]) \n        | saw a greater #[+value(cha(s, place, i)<0?\"decrease\":\"increase\")] in the proportion of #[+value(topic(i).adj_noun)].\n\n//- Across the North East, the proportion of self-employed people rose from 10% in 2011 to 15% in 2021, while the proportion in nearby Middlesborough rose from 11% to 14%.\nmixin acrossRegionExcept(i)\n    | Across #[+value(parent)], the proportion of #[+value(topic(i).adj_noun)]\n    | #[+value(ud(cha(s, rgn, i), 'rose', 'fell'))]\n    | from #[+pc((rgn.data[s[i][0]][s[i][1]]['2001'][s[i][3]]))] to \n    | #[+pc((rgn.data[s[i][0]][s[i][1]]['2011'][s[i][3]]))] between the last two censuses,\n    | while the proportion in #[+nearbyname]\n    | #[+value(ud(cha(s, near, i), 'rose', 'fell'))]\n    | from #[+pc((near.data[s[i][0]][s[i][1]]['2001'][s[i][3]]))] to \n    | #[+pc((near.data[s[i][0]][s[i][1]]['2011'][s[i][3]]))].\n\nmixin county(p)\n    if (countyLU[p])\n        if (fuzz(countyLU[p], p))\n            if (countyLU[p]!=countyLU[place.name])\n                | in #[+value(countyLU[p])]\n        else if ((regionLU[p])&(regionLU[place.name]))\n            if (regionLU[p]!=regionLU[place.name])\n                | in #[+value(uncap1(regionThe(regionLU[p])))]\n    else if (regionLU[p]&(regionLU[place.name]))\n        if (regionLU[p]!=regionLU[place.name])\n            | in #[+value(uncap1(regionThe(regionLU[p])))]\n\n\nmixin acrossCountry(i)\n    - let loc\n    if (rgn.name=='Wales')\n        - loc = \"_local\"\n    else \n        - loc = \"\"\n    - var r = data[s[i][0]][s[i][1]+'_rank'][s[i][2]][s[i][3]]\n    if (Math.abs(r)==1)\n        | #[+value(data[s[i][0]][s[i][1]+'_rank'+loc].top_bottom[s[i][3]][r<0?\"-2\":\"2\"].name)] \n        | #[+county(data[s[i][0]][s[i][1]+'_rank'+loc].top_bottom[s[i][3]][r<0?\"-2\":\"2\"].name)]\n        | saw the next greatest #[+value((r<0)?\"drop\":\"rise\")]\n        | (from #[+pc((data[s[i][0]][s[i][1]+'_rank'+loc].top_bottom[s[i][3]][r<0?\"-2\":\"2\"][2001]))] \n        | to #[+pc((data[s[i][0]][s[i][1]+'_rank'+loc].top_bottom[s[i][3]][r<0?\"-2\":\"2\"][2011]))])\n        | .\n    else if (Math.abs(data[s[i][0]][s[i][1]+'_rank'][s[i][2]][s[i][3]])==2)\n        | The greatest #[+value((r<0)?\"decrease\":\"increase\")] occurred in \n        | #[+value(data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-1\":\"1\"]['name'])]\n        | #[+county(data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-1\":\"1\"]['name'])]\n        | (from \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-1\":\"1\"]['2001']))] to \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-1\":\"1\"]['2011']))]) \n        | .\n    else if (Math.abs(data[s[i][0]][s[i][1]+'_rank'][s[i][2]][s[i][3]])==3)\n        | The greatest #[+value((r<0)?\"decrease\":\"increase\")] occurred in \n        | #[+value(data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-1\":\"1\"]['name'])]\n        | #[+county(data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-1\":\"1\"]['name'])]\n        | (from \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-1\":\"1\"]['2001']))] to \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-1\":\"1\"]['2011']))]) \n        | followed by\n        | #[+value(data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-2\":\"2\"]['name'])]\n        | #[+county(data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-2\":\"2\"]['name'])]\n        | (from \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-2\":\"2\"]['2001']))] to \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-2\":\"2\"]['2011']))]).\n\nmixin despiteRegion(i)\n    | Despite the shift in #[+value(topics[s[i][0]].general)], #[+value(place.name)] still has #[+value(parent)]'s \n    | #[+value(udord(data[s[i][0]][s[i][1]+'_rank_local'][s[i][2]][s[i][3]], 'highest propotion', 'lowest propotion'))]\n    | of #[+value(topic(i)['adj_noun'])], \n    | behind\n    | #[+value(data[s[i][0]][s[i][1]+'_rank_local']['above_below'][s[i][3]].above.name)]\n    | (#[+pc(data[s[i][0]][s[i][1]+'_rank_local']['above_below'][s[i][3]].above.value)]).\n\nmixin despiteCountry(i)\n    | Despite the shift in #[+value(topics[s[i][0]].general)], #[+value(place.name)] still has #[+value(country)]'s \n    | #[+value(udord(data[s[i][0]][s[i][1]+'_rank'][s[i][2]][s[i][3]], 'highest propotion', 'lowest propotion'))]\n    | of #[+value(topic(i)['adj_noun'])], \n    | behind \n    | #[+value(data[s[i][0]][s[i][1]+'_rank']['above_below'][s[i][3]].above.name)]\n    | (#[+pc(data[s[i][0]][s[i][1]+'_rank']['above_below'][s[i][3]].above.value)]).\n\nmixin ppoint\n    if !hasSaid('PP')\n        | percentage points (pp)\n        recordSaid('PP')\n    else\n        | pp\n\nmixin sent2Diff(i, chain0_01, chain0_11, chain1_01, chain1_11)\n    | #[+value(topic(i, chains[s[i][3]][0]).sample)] in \n    | #[+value(place.name)]\n    if (Math.round(chain0_11)==Math.round(chain0_01))\n        | remained close to #[+pc((chain0_11))]\n    else\n        | #[+value(ud(chain0_11-chain0_01, 'rose', 'fell'))]\n        | from \n        | #[+pc(chain0_01)]\n        | to \n        | #[+pc(chain0_11)]\n    if (chains[s[i][3]].length>1)\n        | , while #[+value(topic(i, chains[s[i][3]][1]).sample)]\n        if (Math.round(chain1_11*10)/10==Math.round(chain1_01*10)/10)\n            | remained close to #[+pc((chain1_11))]\n        else\n            | #[+value(ud(chain1_11-chain1_01, 'increased', 'decreased'))]\n            | from \n            | #[+pc(chain1_01)]\n            | to \n            | #[+pc(chain1_11)]\n    | .\n\n//- The percentage of residents from a Black ethnic group changed very little in Lambeth, while the proportion rose across London.\nmixin difference(i, chain0_01, chain0_11, chain1_01, chain1_11)\n    | The percentage of #[+value(topic(i).adj_noun)] \n    if (Math.abs(cha(s, place, i))<1)\n        | changed very little\n        //- if ((cur(s, place, i)-cur(s, eng, i))<-2)\n        //-     if ((prev(s, place, i)-prev(s, eng, i))<0)\n        //-         | remained lower than average\n        //-     else\n        //-         | became lower the average\n        //- else if ((cur(s, place, i)-cur(s, eng, i))>2)\n        //-     if ((prev(s, place, i)-prev(s, eng, i))>0)\n        //-         | remained higher than average\n        //-     else\n        //-         | became higher than average\n        //- else \n        //-     if ((prev(s, place, i)-prev(s, eng, i))>2)|((prev(s, place, i)-prev(s, eng, i))<-2)\n        //-         | became close to average\n        //-     else\n        //-         | remained close to average \n    else\n        | is #[+value(ud(cha(s, place, i), 'rising', 'falling'))] \n    synz {mode:'sequence'}\n        syn\n            | in #[+value(place.name)]\n        syn\n            | here\n        syn\n            | in this #[+value((place.classification!='unk')?place.classification:'area')]\n        syn\n            | in this area\n    - var curDif\n    if ((stories[i].type.includes('nearDiff'))&(!hasSaid('nearDiff'))|(eq(stories[i].type, ['nearDiff'])))\n        recordSaid('nearDiff')\n        - curDif = 'nearDiff'\n        if (Math.abs(cha(s, place, i))<1)\n            | , while the proportion #[+value(ud(cha(s, near, i), 'rose', 'fell'))] in\n        else\n            if (Math.abs(cha(s, place, i)) < Math.abs(cha(s, near, i)))\n                | , but at a slower rate than in\n            else\n                | at a faster rate than in\n        | #[+nearbyname].\n    else if ((stories[i].type.includes('simiDiff'))&(!hasSaid('simiDiff'))|(eq(stories[i].type, ['simiDiff'])))\n        recordSaid('simiDiff')\n        - curDif = 'simiDiff'\n        if (Math.abs(cha(s, place, i))<1)\n            | , while the proportion #[+value(ud(cha(s, place.similar, i), 'rose', 'fell'))] in\n        else\n            if (Math.abs(cha(s, place, i)) < Math.abs(cha(s, place.similar, i)))\n                | , but at a slower rate than in\n            else\n                | at a faster rate than in\n        | #[+similarname].\n    else if (stories[i].type.includes('regDiff')&(!hasSaid('regDiff'))|(eq(stories[i].type, ['regDiff'])))\n        recordSaid('regDiff')\n        - curDif = 'regDiff'\n        if (Math.abs(cha(s, place, i))<1)\n            | , while the proportion #[+value(ud(cha(s, rgn, i), 'rose', 'fell'))] \n        else\n            if (Math.abs(cha(s, place, i)) < Math.abs(cha(s, rgn, i)))\n                | , but at a slower rate than\n            else\n                | at a faster rate than\n        | across #[+value(parent)].\n    else if (stories[i].type.includes('couDiff')&(!hasSaid('couDiff'))|(eq(stories[i].type, ['couDiff'])))\n        recordSaid('couDiff')\n        - curDif = 'couDiff'\n        if (Math.abs(cha(s, place, i))<1)\n            | , while the proportion #[+value(ud(cha(s, eng, i), 'rose', 'fell'))] \n        else\n            if (Math.abs(cha(s, place, i)) < Math.abs(cha(s, eng, i)))\n                | , but at a slower rate than\n            else\n                | at a faster rate than\n        | across #[+value(country)].\n    p \n        | In #[+value(place.name)], the proportion of #[+value(topic(i).adj_noun_s)] \n        if (Math.abs(cha(s, place, i))<0.5)\n            | stayed close to #[+pc((data[s[i][0]][s[i][1]][2011][s[i][3]]))] between the last two censuses.\n        else\n            | #[+value(ud(cha(s, place, i), 'increased', 'decreased'))] \n            | from \n            | #[+pc((data[s[i][0]][s[i][1]][2001][s[i][3]]))]\n            | in 2011 to \n            | #[+pc((data[s[i][0]][s[i][1]][2011][s[i][3]]))]\n            | in 2021. \n        | During the same period, the \n        if (curDif == 'nearDiff')\n            | proportion in #[+nearbyname]\n            | #[+value(ud(cha(s, near, i), 'increased', 'decreased'))]  from \n            | #[+pc((near.data[s[i][0]][s[i][1]][2001][s[i][3]]))] to \n            | #[+pc((near.data[s[i][0]][s[i][1]][2011][s[i][3]]))] \n        else if (curDif == 'simiDiff')\n            | proportion in #[+similarname]\n            | #[+value(ud(cha(s, place.similar, i), 'increased', 'decreased'))]  from \n            | #[+pc((place.similar.data[s[i][0]][s[i][1]][2001][s[i][3]]))] to \n            | #[+pc((place.similar.data[s[i][0]][s[i][1]][2011][s[i][3]]))] \n        else if (curDif == 'regDiff')\n            | regional proportion\n            | #[+value(ud(cha(s, rgn, i), 'increased', 'decreased'))]  from \n            | #[+pc((rgn.data[s[i][0]][s[i][1]][2001][s[i][3]]))] to \n            | #[+pc((rgn.data[s[i][0]][s[i][1]][2011][s[i][3]]))] \n        else if (curDif == 'couDiff')\n            | proportion across #[+value(country)]\n            | #[+value(ud(cha(s, eng, i), 'increased', 'decreased'))]  from \n            | #[+pc((eng.data[s[i][0]][s[i][1]][2001][s[i][3]]))] to \n            | #[+pc((eng.data[s[i][0]][s[i][1]][2011][s[i][3]]))] \n        | .\n    | #[+sent2Diff(i, chain0_01, chain0_11, chain1_01, chain1_11)]\n\nmixin similarname\n    | #[+value(place.similar.name)]\n    if (!hasSaid('SIMILAR'))\n        recordSaid('SIMILAR')\n        | , a statistically similar local authority area\n        | #[+county(place.similar.name)]\n\nmixin nearbyname\n    if (!hasSaid('NEARBY'))\n        recordSaid('NEARBY')\n        | nearby\n    | #[+value(near.name)]\n\nmixin buck(i, curBuck, chain0_01, chain0_11, chain1_01, chain1_11)\n    | The percentage of #[+value(topic(i).adj_noun)] \n    | is #[+value(ud(cha(s, place, i), 'rising', 'falling'))] \n    synz {mode:'sequence'}\n        syn\n            | in #[+value(place.name)]\n        syn\n            | here\n        syn\n            | in this #[+value((place.classification!='unk')?place.classification:'area')]\n        syn\n            | in this area\n    | #[+value(ud(cha(s, place, i), ', while falling', ', while rising'))]\n    if (stories[i].type.includes('regBuck')&stories[i].type.includes('couBuck'))\n        | across #[+value(parent)] and #[+value(country)]\n    else if (curBuck=='regBuck')\n        | across #[+value(parent)]\n    else if (curBuck=='couBuck')\n        | across #[+value(country)]\n    else if (curBuck==\"simiBuck\")\n        | in #[+similarname]\n    else if (curBuck==\"nearBuck\")\n        | in #[+nearbyname]\n    | .\n    p \n        | In #[+value(place.name)], the proportion \n        | #[+value(ud(cha(s, place, i), 'went up', 'came down'))]\n        | from \n        | #[+pc((data[s[i][0]][s[i][1]][2001][s[i][3]]))]\n        | in 2011 to \n        | #[+pc((data[s[i][0]][s[i][1]][2011][s[i][3]]))]\n        | in 2021\n        if (curBuck=='couBuck')\n            | , while across #[+value(country)] it\n            | #[+value(ud(cha(s, place, i), 'fell', 'went up'))]\n            | from #[+pc((eng.data[s[i][0]][s[i][1]][2001][s[i][3]]))]\n            | to #[+pc((eng.data[s[i][0]][s[i][1]][2011][s[i][3]]))]\n        else if (curBuck==\"simiBuck\")\n            | , while across #[+value(country)] it\n            | #[+value(ud(cha(s, place, i), 'fell', 'went up'))]\n            | from #[+pc((place.similar.data[s[i][0]][s[i][1]][2001][s[i][3]]))]\n            | to #[+pc((place.similar.data[s[i][0]][s[i][1]][2011][s[i][3]]))]\n        else if (curBuck==\"nearBuck\")\n            | , while across #[+value(country)] it\n            | #[+value(ud(cha(s, place, i), 'fell', 'went up'))]\n            | from #[+pc((near.data[s[i][0]][s[i][1]][2001][s[i][3]]))]\n            | to #[+pc((near.data[s[i][0]][s[i][1]][2011][s[i][3]]))]\n        | .\n        | During the same period, the regional proportion #[+value(ud(cha(s, rgn, i), 'rose', 'fell'))] from \n        | #[+pc((rgn.data[s[i][0]][s[i][1]][2001][s[i][3]]))] to \n        | #[+pc((rgn.data[s[i][0]][s[i][1]][2011][s[i][3]]))].\n    | #[+sent2Diff(i, chain0_01, chain0_11, chain1_01, chain1_11)]\n\nmixin allOthers(i, r, updo)\n    | Every local authority area across #[+value(parent)] saw a #[+value((updo==\"d\")?\"fall\":\"rise\")]\n    | in the proportion of #[+value(topic(i).adj_noun)], as the regional average\n    | #[+value((updo==\"d\")?\"dropped\":\"grew\")] from #[+pc((rgn.data[s[i][0]][s[i][1]][2001][s[i][3]]))]\n    | to #[+pc((rgn.data[s[i][0]][s[i][1]][2011][s[i][3]]))].\n\nmixin welsh(i)\n    p\n        | The proportion of Welsh speakers in !{place.name} \n        | #[+value(ud(cha(s, place, i), 'rose', 'fell'))] \n        | from #[+pc((place.data[s[i][0]][s[i][1]][2001][s[i][3]]))]\n        | to #[+pc((place.data[s[i][0]][s[i][1]][2011][s[i][3]]))]\n        | in the 10 years leading up to the last census. \n    if (Math.abs(place.data[s[i][0]][s[i][1]+'_rank_local']['change'][s[i][3]])<4)\n        p \n            | This amounts to the \n            | #[+value(drop(data[s[i][0]][s[i][1]+'_rank_local']['change'][s[i][3]], 'largest decline', 'largest increase'))]\n            | in the porportion of Welsh speakers of any local authority area in the country.\n            if (data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[1].name!=place.name)\n                | Of the few areas where knowledge of the Welsh language increased, !{data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[1].name} saw the greatest change\n                | (from \n                | #[+pc((data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[1][2001]))]\n                | to \n                | #[+pc((data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[1][2011]))]).\n            else \n                | The next greatest increase was seen in !{data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[2].name} \n                | (from #[+pc((data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[2][2001]))] in 2011 to \n                | #[+pc((data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[2][2011]))] in 2021), \n                | while !{data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[\"-1\"].name} saw the greatest decline\n                | (from #[+pc((data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[\"-1\"][2001]))] to \n                | #[+pc((data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[\"-1\"][2011]))]).\n    p \n        - let v11speak = place.data[s[i][0]]['value'][2011][s[i][3]]\n        - let v01speak = place.data[s[i][0]]['value'][2001][s[i][3]]\n        - let v11nosp = place.data[s[i][0]]['value'][2011]['NoWelsh']\n        - let v01nosp = place.data[s[i][0]]['value'][2001]['NoWelsh']\n        - let difnosp = v11nosp - v01nosp\n        - let difspeak = v11speak - v01speak\n        | There are \n        | #[+value(Math.abs(difspeak))]  \n        | #[+value((difspeak)<0?'fewer':'more')] people living \n        if (Math.abs(place.data[s[i][0]][s[i][1]+'_rank_local']['change'][s[i][3]])>3)\n            | here \n        else\n            | in !{place.name} \n        | who speak Welsh compared with 2011, \n        | while the number of people who do not speak Welsh #[+value((difnosp)>0?'increased':'decreased')] by #[+value(Math.abs(difnosp))].\n    p\n        if (Math.round(place.nearbyArea.nearTops.data[s[i][0]][s[i][1]][2011][s[i][3]]*10) == Math.round(place.nearbyArea.nearTops.data[s[i][0]][s[i][1]][2001][s[i][3]]*10))\n            | In #[+nearbyname], the proportion of people over the age of three\n            | who can speak some Welsh remained close to #[+pc((place.nearbyArea.nearTops.data[s[i][0]][s[i][1]][2011][s[i][3]]))].\n        else\n            | In #[+nearbyname], #[+pc((place.nearbyArea.nearTops.data[s[i][0]][s[i][1]][2011][s[i][3]]))] of people over the age of three\n            | can speak some Welsh\n            | , #[+value(ud(cha(s, place.nearbyArea.nearTops, i), 'up', 'down'))]\n            | from #[+pc((place.nearbyArea.nearTops.data[s[i][0]][s[i][1]][2001][s[i][3]]))] at the 2011 census.\n            | .\n        | Across Wales, the proportion \n        | #[+value(ud(cha(s, rgn, i), 'rose', 'fell'))] from\n        | #[+pc((rgn.data[s[i][0]][s[i][1]][2001][s[i][3]]))] \n        | to\n        | #[+pc((rgn.data[s[i][0]][s[i][1]][2011][s[i][3]]))] \n        | .\n    if (Math.abs(place.data[s[i][0]][s[i][1]+'_rank_local'][2011][s[i][3]])>3) & (Math.abs(place.data[s[i][0]][s[i][1]+'_rank_local']['change'][s[i][3]])>3)\n        p\n            | !{data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[1].name} \n            | was one of the few areas that saw an increase in the proportion of Welsh speakers (from \n            | #[+pc((data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[1][2001]))] \n            | in 2011 to \n            | #[+pc((data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[1][2011]))] \n            | in 2021)\n            | , while !{data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[\"-1\"].name} saw the greatest fall (from \n            | #[+pc((data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[\"-1\"][2001]))] \n            | to \n            | #[+pc((data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[\"-1\"][2011]))]\n            | ). \n\n//- Deals with all percentage based variables\nmixin percPara(i, chain0_01, chain0_11, chain1_01, chain1_11)\n    if ((findOne(stories[i].type, ['couBuck', 'regBuck']))&(!stories[i].type.includes('natRank')))\n        h2 #[+value(topic(i).subhead.buc)]\n    else if ((cha(s, place, i)<-1)&(data[s[i][0]]['value'][2011][s[i][3]]<data[s[i][0]]['value'][2001][s[i][3]]))\n        h2 #[+value(topic(i).subhead.neg)]\n    else if ((cha(s, place, i)>1)&(data[s[i][0]]['value'][2011][s[i][3]]>data[s[i][0]]['value'][2001][s[i][3]]))\n        h2 #[+value(topic(i).subhead.pos)]\n    else if (findOne(stories[i].type, ['nearDiff', 'couDiff', 'regDiff']))\n        h2 #[+value(topic(i).subhead.sta)]\n    else \n        h2 #[+value(topic(i).subhead.neu)]\n    if (s[i][0] == 'welsh')\n        | #[+welsh(i)]\n    else\n        - var chain0_11 = data[s[i][0]][s[i][1]][2011][chains[s[i][3]][0]]\n        - var chain0_01 = data[s[i][0]][s[i][1]][2001][chains[s[i][3]][0]] \n        - var chain1_11 = data[s[i][0]][s[i][1]][2011][chains[s[i][3]][1]] \n        - var chain1_01 = data[s[i][0]][s[i][1]][2001][chains[s[i][3]][1]] \n        if (stories[i].type.includes('natRank'))\n            | #[+rank1nat(i)]\n            if (data[s[i][0]][s[i][1]+\"_rank\"].top_bottom[s[i][3]][1].change<0)\n                p #[+allOthers(i, \"\", \"d\")]\n            else if (data[s[i][0]][s[i][1]+\"_rank\"].top_bottom[s[i][3]][\"-1\"].change>0)\n                p #[+allOthers(i, \"\", \"u\")]\n            else if ((data[s[i][0]][s[i][1]+'_rank']['overtake'][s[i][3]].length>0)&(Math.abs(cur(s, place, i, 'r'))<10))\n                p #[+overtake(i, \"\")]\n            else\n                if (Math.sign(data[s[i][0]][s[i][1]+'_rank_local'][s[i][2]][s[i][3]]) != Math.sign(cha(s, place, i)))\n                    p #[+acrossRegionExcept(i)]\n                else\n                    if ((sign(cha(s, place, i)))!=(sign(cur(s, place, i, 'rl'))))\n                        p #[+despiteRegion(i)]\n            p #[+rank2(i)]\n        else if ((stories[i].type.includes('regBuck'))|(eq(stories[i].type, ['regBuck'])))\n            - var curBuck = 'regBuck'\n            | #[+buck(i, curBuck, chain0_01, chain0_11, chain1_01, chain1_11)]\n        else if ((stories[i].type.includes('couBuck'))|(eq(stories[i].type, ['couBuck'])))\n            - var curBuck = 'couBuck'\n            | #[+buck(i, curBuck, chain0_01, chain0_11, chain1_01, chain1_11)]\n        else if ((stories[i].type.includes('size'))&(!hasSaid('SIZE'))|(eq(stories[i].type, ['size'])))\n            recordSaid('SIZE')\n            | #[+sent1Perc(i)]\n            p #[+sent2Perc(i, chain0_01, chain0_11, chain1_01, chain1_11)]\n            p #[+sent3Perc(i)]\n        else if (stories[i].type.includes('locRank'))\n            deleteSaid('SIZE')\n            | #[+rank1reg(i)]\n            if (data[s[i][0]][s[i][1]+\"_rank_local\"].top_bottom[s[i][3]][1].change<0)\n                p #[+allOthers(i, \"_local\", \"d\")]\n            if (data[s[i][0]][s[i][1]+\"_rank_local\"].top_bottom[s[i][3]][\"-1\"].change>0)\n                p #[+allOthers(i, \"_local\", \"u\")]\n            else if ((data[s[i][0]][s[i][1]+'_rank_local']['overtake'][s[i][3]].length>0)&(Math.abs(cur(s, place, i, 'rl'))<20))\n                p #[+overtake(i, \"_local\")]\n            else\n                if (Math.sign(data[s[i][0]][s[i][1]+'_rank_local'][s[i][2]][s[i][3]]) != Math.sign(cha(s, place, i)))\n                    p #[+acrossRegionExcept(i)]\n                else\n                    if ((sign(cha(s, place, i)))!=(sign(cur(s, place, i, 'rl'))))\n                        p #[+despiteRegion(i)]\n            p #[+rank2(i)]\n        else if ((stories[i].type.includes('simiBuck'))&(!hasSaid('BUCK'))|(eq(stories[i].type, ['simiBuck'])))\n            recordSaid('BUCK')\n            - var curBuck = 'simiBuck'\n            | #[+buck(i, curBuck, chain0_01, chain0_11, chain1_01, chain1_11)]\n        else if ((stories[i].type.includes('nearBuck'))&(!hasSaid('BUCK'))|(eq(stories[i].type, ['nearBuck'])))\n            recordSaid('BUCK')\n            - var curBuck = 'nearBuck'\n            | #[+buck(i, curBuck, chain0_01, chain0_11, chain1_01, chain1_11)]\n        else\n            deleteSaid('SIZE')\n            | #[+difference(i, chain0_01, chain0_11, chain1_01, chain1_11)]\n        if (s[i][0]=='health')\n            p #[+healthExplain]\n\nmixin para(i)\n    -console.log('S -', i,  stories[i])\n    if (s[i][1] == 'value')\n        if (s[i][0] == 'agemed')\n            h2 #[+subheadAge(i)]\n            | #[+sent1Age(i)]\n            p #[+sent2Age(i)]\n            p #[+sent3Age(i)]\n        else\n            h2 #[+subheadVal(i)]\n            p #[+sent1pop(i)]\n            p #[+sent2pop(i)]\n            if (s[i][0]=='population')\n                p #[+density]\n            //- if ((data['density'][s[i][1]+'_rank'].overtake[s[i][3]].length>0)&(Math.abs(cur(s, place, i, \"r\"))<30))\n            //-     p #[+sent4Pop(i)]\n    if (s[i][1] == 'perc')\n        | #[+percPara(i)]\n\nmixin chartTitleSize(i)\n    if (s[i][0]==\"population\")\n        h4 \n            | Population density is increasing here at a \n            | #[+value(uds(data.density.value.change.all-rgn.data.density.value.change.all, \"faster rate than\", \"slower rate than\", \"similar rate to\"))]\n            | #[+value(parent)]\n        h5 \n            | Population density (usual residents per 7,140 square metres) across #[+value(place.name)], #[+value((country==\"Wales\")?simi.name:parent)] and #[+value(country)], March 2011, March 2021\n    else if (s[i][0]==\"agemed\")\n        h4 \n            - let agegroup = data.age10yr.absChange['pos'][0][0]\n            | About #[+pc(Math.round(place.data.age10yr.perc[2011][agegroup]))]\n            | of people in !{place.name} are aged\n            | #[+value(ageBandLU[agegroup][1])]\n        h5 \n            | The percentage of #[+value(topics[s[i][0]].measure)] in #[+value(place.name)] by 10 year age band, March 2011, March 2021\n    else\n        h4 \n            | #[+value(topic(i).sample)] in \n            | #[+value(place.name)]\n            | #[+value((cha(s, place, i)<0)?\"decreased\":\"increased\")] by\n            | #[+rou(Math.abs(cha(s, place, i)))]\n            | #[+ppoint]\n        h5 \n            | The percentage of #[+value(topics[s[i][0]].measure)] in #[+value(place.name)], #[+value(parent)] and #[+value(country)] that #[+value(topic(i).verb_past)], March 2011, March 2021\n\nmixin chartTitleOther(i)\n    if (s[i][0]==\"population\")\n        h4 \n            | Population density is\n            | #[+value(uds(data.density.value[2011].all-rgn.data.density.value[2011].all, \"higher than\", \"lower than\", \"similar to\"))]\n            | the average across #[+value(parent)]\n        h5 \n            | Population density (usual residents per #[+value(7140)] square metres) across #[+value(parent)], March 2021 (larger dots represent greater increase since 2011)\n    else if (s[i][0]==\"agemed\")\n        h4 \n            - let agegroup = data.age10yr.absChange['pos'][0][0]\n            | About #[+pc(Math.round(place.data.age10yr.perc[2011][agegroup]))]\n            | of people in !{place.name} are aged\n            | #[+value(ageBandLU[agegroup][1])]\n        h5 \n            | The percentage of #[+value(topics[s[i][0]].measure)] in #[+value(place.name)] by 10 year age band, March 2011, March 2021\n    else\n        h4 \n            | #[+value(topic(i).sample)] \n            | #[+value((cur(s, place, i)-cur(s, rgn, i)<0)?\"is lower than\":\"is higher than\")] across #[+value(parent)]\n        h5 \n            | The percentage of #[+value(topics[s[i][0]].measure)] that #[+value(topic(i).verb_past)] across local authority areas in #[+value(parent)] and the average across #[+value(cou.name)], March 2021\n\nmixin chartTitle(i)\n    if !(isTopic)\n        if (stories[i].type.includes('size'))\n            | #[+chartTitleSize(i)]\n        else\n            | #[+chartTitleOther(i)]\n\n\n-console.log(\"eng\", eng)\n-console.log(\"rgn\", rgn)\n-console.log(\"place\", place)\n\n// Start of th article /\n| #[+para(0)]\n| #[+chartTitle(0)]\ndiv#esc123\n\nif (s.length>2)\n    | #[+para(1)]\n    | #[+chartTitle(1)]\n    div#esc123\n\nif (s.length>3)\n    | #[+para(2)]\n    | #[+chartTitle(2)]\n    div#esc123\n\nif (s.length>4)\n    | #[+para(3)]\n    | #[+chartTitle(3)]\n    div#esc123\n\nif (s.length>5)\n    | #[+para(4)]\n    | #[+chartTitle(4)]\n    div#esc123\n\nif (s.length>6)\n    | #[+para(5)]\n    | #[+chartTitle(5)]\n\nif (more==true)\n    if (s.length>7)\n        div#esc123\n        | #[+para(6)]\n        | #[+chartTitle(6)]\n    if (s.length>8)\n        div#esc123\n        | #[+para(7)]\n        | #[+chartTitle(7)]\n    if (s.length>9)\n        div#esc123\n        | #[+para(8)]\n        | #[+chartTitle(8)]\n    if (s.length>10)\n        div#esc123\n        | #[+para(9)]\n        | #[+chartTitle(9)]\n    if (s.length>11)\n        div#esc123\n        | #[+para(10)]\n        | #[+chartTitle(10)]\n    if (s.length>12)\n        div#esc123\n        | #[+para(11)]\n        | #[+chartTitle(11)]\n    if (s.length>13)\n        div#esc123\n        | #[+para(12)]\n        | #[+chartTitle(12)]\n",{language:"en_UK",place:e,data:e.data,cou:"Wales"==e.parents[0].name?r:l,eng:l,rgn:t,uncap1:Ie,regionThe:qe,parent:Ie(qe(e.parents[0].name)),parentNT:Ie(qe(e.parents[0].name,"NT")),s:i,stories:a,priorities:e.Priorities,grewSyn:E,locRankCha:undefined,natRankCha:undefined,locRankCur:undefined,natRankCur:undefined,hiRank:e.hiRank,topic:function(e,t){let n;return n=t||i[e][3],s[i[e][0]][n]},topics:s,chains:We,country:"England",get_word:He,figs:Ue,otherEst:Ze,cur:Ye,cha:Ve,qui:Je,cap:o,cap:o,otherRank:Xe,ud:Qe,city:et,drop:Oe,drop:Oe,ord:rt,ageBandLU:st,nuword:at,sign:tt,udord:lt,eq:ot,eq:ot,near:e.nearbyArea.nearTops,adv:ct,uds:ut,pluralize:At,isTopic:!0,countyLU:y,regionLU:m,fuzz:f,prev:Ge,findOne:p})},function(e){n(0,s=e)},()=>{s&&A(s.value)},function(e){n(1,o=e)},()=>{o&&S(o.value)}]}class ih extends ke{constructor(e){super(),$e(this,e,nh,th,o,{},null,[-1,-1])}}function ah(t){let n,i,a,r;return{c(){n=E("div"),n.innerHTML="<p>Click on a phrase type (e.g. &#39;clausal modifier&#39;) to see the various phrases used across different topics.</p> \n\t<p>Click on a phrase to see it used in context.</p> \n\t<p>Note that when a phrase is selected, only the bold text is dynamic so may not provide perfect context.</p>",i=S(),a=E("iframe"),j(n,"width","80%"),j(n,"margin","auto"),L(a,"width","100%"),L(a,"height","5212"),L(a,"frameborder","0"),c(a.src,r="https://observablehq.com/embed/cc9449078bb7b9ae?cells=chart%2Csent")||L(a,"src","https://observablehq.com/embed/cc9449078bb7b9ae?cells=chart%2Csent")},m(e,t){w(e,n,t),w(e,i,t),w(e,a,t)},p:e,i:e,o:e,d(e){e&&_(n),e&&_(i),e&&_(a)}}}function rh(e){return fetch("./archie.aml").then((e=>e.text())).then((e=>St.load(e))),[]}class sh extends ke{constructor(e){super(),$e(this,e,rh,ah,o,{})}}function oh(e){let t,n;const i=e[1].default,a=d(i,e,e[0],null);return{c(){t=E("div"),a&&a.c(),L(t,"class","tabs")},m(e,i){w(e,t,i),a&&a.m(t,null),n=!0},p(e,[t]){a&&a.p&&(!n||1&t)&&g(a,i,e,e[0],n?p(i,e[0],t,null):m(e[0]),null)},i(e){n||(ue(a,e),n=!0)},o(e){he(a,e),n=!1},d(e){e&&_(t),a&&a.d(e)}}}const lh={};function ch(e,t,n){let{$$slots:i={},$$scope:a}=t;const r=[],s=[],o=kn(null),l=kn(null);return H(lh,{registerTab:e=>{r.push(e),o.update((t=>t||e)),B((()=>{const t=r.indexOf(e);r.splice(t,1),o.update((n=>n===e?r[t]||r[r.length-1]:n))}))},registerPanel:e=>{s.push(e),l.update((t=>t||e)),B((()=>{const t=s.indexOf(e);s.splice(t,1),l.update((n=>n===e?s[t]||s[s.length-1]:n))}))},selectTab:e=>{const t=r.indexOf(e);o.set(e),l.set(s[t])},selectedTab:o,selectedPanel:l}),e.$$set=e=>{"$$scope"in e&&n(0,a=e.$$scope)},[a,i]}class uh extends ke{constructor(e){super(),$e(this,e,ch,oh,o,{})}}function hh(e){let t,n;const i=e[1].default,a=d(i,e,e[0],null);return{c(){t=E("div"),a&&a.c(),L(t,"class","tab-list svelte-1qgay6m")},m(e,i){w(e,t,i),a&&a.m(t,null),n=!0},p(e,[t]){a&&a.p&&(!n||1&t)&&g(a,i,e,e[0],n?p(i,e[0],t,null):m(e[0]),null)},i(e){n||(ue(a,e),n=!0)},o(e){he(a,e),n=!1},d(e){e&&_(t),a&&a.d(e)}}}function dh(e,t,n){let{$$slots:i={},$$scope:a}=t;return e.$$set=e=>{"$$scope"in e&&n(0,a=e.$$scope)},[a,i]}class fh extends ke{constructor(e){super(),$e(this,e,dh,hh,o,{})}}function ph(e){let t;const n=e[4].default,i=d(n,e,e[3],null);return{c(){i&&i.c()},m(e,n){i&&i.m(e,n),t=!0},p(e,a){i&&i.p&&(!t||8&a)&&g(i,n,e,e[3],t?p(n,e[3],a,null):m(e[3]),null)},i(e){t||(ue(i,e),t=!0)},o(e){he(i,e),t=!1},d(e){i&&i.d(e)}}}function gh(e){let t,n,i=e[0]===e[1]&&ph(e);return{c(){i&&i.c(),t=A()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,[n]){e[0]===e[1]?i?(i.p(e,n),1&n&&ue(i,1)):(i=ph(e),i.c(),ue(i,1),i.m(t.parentNode,t)):i&&(le(),he(i,1,1,(()=>{i=null})),ce())},i(e){n||(ue(i),n=!0)},o(e){he(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function mh(e,t,n){let i,{$$slots:a={},$$scope:r}=t;const s={},{registerPanel:o,selectedPanel:l}=U(lh);return h(e,l,(e=>n(0,i=e))),o(s),e.$$set=e=>{"$$scope"in e&&n(3,r=e.$$scope)},[i,s,l,r,a]}class yh extends ke{constructor(e){super(),$e(this,e,mh,gh,o,{})}}function vh(e){let t,n,i,a;const r=e[5].default,s=d(r,e,e[4],null);return{c(){t=E("button"),s&&s.c(),L(t,"class","svelte-b9uj0r"),F(t,"selected",e[0]===e[1])},m(r,o){w(r,t,o),s&&s.m(t,null),n=!0,i||(a=C(t,"click",e[6]),i=!0)},p(e,[i]){s&&s.p&&(!n||16&i)&&g(s,r,e,e[4],n?p(r,e[4],i,null):m(e[4]),null),3&i&&F(t,"selected",e[0]===e[1])},i(e){n||(ue(s,e),n=!0)},o(e){he(s,e),n=!1},d(e){e&&_(t),s&&s.d(e),i=!1,a()}}}function xh(e,t,n){let i,{$$slots:a={},$$scope:r}=t;const s={},{registerTab:o,selectTab:l,selectedTab:c}=U(lh);h(e,c,(e=>n(0,i=e))),o(s);return e.$$set=e=>{"$$scope"in e&&n(4,r=e.$$scope)},[i,s,l,c,r,a,()=>l(s)]}class bh extends ke{constructor(e){super(),$e(this,e,xh,vh,o,{})}}function $h(e){let t;return{c(){t=N("Area Reports")},m(e,n){w(e,t,n)},d(e){e&&_(t)}}}function kh(e){let t;return{c(){t=N("Topic QA")},m(e,n){w(e,t,n)},d(e){e&&_(t)}}}function wh(e){let t;return{c(){t=N("Word Selection")},m(e,n){w(e,t,n)},d(e){e&&_(t)}}}function _h(e){let t,n,i,a,r,s;return t=new bh({props:{$$slots:{default:[$h]},$$scope:{ctx:e}}}),i=new bh({props:{$$slots:{default:[kh]},$$scope:{ctx:e}}}),r=new bh({props:{$$slots:{default:[wh]},$$scope:{ctx:e}}}),{c(){ye(t.$$.fragment),n=S(),ye(i.$$.fragment),a=S(),ye(r.$$.fragment)},m(e,o){ve(t,e,o),w(e,n,o),ve(i,e,o),w(e,a,o),ve(r,e,o),s=!0},p(e,n){const a={};1&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a);const s={};1&n&&(s.$$scope={dirty:n,ctx:e}),i.$set(s);const o={};1&n&&(o.$$scope={dirty:n,ctx:e}),r.$set(o)},i(e){s||(ue(t.$$.fragment,e),ue(i.$$.fragment,e),ue(r.$$.fragment,e),s=!0)},o(e){he(t.$$.fragment,e),he(i.$$.fragment,e),he(r.$$.fragment,e),s=!1},d(e){xe(t,e),e&&_(n),xe(i,e),e&&_(a),xe(r,e)}}}function Mh(e){let t,n;return t=new Mu({}),{c(){ye(t.$$.fragment)},m(e,i){ve(t,e,i),n=!0},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){he(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Eh(e){let t,n;return t=new ih({}),{c(){ye(t.$$.fragment)},m(e,i){ve(t,e,i),n=!0},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){he(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Th(e){let t,n;return t=new sh({}),{c(){ye(t.$$.fragment)},m(e,i){ve(t,e,i),n=!0},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){he(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Nh(e){let t,n,i,a,r,s,o,l;return t=new fh({props:{$$slots:{default:[_h]},$$scope:{ctx:e}}}),i=new yh({props:{$$slots:{default:[Mh]},$$scope:{ctx:e}}}),r=new yh({props:{$$slots:{default:[Eh]},$$scope:{ctx:e}}}),o=new yh({props:{$$slots:{default:[Th]},$$scope:{ctx:e}}}),{c(){ye(t.$$.fragment),n=S(),ye(i.$$.fragment),a=S(),ye(r.$$.fragment),s=S(),ye(o.$$.fragment)},m(e,c){ve(t,e,c),w(e,n,c),ve(i,e,c),w(e,a,c),ve(r,e,c),w(e,s,c),ve(o,e,c),l=!0},p(e,n){const a={};1&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a);const s={};1&n&&(s.$$scope={dirty:n,ctx:e}),i.$set(s);const l={};1&n&&(l.$$scope={dirty:n,ctx:e}),r.$set(l);const c={};1&n&&(c.$$scope={dirty:n,ctx:e}),o.$set(c)},i(e){l||(ue(t.$$.fragment,e),ue(i.$$.fragment,e),ue(r.$$.fragment,e),ue(o.$$.fragment,e),l=!0)},o(e){he(t.$$.fragment,e),he(i.$$.fragment,e),he(r.$$.fragment,e),he(o.$$.fragment,e),l=!1},d(e){xe(t,e),e&&_(n),xe(i,e),e&&_(a),xe(r,e),e&&_(s),xe(o,e)}}}function Sh(e){let t,n,i,a;return t=new _e({}),i=new uh({props:{$$slots:{default:[Nh]},$$scope:{ctx:e}}}),{c(){ye(t.$$.fragment),n=S(),ye(i.$$.fragment)},m(e,r){ve(t,e,r),w(e,n,r),ve(i,e,r),a=!0},p(e,[t]){const n={};1&t&&(n.$$scope={dirty:t,ctx:e}),i.$set(n)},i(e){a||(ue(t.$$.fragment,e),ue(i.$$.fragment,e),a=!0)},o(e){he(t.$$.fragment,e),he(i.$$.fragment,e),a=!1},d(e){xe(t,e),e&&_(n),xe(i,e)}}}return new class extends ke{constructor(e){super(),$e(this,e,null,Sh,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
