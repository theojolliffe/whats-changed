var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function i(e){return e()}function a(){return Object.create(null)}function r(e){e.forEach(i)}function s(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let l;function c(e,t){return l||(l=document.createElement("a")),l.href=t,e===l.href}function u(t,...n){if(null==t)return e;const i=t.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}function h(e,t,n){e.$$.on_destroy.push(u(t,n))}function d(e,t,n,i){if(e){const a=f(e,t,n,i);return e[0](a)}}function f(e,t,i,a){return e[1]&&a?n(i.ctx.slice(),e[1](a(t))):i.ctx}function p(e,t,n,i){if(e[2]&&i){const a=e[2](i(n));if(void 0===t.dirty)return a;if("object"==typeof a){const e=[],n=Math.max(t.dirty.length,a.length);for(let i=0;i<n;i+=1)e[i]=t.dirty[i]|a[i];return e}return t.dirty|a}return t.dirty}function g(e,t,n,i,a,r){if(a){const s=f(t,n,i,r);e.p(s,a)}}function m(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}const y="undefined"!=typeof window;let v=y?()=>window.performance.now():()=>Date.now(),x=y?e=>requestAnimationFrame(e):e;const $=new Set;function b(e){$.forEach((t=>{t.c(e)||($.delete(t),t.f())})),0!==$.size&&x(b)}function k(e,t){e.appendChild(t)}function w(e,t,n){e.insertBefore(t,n||null)}function _(e){e.parentNode.removeChild(e)}function M(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function T(e){return document.createElement(e)}function A(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function N(e){return document.createTextNode(e)}function S(){return N(" ")}function C(){return N("")}function E(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function L(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function R(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function j(e,t){e.value=null==t?"":t}function z(e,t,n,i){e.style.setProperty(t,n,i?"important":"")}let D,P;function F(){if(void 0===D){D=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){D=!0}}return D}function I(e,t,n){e.classList[n?"add":"remove"](t)}class W{constructor(){this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.e=T(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)w(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(_)}}function O(e){P=e}function q(){if(!P)throw new Error("Function called outside component initialization");return P}function K(e){q().$$.on_mount.push(e)}function B(e){q().$$.on_destroy.push(e)}function U(){const e=q();return(t,n)=>{const i=e.$$.callbacks[t];if(i){const a=function(e,t,n=!1){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,!1,t),i}(t,n);i.slice().forEach((t=>{t.call(e,a)}))}}}function H(e,t){q().$$.context.set(e,t)}function G(e){return q().$$.context.get(e)}function Y(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const V=[],J=[],Z=[],X=[],Q=Promise.resolve();let ee=!1;function te(e){Z.push(e)}function ne(e){X.push(e)}let ie=!1;const ae=new Set;function re(){if(!ie){ie=!0;do{for(let e=0;e<V.length;e+=1){const t=V[e];O(t),se(t.$$)}for(O(null),V.length=0;J.length;)J.pop()();for(let e=0;e<Z.length;e+=1){const t=Z[e];ae.has(t)||(ae.add(t),t())}Z.length=0}while(V.length);for(;X.length;)X.pop()();ee=!1,ie=!1,ae.clear()}}function se(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(te)}}const oe=new Set;let le;function ce(){le={r:0,c:[],p:le}}function ue(){le.r||r(le.c),le=le.p}function he(e,t){e&&e.i&&(oe.delete(e),e.i(t))}function de(e,t,n,i){if(e&&e.o){if(oe.has(e))return;oe.add(e),le.c.push((()=>{oe.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}}const fe="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function pe(e,t){de(e,1,1,(()=>{t.delete(e.key)}))}function ge(e,t,n,i,a,r,s,o,l,c,u,h){let d=e.length,f=r.length,p=d;const g={};for(;p--;)g[e[p].key]=p;const m=[],y=new Map,v=new Map;for(p=f;p--;){const e=h(a,r,p),o=n(e);let l=s.get(o);l?i&&l.p(e,t):(l=c(o,e),l.c()),y.set(o,m[p]=l),o in g&&v.set(o,Math.abs(p-g[o]))}const x=new Set,$=new Set;function b(e){he(e,1),e.m(o,u),s.set(e.key,e),u=e.first,f--}for(;d&&f;){const t=m[f-1],n=e[d-1],i=t.key,a=n.key;t===n?(u=t.first,d--,f--):y.has(a)?!s.has(i)||x.has(i)?b(t):$.has(a)?d--:v.get(i)>v.get(a)?($.add(i),b(t)):(x.add(a),d--):(l(n,s),d--)}for(;d--;){const t=e[d];y.has(t.key)||l(t,s)}for(;f;)b(m[f-1]);return m}function me(e,t){const n={},i={},a={$$scope:1};let r=e.length;for(;r--;){const s=e[r],o=t[r];if(o){for(const e in s)e in o||(i[e]=1);for(const e in o)a[e]||(n[e]=o[e],a[e]=1);e[r]=o}else for(const e in s)a[e]=1}for(const e in i)e in n||(n[e]=void 0);return n}function ye(e){return"object"==typeof e&&null!==e?e:{}}function ve(e,t,n){const i=e.$$.props[t];void 0!==i&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function xe(e){e&&e.c()}function $e(e,t,n,a){const{fragment:o,on_mount:l,on_destroy:c,after_update:u}=e.$$;o&&o.m(t,n),a||te((()=>{const t=l.map(i).filter(s);c?c.push(...t):r(t),e.$$.on_mount=[]})),u.forEach(te)}function be(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ke(e,t){-1===e.$$.dirty[0]&&(V.push(e),ee||(ee=!0,Q.then(re)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function we(t,n,i,s,o,l,c,u=[-1]){const h=P;O(t);const d=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:o,bound:a(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(h?h.$$.context:[])),callbacks:a(),dirty:u,skip_bound:!1,root:n.target||h.$$.root};c&&c(d.root);let f=!1;if(d.ctx=i?i(t,n.props||{},((e,n,...i)=>{const a=i.length?i[0]:n;return d.ctx&&o(d.ctx[e],d.ctx[e]=a)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](a),f&&ke(t,e)),n})):[],d.update(),f=!0,r(d.before_update),d.fragment=!!s&&s(d.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);d.fragment&&d.fragment.l(e),e.forEach(_)}else d.fragment&&d.fragment.c();n.intro&&he(t.$$.fragment),$e(t,n.target,n.anchor,n.customElement),re()}O(h)}class _e{$destroy(){be(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Me(t){let n;return{c(){n=T("div"),n.innerHTML="<strong>Warning!</strong> This prototype uses 2011 data in lieu of the latest Census 2021 data. Data are likely to contain inaccuracies.",L(n,"class","warning svelte-srzfvi")},m(e,t){w(e,n,t)},p:e,i:e,o:e,d(e){e&&_(n)}}}class Te extends _e{constructor(e){super(),we(this,e,null,Me,o,{})}}var Ae={},Ne={};function Se(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function Ce(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var i in e)i in t||n.push(t[i]=i)})),n}function Ee(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function Le(e){var t,n=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+Ee(-t,6):t>9999?"+"+Ee(t,6):Ee(t,4))+"-"+Ee(e.getUTCMonth()+1,2)+"-"+Ee(e.getUTCDate(),2)+(r?"T"+Ee(n,2)+":"+Ee(i,2)+":"+Ee(a,2)+"."+Ee(r,3)+"Z":a?"T"+Ee(n,2)+":"+Ee(i,2)+":"+Ee(a,2)+"Z":i||n?"T"+Ee(n,2)+":"+Ee(i,2)+"Z":"")}var Re=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function i(e,t){var i,a=[],r=e.length,s=0,o=0,l=r<=0,c=!1;function u(){if(l)return Ne;if(c)return c=!1,Ae;var t,i,a=s;if(34===e.charCodeAt(a)){for(;s++<r&&34!==e.charCodeAt(s)||34===e.charCodeAt(++s););return(t=s)>=r?l=!0:10===(i=e.charCodeAt(s++))?c=!0:13===i&&(c=!0,10===e.charCodeAt(s)&&++s),e.slice(a+1,t-1).replace(/""/g,'"')}for(;s<r;){if(10===(i=e.charCodeAt(t=s++)))c=!0;else if(13===i)c=!0,10===e.charCodeAt(s)&&++s;else if(i!==n)continue;return e.slice(a,t)}return l=!0,e.slice(a,r)}for(10===e.charCodeAt(r-1)&&--r,13===e.charCodeAt(r-1)&&--r;(i=u())!==Ne;){for(var h=[];i!==Ae&&i!==Ne;)h.push(i),i=u();t&&null==(h=t(h,o++))||a.push(h)}return a}function a(t,n){return t.map((function(t){return n.map((function(e){return s(t[e])})).join(e)}))}function r(t){return t.map(s).join(e)}function s(e){return null==e?"":e instanceof Date?Le(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,a,r=i(e,(function(e,i){if(n)return n(e,i-1);a=e,n=t?function(e,t){var n=Se(e);return function(i,a){return t(n(i),a,e)}}(e,t):Se(e)}));return r.columns=a||[],r},parseRows:i,format:function(t,n){return null==n&&(n=Ce(t)),[n.map(s).join(e)].concat(a(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=Ce(e)),a(e,t).join("\n")},formatRows:function(e){return e.map(r).join("\n")},formatRow:r,formatValue:s}}(","),je=Re.parse;function ze(e){for(var t in e){var n,i,a=e[t].trim();if(a)if("true"===a)a=!0;else if("false"===a)a=!1;else if("NaN"===a)a=NaN;else if(isNaN(n=+a)){if(!(i=a.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;De&&i[4]&&!i[7]&&(a=a.replace(/-/g,"/").replace(/T/," ")),a=new Date(a)}else a=n;else a=null;e[t]=a}return e}const De=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),Pe=e=>{if(e<10)return["","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth"][e];const t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"},Fe=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string, got "+typeof e);let n=1,i=e.charAt(0);const a=function(){return i},r=function(t){throw JSON.stringify({name:"Robo-journalist error",message:t,at:n,text:e})},s=function(t){return t&&t!==i&&r("Expected '"+t+"' instead of '"+i+"'"),i=e.charAt(n),n+=1,i},o=function(e){const n=e.split(".");let i=t;for(const t of n)try{i=i[t]}catch{r(`${e} is not in the data dictionary.`)}return i},l=function(e){const t=e.split(" "),n={"+":(e,t)=>e+t,"-":(e,t)=>e-t,"*":(e,t)=>e*t,"/":(e,t)=>e/t,"<":(e,t)=>e<t,">":(e,t)=>e>t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t},i=[];for(const e of t)if(/^-?\d+$/.test(e))i.push(Number(e));else if(e in n){const t=Number(i.pop()),a=Number(i.pop());i.push(n[e](a,t))}else if("'"===e)i[i.length-1]="s"===(a=i[i.length-1])[a.length-1]?a+"'":a+"'s";else if(","===e)i[i.length-1]=i[i.length-1].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");else if(".0"===e)i[i.length-1]=i[i.length-1].toFixed(0);else if(".1"===e)i[i.length-1]=i[i.length-1].toFixed(1);else if(".2"===e)i[i.length-1]=i[i.length-1].toFixed(2);else if("~abs"===e)i[i.length-1]=Math.abs(i[i.length-1]);else if("~ord"===e)i[i.length-1]=Pe(Number(i[i.length-1]));else if("~ord'"===e){let e=Pe(Number(i.pop()));"first"===e?e="":e+=" ",i.push(e)}else"^"===e.charAt(0)?i[i.length-1]=o(e.slice(1))(i[i.length-1]):i.push(o(e));var a;return 1!==i.length&&r("Invalid RPN"),i[0]},c=function(e){s("?");const t=h();s(":");const n=h();return s("}"),e?t:n},u=function(){if(s("{"),":"===i)return s(":"),s("}"),":";let e="";for(;a();){if("}"===i)return s("}"),l(e);if("?"===i)return c(l(e));e+=i,s()}r("Braces not closed")},h=function(){let e="";for(;a();){if(":"===i||"}"===i)return e;"{"!==i?(e+=i,s()):e+=u()}return e},d=h();return""!==i&&r(`Didn't expect '${i}'`),d};async function Ie(e){let t=await fetch(e),n=await t.text();return await je(n,ze)}let We={good:["bad","fair"],bad:["good","fair"],white:["black","asian"],black:["white","asian"],asian:["white","black"],rented_private:["rented_social","owned"],rented_social:["rented_private","owned"],owned:["rented_private","rented_social"],student:["employee","unemployed","self-employed"],"self-employed":["employee","unemployed","student"],employee:["unemployed","self-employed","student"],unemployed:["employee","self-employed","student"],car_van:["bus","train_metro","foot","home"],bus:["car_van","train_metro","foot","home"],train_metro:["bus","car_van","foot","home"],foot:["bus","train_metro","car_van","home"],home:["bus","train_metro","foot","car_van"],OnePerson:["Cohabiting","Married"],Cohabiting:["OnePerson","Married"],LoneParent:["Married","Cohabiting"],Christian:["Muslim","Noreligion"],Muslim:["Christian","Noreligion"],Noreligion:["Christian","Muslim"],Buddhist:["Hindu","Sikh"],Hindu:["Sikh","Buddhist"],Jewish:["Christian","Muslim"],Sikh:["Hindu","Buddhist"],Single:["Married","Seperated"],Married:["Single","Seperated"],Seperated:["Married","Single"],"40PlushoursWeek":["20to49hoursWeek","1to19hoursWeek"],"20to49hoursWeek":["40PlushoursWeek","1to19hoursWeek"],"1to19hoursWeek":["40PlushoursWeek","20to49hoursWeek"],Kids:["NoKids","NonDepKids"],NoKids:["Kids","NonDepKids"],NonDepKids:["Kids","NoKids"],"Male1-15":["Male49plus"],Male49plus:["Male1-15"],"Female1-15":["Female49plus"],Female49plus:["Female1-15"]},Oe=["South East","South West","East","West Midlands","East Midlands","North East","North West"];function qe(e,t){return"East"==e&&(e+=" England"),!Oe.includes(e)|"NT"==t?e:"The "+e}function Ke(e){return"The"==e.slice(0,3)?e.charAt(0).toLowerCase()+e.slice(1):e}function Be(e,t,n){return{1:"",2:"second-",3:"third-",4:"fourth-",5:"fifth-"}[Math.abs(e)]+(e<0?t:n)}let Ue={"quarter of a million":25e4,"half a million":5e5,"three quarters of a million":75e4,"one million":1e6},He={"one in two":.5,"one in three":.333,"one in four":.25,"one in five":.2,"one in six":.167,"one in seven":.143,"one in eight":.125,"one in nine":.111,"1 in 10":.1,"1 in 11":.09,"1 in 12":.083,"1 in 13":.077,"1 in 14":.071,"1 in 15":.067,"1 in 16":.063,"1 in 17":.059,"1 in 18":.056,"1 in 19":.053,"1 in 20":.05,"1 in 25":.04,"1 in 30":.033,"1 in 40":.025,"1 in 50":.02,"2 in 10":.2,"3 in 10":.3,"4 in 10":.4,"6 in 10":.6,"7 in 10":.7,"8 in 10":.8,"9 in 10":.9,all:1};function Ge(e,t){let n;"frac"==t?t=He:"num"==t&&(t=Ue);let i,a=2e6;for(const r in t)Math.abs(e-t[r])<a&&(a=Math.abs(e-t[r]),i=r,e-t[r]==0?n="about":e-t[r]>0?n="just over":e-t[r]<0&&(n="just under"));return[n,i]}function Ye(e,t){3!=t&&(t=2);let n,i=Number.parseFloat(Number.parseFloat(e).toPrecision(t));return e-i<-e/100&&(n="under "),n=e-i<-e/800?1==Math.round(Math.random())?"almost ":"just under ":e-i>e/100?" just over ":e-i>e/800?"just over ":"about",[n,i]}function Ve(e,t,n,i){return i="rl"==i?"_rank_local":"r"==i?"_rank":"",t.data[e[n][0]][e[n][1]+i][2001][e[n][3]]}function Je(e,t,n,i){return i="rl"==i?"_rank_local":"r"==i?"_rank":"",t.data[e[n][0]][e[n][1]+i][2011][e[n][3]]}function Ze(e,t,n,i){let a;i="rl"==i?"_rank_local":"r"==i?"_rank":"";try{a=Math.round(10*t.data[e[n][0]][e[n][1]+i].change[e[n][3]])/10}catch(e){console.log(e.message)}return a}function Xe(e){return Math.ceil(5*e/331)}function Qe(e,t,n,i,a){"number"==typeof i&i<0?i="highest":"number"==typeof i&&(i="lowest");let r,s=Object.assign({},t.data[e[n][0]][e[n][1]+"_rank_local"][a]),o=new Set(We[e[n][3]]);for(let e of Object.keys(s))o.has(e)||delete s[e];if(Object.keys(s).length>1){if("lowest"==i){for(let[e,t]of Object.entries(s))t>0&&delete s[e];r=s.length>0?Object.keys(s).reduce(((e,t)=>s[e]>s[t]?e:t)):void 0}if("highest"==i){for(let[e,t]of Object.entries(s))t<0&&delete s[e];r=s.length>0?Object.keys(s).reduce(((e,t)=>s[e]<s[t]?e:t)):void 0}}else r=Object.keys(s);return r}function et(e,t,n,i="r"){let a="";return"rl"==i&&(a="_local"),t.data[e[n][0]][e[n][1]+"_rank"+a].change[Qe(e,t,n,Ze(e,t,n,i),"change")]}function tt(e,t,n){return e<0?n:t}var nt;function it(e,t){return Math.sign(e)==Math.sign(t)}nt="London"==parent?"city":"region";var at=["","","second-","third-","fourth-","fifth-","sixth-","seventh-","eighth-","ninth-"],rt=["no","one","two","three","four","five","six","seven","eight","nine"];function st(e){return e<10?rt[e]:e}function ot(e){let t;return t=Math.abs(e)<10?at[Math.abs(e)]:function(e){let t;if(12==e)t="twelfth";else if(e>10&e<20)t=e+"th";else{let n=Math.round(e)%10;t=1==n?e+"st":2==n?e+"nd":3==n?e+"rd":e+"th"}return t}(Math.abs(e))+"-",t}var lt={"0-9":["children under the age of nine years","under nine years"],"10-19":["people between the ages of 10 and 19 years","between 10 and 19 years"],"20-29":["people between the ages of 20 and 29 years","between 20 and 29 years"],"30-39":["people between the ages of 30 and 39 years","between 30 and 39 years"],"40-49":["people between the ages of 40 and 49 years","between 40 and 49 years"],"50-59":["people between the ages of 50 and 59 years","between 50 and 59 years"],"60-69":["people between the ages of 60 and 69 years","between 60 and 69 years"],"70-79":["people between the ages of 70 and 79 years","between 70 and 79 years"],"80plus":["people aged 80 years or over","over the age of 80 years"]};function ct(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every(((e,n)=>e===t[n]))}function ut(e,t,n){let i=tt(e,t,n);return ot(e)+i}function ht(e,t){let n,i=(e-t)/t*100;return n=Math.abs(i)>7||Math.abs(i)>3?"":"slightly",n}function dt(e,t,n,i){return e<-1?n:e>1?t:i}function ft(e,t,n){const i=e.slice();return i[37]=t[n],i[40]=t,i[39]=n,i}function pt(e,t,n){const i=e.slice();return i[37]=t[n],i[38]=t,i[39]=n,i}function gt(e){let t,n,i,a,r,s,o,l=(e[0]?e[0]:"Select one")+"";return{c(){t=T("a"),n=T("span"),i=N(l),a=S(),r=T("span"),r.textContent=" ",L(n,"class","svelte-qdzmwx"),L(r,"class","button svelte-qdzmwx"),I(r,"search",e[3]),I(r,"down",!e[3]),L(t,"id","toggle"),L(t,"class","svelte-qdzmwx")},m(l,c){w(l,t,c),k(t,n),k(n,i),k(t,a),k(t,r),s||(o=E(t,"click",e[13]),s=!0)},p(e,t){1&t[0]&&l!==(l=(e[0]?e[0]:"Select one")+"")&&R(i,l),8&t[0]&&I(r,"search",e[3]),8&t[0]&&I(r,"down",!e[3])},d(e){e&&_(t),s=!1,o()}}}function mt(e){let t,n,i,a,s,o,l,c,u=e[6][e[1]]+"",h=e[2]&&yt(e);return{c(){t=T("a"),n=T("span"),i=N(u),a=S(),h&&h.c(),s=S(),o=T("span"),o.textContent=" ",L(n,"class","selection svelte-qdzmwx"),L(o,"class","button close svelte-qdzmwx"),L(t,"id","toggle"),L(t,"class","selected svelte-qdzmwx")},m(r,u){w(r,t,u),k(t,n),k(n,i),k(n,a),h&&h.m(n,null),k(t,s),k(t,o),l||(c=[E(o,"click",e[15]),E(t,"click",e[13])],l=!0)},p(e,t){66&t[0]&&u!==(u=e[6][e[1]]+"")&&R(i,u),e[2]?h?h.p(e,t):(h=yt(e),h.c(),h.m(n,null)):h&&(h.d(1),h=null)},d(e){e&&_(t),h&&h.d(),l=!1,r(c)}}}function yt(e){let t,n,i=e[6][e[2]]+"";return{c(){t=T("small"),n=N(i),L(t,"class","svelte-qdzmwx")},m(e,i){w(e,t,i),k(t,n)},p(e,t){68&t[0]&&i!==(i=e[6][e[2]]+"")&&R(n,i)},d(e){e&&_(t)}}}function vt(e){let t,n,i,a,s,o;function l(e,t){return e[4].length<0?kt:e[9][0]&&e[2]?bt:e[9][0]?$t:xt}let c=l(e),u=c(e);return{c(){t=T("div"),n=T("input"),i=S(),a=T("ul"),u.c(),L(n,"type","text"),L(n,"placeholder",""),L(n,"autocomplete","false"),L(n,"class","svelte-qdzmwx"),L(a,"class","svelte-qdzmwx"),L(t,"id","dropdown"),z(t,"top","0"),L(t,"class","svelte-qdzmwx")},m(r,l){w(r,t,l),k(t,n),j(n,e[4]),e[25](n),k(t,i),k(t,a),u.m(a,null),e[35](t),s||(o=[E(n,"input",e[24]),E(n,"keyup",e[17])],s=!0)},p(e,t){16&t[0]&&n.value!==e[4]&&j(n,e[4]),c===(c=l(e))&&u?u.p(e,t):(u.d(1),u=c(e),u&&(u.c(),u.m(a,null)))},d(n){n&&_(t),e[25](null),u.d(),e[35](null),s=!1,r(o)}}}function xt(t){let n;return{c(){n=T("li"),n.textContent="No results",L(n,"class","svelte-qdzmwx")},m(e,t){w(e,n,t)},p:e,d(e){e&&_(n)}}}function $t(e){let t,n=e[9],i=[];for(let t=0;t<n.length;t+=1)i[t]=wt(ft(e,n,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=C()},m(e,n){for(let t=0;t<i.length;t+=1)i[t].m(e,n);w(e,t,n)},p(e,a){if(19202&a[0]){let r;for(n=e[9],r=0;r<n.length;r+=1){const s=ft(e,n,r);i[r]?i[r].p(s,a):(i[r]=wt(s),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){M(i,e),e&&_(t)}}}function bt(e){let t,n=e[9],i=[];for(let t=0;t<n.length;t+=1)i[t]=Mt(pt(e,n,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=C()},m(e,n){for(let t=0;t<i.length;t+=1)i[t].m(e,n);w(e,t,n)},p(e,a){if(23298&a[0]){let r;for(n=e[9],r=0;r<n.length;r+=1){const s=pt(e,n,r);i[r]?i[r].p(s,a):(i[r]=Mt(s),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){M(i,e),e&&_(t)}}}function kt(t){let n;return{c(){n=T("li"),n.textContent="Type a name...",L(n,"class","svelte-qdzmwx")},m(e,t){w(e,n,t)},p:e,d(e){e&&_(n)}}}function wt(e){let t,n,i,a,s,o=e[37][e[1]]+"",l=e[39];function c(){return e[32](e[37])}function u(){return e[33](e[39])}const h=()=>e[34](t,l),d=()=>e[34](null,l);return{c(){t=T("li"),n=N(o),i=S(),L(t,"class","svelte-qdzmwx"),I(t,"highlight",e[8]==e[39])},m(e,r){w(e,t,r),k(t,n),k(t,i),h(),a||(s=[E(t,"click",c),E(t,"mouseover",u)],a=!0)},p(i,a){e=i,514&a[0]&&o!==(o=e[37][e[1]]+"")&&R(n,o),l!==e[39]&&(d(),l=e[39],h()),256&a[0]&&I(t,"highlight",e[8]==e[39])},d(e){e&&_(t),d(),a=!1,r(s)}}}function _t(e){let t,n=console.log("--666-----option",e[37][e[1]],e[12].find(i))+"";function i(...t){return e[26](e[37],...t)}return{c(){t=N(n)},m(e,n){w(e,t,n)},p(a,r){e=a,4610&r[0]&&n!==(n=console.log("--666-----option",e[37][e[1]],e[12].find(i))+"")&&R(t,n)},d(e){e&&_(t)}}}function Mt(e){let t,n,i,a,s,o,l,c,u,h=!e[12].find(g),d=e[37][e[1]]+"",f=e[12].find(y)["Supergroup name"]+", "+e[12].find(v)["Region/Country"],p=e[39];function g(...t){return e[23](e[37],...t)}let m=h&&_t(e);function y(...t){return e[27](e[37],...t)}function v(...t){return e[28](e[37],...t)}function x(){return e[29](e[37])}function $(){return e[30](e[39])}const b=()=>e[31](n,p),M=()=>e[31](null,p);return{c(){m&&m.c(),t=S(),n=T("li"),i=N(d),a=S(),s=T("small"),o=N(f),l=S(),L(s,"class","svelte-qdzmwx"),L(n,"class","svelte-qdzmwx"),I(n,"highlight",e[8]==e[39])},m(e,r){m&&m.m(e,r),w(e,t,r),w(e,n,r),k(n,i),k(n,a),k(n,s),k(s,o),k(n,l),b(),c||(u=[E(n,"click",x),E(n,"mouseover",$)],c=!0)},p(a,r){e=a,4610&r[0]&&(h=!e[12].find(g)),h?m?m.p(e,r):(m=_t(e),m.c(),m.m(t.parentNode,t)):m&&(m.d(1),m=null),514&r[0]&&d!==(d=e[37][e[1]]+"")&&R(i,d),4610&r[0]&&f!==(f=e[12].find(y)["Supergroup name"]+", "+e[12].find(v)["Region/Country"])&&R(o,f),p!==e[39]&&(M(),p=e[39],b()),256&r[0]&&I(n,"highlight",e[8]==e[39])},d(e){m&&m.d(e),e&&_(t),e&&_(n),M(),c=!1,r(u)}}}function Tt(t){let n,i,a,r;function s(e,t){return e[6]&&!e[3]?mt:gt}let o=s(t),l=o(t),c=t[7]&&vt(t);return{c(){n=T("div"),l.c(),i=S(),c&&c.c(),L(n,"id","select"),L(n,"class","svelte-qdzmwx"),I(n,"active",t[7])},m(e,s){w(e,n,s),l.m(n,null),k(n,i),c&&c.m(n,null),a||(r=E(n,"keydown",t[16]),a=!0)},p(e,t){o===(o=s(e))&&l?l.p(e,t):(l.d(1),l=o(e),l&&(l.c(),l.m(n,i))),e[7]?c?c.p(e,t):(c=vt(e),c.c(),c.m(n,null)):c&&(c.d(1),c=null),128&t[0]&&I(n,"active",e[7])},i:e,o:e,d(e){e&&_(n),l.d(),c&&c.d(),a=!1,r()}}}function At(e,t,n){let i;const a=U();let r,s,o,l,{options:c}=t,{selected:u=null}=t,{placeholder:h="Find an area..."}=t,{value:d="code"}=t,{label:f="name"}=t,{group:p=null}=t,{search:g=!1}=t,m=u,y=u?c.find((e=>{e[d],u[d]})):null,v=!1,x="",$=null,b=[];function k(e){n(18,u=e),n(7,v=!1),a("select",{selected:e,value:e[d]})}Ie("https://raw.githubusercontent.com/theojolliffe/census-data/main/csv/lists/Corresponding%20Local%20Authorities-Table%201.csv").then((e=>{e.forEach((e=>{})),n(12,l=e)}));return e.$$set=e=>{"options"in e&&n(19,c=e.options),"selected"in e&&n(18,u=e.selected),"placeholder"in e&&n(0,h=e.placeholder),"value"in e&&n(20,d=e.value),"label"in e&&n(1,f=e.label),"group"in e&&n(2,p=e.group),"search"in e&&n(3,g=e.search)},e.$$.update=()=>{16&e.$$.dirty[0]&&n(22,i=x?new RegExp(x,"i"):null),4718594&e.$$.dirty[0]&&(n(9,r=i?c.filter((e=>i.test(e[f]))):c),n(8,$=0)),32&e.$$.dirty[0]&&(document.onclick=function(e){e.target!==s&&(n(7,v=!1),n(8,$=0))}),3932160&e.$$.dirty[0]&&m!=u&&(n(6,y=c.find((e=>e[d]==u[d]))),n(21,m=u))},[h,f,p,g,x,s,y,v,$,r,o,b,l,function(e){var t;e.stopPropagation(),n(4,x=""),n(7,v=!v),(t=10,new Promise((e=>setTimeout(e,t)))).then((()=>{o&&v&&o.focus()}))},k,function(e){e.stopPropagation(),n(18,u=null),n(21,m=null),n(6,y=null),a("select",{selected:null,value:null})},function(e){v&&r[0]&&Number.isInteger($)&&(38===e.keyCode?(n(8,$-=$>0?1:0),b[$].scrollIntoView({block:"nearest",inline:"start"})):40===e.keyCode&&(n(8,$+=$<r.length-1?1:0),b[$].scrollIntoView({block:"nearest",inline:"end"})))},function(e){r[0]&&Number.isInteger($)&&13===e.keyCode&&k(r[$])},u,c,d,m,i,(e,t)=>t.Name==e[f],function(){x=this.value,n(4,x)},function(e){J[e?"unshift":"push"]((()=>{o=e,n(10,o)}))},(e,t)=>t.Name==e[f],(e,t)=>t.Name==e[f],(e,t)=>t.Name==e[f],e=>k(e),e=>n(8,$=e),function(e,t){J[e?"unshift":"push"]((()=>{b[t]=e,n(11,b)}))},e=>k(e),e=>n(8,$=e),function(e,t){J[e?"unshift":"push"]((()=>{b[t]=e,n(11,b)}))},function(e){J[e?"unshift":"push"]((()=>{s=e,n(5,s)}))}]}class Nt extends _e{constructor(e){super(),we(this,e,At,Tt,o,{options:19,selected:18,placeholder:0,value:20,label:1,group:2,search:3},null,[-1,-1])}}var St="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ct(e){var t={exports:{}};return e(t,t.exports),t.exports}var Et=Ct((function(e,t){(function(){var n={load:function(e,t){var n="\\u0000\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u200B\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF\\u005B\\u005C\\u005D\\u007B\\u007D\\u003A",i=new RegExp(".*((\r|\n)+)"),a=new RegExp("^\\s*([^"+n+"]+)[ \t\r]*:[ \t\r]*(.*(?:\n|\r|$))"),r=new RegExp("^\\s*:[ \t\r]*(endskip|ignore|skip|end).*?(\n|\r|$)","i"),s=new RegExp("^\\s*\\*[ \t\r]*(.*(?:\n|\r|$))"),o=new RegExp("^\\s*(\\[|\\{)[ \t\r]*([+.]*)[ \t\r]*([^"+n+"]*)[ \t\r]*(?:\\]|\\}).*?(\n|\r|$)"),l={},c=l,u=[],h=void 0,d=null,f=null,p="",g=!1;for(!0!==(t=t||{}).comments&&(t.comments=!1);e;){var m;r.exec(e)?x((m=r.exec(e))[1].toLowerCase()):g||!a.exec(e)||h&&"simple"===h.arrayType?!g&&s.exec(e)&&h&&h.array&&"complex"!==h.arrayType&&"freeform"!==h.arrayType&&h.flags.indexOf("+")<0?v((m=s.exec(e))[1]):!g&&o.exec(e)?$((m=o.exec(e))[1],m[2],m[3]):i.exec(e)?b((m=i.exec(e))[0]):(b(e),e=""):y((m=a.exec(e))[1],m[2]||""),m&&(e=e.substring(m[0].length))}function y(e,t){_(),k(e),h&&h.flags.indexOf("+")>-1&&(e="value"),f=e,p=t,M(e,{replace:!0})}function v(e){_(),h.arrayType=h.arrayType||"simple",h.array.push(""),f=h.array,p=e,M(h.array,{replace:!0})}function x(t){if(g&&"endskip"!==t&&"ignore"!==t)return _();switch(t){case"end":return void(f&&M(f,{replace:!1}));case"ignore":e="";break;case"skip":g=!0;break;case"endskip":g=!1}_()}function $(e,t,n){if(_(),""==n){var i=u.pop();c=(i?i.scope:l)||l,h=u[u.length-1]}else if("["===e||"{"===e){var a=!1,r=l;if(t.indexOf(".")>-1?(k(n),a=!0,h&&(r=c)):(c=l,u=[]),h&&h.flags.indexOf("+")>-1)var s=n;else{for(var o=n.split("."),d=0;d<o.length-1;d++)r=r[o[d]]=r[o[d]]||{};s=o[o.length-1]}var f={array:null,arrayType:null,arrayFirstKey:null,flags:t,scope:c},p=h&&h.flags.indexOf("+")>-1&&t.indexOf(".")>-1;"["==e?(p&&(s="value"),f.array=r[s]=[],t.indexOf("+")>-1&&(f.arrayType="freeform"),a?u.push(f):u=[f],h=u[u.length-1]):"{"==e&&(a?(c=p?c.value={}:r[s]=r={},u.push(f)):(c=r[s]="object"==typeof r[s]?r[s]:{},u=[f]),h=u[u.length-1])}}function b(t){h&&h.flags.indexOf("+")>-1&&t.match(/[^\n\r\s]/)?h.array.push({type:"text",value:t.replace(/(^\s*)|(\s*$)/g,"")}):p+=e.substring(0,t.length)}function k(e){if(h&&h.array){if(h.arrayType=h.arrayType||"complex","simple"===h.arrayType)return;null!==h.arrayFirstKey&&h.arrayFirstKey!==e||h.array.push(c={}),h.flags.indexOf("+")>-1?c.type=e:h.arrayFirstKey=h.arrayFirstKey||e}}function w(e,n){return t.comments&&(e=(e=e.replace(/(?:^\\)?\[[^\[\]\n\r]*\](?!\])/gm,"")).replace(/\[\[([^\[\]\n\r]*)\]\]/g,"[$1]")),"append"==n&&(e=e.replace(new RegExp("^(\\s*)\\\\","gm"),"$1")),e}function _(){var e=p+"";return p="",f=null,e}function M(e,t){t=t||{};var n=f,i=_();if(t.replace?(i=w(i,"replace").replace(new RegExp("^\\s*"),""),p=new RegExp("\\s*$").exec(i)[0],f=n):i=w(i,"append"),"object"==typeof e)t.replace&&(e[e.length-1]=""),e[e.length-1]+=i.replace(new RegExp("\\s*$"),"");else{var a=e.split(".");d=c;for(var r=0;r<a.length-1;r++)"string"==typeof d[a[r]]&&(d[a[r]]={}),d=d[a[r]]=d[a[r]]||{};t.replace&&(d[a[a.length-1]]=""),d[a[a.length-1]]+=i.replace(new RegExp("\\s*$"),"")}}return _(),l}};e.exports&&(t=e.exports=n),t.archieml=n}).call(St)})),Lt=Ct((function(e,t){!function(t,n){e.exports=n()}(0,(function(){var e=[],t=[],n={},i={},a={};function r(e){return"string"==typeof e?new RegExp("^"+e+"$","i"):e}function s(e,t){return e===t?t:e===e.toLowerCase()?t.toLowerCase():e===e.toUpperCase()?t.toUpperCase():e[0]===e[0].toUpperCase()?t.charAt(0).toUpperCase()+t.substr(1).toLowerCase():t.toLowerCase()}function o(e,t){return e.replace(/\$(\d{1,2})/g,(function(e,n){return t[n]||""}))}function l(e,t){return e.replace(t[0],(function(n,i){var a=o(t[1],arguments);return s(""===n?e[i-1]:n,a)}))}function c(e,t,i){if(!e.length||n.hasOwnProperty(e))return t;for(var a=i.length;a--;){var r=i[a];if(r[0].test(t))return l(t,r)}return t}function u(e,t,n){return function(i){var a=i.toLowerCase();return t.hasOwnProperty(a)?s(i,a):e.hasOwnProperty(a)?s(i,e[a]):c(a,i,n)}}function h(e,t,n,i){return function(i){var a=i.toLowerCase();return!!t.hasOwnProperty(a)||!e.hasOwnProperty(a)&&c(a,a,n)===a}}function d(e,t,n){return(n?t+" ":"")+(1===t?d.singular(e):d.plural(e))}return d.plural=u(a,i,e),d.isPlural=h(a,i,e),d.singular=u(i,a,t),d.isSingular=h(i,a,t),d.addPluralRule=function(t,n){e.push([r(t),n])},d.addSingularRule=function(e,n){t.push([r(e),n])},d.addUncountableRule=function(e){"string"!=typeof e?(d.addPluralRule(e,"$0"),d.addSingularRule(e,"$0")):n[e.toLowerCase()]=!0},d.addIrregularRule=function(e,t){t=t.toLowerCase(),e=e.toLowerCase(),a[e]=t,i[t]=e},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach((function(e){return d.addIrregularRule(e[0],e[1])})),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach((function(e){return d.addPluralRule(e[0],e[1])})),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach((function(e){return d.addSingularRule(e[0],e[1])})),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(d.addUncountableRule),d}))}));function Rt(e){return Array.isArray?Array.isArray(e):"[object Array]"===Wt(e)}function jt(e){return"string"==typeof e}function zt(e){return"number"==typeof e}function Dt(e){return!0===e||!1===e||function(e){return Pt(e)&&null!==e}(e)&&"[object Boolean]"==Wt(e)}function Pt(e){return"object"==typeof e}function Ft(e){return null!=e}function It(e){return!e.trim().length}function Wt(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Ot=Object.prototype.hasOwnProperty;class qt{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let n=Kt(e);t+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Kt(e){let t=null,n=null,i=null,a=1;if(jt(e)||Rt(e))i=e,t=Bt(e),n=Ut(e);else{if(!Ot.call(e,"name"))throw new Error((e=>`Missing ${e} property in key`)("name"));const r=e.name;if(i=r,Ot.call(e,"weight")&&(a=e.weight,a<=0))throw new Error((e=>`Property 'weight' in key '${e}' must be a positive integer`)(r));t=Bt(r),n=Ut(r)}return{path:t,id:n,weight:a,src:i}}function Bt(e){return Rt(e)?e:e.split(".")}function Ut(e){return Rt(e)?e.join("."):e}var Ht={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(e,t){let n=[],i=!1;const a=(e,t,r)=>{if(Ft(e))if(t[r]){const s=e[t[r]];if(!Ft(s))return;if(r===t.length-1&&(jt(s)||zt(s)||Dt(s)))n.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(s));else if(Rt(s)){i=!0;for(let e=0,n=s.length;e<n;e+=1)a(s[e],t,r+1)}else t.length&&a(s,t,r+1)}else n.push(e)};return a(e,jt(t)?t.split("."):t,0),i?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const Gt=/[^ ]+/g;class Yt{constructor({getFn:e=Ht.getFn,fieldNormWeight:t=Ht.fieldNormWeight}={}){this.norm=function(e=1,t=3){const n=new Map,i=Math.pow(10,t);return{get(t){const a=t.match(Gt).length;if(n.has(a))return n.get(a);const r=1/Math.pow(a,.5*e),s=parseFloat(Math.round(r*i)/i);return n.set(a,s),s},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,jt(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();jt(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Ft(e)||It(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach(((t,i)=>{let a=this.getFn(e,t.path);if(Ft(a))if(Rt(a)){let e=[];const t=[{nestedArrIndex:-1,value:a}];for(;t.length;){const{nestedArrIndex:n,value:i}=t.pop();if(Ft(i))if(jt(i)&&!It(i)){let t={v:i,i:n,n:this.norm.get(i)};e.push(t)}else Rt(i)&&i.forEach(((e,n)=>{t.push({nestedArrIndex:n,value:e})}))}n.$[i]=e}else if(!It(a)){let e={v:a,n:this.norm.get(a)};n.$[i]=e}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Vt(e,t,{getFn:n=Ht.getFn,fieldNormWeight:i=Ht.fieldNormWeight}={}){const a=new Yt({getFn:n,fieldNormWeight:i});return a.setKeys(e.map(Kt)),a.setSources(t),a.create(),a}function Jt(e,{errors:t=0,currentLocation:n=0,expectedLocation:i=0,distance:a=Ht.distance,ignoreLocation:r=Ht.ignoreLocation}={}){const s=t/e.length;if(r)return s;const o=Math.abs(i-n);return a?s+o/a:o?1:s}const Zt=32;function Xt(e,t,n,{location:i=Ht.location,distance:a=Ht.distance,threshold:r=Ht.threshold,findAllMatches:s=Ht.findAllMatches,minMatchCharLength:o=Ht.minMatchCharLength,includeMatches:l=Ht.includeMatches,ignoreLocation:c=Ht.ignoreLocation}={}){if(t.length>Zt)throw new Error(`Pattern length exceeds max of ${Zt}.`);const u=t.length,h=e.length,d=Math.max(0,Math.min(i,h));let f=r,p=d;const g=o>1||l,m=g?Array(h):[];let y;for(;(y=e.indexOf(t,p))>-1;){let e=Jt(t,{currentLocation:y,expectedLocation:d,distance:a,ignoreLocation:c});if(f=Math.min(e,f),p=y+u,g){let e=0;for(;e<u;)m[y+e]=1,e+=1}}p=-1;let v=[],x=1,$=u+h;const b=1<<u-1;for(let i=0;i<u;i+=1){let r=0,o=$;for(;r<o;){Jt(t,{errors:i,currentLocation:d+o,expectedLocation:d,distance:a,ignoreLocation:c})<=f?r=o:$=o,o=Math.floor(($-r)/2+r)}$=o;let l=Math.max(1,d-o+1),y=s?h:Math.min(d+o,h)+u,k=Array(y+2);k[y+1]=(1<<i)-1;for(let r=y;r>=l;r-=1){let s=r-1,o=n[e.charAt(s)];if(g&&(m[s]=+!!o),k[r]=(k[r+1]<<1|1)&o,i&&(k[r]|=(v[r+1]|v[r])<<1|1|v[r+1]),k[r]&b&&(x=Jt(t,{errors:i,currentLocation:s,expectedLocation:d,distance:a,ignoreLocation:c}),x<=f)){if(f=x,p=s,p<=d)break;l=Math.max(1,2*d-p)}}if(Jt(t,{errors:i+1,currentLocation:d,expectedLocation:d,distance:a,ignoreLocation:c})>f)break;v=k}const k={isMatch:p>=0,score:Math.max(.001,x)};if(g){const e=function(e=[],t=Ht.minMatchCharLength){let n=[],i=-1,a=-1,r=0;for(let s=e.length;r<s;r+=1){let s=e[r];s&&-1===i?i=r:s||-1===i||(a=r-1,a-i+1>=t&&n.push([i,a]),i=-1)}return e[r-1]&&r-i>=t&&n.push([i,r-1]),n}(m,o);e.length?l&&(k.indices=e):k.isMatch=!1}return k}function Qt(e){let t={};for(let n=0,i=e.length;n<i;n+=1){const a=e.charAt(n);t[a]=(t[a]||0)|1<<i-n-1}return t}class en{constructor(e,{location:t=Ht.location,threshold:n=Ht.threshold,distance:i=Ht.distance,includeMatches:a=Ht.includeMatches,findAllMatches:r=Ht.findAllMatches,minMatchCharLength:s=Ht.minMatchCharLength,isCaseSensitive:o=Ht.isCaseSensitive,ignoreLocation:l=Ht.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:i,includeMatches:a,findAllMatches:r,minMatchCharLength:s,isCaseSensitive:o,ignoreLocation:l},this.pattern=o?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(e,t)=>{this.chunks.push({pattern:e,alphabet:Qt(e),startIndex:t})},u=this.pattern.length;if(u>Zt){let e=0;const t=u%Zt,n=u-t;for(;e<n;)c(this.pattern.substr(e,Zt),e),e+=Zt;if(t){const e=u-Zt;c(this.pattern.substr(e),e)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:i,distance:a,threshold:r,findAllMatches:s,minMatchCharLength:o,ignoreLocation:l}=this.options;let c=[],u=0,h=!1;this.chunks.forEach((({pattern:t,alphabet:d,startIndex:f})=>{const{isMatch:p,score:g,indices:m}=Xt(e,t,d,{location:i+f,distance:a,threshold:r,findAllMatches:s,minMatchCharLength:o,includeMatches:n,ignoreLocation:l});p&&(h=!0),u+=g,p&&m&&(c=[...c,...m])}));let d={isMatch:h,score:h?u/this.chunks.length:1};return h&&n&&(d.indices=c),d}}class tn{constructor(e){this.pattern=e}static isMultiMatch(e){return nn(e,this.multiRegex)}static isSingleMatch(e){return nn(e,this.singleRegex)}search(){}}function nn(e,t){const n=e.match(t);return n?n[1]:null}class an extends tn{constructor(e,{location:t=Ht.location,threshold:n=Ht.threshold,distance:i=Ht.distance,includeMatches:a=Ht.includeMatches,findAllMatches:r=Ht.findAllMatches,minMatchCharLength:s=Ht.minMatchCharLength,isCaseSensitive:o=Ht.isCaseSensitive,ignoreLocation:l=Ht.ignoreLocation}={}){super(e),this._bitapSearch=new en(e,{location:t,threshold:n,distance:i,includeMatches:a,findAllMatches:r,minMatchCharLength:s,isCaseSensitive:o,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class rn extends tn{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const i=[],a=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+a,i.push([t,n-1]);const r=!!i.length;return{isMatch:r,score:r?0:1,indices:i}}}const sn=[class extends tn{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},rn,class extends tn{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends tn{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends tn{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends tn{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends tn{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},an],on=sn.length,ln=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;const cn=new Set([an.type,rn.type]);class un{constructor(e,{isCaseSensitive:t=Ht.isCaseSensitive,includeMatches:n=Ht.includeMatches,minMatchCharLength:i=Ht.minMatchCharLength,ignoreLocation:a=Ht.ignoreLocation,findAllMatches:r=Ht.findAllMatches,location:s=Ht.location,threshold:o=Ht.threshold,distance:l=Ht.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:i,findAllMatches:r,ignoreLocation:a,location:s,threshold:o,distance:l},this.pattern=t?e:e.toLowerCase(),this.query=function(e,t={}){return e.split("|").map((e=>{let n=e.trim().split(ln).filter((e=>e&&!!e.trim())),i=[];for(let e=0,a=n.length;e<a;e+=1){const a=n[e];let r=!1,s=-1;for(;!r&&++s<on;){const e=sn[s];let n=e.isMultiMatch(a);n&&(i.push(new e(n,t)),r=!0)}if(!r)for(s=-1;++s<on;){const e=sn[s];let n=e.isSingleMatch(a);if(n){i.push(new e(n,t));break}}}return i}))}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let a=0,r=[],s=0;for(let i=0,o=t.length;i<o;i+=1){const o=t[i];r.length=0,a=0;for(let t=0,i=o.length;t<i;t+=1){const i=o[t],{isMatch:l,indices:c,score:u}=i.search(e);if(!l){s=0,a=0,r.length=0;break}if(a+=1,s+=u,n){const e=i.constructor.type;cn.has(e)?r=[...r,...c]:r.push(c)}}if(a){let e={isMatch:!0,score:s/a};return n&&(e.indices=r),e}}return{isMatch:!1,score:1}}}const hn=[];function dn(e,t){for(let n=0,i=hn.length;n<i;n+=1){let i=hn[n];if(i.condition(e,t))return new i(e,t)}return new en(e,t)}const fn="$and",pn="$or",gn="$path",mn="$val",yn=e=>!(!e[fn]&&!e[pn]),vn=e=>({[fn]:Object.keys(e).map((t=>({[t]:e[t]})))});function xn(e,t,{auto:n=!0}={}){const i=e=>{let a=Object.keys(e);const r=(e=>!!e[gn])(e);if(!r&&a.length>1&&!yn(e))return i(vn(e));if((e=>!Rt(e)&&Pt(e)&&!yn(e))(e)){const i=r?e[gn]:a[0],s=r?e[mn]:e[i];if(!jt(s))throw new Error((e=>`Invalid value for key ${e}`)(i));const o={keyId:Ut(i),pattern:s};return n&&(o.searcher=dn(s,t)),o}let s={children:[],operator:a[0]};return a.forEach((t=>{const n=e[t];Rt(n)&&n.forEach((e=>{s.children.push(i(e))}))})),s};return yn(e)||(e=vn(e)),i(e)}function $n(e,t){const n=e.matches;t.matches=[],Ft(n)&&n.forEach((e=>{if(!Ft(e.indices)||!e.indices.length)return;const{indices:n,value:i}=e;let a={indices:n,value:i};e.key&&(a.key=e.key.src),e.idx>-1&&(a.refIndex=e.idx),t.matches.push(a)}))}function bn(e,t){t.score=e.score}class kn{constructor(e,t={},n){this.options={...Ht,...t},this.options.useExtendedSearch,this._keyStore=new qt(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof Yt))throw new Error("Incorrect 'index' type");this._myIndex=t||Vt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Ft(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=(()=>!1)){const t=[];for(let n=0,i=this._docs.length;n<i;n+=1){const a=this._docs[n];e(a,n)&&(this.removeAt(n),n-=1,i-=1,t.push(a))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:a,sortFn:r,ignoreFieldNorm:s}=this.options;let o=jt(e)?jt(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=Ht.ignoreFieldNorm}){e.forEach((e=>{let n=1;e.matches.forEach((({key:e,norm:i,score:a})=>{const r=e?e.weight:null;n*=Math.pow(0===a&&r?Number.EPSILON:a,(r||1)*(t?1:i))})),e.score=n}))}(o,{ignoreFieldNorm:s}),a&&o.sort(r),zt(t)&&t>-1&&(o=o.slice(0,t)),function(e,t,{includeMatches:n=Ht.includeMatches,includeScore:i=Ht.includeScore}={}){const a=[];return n&&a.push($n),i&&a.push(bn),e.map((e=>{const{idx:n}=e,i={item:t[n],refIndex:n};return a.length&&a.forEach((t=>{t(e,i)})),i}))}(o,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(e){const t=dn(e,this.options),{records:n}=this._myIndex,i=[];return n.forEach((({v:e,i:n,n:a})=>{if(!Ft(e))return;const{isMatch:r,score:s,indices:o}=t.searchIn(e);r&&i.push({item:e,idx:n,matches:[{score:s,value:e,norm:a,indices:o}]})})),i}_searchLogical(e){const t=xn(e,this.options),n=(e,t,i)=>{if(!e.children){const{keyId:n,searcher:a}=e,r=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:a});return r&&r.length?[{idx:i,item:t,matches:r}]:[]}const a=[];for(let r=0,s=e.children.length;r<s;r+=1){const s=e.children[r],o=n(s,t,i);if(o.length)a.push(...o);else if(e.operator===fn)return[]}return a},i=this._myIndex.records,a={},r=[];return i.forEach((({$:e,i:i})=>{if(Ft(e)){let s=n(t,e,i);s.length&&(a[i]||(a[i]={idx:i,item:e,matches:[]},r.push(a[i])),s.forEach((({matches:e})=>{a[i].matches.push(...e)})))}})),r}_searchObjectList(e){const t=dn(e,this.options),{keys:n,records:i}=this._myIndex,a=[];return i.forEach((({$:e,i:i})=>{if(!Ft(e))return;let r=[];n.forEach(((n,i)=>{r.push(...this._findMatches({key:n,value:e[i],searcher:t}))})),r.length&&a.push({idx:i,item:e,matches:r})})),a}_findMatches({key:e,value:t,searcher:n}){if(!Ft(t))return[];let i=[];if(Rt(t))t.forEach((({v:t,i:a,n:r})=>{if(!Ft(t))return;const{isMatch:s,score:o,indices:l}=n.searchIn(t);s&&i.push({score:o,key:e,value:t,idx:a,norm:r,indices:l})}));else{const{v:a,n:r}=t,{isMatch:s,score:o,indices:l}=n.searchIn(a);s&&i.push({score:o,key:e,value:a,norm:r,indices:l})}return i}}kn.version="6.5.3",kn.createIndex=Vt,kn.parseIndex=function(e,{getFn:t=Ht.getFn,fieldNormWeight:n=Ht.fieldNormWeight}={}){const{keys:i,records:a}=e,r=new Yt({getFn:t,fieldNormWeight:n});return r.setKeys(i),r.setIndexRecords(a),r},kn.config=Ht,kn.parseQuery=xn,function(...e){hn.push(...e)}(un);const wn=[];function _n(t,n=e){let i;const a=new Set;function r(e){if(o(t,e)&&(t=e,i)){const e=!wn.length;for(const e of a)e[1](),wn.push(e,t);if(e){for(let e=0;e<wn.length;e+=2)wn[e][0](wn[e+1]);wn.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(s,o=e){const l=[s,o];return a.add(l),1===a.size&&(i=n(r)||e),s(t),()=>{a.delete(l),0===a.size&&(i(),i=null)}}}}function Mn(t,n,i){const a=!Array.isArray(t),o=a?[t]:t,l=n.length<2;return c=t=>{let i=!1;const c=[];let h=0,d=e;const f=()=>{if(h)return;d();const i=n(a?c[0]:c,t);l?t(i):d=s(i)?i:e},p=o.map(((e,t)=>u(e,(e=>{c[t]=e,h&=~(1<<t),i&&f()}),(()=>{h|=1<<t}))));return i=!0,f(),function(){r(p),d()}},{subscribe:_n(i,c).subscribe};var c}function Tn(e){return 0===(t=e)||t?Array.isArray(e)?t=>e.map((e=>"function"!=typeof e?t[e]:e(t))):"function"!=typeof e?t=>t[e]:e:null;var t}function An(e,t={}){return function(e){const t={};for(const n of e){if(Object(n)!==n)throw new TypeError("iterable for fromEntries should yield objects");const{0:e,1:i}=n;Object.defineProperty(t,e,{configurable:!0,enumerable:!0,writable:!0,value:i})}return t}(Object.entries(e).filter((([e,n])=>void 0!==n&&void 0===t[e])))}function Nn(e,t){if(!Array.isArray(e))throw new TypeError("The first argument of calcExtents() must be an array.");if(Array.isArray(t)||null==t)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const n={},i=Object.keys(t),a=i.length;let r,s,o,l,c,u,h,d;const f=e.length;for(r=0;r<a;r+=1){for(l=i[r],h=t[l],c=null,u=null,s=0;s<f;s+=1)if(d=h(e[s]),Array.isArray(d)){const e=d.length;for(o=0;o<e;o+=1)void 0!==d[o]&&null!==d[o]&&!1===Number.isNaN(d[o])&&((null===c||d[o]<c)&&(c=d[o]),(null===u||d[o]>u)&&(u=d[o]))}else null!=d&&!1===Number.isNaN(d)&&((null===c||d<c)&&(c=d),(null===u||d>u)&&(u=d));n[l]=[c,u]}return n}function Sn(e=[],t){return!0===Array.isArray(t)?t.map(((t,n)=>null===t?e[n]:t)):e}function Cn(e){return function([t,n]){return t?Sn(t[e],n):n}}function En(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ln(e){let t=e,n=e;function i(e,t,i,a){for(null==i&&(i=0),null==a&&(a=e.length);i<a;){const r=i+a>>>1;n(e[r],t)<0?i=r+1:a=r}return i}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>En(e(t),n)}(e)),{left:i,center:function(e,n,a,r){null==a&&(a=0),null==r&&(r=e.length);const s=i(e,n,a,r-1);return s>a&&t(e[s-1],n)>-t(e[s],n)?s-1:s},right:function(e,t,i,a){for(null==i&&(i=0),null==a&&(a=e.length);i<a;){const r=i+a>>>1;n(e[r],t)>0?a=r:i=r+1}return i}}}const Rn=Ln(En).right;Ln((function(e){return null===e?NaN:+e})).center;var jn=Rn,zn=Math.sqrt(50),Dn=Math.sqrt(10),Pn=Math.sqrt(2);function Fn(e,t,n){var i=(t-e)/Math.max(0,n),a=Math.floor(Math.log(i)/Math.LN10),r=i/Math.pow(10,a);return a>=0?(r>=zn?10:r>=Dn?5:r>=Pn?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(r>=zn?10:r>=Dn?5:r>=Pn?2:1)}function In(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Wn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function On(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function qn(){}var Kn=.7,Bn=1/Kn,Un="\\s*([+-]?\\d+)\\s*",Hn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Yn=/^#([0-9a-f]{3,8})$/,Vn=new RegExp("^rgb\\("+[Un,Un,Un]+"\\)$"),Jn=new RegExp("^rgb\\("+[Gn,Gn,Gn]+"\\)$"),Zn=new RegExp("^rgba\\("+[Un,Un,Un,Hn]+"\\)$"),Xn=new RegExp("^rgba\\("+[Gn,Gn,Gn,Hn]+"\\)$"),Qn=new RegExp("^hsl\\("+[Hn,Gn,Gn]+"\\)$"),ei=new RegExp("^hsla\\("+[Hn,Gn,Gn,Hn]+"\\)$"),ti={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ni(){return this.rgb().formatHex()}function ii(){return this.rgb().formatRgb()}function ai(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Yn.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?ri(t):3===n?new ci(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?si(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?si(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Vn.exec(e))?new ci(t[1],t[2],t[3],1):(t=Jn.exec(e))?new ci(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Zn.exec(e))?si(t[1],t[2],t[3],t[4]):(t=Xn.exec(e))?si(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Qn.exec(e))?fi(t[1],t[2]/100,t[3]/100,1):(t=ei.exec(e))?fi(t[1],t[2]/100,t[3]/100,t[4]):ti.hasOwnProperty(e)?ri(ti[e]):"transparent"===e?new ci(NaN,NaN,NaN,0):null}function ri(e){return new ci(e>>16&255,e>>8&255,255&e,1)}function si(e,t,n,i){return i<=0&&(e=t=n=NaN),new ci(e,t,n,i)}function oi(e){return e instanceof qn||(e=ai(e)),e?new ci((e=e.rgb()).r,e.g,e.b,e.opacity):new ci}function li(e,t,n,i){return 1===arguments.length?oi(e):new ci(e,t,n,null==i?1:i)}function ci(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function ui(){return"#"+di(this.r)+di(this.g)+di(this.b)}function hi(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function di(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function fi(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new gi(e,t,n,i)}function pi(e){if(e instanceof gi)return new gi(e.h,e.s,e.l,e.opacity);if(e instanceof qn||(e=ai(e)),!e)return new gi;if(e instanceof gi)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),r=Math.max(t,n,i),s=NaN,o=r-a,l=(r+a)/2;return o?(s=t===r?(n-i)/o+6*(n<i):n===r?(i-t)/o+2:(t-n)/o+4,o/=l<.5?r+a:2-r-a,s*=60):o=l>0&&l<1?0:s,new gi(s,o,l,e.opacity)}function gi(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function mi(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Wn(qn,ai,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:ni,formatHex:ni,formatHsl:function(){return pi(this).formatHsl()},formatRgb:ii,toString:ii}),Wn(ci,li,On(qn,{brighter:function(e){return e=null==e?Bn:Math.pow(Bn,e),new ci(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Kn:Math.pow(Kn,e),new ci(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ui,formatHex:ui,formatRgb:hi,toString:hi})),Wn(gi,(function(e,t,n,i){return 1===arguments.length?pi(e):new gi(e,t,n,null==i?1:i)}),On(qn,{brighter:function(e){return e=null==e?Bn:Math.pow(Bn,e),new gi(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Kn:Math.pow(Kn,e),new gi(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,a=2*n-i;return new ci(mi(e>=240?e-240:e+120,a,i),mi(e,a,i),mi(e<120?e+240:e-120,a,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var yi=e=>()=>e;function vi(e){return 1==(e=+e)?xi:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):yi(isNaN(t)?n:t)}}function xi(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):yi(isNaN(e)?t:e)}var $i=function e(t){var n=vi(t);function i(e,t){var i=n((e=li(e)).r,(t=li(t)).r),a=n(e.g,t.g),r=n(e.b,t.b),s=xi(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=a(t),e.b=r(t),e.opacity=s(t),e+""}}return i.gamma=e,i}(1);function bi(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,a=t.slice();return function(r){for(n=0;n<i;++n)a[n]=e[n]*(1-r)+t[n]*r;return a}}function ki(e,t){var n,i=t?t.length:0,a=e?Math.min(i,e.length):0,r=new Array(a),s=new Array(i);for(n=0;n<a;++n)r[n]=Si(e[n],t[n]);for(;n<i;++n)s[n]=t[n];return function(e){for(n=0;n<a;++n)s[n]=r[n](e);return s}}function wi(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function _i(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Mi(e,t){var n,i={},a={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?i[n]=Si(e[n],t[n]):a[n]=t[n];return function(e){for(n in i)a[n]=i[n](e);return a}}var Ti=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ai=new RegExp(Ti.source,"g");function Ni(e,t){var n,i,a,r=Ti.lastIndex=Ai.lastIndex=0,s=-1,o=[],l=[];for(e+="",t+="";(n=Ti.exec(e))&&(i=Ai.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:_i(n,i)})),r=Ai.lastIndex;return r<t.length&&(a=t.slice(r),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,i=0;i<t;++i)o[(n=l[i]).i]=n.x(e);return o.join("")})}function Si(e,t){var n,i,a=typeof t;return null==t||"boolean"===a?yi(t):("number"===a?_i:"string"===a?(n=ai(t))?(t=n,$i):Ni:t instanceof ai?$i:t instanceof Date?wi:(i=t,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(t)?ki:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Mi:_i:bi))(e,t)}function Ci(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Ei(e){return+e}var Li=[0,1];function Ri(e){return e}function ji(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function zi(e,t,n){var i=e[0],a=e[1],r=t[0],s=t[1];return a<i?(i=ji(a,i),r=n(s,r)):(i=ji(i,a),r=n(r,s)),function(e){return r(i(e))}}function Di(e,t,n){var i=Math.min(e.length,t.length)-1,a=new Array(i),r=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)a[s]=ji(e[s],e[s+1]),r[s]=n(t[s],t[s+1]);return function(t){var n=jn(e,t,1,i)-1;return r[n](a[n](t))}}function Pi(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Fi(){var e,t,n,i,a,r,s=Li,o=Li,l=Si,c=Ri;function u(){var e,t,n,l=Math.min(s.length,o.length);return c!==Ri&&(e=s[0],t=s[l-1],e>t&&(n=e,e=t,t=n),c=function(n){return Math.max(e,Math.min(t,n))}),i=l>2?Di:zi,a=r=null,h}function h(t){return null==t||isNaN(t=+t)?n:(a||(a=i(s.map(e),o,l)))(e(c(t)))}return h.invert=function(n){return c(t((r||(r=i(o,s.map(e),_i)))(n)))},h.domain=function(e){return arguments.length?(s=Array.from(e,Ei),u()):s.slice()},h.range=function(e){return arguments.length?(o=Array.from(e),u()):o.slice()},h.rangeRound=function(e){return o=Array.from(e),l=Ci,u()},h.clamp=function(e){return arguments.length?(c=!!e||Ri,u()):c!==Ri},h.interpolate=function(e){return arguments.length?(l=e,u()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,i){return e=n,t=i,u()}}function Ii(){return Fi()(Ri,Ri)}function Wi(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Oi(e){return(e=Wi(Math.abs(e)))?e[1]:NaN}var qi,Ki=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Bi(e){if(!(t=Ki.exec(e)))throw new Error("invalid format: "+e);var t;return new Ui({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Ui(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Hi(e,t){var n=Wi(e,t);if(!n)return e+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}Bi.prototype=Ui.prototype,Ui.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Gi={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Hi(100*e,t),r:Hi,s:function(e,t){var n=Wi(e,t);if(!n)return e+"";var i=n[0],a=n[1],r=a-(qi=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,s=i.length;return r===s?i:r>s?i+new Array(r-s+1).join("0"):r>0?i.slice(0,r)+"."+i.slice(r):"0."+new Array(1-r).join("0")+Wi(e,Math.max(0,t+r-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Yi(e){return e}var Vi,Ji,Zi,Xi=Array.prototype.map,Qi=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ea(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?Yi:(t=Xi.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var a=e.length,r=[],s=0,o=t[0],l=0;a>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),r.push(e.substring(a-=o,a+o)),!((l+=o+1)>i));)o=t[s=(s+1)%t.length];return r.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",r=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?Yi:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Xi.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"−":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=Bi(e)).fill,n=e.align,h=e.sign,d=e.symbol,f=e.zero,p=e.width,g=e.comma,m=e.precision,y=e.trim,v=e.type;"n"===v?(g=!0,v="g"):Gi[v]||(void 0===m&&(m=12),y=!0,v="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var x="$"===d?a:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",$="$"===d?r:/[%p]/.test(v)?l:"",b=Gi[v],k=/[defgprs%]/.test(v);function w(e){var a,r,l,d=x,w=$;if("c"===v)w=b(e)+w,e="";else{var _=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:b(Math.abs(e),m),y&&(e=function(e){e:for(var t,n=e.length,i=1,a=-1;i<n;++i)switch(e[i]){case".":a=t=i;break;case"0":0===a&&(a=i),t=i;break;default:if(!+e[i])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),_&&0==+e&&"+"!==h&&(_=!1),d=(_?"("===h?h:c:"-"===h||"("===h?"":h)+d,w=("s"===v?Qi[8+qi/3]:"")+w+(_&&"("===h?")":""),k)for(a=-1,r=e.length;++a<r;)if(48>(l=e.charCodeAt(a))||l>57){w=(46===l?s+e.slice(a+1):e.slice(a))+w,e=e.slice(0,a);break}}g&&!f&&(e=i(e,1/0));var M=d.length+e.length+w.length,T=M<p?new Array(p-M+1).join(t):"";switch(g&&f&&(e=i(T+e,T.length?p-w.length:1/0),T=""),n){case"<":e=d+e+w+T;break;case"=":e=d+T+e+w;break;case"^":e=T.slice(0,M=T.length>>1)+d+e+w+T.slice(M);break;default:e=T+d+e+w}return o(e)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),w.toString=function(){return e+""},w}return{format:h,formatPrefix:function(e,t){var n=h(((e=Bi(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(Oi(t)/3))),a=Math.pow(10,-i),r=Qi[8+i/3];return function(e){return n(a*e)+r}}}}function ta(e,t,n,i){var a,r=function(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),r=i/a;return r>=zn?a*=10:r>=Dn?a*=5:r>=Pn&&(a*=2),t<e?-a:a}(e,t,n);switch((i=Bi(null==i?",f":i)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Oi(t)/3)))-Oi(Math.abs(e)))}(r,s))||(i.precision=a),Zi(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Oi(t)-Oi(e))+1}(r,Math.max(Math.abs(e),Math.abs(t))))||(i.precision=a-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(a=function(e){return Math.max(0,-Oi(Math.abs(e)))}(r))||(i.precision=a-2*("%"===i.type))}return Ji(i)}function na(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var i,a,r,s,o=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((i=t<e)&&(a=e,e=t,t=a),0===(s=Fn(e,t,n))||!isFinite(s))return[];if(s>0){let n=Math.round(e/s),i=Math.round(t/s);for(n*s<e&&++n,i*s>t&&--i,r=new Array(a=i-n+1);++o<a;)r[o]=(n+o)*s}else{s=-s;let n=Math.round(e*s),i=Math.round(t*s);for(n/s<e&&++n,i/s>t&&--i,r=new Array(a=i-n+1);++o<a;)r[o]=(n+o)/s}return i&&r.reverse(),r}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var i=t();return ta(i[0],i[i.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var i,a,r=t(),s=0,o=r.length-1,l=r[s],c=r[o],u=10;for(c<l&&(a=l,l=c,c=a,a=s,s=o,o=a);u-- >0;){if((a=Fn(l,c,n))===i)return r[s]=l,r[o]=c,t(r);if(a>0)l=Math.floor(l/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,c=Math.floor(c*a)/a}i=a}return e},e}function ia(){var e=Ii();return e.copy=function(){return Pi(e,ia())},In.apply(e,arguments),na(e)}function aa(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ra(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function sa(e){return e<0?-e*e:e*e}function oa(e){var t=e(Ri,Ri),n=1;function i(){return 1===n?e(Ri,Ri):.5===n?e(ra,sa):e(aa(n),aa(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,i()):n},na(t)}function la(){var e=oa(Fi());return e.copy=function(){return Pi(e,la()).exponent(e.exponent())},In.apply(e,arguments),e}Vi=ea({thousands:",",grouping:[3],currency:["$",""]}),Ji=Vi.format,Zi=Vi.formatPrefix;var ca={x:ia,y:ia,z:ia,r:function(){return la.apply(null,arguments).exponent(.5)}};function ua(e){return e}function ha(e){return t=>Math.log(e*t)}function da(e){return t=>e*Math.exp(t)}function fa(e){return t=>Math.sign(t)*Math.expm1(Math.abs(t))*e}function pa(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ga(e,t){if("function"!=typeof e.range)throw new Error("Scale method `range` must be a function");if("function"!=typeof e.domain)throw new Error("Scale method `domain` must be a function");if(!Array.isArray(t))return e.domain();2!==e.domain().length&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",e.domain()),2!==e.range().length&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",e.range());const{lift:n,ground:i}=function(e){const t=function(e){return e.constant?"symlog":e.base?"log":e.exponent?.5===e.exponent()?"sqrt":"pow":"other"}(e);if("log"===t){const n=Math.sign(e.domain()[0]);return{lift:ha(n),ground:da(n),scaleType:t}}if("pow"===t){const e=1;return{lift:pa(e),ground:pa(1/e),scaleType:t}}if("sqrt"===t){const e=.5;return{lift:pa(e),ground:pa(1/e),scaleType:t}}if("symlog"===t){const e=1;return{lift:(n=e,e=>Math.sign(e)*Math.log1p(Math.abs(e/n))),ground:fa(e),scaleType:t}}var n;return{lift:ua,ground:ua,scaleType:t}}(e),a=e.domain()[0],r="[object Date]"===Object.prototype.toString.call(a),[s,o]=e.domain().map((e=>n(r?e.getTime():e))),[l,c]=e.range(),u=t[0]||0,h=t[1]||0,d=(o-s)/(Math.abs(c-l)-u-h);return[s-u*d,h*d+o].map((e=>i(r?new Date(e):e)))}function ma(e){return function([t,n,i,a,r,s,o,l,c,u]){if(null===n)return null;const h=function(e,t,n,i,a,r){return a?"function"==typeof a?a({width:t,height:n}):a:function(e,t,n,i,a){let r,s;return!0===a?(r=0,s=100):(r="r"===e?1:0,s="y"===e?n:"r"===e?25:t),!0===i?[s,r]:[r,s]}(e,t,n,i,r)}(e,o,l,s,c,u),d=t===ca[e]?t():t.copy();return d.domain(Sn(n[e],i)).range(h),a&&d.domain(ga(d,a)),!0===r&&("function"==typeof d.nice?d.nice():console.error(`[Layer Cake] You set \`${e}Nice: true\` but the ${e}Scale does not have a \`.nice\` method. Ignoring...`)),d}}function ya([e,t]){return n=>{const i=e(n);return Array.isArray(i)?i.map((e=>t(e))):t(i)}}function va([e]){if("function"==typeof e){if("function"==typeof e.range)return e.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}var xa={x:!1,y:!0,z:!1,r:!1};const $a=e=>({element:4&e[0],width:64&e[0],height:128&e[0],aspectRatio:256&e[0],containerWidth:512&e[0],containerHeight:1024&e[0]}),ba=e=>({element:e[2],width:e[6],height:e[7],aspectRatio:e[8],containerWidth:e[9],containerHeight:e[10]});function ka(e){let t,n,i,a;const r=e[54].default,s=d(r,e,e[53],ba);return{c(){t=T("div"),s&&s.c(),L(t,"class","layercake-container svelte-vhzpsp"),L(t,"style",n="position:"+e[5]+"; "+("absolute"===e[5]?"top:0;right:0;bottom:0;left:0;":"")+" "+(!1===e[4]?"pointer-events:none;":"")),te((()=>e[56].call(t)))},m(n,r){w(n,t,r),s&&s.m(t,null),e[55](t),i=function(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const n=T("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const i=F();let a;return i?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",a=E(window,"message",(e=>{e.source===n.contentWindow&&t()}))):(n.src="about:blank",n.onload=()=>{a=E(n.contentWindow,"resize",t)}),k(e,n),()=>{(i||a&&n.contentWindow)&&a(),_(n)}}(t,e[56].bind(t)),a=!0},p(e,i){s&&s.p&&(!a||1988&i[0]|4194304&i[1])&&g(s,r,e,e[53],a?p(r,e[53],i,$a):m(e[53]),ba),(!a||48&i[0]&&n!==(n="position:"+e[5]+"; "+("absolute"===e[5]?"top:0;right:0;bottom:0;left:0;":"")+" "+(!1===e[4]?"pointer-events:none;":"")))&&L(t,"style",n)},i(e){a||(he(s,e),a=!0)},o(e){de(s,e),a=!1},d(n){n&&_(t),s&&s.d(n),e[55](null),i()}}}function wa(e){let t,n,i=(!0===e[3]||"undefined"!=typeof window)&&ka(e);return{c(){i&&i.c(),t=C()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,n){!0===e[3]||"undefined"!=typeof window?i?(i.p(e,n),8&n[0]&&he(i,1)):(i=ka(e),i.c(),he(i,1),i.m(t.parentNode,t)):i&&(ce(),de(i,1,1,(()=>{i=null})),ue())},i(e){n||(he(i),n=!0)},o(e){de(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function _a(e,t,n){let i,a,r,s,o,l,{$$slots:c={},$$scope:u}=t,{ssr:d=!1}=t,{pointerEvents:f=!0}=t,{position:p="relative"}=t,{percentRange:g=!1}=t,{width:m}=t,{height:y}=t,{containerWidth:v=m||100}=t,{containerHeight:x=y||100}=t,{element:$}=t,{x:b}=t,{y:k}=t,{z:w}=t,{r:_}=t,{custom:M={}}=t,{data:T=[]}=t,{xDomain:A}=t,{yDomain:N}=t,{zDomain:S}=t,{rDomain:C}=t,{xNice:E=!1}=t,{yNice:L=!1}=t,{zNice:R=!1}=t,{rNice:j=!1}=t,{xReverse:z=xa.x}=t,{yReverse:D=xa.y}=t,{zReverse:P=xa.z}=t,{rReverse:F=xa.r}=t,{xPadding:I}=t,{yPadding:W}=t,{zPadding:O}=t,{rPadding:q}=t,{xScale:K=ca.x}=t,{yScale:B=ca.y}=t,{zScale:U=ca.y}=t,{rScale:G=ca.r}=t,{xRange:Y}=t,{yRange:V}=t,{zRange:Z}=t,{rRange:X}=t,{padding:Q={}}=t,{extents:ee={}}=t,{flatData:te}=t;const ne={},ie=_n(),ae=_n();h(e,ae,(e=>n(9,o=e)));const re=_n();h(e,re,(e=>n(10,l=e)));const se=_n(),oe=_n(),le=_n(),ce=_n(),ue=_n(),he=_n(),de=_n(),fe=_n(),pe=_n(),ge=_n(),me=_n(),ye=_n(),ve=_n(),xe=_n(),$e=_n(),be=_n(),ke=_n(),we=_n(),_e=_n(),Me=_n(),Te=_n(),Ae=_n(),Ne=_n(),Se=_n(),Ce=_n(),Ee=_n(),Le=_n(),Re=_n(),je=_n(),ze=_n(),De=_n(),Pe=_n(),Fe=_n(),Ie=_n(ne),We=Mn([se,oe,le,ce],(([e,t,n,i])=>{const a={};return e&&(a.x=e),t&&(a.y=t),n&&(a.z=n),i&&(a.r=i),a})),Oe=Mn([De,ae,re],(([e])=>Object.assign({top:0,right:0,bottom:0,left:0},e))),qe=Mn([ae,re,Oe],(([e,t,n])=>{const i={};return i.top=n.top,i.right=e-n.right,i.bottom=t-n.bottom,i.left=n.left,i.width=i.right-i.left,i.height=i.bottom-i.top,i.width<=0&&console.error("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),i.height<=0&&console.error("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),i})),Ke=Mn([qe],(([e])=>e.width));h(e,Ke,(e=>n(6,a=e)));const Be=Mn([qe],(([e])=>e.height));h(e,Be,(e=>n(7,r=e)));const Ue=Mn([Pe,We,Fe],(([e,t,n])=>{const i=An(t,n);return Object.keys(i).length>0?{...Nn(e,i),...n}:{}})),He=Mn([Ue,de],Cn("x")),Ge=Mn([Ue,fe],Cn("y")),Ye=Mn([Ue,pe],Cn("z")),Ve=Mn([Ue,ge],Cn("r")),Je=Mn([Ne,Ue,He,_e,me,$e,Ke,Be,Le,ie],ma("x")),Ze=Mn([se,Je],ya),Xe=Mn([Se,Ue,Ge,Me,ye,be,Ke,Be,Re,ie],ma("y")),Qe=Mn([oe,Xe],ya),et=Mn([Ce,Ue,Ye,Te,ve,ke,Ke,Be,je,ie],ma("z")),tt=Mn([le,et],ya),nt=Mn([Ee,Ue,Ve,Ae,xe,we,Ke,Be,ze,ie],ma("r")),it=Mn([ce,nt],ya),at=Mn([Je],va),rt=Mn([Xe],va),st=Mn([et],va),ot=Mn([nt],va),lt=Mn([Ke,Be],(([e,t,n])=>t/n));return h(e,lt,(e=>n(8,s=e))),e.$$set=e=>{"ssr"in e&&n(3,d=e.ssr),"pointerEvents"in e&&n(4,f=e.pointerEvents),"position"in e&&n(5,p=e.position),"percentRange"in e&&n(16,g=e.percentRange),"width"in e&&n(17,m=e.width),"height"in e&&n(18,y=e.height),"containerWidth"in e&&n(0,v=e.containerWidth),"containerHeight"in e&&n(1,x=e.containerHeight),"element"in e&&n(2,$=e.element),"x"in e&&n(19,b=e.x),"y"in e&&n(20,k=e.y),"z"in e&&n(21,w=e.z),"r"in e&&n(22,_=e.r),"custom"in e&&n(23,M=e.custom),"data"in e&&n(24,T=e.data),"xDomain"in e&&n(25,A=e.xDomain),"yDomain"in e&&n(26,N=e.yDomain),"zDomain"in e&&n(27,S=e.zDomain),"rDomain"in e&&n(28,C=e.rDomain),"xNice"in e&&n(29,E=e.xNice),"yNice"in e&&n(30,L=e.yNice),"zNice"in e&&n(31,R=e.zNice),"rNice"in e&&n(32,j=e.rNice),"xReverse"in e&&n(33,z=e.xReverse),"yReverse"in e&&n(34,D=e.yReverse),"zReverse"in e&&n(35,P=e.zReverse),"rReverse"in e&&n(36,F=e.rReverse),"xPadding"in e&&n(37,I=e.xPadding),"yPadding"in e&&n(38,W=e.yPadding),"zPadding"in e&&n(39,O=e.zPadding),"rPadding"in e&&n(40,q=e.rPadding),"xScale"in e&&n(41,K=e.xScale),"yScale"in e&&n(42,B=e.yScale),"zScale"in e&&n(43,U=e.zScale),"rScale"in e&&n(44,G=e.rScale),"xRange"in e&&n(45,Y=e.xRange),"yRange"in e&&n(46,V=e.yRange),"zRange"in e&&n(47,Z=e.zRange),"rRange"in e&&n(48,X=e.rRange),"padding"in e&&n(49,Q=e.padding),"extents"in e&&n(50,ee=e.extents),"flatData"in e&&n(51,te=e.flatData),"$$scope"in e&&n(53,u=e.$$scope)},e.$$.update=()=>{524288&e.$$.dirty[0]&&b&&(ne.x=b),1048576&e.$$.dirty[0]&&k&&(ne.y=k),2097152&e.$$.dirty[0]&&w&&(ne.z=w),4194304&e.$$.dirty[0]&&_&&(ne.r=_),33554432&e.$$.dirty[0]&&A&&(ne.xDomain=A),67108864&e.$$.dirty[0]&&N&&(ne.yDomain=N),134217728&e.$$.dirty[0]&&S&&(ne.zDomain=S),268435456&e.$$.dirty[0]&&C&&(ne.rDomain=C),16384&e.$$.dirty[1]&&Y&&(ne.xRange=Y),32768&e.$$.dirty[1]&&V&&(ne.yRange=V),65536&e.$$.dirty[1]&&Z&&(ne.zRange=Z),131072&e.$$.dirty[1]&&X&&(ne.rRange=X),65536&e.$$.dirty[0]&&ie.set(g),1&e.$$.dirty[0]&&ae.set(v),2&e.$$.dirty[0]&&re.set(x),524288&e.$$.dirty[0]&&se.set(Tn(b)),1048576&e.$$.dirty[0]&&oe.set(Tn(k)),2097152&e.$$.dirty[0]&&le.set(Tn(w)),4194304&e.$$.dirty[0]&&ce.set(Tn(_)),33554432&e.$$.dirty[0]&&de.set(A),67108864&e.$$.dirty[0]&&fe.set(N),134217728&e.$$.dirty[0]&&pe.set(S),268435456&e.$$.dirty[0]&&ge.set(C),8388608&e.$$.dirty[0]&&ue.set(M),16777216&e.$$.dirty[0]&&he.set(T),536870912&e.$$.dirty[0]&&me.set(E),1073741824&e.$$.dirty[0]&&ye.set(L),1&e.$$.dirty[1]&&ve.set(R),2&e.$$.dirty[1]&&xe.set(j),4&e.$$.dirty[1]&&$e.set(z),8&e.$$.dirty[1]&&be.set(D),16&e.$$.dirty[1]&&ke.set(P),32&e.$$.dirty[1]&&we.set(F),64&e.$$.dirty[1]&&_e.set(I),128&e.$$.dirty[1]&&Me.set(W),256&e.$$.dirty[1]&&Te.set(O),512&e.$$.dirty[1]&&Ae.set(q),1024&e.$$.dirty[1]&&Ne.set(K),2048&e.$$.dirty[1]&&Se.set(B),4096&e.$$.dirty[1]&&Ce.set(U),8192&e.$$.dirty[1]&&Ee.set(G),16384&e.$$.dirty[1]&&Le.set(Y),32768&e.$$.dirty[1]&&Re.set(V),65536&e.$$.dirty[1]&&je.set(Z),131072&e.$$.dirty[1]&&ze.set(X),262144&e.$$.dirty[1]&&De.set(Q),524288&e.$$.dirty[1]&&Fe.set(An(ee)),16777216&e.$$.dirty[0]|1048576&e.$$.dirty[1]&&Pe.set(te||T),2097152&e.$$.dirty[1]&&H("LayerCake",i)},n(52,i={activeGetters:We,width:Ke,height:Be,percentRange:ie,aspectRatio:lt,containerWidth:ae,containerHeight:re,x:se,y:oe,z:le,r:ce,custom:ue,data:he,xNice:me,yNice:ye,zNice:ve,rNice:xe,xReverse:$e,yReverse:be,zReverse:ke,rReverse:we,xPadding:_e,yPadding:Me,zPadding:Te,rPadding:Ae,padding:Oe,flatData:Pe,extents:Ue,xDomain:He,yDomain:Ge,zDomain:Ye,rDomain:Ve,xRange:at,yRange:rt,zRange:st,rRange:ot,config:Ie,xScale:Je,xGet:Ze,yScale:Xe,yGet:Qe,zScale:et,zGet:tt,rScale:nt,rGet:it}),[v,x,$,d,f,p,a,r,s,o,l,ae,re,Ke,Be,lt,g,m,y,b,k,w,_,M,T,A,N,S,C,E,L,R,j,z,D,P,F,I,W,O,q,K,B,U,G,Y,V,Z,X,Q,ee,te,i,u,c,function(e){J[e?"unshift":"push"]((()=>{$=e,n(2,$)}))},function(){v=this.clientWidth,x=this.clientHeight,n(0,v),n(1,x)}]}class Ma extends _e{constructor(e){super(),we(this,e,_a,wa,o,{ssr:3,pointerEvents:4,position:5,percentRange:16,width:17,height:18,containerWidth:0,containerHeight:1,element:2,x:19,y:20,z:21,r:22,custom:23,data:24,xDomain:25,yDomain:26,zDomain:27,rDomain:28,xNice:29,yNice:30,zNice:31,rNice:32,xReverse:33,yReverse:34,zReverse:35,rReverse:36,xPadding:37,yPadding:38,zPadding:39,rPadding:40,xScale:41,yScale:42,zScale:43,rScale:44,xRange:45,yRange:46,zRange:47,rRange:48,padding:49,extents:50,flatData:51},null,[-1,-1,-1,-1])}}const Ta=e=>({element:1&e}),Aa=e=>({element:e[0]});function Na(e){let t,n,i;const a=e[8].default,r=d(a,e,e[7],Aa);return{c(){t=T("div"),r&&r.c(),L(t,"class","layercake-layout-html svelte-1bu60uu"),L(t,"style",n="top: "+e[3].top+"px; right:"+e[3].right+"px; bottom:"+e[3].bottom+"px; left:"+e[3].left+"px;"+e[1]+e[2])},m(n,a){w(n,t,a),r&&r.m(t,null),e[9](t),i=!0},p(e,[s]){r&&r.p&&(!i||129&s)&&g(r,a,e,e[7],i?p(a,e[7],s,Ta):m(e[7]),Aa),(!i||14&s&&n!==(n="top: "+e[3].top+"px; right:"+e[3].right+"px; bottom:"+e[3].bottom+"px; left:"+e[3].left+"px;"+e[1]+e[2]))&&L(t,"style",n)},i(e){i||(he(r,e),i=!0)},o(e){de(r,e),i=!1},d(n){n&&_(t),r&&r.d(n),e[9](null)}}}function Sa(e,t,n){let i,{$$slots:a={},$$scope:r}=t,{element:s}=t,{zIndex:o}=t,{pointerEvents:l}=t,c="",u="";const{padding:d}=G("LayerCake");return h(e,d,(e=>n(3,i=e))),e.$$set=e=>{"element"in e&&n(0,s=e.element),"zIndex"in e&&n(5,o=e.zIndex),"pointerEvents"in e&&n(6,l=e.pointerEvents),"$$scope"in e&&n(7,r=e.$$scope)},e.$$.update=()=>{32&e.$$.dirty&&n(1,c=void 0!==o?`z-index:${o};`:""),64&e.$$.dirty&&n(2,u=!1===l?"pointer-events:none;":"")},[s,c,u,i,d,o,l,r,a,function(e){J[e?"unshift":"push"]((()=>{s=e,n(0,s)}))}]}class Ca extends _e{constructor(e){super(),we(this,e,Sa,Na,o,{element:0,zIndex:5,pointerEvents:6})}}const Ea=e=>({element:1&e}),La=e=>({element:e[0]}),Ra=e=>({element:1&e}),ja=e=>({element:e[0]});function za(e){let t,n,i,a,r,s;const o=e[13].defs,l=d(o,e,e[12],ja),c=e[13].default,u=d(c,e,e[12],La);return{c(){t=A("svg"),n=A("defs"),l&&l.c(),i=A("g"),u&&u.c(),L(i,"class","layercake-layout-svg_g"),L(i,"transform",a="translate("+e[6].left+", "+e[6].top+")"),L(t,"class","layercake-layout-svg svelte-u84d8d"),L(t,"viewBox",e[1]),L(t,"width",e[4]),L(t,"height",e[5]),L(t,"style",r=""+(e[2]+e[3]))},m(a,r){w(a,t,r),k(t,n),l&&l.m(n,null),k(t,i),u&&u.m(i,null),e[14](t),s=!0},p(e,[n]){l&&l.p&&(!s||4097&n)&&g(l,o,e,e[12],s?p(o,e[12],n,Ra):m(e[12]),ja),u&&u.p&&(!s||4097&n)&&g(u,c,e,e[12],s?p(c,e[12],n,Ea):m(e[12]),La),(!s||64&n&&a!==(a="translate("+e[6].left+", "+e[6].top+")"))&&L(i,"transform",a),(!s||2&n)&&L(t,"viewBox",e[1]),(!s||16&n)&&L(t,"width",e[4]),(!s||32&n)&&L(t,"height",e[5]),(!s||12&n&&r!==(r=""+(e[2]+e[3])))&&L(t,"style",r)},i(e){s||(he(l,e),he(u,e),s=!0)},o(e){de(l,e),de(u,e),s=!1},d(n){n&&_(t),l&&l.d(n),u&&u.d(n),e[14](null)}}}function Da(e,t,n){let i,a,r,{$$slots:s={},$$scope:o}=t,{element:l}=t,{viewBox:c}=t,{zIndex:u}=t,{pointerEvents:d}=t,f="",p="";const{containerWidth:g,containerHeight:m,padding:y}=G("LayerCake");return h(e,g,(e=>n(4,i=e))),h(e,m,(e=>n(5,a=e))),h(e,y,(e=>n(6,r=e))),e.$$set=e=>{"element"in e&&n(0,l=e.element),"viewBox"in e&&n(1,c=e.viewBox),"zIndex"in e&&n(10,u=e.zIndex),"pointerEvents"in e&&n(11,d=e.pointerEvents),"$$scope"in e&&n(12,o=e.$$scope)},e.$$.update=()=>{1024&e.$$.dirty&&n(2,f=void 0!==u?`z-index:${u};`:""),2048&e.$$.dirty&&n(3,p=!1===d?"pointer-events:none;":"")},[l,c,f,p,i,a,r,g,m,y,u,d,o,s,function(e){J[e?"unshift":"push"]((()=>{l=e,n(0,l)}))}]}class Pa extends _e{constructor(e){super(),we(this,e,Da,za,o,{element:0,viewBox:1,zIndex:10,pointerEvents:11})}}function Fa(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ia(e){let t=e,n=e,i=e;function a(e,t,a=0,r=e.length){if(a<r){if(0!==n(t,t))return r;do{const n=a+r>>>1;i(e[n],t)<0?a=n+1:r=n}while(a<r)}return a}return 2!==e.length&&(t=(t,n)=>e(t)-n,n=Fa,i=(t,n)=>Fa(e(t),n)),{left:a,center:function(e,n,i=0,r=e.length){const s=a(e,n,i,r-1);return s>i&&t(e[s-1],n)>-t(e[s],n)?s-1:s},right:function(e,t,a=0,r=e.length){if(a<r){if(0!==n(t,t))return r;do{const n=a+r>>>1;i(e[n],t)<=0?a=n+1:r=n}while(a<r)}return a}}}const Wa=Ia(Fa).right;Ia((function(e){return null===e?NaN:+e})).center;var Oa=Wa;class qa extends Map{constructor(e,t=Ba){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[t,n]of e)this.set(t,n)}get(e){return super.get(Ka(this,e))}has(e){return super.has(Ka(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){const i=t(n);e.has(i)&&(n=e.get(i),e.delete(i));return n}(this,e))}}function Ka({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function Ba(e){return null!==e&&"object"==typeof e?e.valueOf():e}var Ua=Math.sqrt(50),Ha=Math.sqrt(10),Ga=Math.sqrt(2);function Ya(e,t,n){var i=(t-e)/Math.max(0,n),a=Math.floor(Math.log(i)/Math.LN10),r=i/Math.pow(10,a);return a>=0?(r>=Ua?10:r>=Ha?5:r>=Ga?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(r>=Ua?10:r>=Ha?5:r>=Ga?2:1)}function Va(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var i=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),r=new Array(a);++i<a;)r[i]=e+i*n;return r}function Ja(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}const Za=Symbol("implicit");function Xa(){var e=new qa,t=[],n=[],i=Za;function a(a){let r=e.get(a);if(void 0===r){if(i!==Za)return i;e.set(a,r=t.push(a)-1)}return n[r%n.length]}return a.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new qa;for(const i of n)e.has(i)||e.set(i,t.push(i)-1);return a},a.range=function(e){return arguments.length?(n=Array.from(e),a):n.slice()},a.unknown=function(e){return arguments.length?(i=e,a):i},a.copy=function(){return Xa(t,n).unknown(i)},Ja.apply(a,arguments),a}function Qa(){var e,t,n=Xa().unknown(void 0),i=n.domain,a=n.range,r=0,s=1,o=!1,l=0,c=0,u=.5;function h(){var n=i().length,h=s<r,d=h?s:r,f=h?r:s;e=(f-d)/Math.max(1,n-l+2*c),o&&(e=Math.floor(e)),d+=(f-d-e*(n-l))*u,t=e*(1-l),o&&(d=Math.round(d),t=Math.round(t));var p=Va(n).map((function(t){return d+e*t}));return a(h?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(i(e),h()):i()},n.range=function(e){return arguments.length?([r,s]=e,r=+r,s=+s,h()):[r,s]},n.rangeRound=function(e){return[r,s]=e,r=+r,s=+s,o=!0,h()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,h()):o},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),h()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),h()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,h()):c},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),h()):u},n.copy=function(){return Qa(i(),[r,s]).round(o).paddingInner(l).paddingOuter(c).align(u)},Ja.apply(h(),arguments)}function er(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function tr(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function nr(){}var ir=.7,ar=1/ir,rr="\\s*([+-]?\\d+)\\s*",sr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",or="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lr=/^#([0-9a-f]{3,8})$/,cr=new RegExp("^rgb\\("+[rr,rr,rr]+"\\)$"),ur=new RegExp("^rgb\\("+[or,or,or]+"\\)$"),hr=new RegExp("^rgba\\("+[rr,rr,rr,sr]+"\\)$"),dr=new RegExp("^rgba\\("+[or,or,or,sr]+"\\)$"),fr=new RegExp("^hsl\\("+[sr,or,or]+"\\)$"),pr=new RegExp("^hsla\\("+[sr,or,or,sr]+"\\)$"),gr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function mr(){return this.rgb().formatHex()}function yr(){return this.rgb().formatRgb()}function vr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=lr.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?xr(t):3===n?new wr(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?$r(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?$r(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=cr.exec(e))?new wr(t[1],t[2],t[3],1):(t=ur.exec(e))?new wr(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=hr.exec(e))?$r(t[1],t[2],t[3],t[4]):(t=dr.exec(e))?$r(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=fr.exec(e))?Ar(t[1],t[2]/100,t[3]/100,1):(t=pr.exec(e))?Ar(t[1],t[2]/100,t[3]/100,t[4]):gr.hasOwnProperty(e)?xr(gr[e]):"transparent"===e?new wr(NaN,NaN,NaN,0):null}function xr(e){return new wr(e>>16&255,e>>8&255,255&e,1)}function $r(e,t,n,i){return i<=0&&(e=t=n=NaN),new wr(e,t,n,i)}function br(e){return e instanceof nr||(e=vr(e)),e?new wr((e=e.rgb()).r,e.g,e.b,e.opacity):new wr}function kr(e,t,n,i){return 1===arguments.length?br(e):new wr(e,t,n,null==i?1:i)}function wr(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function _r(){return"#"+Tr(this.r)+Tr(this.g)+Tr(this.b)}function Mr(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Tr(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Ar(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Sr(e,t,n,i)}function Nr(e){if(e instanceof Sr)return new Sr(e.h,e.s,e.l,e.opacity);if(e instanceof nr||(e=vr(e)),!e)return new Sr;if(e instanceof Sr)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),r=Math.max(t,n,i),s=NaN,o=r-a,l=(r+a)/2;return o?(s=t===r?(n-i)/o+6*(n<i):n===r?(i-t)/o+2:(t-n)/o+4,o/=l<.5?r+a:2-r-a,s*=60):o=l>0&&l<1?0:s,new Sr(s,o,l,e.opacity)}function Sr(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function Cr(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}er(nr,vr,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:mr,formatHex:mr,formatHsl:function(){return Nr(this).formatHsl()},formatRgb:yr,toString:yr}),er(wr,kr,tr(nr,{brighter:function(e){return e=null==e?ar:Math.pow(ar,e),new wr(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?ir:Math.pow(ir,e),new wr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_r,formatHex:_r,formatRgb:Mr,toString:Mr})),er(Sr,(function(e,t,n,i){return 1===arguments.length?Nr(e):new Sr(e,t,n,null==i?1:i)}),tr(nr,{brighter:function(e){return e=null==e?ar:Math.pow(ar,e),new Sr(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?ir:Math.pow(ir,e),new Sr(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,a=2*n-i;return new wr(Cr(e>=240?e-240:e+120,a,i),Cr(e,a,i),Cr(e<120?e+240:e-120,a,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Er=e=>()=>e;function Lr(e){return 1==(e=+e)?Rr:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):Er(isNaN(t)?n:t)}}function Rr(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Er(isNaN(e)?t:e)}var jr=function e(t){var n=Lr(t);function i(e,t){var i=n((e=kr(e)).r,(t=kr(t)).r),a=n(e.g,t.g),r=n(e.b,t.b),s=Rr(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=a(t),e.b=r(t),e.opacity=s(t),e+""}}return i.gamma=e,i}(1);function zr(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,a=t.slice();return function(r){for(n=0;n<i;++n)a[n]=e[n]*(1-r)+t[n]*r;return a}}function Dr(e,t){var n,i=t?t.length:0,a=e?Math.min(i,e.length):0,r=new Array(a),s=new Array(i);for(n=0;n<a;++n)r[n]=Kr(e[n],t[n]);for(;n<i;++n)s[n]=t[n];return function(e){for(n=0;n<a;++n)s[n]=r[n](e);return s}}function Pr(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Fr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ir(e,t){var n,i={},a={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?i[n]=Kr(e[n],t[n]):a[n]=t[n];return function(e){for(n in i)a[n]=i[n](e);return a}}var Wr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Or=new RegExp(Wr.source,"g");function qr(e,t){var n,i,a,r=Wr.lastIndex=Or.lastIndex=0,s=-1,o=[],l=[];for(e+="",t+="";(n=Wr.exec(e))&&(i=Or.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:Fr(n,i)})),r=Or.lastIndex;return r<t.length&&(a=t.slice(r),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,i=0;i<t;++i)o[(n=l[i]).i]=n.x(e);return o.join("")})}function Kr(e,t){var n,i,a=typeof t;return null==t||"boolean"===a?Er(t):("number"===a?Fr:"string"===a?(n=vr(t))?(t=n,jr):qr:t instanceof vr?jr:t instanceof Date?Pr:(i=t,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(t)?Dr:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Ir:Fr:zr))(e,t)}function Br(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Ur(e){return+e}var Hr=[0,1];function Gr(e){return e}function Yr(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function Vr(e,t,n){var i=e[0],a=e[1],r=t[0],s=t[1];return a<i?(i=Yr(a,i),r=n(s,r)):(i=Yr(i,a),r=n(r,s)),function(e){return r(i(e))}}function Jr(e,t,n){var i=Math.min(e.length,t.length)-1,a=new Array(i),r=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)a[s]=Yr(e[s],e[s+1]),r[s]=n(t[s],t[s+1]);return function(t){var n=Oa(e,t,1,i)-1;return r[n](a[n](t))}}function Zr(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Xr(){var e,t,n,i,a,r,s=Hr,o=Hr,l=Kr,c=Gr;function u(){var e,t,n,l=Math.min(s.length,o.length);return c!==Gr&&(e=s[0],t=s[l-1],e>t&&(n=e,e=t,t=n),c=function(n){return Math.max(e,Math.min(t,n))}),i=l>2?Jr:Vr,a=r=null,h}function h(t){return null==t||isNaN(t=+t)?n:(a||(a=i(s.map(e),o,l)))(e(c(t)))}return h.invert=function(n){return c(t((r||(r=i(o,s.map(e),Fr)))(n)))},h.domain=function(e){return arguments.length?(s=Array.from(e,Ur),u()):s.slice()},h.range=function(e){return arguments.length?(o=Array.from(e),u()):o.slice()},h.rangeRound=function(e){return o=Array.from(e),l=Br,u()},h.clamp=function(e){return arguments.length?(c=!!e||Gr,u()):c!==Gr},h.interpolate=function(e){return arguments.length?(l=e,u()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,i){return e=n,t=i,u()}}function Qr(){return Xr()(Gr,Gr)}function es(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function ts(e){return(e=es(Math.abs(e)))?e[1]:NaN}var ns,is=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function as(e){if(!(t=is.exec(e)))throw new Error("invalid format: "+e);var t;return new rs({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function rs(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function ss(e,t){var n=es(e,t);if(!n)return e+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}as.prototype=rs.prototype,rs.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var os={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ss(100*e,t),r:ss,s:function(e,t){var n=es(e,t);if(!n)return e+"";var i=n[0],a=n[1],r=a-(ns=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,s=i.length;return r===s?i:r>s?i+new Array(r-s+1).join("0"):r>0?i.slice(0,r)+"."+i.slice(r):"0."+new Array(1-r).join("0")+es(e,Math.max(0,t+r-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ls(e){return e}var cs,us,hs,ds=Array.prototype.map,fs=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ps(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?ls:(t=ds.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var a=e.length,r=[],s=0,o=t[0],l=0;a>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),r.push(e.substring(a-=o,a+o)),!((l+=o+1)>i));)o=t[s=(s+1)%t.length];return r.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",r=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?ls:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(ds.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"−":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=as(e)).fill,n=e.align,h=e.sign,d=e.symbol,f=e.zero,p=e.width,g=e.comma,m=e.precision,y=e.trim,v=e.type;"n"===v?(g=!0,v="g"):os[v]||(void 0===m&&(m=12),y=!0,v="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var x="$"===d?a:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",$="$"===d?r:/[%p]/.test(v)?l:"",b=os[v],k=/[defgprs%]/.test(v);function w(e){var a,r,l,d=x,w=$;if("c"===v)w=b(e)+w,e="";else{var _=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:b(Math.abs(e),m),y&&(e=function(e){e:for(var t,n=e.length,i=1,a=-1;i<n;++i)switch(e[i]){case".":a=t=i;break;case"0":0===a&&(a=i),t=i;break;default:if(!+e[i])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),_&&0==+e&&"+"!==h&&(_=!1),d=(_?"("===h?h:c:"-"===h||"("===h?"":h)+d,w=("s"===v?fs[8+ns/3]:"")+w+(_&&"("===h?")":""),k)for(a=-1,r=e.length;++a<r;)if(48>(l=e.charCodeAt(a))||l>57){w=(46===l?s+e.slice(a+1):e.slice(a))+w,e=e.slice(0,a);break}}g&&!f&&(e=i(e,1/0));var M=d.length+e.length+w.length,T=M<p?new Array(p-M+1).join(t):"";switch(g&&f&&(e=i(T+e,T.length?p-w.length:1/0),T=""),n){case"<":e=d+e+w+T;break;case"=":e=d+T+e+w;break;case"^":e=T.slice(0,M=T.length>>1)+d+e+w+T.slice(M);break;default:e=T+d+e+w}return o(e)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),w.toString=function(){return e+""},w}return{format:h,formatPrefix:function(e,t){var n=h(((e=as(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(ts(t)/3))),a=Math.pow(10,-i),r=fs[8+i/3];return function(e){return n(a*e)+r}}}}function gs(e,t,n,i){var a,r=function(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),r=i/a;return r>=Ua?a*=10:r>=Ha?a*=5:r>=Ga&&(a*=2),t<e?-a:a}(e,t,n);switch((i=as(null==i?",f":i)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ts(t)/3)))-ts(Math.abs(e)))}(r,s))||(i.precision=a),hs(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ts(t)-ts(e))+1}(r,Math.max(Math.abs(e),Math.abs(t))))||(i.precision=a-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(a=function(e){return Math.max(0,-ts(Math.abs(e)))}(r))||(i.precision=a-2*("%"===i.type))}return us(i)}function ms(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var i,a,r,s,o=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((i=t<e)&&(a=e,e=t,t=a),0===(s=Ya(e,t,n))||!isFinite(s))return[];if(s>0){let n=Math.round(e/s),i=Math.round(t/s);for(n*s<e&&++n,i*s>t&&--i,r=new Array(a=i-n+1);++o<a;)r[o]=(n+o)*s}else{s=-s;let n=Math.round(e*s),i=Math.round(t*s);for(n/s<e&&++n,i/s>t&&--i,r=new Array(a=i-n+1);++o<a;)r[o]=(n+o)/s}return i&&r.reverse(),r}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var i=t();return gs(i[0],i[i.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var i,a,r=t(),s=0,o=r.length-1,l=r[s],c=r[o],u=10;for(c<l&&(a=l,l=c,c=a,a=s,s=o,o=a);u-- >0;){if((a=Ya(l,c,n))===i)return r[s]=l,r[o]=c,t(r);if(a>0)l=Math.floor(l/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,c=Math.floor(c*a)/a}i=a}return e},e}function ys(){var e=Qr();return e.copy=function(){return Zr(e,ys())},Ja.apply(e,arguments),ms(e)}function vs(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function xs(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function $s(e){var t=1,n=e(vs(t),xs(t));return n.constant=function(n){return arguments.length?e(vs(t=+n),xs(t)):t},ms(n)}function bs(){var e=$s(Xr());return e.copy=function(){return Zr(e,bs()).constant(e.constant())},Ja.apply(e,arguments)}function ks(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function ws(e){return"[object Date]"===Object.prototype.toString.call(e)}function _s(e,t){if(e===t||e!=e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const n=t.map(((t,n)=>_s(e[n],t)));return e=>n.map((t=>t(e)))}if("object"===n){if(!e||!t)throw new Error("Object cannot be null");if(ws(e)&&ws(t)){e=e.getTime();const n=(t=t.getTime())-e;return t=>new Date(e+t*n)}const n=Object.keys(t),i={};return n.forEach((n=>{i[n]=_s(e[n],t[n])})),e=>{const t={};return n.forEach((n=>{t[n]=i[n](e)})),t}}if("number"===n){const n=t-e;return t=>e+t*n}throw new Error(`Cannot interpolate ${n} values`)}function Ms(e,i={}){const a=_n(e);let r,s=e;function o(o,l){if(null==e)return a.set(e=o),Promise.resolve();s=o;let c=r,u=!1,{delay:h=0,duration:d=400,easing:f=t,interpolate:p=_s}=n(n({},i),l);if(0===d)return c&&(c.abort(),c=null),a.set(e=s),Promise.resolve();const g=v()+h;let m;return r=function(e){let t;return 0===$.size&&x(b),{promise:new Promise((n=>{$.add(t={c:e,f:n})})),abort(){$.delete(t)}}}((t=>{if(t<g)return!0;u||(m=p(e,o),"function"==typeof d&&(d=d(e,o)),u=!0),c&&(c.abort(),c=null);const n=t-g;return n>d?(a.set(e=o),!1):(a.set(e=m(f(n/d))),!0)})),r.promise}return{set:o,update:(t,n)=>o(t(s,e),n),subscribe:a.subscribe}}!function(e){cs=ps(e),us=cs.format,hs=cs.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});class Ts{constructor(e,t,n,i,a){this.items=e,this.radiusFun=t,this.xFun=n,this.padding=i,this.yOffset=a,this.tieBreakFn=this._sfc32(2654435769,608135816,3084996962,1),this.maxR=Math.max(...e.map((e=>t(e)))),this.rng=this._sfc32(1,2,3,1)}calculateYPositions(){let e=this.items.map(((e,t)=>({datum:e,originalIndex:t,x:this.xFun(e),r:this.radiusFun(e)+this.padding,y:null,placed:!1}))).sort(((e,t)=>e.x-t.x));e.forEach((function(e,t){e.index=t}));let t=this.tieBreakFn;e.forEach((function(e){e.tieBreaker=t(e.x)}));let n=[...e].sort(((e,t)=>{let n=this.radiusFun(e.datum)+5*e.tieBreaker,i=this.radiusFun(t.datum)+5*t.tieBreaker;return n!=i?i-n:e.x-t.x}));for(let t of n)t.placed=!0,t.y=this._getBestYPosition(t,e);return e.sort(((e,t)=>e.originalIndex-t.originalIndex)),e.map((e=>({x:e.x,y:e.y+this.yOffset,r:this.radiusFun(e.datum)})))}_sfc32(e,t,n,i){let a=function(){var a=(e>>>=0)+(t>>>=0)|0;return e=t^t>>>9,t=(n>>>=0)+(n<<3)|0,n=(n=n<<21|n>>>11)+(a=a+(i=(i>>>=0)+1|0)|0)|0,(a>>>0)/4294967296};for(let e=0;e<10;e++)a();return a}_getBestYPosition(e,t){let n=[];for(let i of[-1,1]){let a,r=e.r;for(let s=e.index+i;s>=0&&s<t.length&&(a=Math.abs(e.x-t[s].x))<r+this.maxR;s+=i){let e=t[s];if(!e.placed)continue;let i=r+e.r;if(a>=r+e.r)continue;let o=Math.sqrt(i*i-a*a),l=[e.y-o,e.y+o];n.push(l)}}if(0==n.length)return e.r*(this.rng()-.5)*2;let i=n.flat();i.push(0),i.sort(((e,t)=>{let n=Math.abs(e),i=Math.abs(t);return n<i?-1:n>i?1:e-t}));for(let e=0;e<i.length;e++){let t=i[e];if(n.every((e=>t<=e[0]||t>=e[1])))return t}}}function As(e,t,n){let i,a,r,s,o,l,c,u,d,f,p,g,m;const{data:y,x:v,y:x,r:$,xGet:b,yGet:k,rGet:w,xScale:_,yScale:M,yRange:T,rRange:A,custom:N,width:S}=G("LayerCake");h(e,y,(e=>n(18,m=e))),h(e,v,(e=>n(16,p=e))),h(e,x,(e=>n(15,f=e))),h(e,$,(e=>n(14,d=e))),h(e,b,(e=>n(23,s=e))),h(e,k,(e=>n(26,c=e))),h(e,w,(e=>n(25,l=e))),h(e,_,(e=>n(21,a=e))),h(e,M,(e=>n(20,i=e))),h(e,T,(e=>n(22,r=e))),h(e,A,(e=>n(24,o=e))),h(e,N,(e=>n(17,g=e))),h(e,S,(e=>n(13,u=e)));let C=g.coords,E=g.type,L=u;return e.$$.update=()=>{516096&e.$$.dirty&&function(e,t,n,u,h,d){let f,p=t.mode,g=t.padding,m=t.animation&&d==L?t.duration:0;if(L=d,"bar"==E)f=e.map(((t,a)=>t.map(((t,r)=>({x:"default"==p||"grouped"==p||("comparison"==p||"stacked"==p)&&0==a?0:n("stacked"==p?e[a-1][r]:t),y:"grouped"==p?c(t)+a*(1/e.length)*i.bandwidth():c(t),w:"default"==p||"grouped"==p||("comparison"==p||"stacked"==p)&&0==a?n(t):"stacked"==p?n(t)-n(e[a-1][r]):0,h:"grouped"==p?i.bandwidth()/e.length:i.bandwidth()})))));else if("column"==E)f=e.map(((t,n)=>t.map(((t,i)=>({x:"grouped"==p&&a.bandwidth?s(t)+n*(1/e.length)*a.bandwidth():"grouped"==p?s(t)[0]+n*(1/e.length)*Math.max(0,s(t)[1]-s(t)[0]):a.bandwidth?s(t):s(t)[0],y:u(t),w:"grouped"==p&&a.bandwidth?a.bandwidth()/e.length:"grouped"==p?Math.max(0,s(t)[1]-s(t)[0])/e.length:a.bandwidth?a.bandwidth():Math.max(0,s(t)[1]-s(t)[0]),h:"default"==p||"grouped"==p||("comparison"==p||"stacked"==p)&&0==n?u(t):"stacked"==p?u(t)-u(e[n-1][i]):0})))));else if("scatter"==E){let t=e=>h?l(e):o[0];f=u?e.map((e=>({x:n(e),y:u(e),r:t(e)}))):new Ts(e,(e=>t(e)),(e=>s(e)),g,r[0]/2).calculateYPositions().map((e=>({x:a.invert(e.x),y:i.invert(e.y),r:e.r})))}else"line"==E&&(f=e.map((e=>e.map((e=>({x:n(e),y:u(e)}))))));C.set(f,{duration:m})}(m,g,p,f,d,u)},[y,v,x,$,b,k,w,_,M,T,A,N,S,u,d,f,p,g,m]}class Ns extends _e{constructor(e){super(),we(this,e,As,null,o,{})}}function Ss(e,t,n){const i=e.slice();return i[24]=t[n],i[26]=n,i}function Cs(e){let t,n;return{c(){t=A("line"),L(t,"class","gridline svelte-r9f2bw"),L(t,"y1",n=-1*e[17]),L(t,"y2","0"),L(t,"x1","0"),L(t,"x2","0"),z(t,"stroke",e[3]),I(t,"dashed",e[1])},m(e,n){w(e,t,n)},p(e,i){131072&i&&n!==(n=-1*e[17])&&L(t,"y1",n),8&i&&z(t,"stroke",e[3]),2&i&&I(t,"dashed",e[1])},d(e){e&&_(t)}}}function Es(e){let t,n,i;return{c(){t=A("line"),L(t,"class","tick-mark svelte-r9f2bw"),L(t,"y1",0),L(t,"y2",6),L(t,"x1",n=e[7]||e[13]?e[14].bandwidth()/2:0),L(t,"x2",i=e[7]||e[13]?e[14].bandwidth()/2:0),z(t,"stroke",e[3])},m(e,n){w(e,t,n)},p(e,a){24704&a&&n!==(n=e[7]||e[13]?e[14].bandwidth()/2:0)&&L(t,"x1",n),24704&a&&i!==(i=e[7]||e[13]?e[14].bandwidth()/2:0)&&L(t,"x2",i),8&a&&z(t,"stroke",e[3])},d(e){e&&_(t)}}}function Ls(e){let t,n,i,a,r,s,o,l,c=(e[26]==e[15].length-1?e[11]+e[5](e[24])+e[12]:e[5](e[24]))+"",u=!1!==e[0]&&Cs(e),h=!0===e[2]&&Es(e);return{c(){t=A("g"),u&&u.c(),n=C(),h&&h.c(),i=A("text"),a=N(c),L(i,"x",r=e[7]||e[13]?e[14].bandwidth()/2:0),L(i,"y",e[8]),L(i,"dx",e[9]),L(i,"dy",e[10]),L(i,"text-anchor",s=e[21](e[26])),z(i,"fill",e[4]),L(i,"class","svelte-r9f2bw"),L(t,"class",o="tick tick-"+e[24]+" svelte-r9f2bw"),L(t,"transform",l="translate("+e[14](e[24])+","+e[16][0]+")")},m(e,r){w(e,t,r),u&&u.m(t,null),k(t,n),h&&h.m(t,null),k(t,i),k(i,a)},p(e,s){!1!==e[0]?u?u.p(e,s):(u=Cs(e),u.c(),u.m(t,n)):u&&(u.d(1),u=null),!0===e[2]?h?h.p(e,s):(h=Es(e),h.c(),h.m(t,i)):h&&(h.d(1),h=null),38944&s&&c!==(c=(e[26]==e[15].length-1?e[11]+e[5](e[24])+e[12]:e[5](e[24]))+"")&&R(a,c),24704&s&&r!==(r=e[7]||e[13]?e[14].bandwidth()/2:0)&&L(i,"x",r),256&s&&L(i,"y",e[8]),512&s&&L(i,"dx",e[9]),1024&s&&L(i,"dy",e[10]),16&s&&z(i,"fill",e[4]),32768&s&&o!==(o="tick tick-"+e[24]+" svelte-r9f2bw")&&L(t,"class",o),114688&s&&l!==(l="translate("+e[14](e[24])+","+e[16][0]+")")&&L(t,"transform",l)},d(e){e&&_(t),u&&u.d(),h&&h.d()}}}function Rs(t){let n,i=t[15],a=[];for(let e=0;e<i.length;e+=1)a[e]=Ls(Ss(t,i,e));return{c(){n=A("g");for(let e=0;e<a.length;e+=1)a[e].c();L(n,"class","axis x-axis svelte-r9f2bw"),I(n,"snapTicks",t[6])},m(e,t){w(e,n,t);for(let e=0;e<a.length;e+=1)a[e].m(n,null)},p(e,[t]){if(2359231&t){let r;for(i=e[15],r=0;r<i.length;r+=1){const s=Ss(e,i,r);a[r]?a[r].p(s,t):(a[r]=Ls(s),a[r].c(),a[r].m(n,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}64&t&&I(n,"snapTicks",e[6])},i:e,o:e,d(e){e&&_(n),M(a,e)}}}function js(e,t,n){let i,a,r,s,o;const{width:l,height:c,xScale:u,yRange:d}=G("LayerCake");h(e,c,(e=>n(17,o=e))),h(e,u,(e=>n(14,r=e))),h(e,d,(e=>n(16,s=e)));let{gridlines:f=!0}=t,{tickDashed:p=!1}=t,{tickMarks:g=!1}=t,{tickColor:m="#bbb"}=t,{textColor:y="#666"}=t,{formatTick:v=(e=>e)}=t,{snapTicks:x=!1}=t,{ticks:$}=t,{xTick:b}=t,{yTick:k=16}=t,{dxTick:w=0}=t,{dyTick:_=0}=t,{prefix:M=""}=t,{suffix:T=""}=t;return e.$$set=e=>{"gridlines"in e&&n(0,f=e.gridlines),"tickDashed"in e&&n(1,p=e.tickDashed),"tickMarks"in e&&n(2,g=e.tickMarks),"tickColor"in e&&n(3,m=e.tickColor),"textColor"in e&&n(4,y=e.textColor),"formatTick"in e&&n(5,v=e.formatTick),"snapTicks"in e&&n(6,x=e.snapTicks),"ticks"in e&&n(22,$=e.ticks),"xTick"in e&&n(7,b=e.xTick),"yTick"in e&&n(8,k=e.yTick),"dxTick"in e&&n(9,w=e.dxTick),"dyTick"in e&&n(10,_=e.dyTick),"prefix"in e&&n(11,M=e.prefix),"suffix"in e&&n(12,T=e.suffix)},e.$$.update=()=>{16384&e.$$.dirty&&n(13,i="function"==typeof r.bandwidth),4218880&e.$$.dirty&&n(15,a=Array.isArray($)?$:i?r.domain():"function"==typeof $?$(r.ticks()):r.ticks($))},[f,p,g,m,y,v,x,b,k,w,_,M,T,i,r,a,s,o,c,u,d,function(e){if(!0===x){if(0===e)return"start";if(e===a.length-1)return"end"}return"middle"},$]}class zs extends _e{constructor(e){super(),we(this,e,js,Rs,o,{gridlines:0,tickDashed:1,tickMarks:2,tickColor:3,textColor:4,formatTick:5,snapTicks:6,ticks:22,xTick:7,yTick:8,dxTick:9,dyTick:10,prefix:11,suffix:12})}}function Ds(e,t,n){const i=e.slice();return i[22]=t[n],i[24]=n,i}function Ps(e){let t,n,i;return{c(){t=A("line"),L(t,"class","gridline svelte-f7wn4m"),L(t,"x2","100%"),L(t,"y1",n=e[7]+(e[13]?e[14].bandwidth()/2:0)),L(t,"y2",i=e[7]+(e[13]?e[14].bandwidth()/2:0)),z(t,"stroke",e[3]),I(t,"dashed",e[2])},m(e,n){w(e,t,n)},p(e,a){24704&a&&n!==(n=e[7]+(e[13]?e[14].bandwidth()/2:0))&&L(t,"y1",n),24704&a&&i!==(i=e[7]+(e[13]?e[14].bandwidth()/2:0))&&L(t,"y2",i),8&a&&z(t,"stroke",e[3]),4&a&&I(t,"dashed",e[2])},d(e){e&&_(t)}}}function Fs(e){let t,n,i,a;return{c(){t=A("line"),L(t,"class","tick-mark svelte-f7wn4m"),L(t,"x1","0"),L(t,"x2",n=e[13]?-6:6),L(t,"y1",i=e[7]+(e[13]?e[14].bandwidth()/2:0)),L(t,"y2",a=e[7]+(e[13]?e[14].bandwidth()/2:0)),z(t,"stroke",e[3])},m(e,n){w(e,t,n)},p(e,r){8192&r&&n!==(n=e[13]?-6:6)&&L(t,"x2",n),24704&r&&i!==(i=e[7]+(e[13]?e[14].bandwidth()/2:0))&&L(t,"y1",i),24704&r&&a!==(a=e[7]+(e[13]?e[14].bandwidth()/2:0))&&L(t,"y2",a),8&r&&z(t,"stroke",e[3])},d(e){e&&_(t)}}}function Is(e){let t,n,i,a,r,s,o,l,c,u=(e[24]==e[15].length-1?e[11]+e[5](e[22])+e[12]:e[5](e[22]))+"",h=!1!==e[1]&&Ps(e),d=!0===e[0]&&Fs(e);return{c(){t=A("g"),h&&h.c(),n=C(),d&&d.c(),i=A("text"),a=N(u),L(i,"x",e[6]),L(i,"y",r=e[7]+(e[13]?e[14].bandwidth()/2:0)),L(i,"dx",s=e[13]?-4:e[8]),L(i,"dy",o=e[13]?4:e[9]),z(i,"text-anchor",e[13]?"end":e[10]),z(i,"fill",e[4]),L(t,"class",l="tick tick-"+e[22]+" svelte-f7wn4m"),L(t,"transform",c="translate("+(e[17][0]+(e[13]?e[16].left:0))+", "+e[14](e[22])+")")},m(e,r){w(e,t,r),h&&h.m(t,null),k(t,n),d&&d.m(t,null),k(t,i),k(i,a)},p(e,f){!1!==e[1]?h?h.p(e,f):(h=Ps(e),h.c(),h.m(t,n)):h&&(h.d(1),h=null),!0===e[0]?d?d.p(e,f):(d=Fs(e),d.c(),d.m(t,i)):d&&(d.d(1),d=null),38944&f&&u!==(u=(e[24]==e[15].length-1?e[11]+e[5](e[22])+e[12]:e[5](e[22]))+"")&&R(a,u),64&f&&L(i,"x",e[6]),24704&f&&r!==(r=e[7]+(e[13]?e[14].bandwidth()/2:0))&&L(i,"y",r),8448&f&&s!==(s=e[13]?-4:e[8])&&L(i,"dx",s),8704&f&&o!==(o=e[13]?4:e[9])&&L(i,"dy",o),9216&f&&z(i,"text-anchor",e[13]?"end":e[10]),16&f&&z(i,"fill",e[4]),32768&f&&l!==(l="tick tick-"+e[22]+" svelte-f7wn4m")&&L(t,"class",l),253952&f&&c!==(c="translate("+(e[17][0]+(e[13]?e[16].left:0))+", "+e[14](e[22])+")")&&L(t,"transform",c)},d(e){e&&_(t),h&&h.d(),d&&d.d()}}}function Ws(t){let n,i,a=t[15],r=[];for(let e=0;e<a.length;e+=1)r[e]=Is(Ds(t,a,e));return{c(){n=A("g");for(let e=0;e<r.length;e+=1)r[e].c();L(n,"class","axis y-axis"),L(n,"transform",i="translate("+-t[16].left+", 0)")},m(e,t){w(e,n,t);for(let e=0;e<r.length;e+=1)r[e].m(n,null)},p(e,[t]){if(262143&t){let i;for(a=e[15],i=0;i<a.length;i+=1){const s=Ds(e,a,i);r[i]?r[i].p(s,t):(r[i]=Is(s),r[i].c(),r[i].m(n,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=a.length}65536&t&&i!==(i="translate("+-e[16].left+", 0)")&&L(n,"transform",i)},i:e,o:e,d(e){e&&_(n),M(r,e)}}}function Os(e,t,n){let i,a,r,s,o;const{padding:l,xRange:c,yScale:u}=G("LayerCake");h(e,l,(e=>n(16,s=e))),h(e,c,(e=>n(17,o=e))),h(e,u,(e=>n(14,r=e)));let{ticks:d=4}=t,{tickMarks:f=!1}=t,{gridlines:p=!0}=t,{tickDashed:g=!1}=t,{tickColor:m="#bbb"}=t,{textColor:y="#666"}=t,{formatTick:v=(e=>e)}=t,{xTick:x=0}=t,{yTick:$=0}=t,{dxTick:b=0}=t,{dyTick:k=-4}=t,{textAnchor:w="start"}=t,{prefix:_=""}=t,{suffix:M=""}=t;return e.$$set=e=>{"ticks"in e&&n(21,d=e.ticks),"tickMarks"in e&&n(0,f=e.tickMarks),"gridlines"in e&&n(1,p=e.gridlines),"tickDashed"in e&&n(2,g=e.tickDashed),"tickColor"in e&&n(3,m=e.tickColor),"textColor"in e&&n(4,y=e.textColor),"formatTick"in e&&n(5,v=e.formatTick),"xTick"in e&&n(6,x=e.xTick),"yTick"in e&&n(7,$=e.yTick),"dxTick"in e&&n(8,b=e.dxTick),"dyTick"in e&&n(9,k=e.dyTick),"textAnchor"in e&&n(10,w=e.textAnchor),"prefix"in e&&n(11,_=e.prefix),"suffix"in e&&n(12,M=e.suffix)},e.$$.update=()=>{16384&e.$$.dirty&&n(13,i="function"==typeof r.bandwidth),2121728&e.$$.dirty&&n(15,a=Array.isArray(d)?d:i?r.domain():"function"==typeof d?d(r.ticks()):r.ticks(d))},[f,p,g,m,y,v,x,$,b,k,w,_,M,i,r,a,s,o,l,c,u,d]}class qs extends _e{constructor(e){super(),we(this,e,Os,Ws,o,{ticks:21,tickMarks:0,gridlines:1,tickDashed:2,tickColor:3,textColor:4,formatTick:5,xTick:6,yTick:7,dxTick:8,dyTick:9,textAnchor:10,prefix:11,suffix:12})}}function Ks(e,t,n){const i=e.slice();return i[8]=t[n],i[10]=n,i}function Bs(e){let t,n=e[0],i=[];for(let t=0;t<n.length;t+=1)i[t]=Us(Ks(e,n,t));return{c(){t=T("ul");for(let e=0;e<i.length;e+=1)i[e].c();L(t,"class","legend svelte-1w19nmy")},m(e,n){w(e,t,n);for(let e=0;e<i.length;e+=1)i[e].m(t,null)},p(e,a){if(255&a){let r;for(n=e[0],r=0;r<n.length;r+=1){const s=Ks(e,n,r);i[r]?i[r].p(s,a):(i[r]=Us(s),i[r].c(),i[r].m(t,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){e&&_(t),M(i,e)}}}function Us(e){let t,n,i,a,r,s=e[8]+"";return{c(){t=T("li"),n=T("div"),i=S(),a=N(s),r=S(),L(n,"class","bullet svelte-1w19nmy"),z(n,"background-color",e[1][e[10]]),z(n,"width",(!e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),z(n,"height",(e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),I(n,"round",e[7]),L(t,"class","svelte-1w19nmy")},m(e,s){w(e,t,s),k(t,n),k(t,i),k(t,a),k(t,r)},p(e,t){2&t&&z(n,"background-color",e[1][e[10]]),124&t&&z(n,"width",(!e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),124&t&&z(n,"height",(e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),128&t&&I(n,"round",e[7]),1&t&&s!==(s=e[8]+"")&&R(a,s)},d(e){e&&_(t)}}}function Hs(t){let n,i=Array.isArray(t[0])&&Array.isArray(t[1]),a=i&&Bs(t);return{c(){a&&a.c(),n=C()},m(e,t){a&&a.m(e,t),w(e,n,t)},p(e,[t]){3&t&&(i=Array.isArray(e[0])&&Array.isArray(e[1])),i?a?a.p(e,t):(a=Bs(e),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i:e,o:e,d(e){a&&a.d(e),e&&_(n)}}}function Gs(e,t,n){let{domain:i=null}=t,{colors:a=null}=t,{line:r=!1}=t,{comparison:s=!1}=t,{horizontal:o=!0}=t,{markerWidth:l=2.5}=t,{markerLength:c=13}=t,{round:u=!1}=t;return e.$$set=e=>{"domain"in e&&n(0,i=e.domain),"colors"in e&&n(1,a=e.colors),"line"in e&&n(2,r=e.line),"comparison"in e&&n(3,s=e.comparison),"horizontal"in e&&n(4,o=e.horizontal),"markerWidth"in e&&n(5,l=e.markerWidth),"markerLength"in e&&n(6,c=e.markerLength),"round"in e&&n(7,u=e.round)},[i,a,r,s,o,l,c,u]}class Ys extends _e{constructor(e){super(),we(this,e,Gs,Hs,o,{domain:0,colors:1,line:2,comparison:3,horizontal:4,markerWidth:5,markerLength:6,round:7})}}function Vs(e){let t,n;const i=e[1].default,a=d(i,e,e[0],null);return{c(){t=T("div"),a&&a.c(),L(t,"class","title svelte-b06b69")},m(e,i){w(e,t,i),a&&a.m(t,null),n=!0},p(e,[t]){a&&a.p&&(!n||1&t)&&g(a,i,e,e[0],n?p(i,e[0],t,null):m(e[0]),null)},i(e){n||(he(a,e),n=!0)},o(e){de(a,e),n=!1},d(e){e&&_(t),a&&a.d(e)}}}function Js(e,t,n){let{$$slots:i={},$$scope:a}=t;return e.$$set=e=>{"$$scope"in e&&n(0,a=e.$$scope)},[a,i]}class Zs extends _e{constructor(e){super(),we(this,e,Js,Vs,o,{})}}function Xs(e){let t,n;const i=e[1].default,a=d(i,e,e[0],null);return{c(){t=T("div"),a&&a.c(),L(t,"class","footer svelte-7jvwfp")},m(e,i){w(e,t,i),a&&a.m(t,null),n=!0},p(e,[t]){a&&a.p&&(!n||1&t)&&g(a,i,e,e[0],n?p(i,e[0],t,null):m(e[0]),null)},i(e){n||(he(a,e),n=!0)},o(e){de(a,e),n=!1},d(e){e&&_(t),a&&a.d(e)}}}function Qs(e,t,n){let{$$slots:i={},$$scope:a}=t;return e.$$set=e=>{"$$scope"in e&&n(0,a=e.$$scope)},[a,i]}class eo extends _e{constructor(e){super(),we(this,e,Qs,Xs,o,{})}}function to(e,t,n){const i=e.slice();return i[15]=t[n],i[17]=n,i}function no(e,t,n){const i=e.slice();return i[15]=t[n],i[17]=n,i}function io(e){let t;function n(e,t){return e[3][0]&&e[3][0].x?ro:e[3][0]&&e[3][0][0]&&e[3][0][0].x?ao:void 0}let i=n(e),a=i&&i(e);return{c(){t=A("g"),a&&a.c(),L(t,"class","label-group")},m(e,n){w(e,t,n),a&&a.m(t,null)},p(e,r){i===(i=n(e))&&a?a.p(e,r):(a&&a.d(1),a=i&&i(e),a&&(a.c(),a.m(t,null)))},d(e){e&&_(t),a&&a.d()}}}function ao(e){let t,n=e[3],i=[];for(let t=0;t<n.length;t+=1)i[t]=oo(to(e,n,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=C()},m(e,n){for(let t=0;t<i.length;t+=1)i[t].m(e,n);w(e,t,n)},p(e,a){if(12413&a){let r;for(n=e[3],r=0;r<n.length;r+=1){const s=to(e,n,r);i[r]?i[r].p(s,a):(i[r]=oo(s),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){M(i,e),e&&_(t)}}}function ro(e){let t,n=e[3],i=[];for(let t=0;t<n.length;t+=1)i[t]=uo(no(e,n,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=C()},m(e,n){for(let t=0;t<i.length;t+=1)i[t].m(e,n);w(e,t,n)},p(e,a){if(12415&a){let r;for(n=e[3],r=0;r<n.length;r+=1){const s=no(e,n,r);i[r]?i[r].p(s,a):(i[r]=uo(s),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){M(i,e),e&&_(t)}}}function so(e){let t,n,i,a,r=e[4][e[17]][0][e[13]]+"";return{c(){t=A("text"),n=N(r),L(t,"class","label svelte-gjdahk"),L(t,"transform","translate(2,3)"),L(t,"filter","url(#bgfill)"),L(t,"fill","#333"),L(t,"x",i=e[5](e[15][e[15].length-1].x)),L(t,"y",a=e[6](e[15][e[15].length-1].y))},m(e,i){w(e,t,i),k(t,n)},p(e,s){16&s&&r!==(r=e[4][e[17]][0][e[13]]+"")&&R(n,r),40&s&&i!==(i=e[5](e[15][e[15].length-1].x))&&L(t,"x",i),72&s&&a!==(a=e[6](e[15][e[15].length-1].y))&&L(t,"y",a)},d(e){e&&_(t)}}}function oo(e){let t,n=[e[0],e[2]].includes(e[4][e[17]][0][e[12]]),i=n&&so(e);return{c(){i&&i.c(),t=C()},m(e,n){i&&i.m(e,n),w(e,t,n)},p(e,a){21&a&&(n=[e[0],e[2]].includes(e[4][e[17]][0][e[12]])),n?i?i.p(e,a):(i=so(e),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d(e){i&&i.d(e),e&&_(t)}}}function lo(e){let t,n=e[1]==e[4][e[17]].unique&&co(e);return{c(){n&&n.c(),t=C()},m(e,i){n&&n.m(e,i),w(e,t,i)},p(e,i){e[1]==e[4][e[17]].unique?n?n.p(e,i):(n=co(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&_(t)}}}function co(e){let t,n,i,a,r,s,o,l,c,u,h,d,f,p,g,m,y=Math.round(10*e[4][e[17]][e[13]])/10+"",v="("+(Math.round(10*e[4][e[17]].change)/10<0?"":"+")+Math.round(10*e[4][e[17]].change)/10+")";return{c(){t=A("rect"),a=A("text"),r=N(e[1]),l=A("text"),c=N(y),d=A("text"),f=N(v),L(t,"fill","rgba(255,255,255,0.8)"),L(t,"x",n=e[5](e[15].x)),L(t,"y",i=e[6](e[15].y)),L(t,"transform","translate(5,-45)"),L(t,"width","150"),L(t,"height","50"),L(t,"rx","15"),L(a,"class","label-bold svelte-gjdahk"),L(a,"transform","translate(10,-25)"),L(a,"fill","#333"),L(a,"x",s=e[5](e[15].x)),L(a,"y",o=e[6](e[15].y)),L(l,"class","label svelte-gjdahk"),L(l,"transform","translate(10,-5)"),L(l,"fill","#333"),L(l,"x",u=e[5](e[15].x)),L(l,"y",h=e[6](e[15].y)),L(d,"class","label svelte-gjdahk"),L(d,"transform","translate(55,-5)"),L(d,"fill",p=Math.round(10*e[4][e[17]].change)/10<0?"#FF0000":"#228C22"),L(d,"x",g=e[5](e[15].x)),L(d,"y",m=e[6](e[15].y))},m(e,n){w(e,t,n),w(e,a,n),k(a,r),w(e,l,n),k(l,c),w(e,d,n),k(d,f)},p(e,x){40&x&&n!==(n=e[5](e[15].x))&&L(t,"x",n),72&x&&i!==(i=e[6](e[15].y))&&L(t,"y",i),2&x&&R(r,e[1]),40&x&&s!==(s=e[5](e[15].x))&&L(a,"x",s),72&x&&o!==(o=e[6](e[15].y))&&L(a,"y",o),16&x&&y!==(y=Math.round(10*e[4][e[17]][e[13]])/10+"")&&R(c,y),40&x&&u!==(u=e[5](e[15].x))&&L(l,"x",u),72&x&&h!==(h=e[6](e[15].y))&&L(l,"y",h),16&x&&v!==(v="("+(Math.round(10*e[4][e[17]].change)/10<0?"":"+")+Math.round(10*e[4][e[17]].change)/10+")")&&R(f,v),16&x&&p!==(p=Math.round(10*e[4][e[17]].change)/10<0?"#FF0000":"#228C22")&&L(d,"fill",p),40&x&&g!==(g=e[5](e[15].x))&&L(d,"x",g),72&x&&m!==(m=e[6](e[15].y))&&L(d,"y",m)},d(e){e&&_(t),e&&_(a),e&&_(l),e&&_(d)}}}function uo(e){let t,n=[e[0],e[2]].includes(e[4][e[17]][e[12]]),i=n&&lo(e);return{c(){i&&i.c(),t=C()},m(e,n){i&&i.m(e,n),w(e,t,n)},p(e,a){21&a&&(n=[e[0],e[2]].includes(e[4][e[17]][e[12]])),n?i?i.p(e,a):(i=lo(e),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d(e){i&&i.d(e),e&&_(t)}}}function ho(t){let n,i=t[3].length==t[4].length&&io(t);return{c(){i&&i.c(),n=C()},m(e,t){i&&i.m(e,t),w(e,n,t)},p(e,[t]){e[3].length==e[4].length?i?i.p(e,t):(i=io(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:e,o:e,d(e){i&&i.d(e),e&&_(n)}}}function fo(e,t,n){let i,a,r,s,o;const{data:l,xScale:c,yScale:u,custom:d}=G("LayerCake");h(e,l,(e=>n(4,r=e))),h(e,c,(e=>n(5,s=e))),h(e,u,(e=>n(6,o=e))),h(e,d,(e=>n(14,i=e)));let{hovered:f=null}=t,{placeLabel:p=null}=t,{selected:g=null}=t,m=i.coords;h(e,m,(e=>n(3,a=e)));let y=i.idKey,v=i.labelKey;return e.$$set=e=>{"hovered"in e&&n(0,f=e.hovered),"placeLabel"in e&&n(1,p=e.placeLabel),"selected"in e&&n(2,g=e.selected)},[f,p,g,a,r,s,o,l,c,u,d,m,y,v]}class po extends _e{constructor(e){super(),we(this,e,fo,ho,o,{hovered:0,placeLabel:1,selected:2})}}function go(e,t,n){const i=e.slice();return i[26]=t[n],i[28]=n,i}function mo(e,t,n){const i=e.slice();return i[26]=t[n],i[28]=n,i}function yo(e){let t,n,i=e[5],a=[];for(let t=0;t<i.length;t+=1)a[t]=vo(mo(e,i,t));let r=e[20]&&(e[0]||e[2]||e[3][0])&&xo(e);return{c(){t=A("g");for(let e=0;e<a.length;e+=1)a[e].c();n=C(),r&&r.c(),L(t,"class","scatter-group")},m(e,i){w(e,t,i);for(let e=0;e<a.length;e+=1)a[e].m(t,null);k(t,n),r&&r.m(t,null)},p(e,s){if(4064&s){let r;for(i=e[5],r=0;r<i.length;r+=1){const o=mo(e,i,r);a[r]?a[r].p(o,s):(a[r]=vo(o),a[r].c(),a[r].m(t,n))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}e[20]&&(e[0]||e[2]||e[3][0])?r?r.p(e,s):(r=xo(e),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},d(e){e&&_(t),M(a,e),r&&r.d()}}}function vo(e){let t,n,i,a,r;return{c(){t=A("circle"),L(t,"class",""),L(t,"cx",n=e[7](e[26].x)),L(t,"cy",i=e[8](e[26].y)),L(t,"r",a=e[26].r),L(t,"fill",r=e[9]?e[10](e[6][e[28]]):e[11][0])},m(e,n){w(e,t,n)},p(e,s){160&s&&n!==(n=e[7](e[26].x))&&L(t,"cx",n),288&s&&i!==(i=e[8](e[26].y))&&L(t,"cy",i),32&s&&a!==(a=e[26].r)&&L(t,"r",a),3648&s&&r!==(r=e[9]?e[10](e[6][e[28]]):e[11][0])&&L(t,"fill",r)},d(e){e&&_(t)}}}function xo(e){let t,n=e[5],i=[];for(let t=0;t<n.length;t+=1)i[t]=ko(go(e,n,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=C()},m(e,n){for(let t=0;t<i.length;t+=1)i[t].m(e,n);w(e,t,n)},p(e,a){if(32506367&a){let r;for(n=e[5],r=0;r<n.length;r+=1){const s=go(e,n,r);i[r]?i[r].p(s,a):(i[r]=ko(s),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){M(i,e),e&&_(t)}}}function $o(e){let t,n=e[1]==e[6][e[28]].unique&&bo(e);return{c(){n&&n.c(),t=C()},m(e,i){n&&n.m(e,i),w(e,t,i)},p(e,i){e[1]==e[6][e[28]].unique?n?n.p(e,i):(n=bo(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&_(t)}}}function bo(e){let t,n,i,a,r,s,o;return{c(){t=A("circle"),L(t,"class",""),L(t,"cx",n=e[7](e[26].x)),L(t,"cy",i=e[8](e[26].y)),L(t,"r",a=e[26].r),L(t,"fill",r=e[4]&&e[6][e[28]][e[20]]==e[2]?e[22]:e[4]&e[3].includes(e[6][e[28]][e[20]])?e[23]:"none"),L(t,"stroke",s=e[6][e[28]][e[20]]==e[0]?e[21]:e[6][e[28]][e[20]]==e[2]?e[22]:e[23]),L(t,"stroke-width",o=e[6][e[28]][e[20]]==e[0]||e[6][e[28]][e[20]]==e[2]||e[3].includes(e[6][e[28]][e[20]])?e[24]:0)},m(e,n){w(e,t,n)},p(e,l){160&l&&n!==(n=e[7](e[26].x))&&L(t,"cx",n),288&l&&i!==(i=e[8](e[26].y))&&L(t,"cy",i),32&l&&a!==(a=e[26].r)&&L(t,"r",a),92&l&&r!==(r=e[4]&&e[6][e[28]][e[20]]==e[2]?e[22]:e[4]&e[3].includes(e[6][e[28]][e[20]])?e[23]:"none")&&L(t,"fill",r),69&l&&s!==(s=e[6][e[28]][e[20]]==e[0]?e[21]:e[6][e[28]][e[20]]==e[2]?e[22]:e[23])&&L(t,"stroke",s),77&l&&o!==(o=e[6][e[28]][e[20]]==e[0]||e[6][e[28]][e[20]]==e[2]||e[3].includes(e[6][e[28]][e[20]])?e[24]:0)&&L(t,"stroke-width",o)},d(e){e&&_(t)}}}function ko(e){let t,n=[e[0],e[2],...e[3]].includes(e[6][e[28]][e[20]]),i=n&&$o(e);return{c(){i&&i.c(),t=C()},m(e,n){i&&i.m(e,n),w(e,t,n)},p(e,a){77&a&&(n=[e[0],e[2],...e[3]].includes(e[6][e[28]][e[20]])),n?i?i.p(e,a):(i=$o(e),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d(e){i&&i.d(e),e&&_(t)}}}function wo(t){let n,i=t[5].length==t[6].length&&yo(t);return{c(){i&&i.c(),n=C()},m(e,t){i&&i.m(e,t),w(e,n,t)},p(e,[t]){e[5].length==e[6].length?i?i.p(e,t):(i=yo(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:e,o:e,d(e){i&&i.d(e),e&&_(n)}}}function _o(e,t,n){let i,a,r,s,o,l,c,u;const{data:d,z:f,xScale:p,yScale:g,zGet:m,zRange:y,custom:v}=G("LayerCake");h(e,d,(e=>n(6,r=e))),h(e,f,(e=>n(9,l=e))),h(e,p,(e=>n(7,s=e))),h(e,g,(e=>n(8,o=e))),h(e,m,(e=>n(10,c=e))),h(e,y,(e=>n(11,u=e))),h(e,v,(e=>n(25,i=e)));let{hovered:x=null}=t,{placeLabel:$=null}=t,{selected:b=null}=t,{highlighted:k=[]}=t,{overlayFill:w=!1}=t,_=i.coords;h(e,_,(e=>n(5,a=e)));let M=i.idKey,T=i.colorHover?i.colorHover:"orange",A=i.colorSelect?i.colorSelect:"black",N=i.colorHighlight?i.colorHighlight:"black",S=i.lineWidth?i.lineWidth:2;return e.$$set=e=>{"hovered"in e&&n(0,x=e.hovered),"placeLabel"in e&&n(1,$=e.placeLabel),"selected"in e&&n(2,b=e.selected),"highlighted"in e&&n(3,k=e.highlighted),"overlayFill"in e&&n(4,w=e.overlayFill)},[x,$,b,k,w,a,r,s,o,l,c,u,d,f,p,g,m,y,v,_,M,T,A,N,S]}class Mo extends _e{constructor(e){super(),we(this,e,_o,wo,o,{hovered:0,placeLabel:1,selected:2,highlighted:3,overlayFill:4})}}const To=134217729;function Ao(e,t,n,i,a){let r,s,o,l,c=t[0],u=i[0],h=0,d=0;u>c==u>-c?(r=c,c=t[++h]):(r=u,u=i[++d]);let f=0;if(h<e&&d<n)for(u>c==u>-c?(s=c+r,o=r-(s-c),c=t[++h]):(s=u+r,o=r-(s-u),u=i[++d]),r=s,0!==o&&(a[f++]=o);h<e&&d<n;)u>c==u>-c?(s=r+c,l=s-r,o=r-(s-l)+(c-l),c=t[++h]):(s=r+u,l=s-r,o=r-(s-l)+(u-l),u=i[++d]),r=s,0!==o&&(a[f++]=o);for(;h<e;)s=r+c,l=s-r,o=r-(s-l)+(c-l),c=t[++h],r=s,0!==o&&(a[f++]=o);for(;d<n;)s=r+u,l=s-r,o=r-(s-l)+(u-l),u=i[++d],r=s,0!==o&&(a[f++]=o);return 0===r&&0!==f||(a[f++]=r),f}function No(e){return new Float64Array(e)}const So=No(4),Co=No(8),Eo=No(12),Lo=No(16),Ro=No(4);function jo(e,t,n,i,a,r){const s=(t-r)*(n-a),o=(e-a)*(i-r),l=s-o;if(0===s||0===o||s>0!=o>0)return l;const c=Math.abs(s+o);return Math.abs(l)>=33306690738754716e-32*c?l:-function(e,t,n,i,a,r,s){let o,l,c,u,h,d,f,p,g,m,y,v,x,$,b,k,w,_;const M=e-a,T=n-a,A=t-r,N=i-r;$=M*N,d=To*M,f=d-(d-M),p=M-f,d=To*N,g=d-(d-N),m=N-g,b=p*m-($-f*g-p*g-f*m),k=A*T,d=To*A,f=d-(d-A),p=A-f,d=To*T,g=d-(d-T),m=T-g,w=p*m-(k-f*g-p*g-f*m),y=b-w,h=b-y,So[0]=b-(y+h)+(h-w),v=$+y,h=v-$,x=$-(v-h)+(y-h),y=x-k,h=x-y,So[1]=x-(y+h)+(h-k),_=v+y,h=_-v,So[2]=v-(_-h)+(y-h),So[3]=_;let S=function(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}(4,So),C=22204460492503146e-32*s;if(S>=C||-S>=C)return S;if(h=e-M,o=e-(M+h)+(h-a),h=n-T,c=n-(T+h)+(h-a),h=t-A,l=t-(A+h)+(h-r),h=i-N,u=i-(N+h)+(h-r),0===o&&0===l&&0===c&&0===u)return S;if(C=11093356479670487e-47*s+33306690738754706e-32*Math.abs(S),S+=M*u+N*o-(A*c+T*l),S>=C||-S>=C)return S;$=o*N,d=To*o,f=d-(d-o),p=o-f,d=To*N,g=d-(d-N),m=N-g,b=p*m-($-f*g-p*g-f*m),k=l*T,d=To*l,f=d-(d-l),p=l-f,d=To*T,g=d-(d-T),m=T-g,w=p*m-(k-f*g-p*g-f*m),y=b-w,h=b-y,Ro[0]=b-(y+h)+(h-w),v=$+y,h=v-$,x=$-(v-h)+(y-h),y=x-k,h=x-y,Ro[1]=x-(y+h)+(h-k),_=v+y,h=_-v,Ro[2]=v-(_-h)+(y-h),Ro[3]=_;const E=Ao(4,So,4,Ro,Co);$=M*u,d=To*M,f=d-(d-M),p=M-f,d=To*u,g=d-(d-u),m=u-g,b=p*m-($-f*g-p*g-f*m),k=A*c,d=To*A,f=d-(d-A),p=A-f,d=To*c,g=d-(d-c),m=c-g,w=p*m-(k-f*g-p*g-f*m),y=b-w,h=b-y,Ro[0]=b-(y+h)+(h-w),v=$+y,h=v-$,x=$-(v-h)+(y-h),y=x-k,h=x-y,Ro[1]=x-(y+h)+(h-k),_=v+y,h=_-v,Ro[2]=v-(_-h)+(y-h),Ro[3]=_;const L=Ao(E,Co,4,Ro,Eo);$=o*u,d=To*o,f=d-(d-o),p=o-f,d=To*u,g=d-(d-u),m=u-g,b=p*m-($-f*g-p*g-f*m),k=l*c,d=To*l,f=d-(d-l),p=l-f,d=To*c,g=d-(d-c),m=c-g,w=p*m-(k-f*g-p*g-f*m),y=b-w,h=b-y,Ro[0]=b-(y+h)+(h-w),v=$+y,h=v-$,x=$-(v-h)+(y-h),y=x-k,h=x-y,Ro[1]=x-(y+h)+(h-k),_=v+y,h=_-v,Ro[2]=v-(_-h)+(y-h),Ro[3]=_;const R=Ao(L,Eo,4,Ro,Lo);return Lo[R-1]}(e,t,n,i,a,r,c)}const zo=Math.pow(2,-52),Do=new Uint32Array(512);class Po{static from(e,t=Ko,n=Bo){const i=e.length,a=new Float64Array(2*i);for(let r=0;r<i;r++){const i=e[r];a[2*r]=t(i),a[2*r+1]=n(i)}return new Po(a)}constructor(e){const t=e.length>>1;if(t>0&&"number"!=typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:n,_hullTri:i,_hullHash:a}=this,r=e.length>>1;let s=1/0,o=1/0,l=-1/0,c=-1/0;for(let t=0;t<r;t++){const n=e[2*t],i=e[2*t+1];n<s&&(s=n),i<o&&(o=i),n>l&&(l=n),i>c&&(c=i),this._ids[t]=t}const u=(s+l)/2,h=(o+c)/2;let d,f,p,g=1/0;for(let t=0;t<r;t++){const n=Fo(u,h,e[2*t],e[2*t+1]);n<g&&(d=t,g=n)}const m=e[2*d],y=e[2*d+1];g=1/0;for(let t=0;t<r;t++){if(t===d)continue;const n=Fo(m,y,e[2*t],e[2*t+1]);n<g&&n>0&&(f=t,g=n)}let v=e[2*f],x=e[2*f+1],$=1/0;for(let t=0;t<r;t++){if(t===d||t===f)continue;const n=Wo(m,y,v,x,e[2*t],e[2*t+1]);n<$&&(p=t,$=n)}let b=e[2*p],k=e[2*p+1];if($===1/0){for(let t=0;t<r;t++)this._dists[t]=e[2*t]-e[0]||e[2*t+1]-e[1];Oo(this._ids,this._dists,0,r-1);const t=new Uint32Array(r);let n=0;for(let e=0,i=-1/0;e<r;e++){const a=this._ids[e];this._dists[a]>i&&(t[n++]=a,i=this._dists[a])}return this.hull=t.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(jo(m,y,v,x,b,k)<0){const e=f,t=v,n=x;f=p,v=b,x=k,p=e,b=t,k=n}const w=function(e,t,n,i,a,r){const s=n-e,o=i-t,l=a-e,c=r-t,u=s*s+o*o,h=l*l+c*c,d=.5/(s*c-o*l);return{x:e+(c*u-o*h)*d,y:t+(s*h-l*u)*d}}(m,y,v,x,b,k);this._cx=w.x,this._cy=w.y;for(let t=0;t<r;t++)this._dists[t]=Fo(e[2*t],e[2*t+1],w.x,w.y);Oo(this._ids,this._dists,0,r-1),this._hullStart=d;let _=3;n[d]=t[p]=f,n[f]=t[d]=p,n[p]=t[f]=d,i[d]=0,i[f]=1,i[p]=2,a.fill(-1),a[this._hashKey(m,y)]=d,a[this._hashKey(v,x)]=f,a[this._hashKey(b,k)]=p,this.trianglesLen=0,this._addTriangle(d,f,p,-1,-1,-1);for(let r,s,o=0;o<this._ids.length;o++){const l=this._ids[o],c=e[2*l],u=e[2*l+1];if(o>0&&Math.abs(c-r)<=zo&&Math.abs(u-s)<=zo)continue;if(r=c,s=u,l===d||l===f||l===p)continue;let h=0;for(let e=0,t=this._hashKey(c,u);e<this._hashSize&&(h=a[(t+e)%this._hashSize],-1===h||h===n[h]);e++);h=t[h];let g,m=h;for(;g=n[m],jo(c,u,e[2*m],e[2*m+1],e[2*g],e[2*g+1])>=0;)if(m=g,m===h){m=-1;break}if(-1===m)continue;let y=this._addTriangle(m,l,n[m],-1,-1,i[m]);i[l]=this._legalize(y+2),i[m]=y,_++;let v=n[m];for(;g=n[v],jo(c,u,e[2*v],e[2*v+1],e[2*g],e[2*g+1])<0;)y=this._addTriangle(v,l,g,i[l],-1,i[v]),i[l]=this._legalize(y+2),n[v]=v,_--,v=g;if(m===h)for(;g=t[m],jo(c,u,e[2*g],e[2*g+1],e[2*m],e[2*m+1])<0;)y=this._addTriangle(g,l,m,-1,i[m],i[g]),this._legalize(y+2),i[g]=y,n[m]=m,_--,m=g;this._hullStart=t[l]=m,n[m]=t[v]=l,n[l]=v,a[this._hashKey(c,u)]=l,a[this._hashKey(e[2*m],e[2*m+1])]=m}this.hull=new Uint32Array(_);for(let e=0,t=this._hullStart;e<_;e++)this.hull[e]=t,t=n[t];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(function(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:i}=this;let a=0,r=0;for(;;){const s=n[e],o=e-e%3;if(r=o+(e+2)%3,-1===s){if(0===a)break;e=Do[--a];continue}const l=s-s%3,c=o+(e+1)%3,u=l+(s+2)%3,h=t[r],d=t[e],f=t[c],p=t[u];if(Io(i[2*h],i[2*h+1],i[2*d],i[2*d+1],i[2*f],i[2*f+1],i[2*p],i[2*p+1])){t[e]=p,t[s]=h;const i=n[u];if(-1===i){let t=this._hullStart;do{if(this._hullTri[t]===u){this._hullTri[t]=e;break}t=this._hullPrev[t]}while(t!==this._hullStart)}this._link(e,i),this._link(s,n[r]),this._link(r,u);const o=l+(s+1)%3;a<Do.length&&(Do[a++]=o)}else{if(0===a)break;e=Do[--a]}}return r}_link(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}_addTriangle(e,t,n,i,a,r){const s=this.trianglesLen;return this._triangles[s]=e,this._triangles[s+1]=t,this._triangles[s+2]=n,this._link(s,i),this._link(s+1,a),this._link(s+2,r),this.trianglesLen+=3,s}}function Fo(e,t,n,i){const a=e-n,r=t-i;return a*a+r*r}function Io(e,t,n,i,a,r,s,o){const l=e-s,c=t-o,u=n-s,h=i-o,d=a-s,f=r-o,p=u*u+h*h,g=d*d+f*f;return l*(h*g-p*f)-c*(u*g-p*d)+(l*l+c*c)*(u*f-h*d)<0}function Wo(e,t,n,i,a,r){const s=n-e,o=i-t,l=a-e,c=r-t,u=s*s+o*o,h=l*l+c*c,d=.5/(s*c-o*l),f=(c*u-o*h)*d,p=(s*h-l*u)*d;return f*f+p*p}function Oo(e,t,n,i){if(i-n<=20)for(let a=n+1;a<=i;a++){const i=e[a],r=t[i];let s=a-1;for(;s>=n&&t[e[s]]>r;)e[s+1]=e[s--];e[s+1]=i}else{let a=n+1,r=i;qo(e,n+i>>1,a),t[e[n]]>t[e[i]]&&qo(e,n,i),t[e[a]]>t[e[i]]&&qo(e,a,i),t[e[n]]>t[e[a]]&&qo(e,n,a);const s=e[a],o=t[s];for(;;){do{a++}while(t[e[a]]<o);do{r--}while(t[e[r]]>o);if(r<a)break;qo(e,a,r)}e[n+1]=e[r],e[r]=s,i-a+1>=r-n?(Oo(e,t,a,i),Oo(e,t,n,r-1)):(Oo(e,t,n,r-1),Oo(e,t,a,i))}}function qo(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Ko(e){return e[0]}function Bo(e){return e[1]}const Uo=1e-6;class Ho{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,n){const i=(e=+e)+(n=+n),a=t=+t;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${i},${a}`:(Math.abs(this._x1-i)>Uo||Math.abs(this._y1-a)>Uo)&&(this._+="L"+i+","+a),n&&(this._+=`A${n},${n},0,1,1,${e-n},${t}A${n},${n},0,1,1,${this._x1=i},${this._y1=a}`)}rect(e,t,n,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+n}v${+i}h${-n}Z`}value(){return this._||null}}class Go{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class Yo{constructor(e,[t,n,i,a]=[0,0,960,500]){if(!((i=+i)>=(t=+t)&&(a=+a)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=i,this.xmin=t,this.ymax=a,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:n},vectors:i}=this,a=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let t,i,r=0,s=0,o=n.length;r<o;r+=3,s+=2){const o=2*n[r],l=2*n[r+1],c=2*n[r+2],u=e[o],h=e[o+1],d=e[l],f=e[l+1],p=e[c],g=e[c+1],m=d-u,y=f-h,v=p-u,x=g-h,$=2*(m*x-y*v);if(Math.abs($)<1e-9){let a=1e9;const r=2*n[0];a*=Math.sign((e[r]-u)*x-(e[r+1]-h)*v),t=(u+p)/2-a*x,i=(h+g)/2+a*v}else{const e=1/$,n=m*m+y*y,a=v*v+x*x;t=u+(x*n-y*a)*e,i=h+(m*a-v*n)*e}a[s]=t,a[s+1]=i}let r,s,o,l=t[t.length-1],c=4*l,u=e[2*l],h=e[2*l+1];i.fill(0);for(let n=0;n<t.length;++n)l=t[n],r=c,s=u,o=h,c=4*l,u=e[2*l],h=e[2*l+1],i[r+2]=i[c]=o-h,i[r+3]=i[c+1]=u-s}render(e){const t=null==e?e=new Ho:void 0,{delaunay:{halfedges:n,inedges:i,hull:a},circumcenters:r,vectors:s}=this;if(a.length<=1)return null;for(let t=0,i=n.length;t<i;++t){const i=n[t];if(i<t)continue;const a=2*Math.floor(t/3),s=2*Math.floor(i/3),o=r[a],l=r[a+1],c=r[s],u=r[s+1];this._renderSegment(o,l,c,u,e)}let o,l=a[a.length-1];for(let t=0;t<a.length;++t){o=l,l=a[t];const n=2*Math.floor(i[l]/3),c=r[n],u=r[n+1],h=4*o,d=this._project(c,u,s[h+2],s[h+3]);d&&this._renderSegment(c,u,d[0],d[1],e)}return t&&t.value()}renderBounds(e){const t=null==e?e=new Ho:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const n=null==t?t=new Ho:void 0,i=this._clip(e);if(null===i||!i.length)return;t.moveTo(i[0],i[1]);let a=i.length;for(;i[0]===i[a-2]&&i[1]===i[a-1]&&a>1;)a-=2;for(let e=2;e<a;e+=2)i[e]===i[e-2]&&i[e+1]===i[e-1]||t.lineTo(i[e],i[e+1]);return t.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,n=e.length/2;t<n;++t){const e=this.cellPolygon(t);e&&(e.index=t,yield e)}}cellPolygon(e){const t=new Go;return this.renderCell(e,t),t.value()}_renderSegment(e,t,n,i,a){let r;const s=this._regioncode(e,t),o=this._regioncode(n,i);0===s&&0===o?(a.moveTo(e,t),a.lineTo(n,i)):(r=this._clipSegment(e,t,n,i,s,o))&&(a.moveTo(r[0],r[1]),a.lineTo(r[2],r[3]))}contains(e,t,n){return(t=+t)==t&&(n=+n)==n&&this.delaunay._step(e,t,n)===e}*neighbors(e){const t=this._clip(e);if(t)for(const n of this.delaunay.neighbors(e)){const e=this._clip(n);if(e)e:for(let i=0,a=t.length;i<a;i+=2)for(let r=0,s=e.length;r<s;r+=2)if(t[i]==e[r]&&t[i+1]==e[r+1]&&t[(i+2)%a]==e[(r+s-2)%s]&&t[(i+3)%a]==e[(r+s-1)%s]){yield n;break e}}}_cell(e){const{circumcenters:t,delaunay:{inedges:n,halfedges:i,triangles:a}}=this,r=n[e];if(-1===r)return null;const s=[];let o=r;do{const n=Math.floor(o/3);if(s.push(t[2*n],t[2*n+1]),o=o%3==2?o-2:o+1,a[o]!==e)break;o=i[o]}while(o!==r&&-1!==o);return s}_clip(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(null===t)return null;const{vectors:n}=this,i=4*e;return n[i]||n[i+1]?this._clipInfinite(e,t,n[i],n[i+1],n[i+2],n[i+3]):this._clipFinite(e,t)}_clipFinite(e,t){const n=t.length;let i,a,r,s,o=null,l=t[n-2],c=t[n-1],u=this._regioncode(l,c),h=0;for(let d=0;d<n;d+=2)if(i=l,a=c,l=t[d],c=t[d+1],r=u,u=this._regioncode(l,c),0===r&&0===u)s=h,h=0,o?o.push(l,c):o=[l,c];else{let t,n,d,f,p;if(0===r){if(null===(t=this._clipSegment(i,a,l,c,r,u)))continue;[n,d,f,p]=t}else{if(null===(t=this._clipSegment(l,c,i,a,u,r)))continue;[f,p,n,d]=t,s=h,h=this._edgecode(n,d),s&&h&&this._edge(e,s,h,o,o.length),o?o.push(n,d):o=[n,d]}s=h,h=this._edgecode(f,p),s&&h&&this._edge(e,s,h,o,o.length),o?o.push(f,p):o=[f,p]}if(o)s=h,h=this._edgecode(o[0],o[1]),s&&h&&this._edge(e,s,h,o,o.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return o}_clipSegment(e,t,n,i,a,r){for(;;){if(0===a&&0===r)return[e,t,n,i];if(a&r)return null;let s,o,l=a||r;8&l?(s=e+(n-e)*(this.ymax-t)/(i-t),o=this.ymax):4&l?(s=e+(n-e)*(this.ymin-t)/(i-t),o=this.ymin):2&l?(o=t+(i-t)*(this.xmax-e)/(n-e),s=this.xmax):(o=t+(i-t)*(this.xmin-e)/(n-e),s=this.xmin),a?(e=s,t=o,a=this._regioncode(e,t)):(n=s,i=o,r=this._regioncode(n,i))}}_clipInfinite(e,t,n,i,a,r){let s,o=Array.from(t);if((s=this._project(o[0],o[1],n,i))&&o.unshift(s[0],s[1]),(s=this._project(o[o.length-2],o[o.length-1],a,r))&&o.push(s[0],s[1]),o=this._clipFinite(e,o))for(let t,n=0,i=o.length,a=this._edgecode(o[i-2],o[i-1]);n<i;n+=2)t=a,a=this._edgecode(o[n],o[n+1]),t&&a&&(n=this._edge(e,t,a,o,n),i=o.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(e,t,n,i,a){for(;t!==n;){let n,r;switch(t){case 5:t=4;continue;case 4:t=6,n=this.xmax,r=this.ymin;break;case 6:t=2;continue;case 2:t=10,n=this.xmax,r=this.ymax;break;case 10:t=8;continue;case 8:t=9,n=this.xmin,r=this.ymax;break;case 9:t=1;continue;case 1:t=5,n=this.xmin,r=this.ymin}i[a]===n&&i[a+1]===r||!this.contains(e,n,r)||(i.splice(a,0,n,r),a+=2)}if(i.length>4)for(let e=0;e<i.length;e+=2){const t=(e+2)%i.length,n=(e+4)%i.length;(i[e]===i[t]&&i[t]===i[n]||i[e+1]===i[t+1]&&i[t+1]===i[n+1])&&(i.splice(t,2),e-=2)}return a}_project(e,t,n,i){let a,r,s,o=1/0;if(i<0){if(t<=this.ymin)return null;(a=(this.ymin-t)/i)<o&&(s=this.ymin,r=e+(o=a)*n)}else if(i>0){if(t>=this.ymax)return null;(a=(this.ymax-t)/i)<o&&(s=this.ymax,r=e+(o=a)*n)}if(n>0){if(e>=this.xmax)return null;(a=(this.xmax-e)/n)<o&&(r=this.xmax,s=t+(o=a)*i)}else if(n<0){if(e<=this.xmin)return null;(a=(this.xmin-e)/n)<o&&(r=this.xmin,s=t+(o=a)*i)}return[r,s]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}}const Vo=2*Math.PI,Jo=Math.pow;function Zo(e){return e[0]}function Xo(e){return e[1]}function Qo(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class el{static from(e,t=Zo,n=Xo,i){return new el("length"in e?function(e,t,n,i){const a=e.length,r=new Float64Array(2*a);for(let s=0;s<a;++s){const a=e[s];r[2*s]=t.call(i,a,s,e),r[2*s+1]=n.call(i,a,s,e)}return r}(e,t,n,i):Float64Array.from(function*(e,t,n,i){let a=0;for(const r of e)yield t.call(i,r,a,e),yield n.call(i,r,a,e),++a}(e,t,n,i)))}constructor(e){this._delaunator=new Po(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&function(e){const{triangles:t,coords:n}=e;for(let e=0;e<t.length;e+=3){const i=2*t[e],a=2*t[e+1],r=2*t[e+2];if((n[r]-n[i])*(n[a+1]-n[i+1])-(n[a]-n[i])*(n[r+1]-n[i+1])>1e-10)return!1}return!0}(e)){this.collinear=Int32Array.from({length:t.length/2},((e,t)=>t)).sort(((e,n)=>t[2*e]-t[2*n]||t[2*e+1]-t[2*n+1]));const e=this.collinear[0],n=this.collinear[this.collinear.length-1],i=[t[2*e],t[2*e+1],t[2*n],t[2*n+1]],a=1e-8*Math.hypot(i[3]-i[1],i[2]-i[0]);for(let e=0,n=t.length/2;e<n;++e){const n=Qo(t[2*e],t[2*e+1],a);t[2*e]=n[0],t[2*e+1]=n[1]}this._delaunator=new Po(t)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,r=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let e=0,t=n.length;e<t;++e){const t=a[e%3==2?e-2:e+1];-1!==n[e]&&-1!==r[t]||(r[t]=e)}for(let e=0,t=i.length;e<t;++e)s[i[e]]=e;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],r[i[0]]=1,2===i.length&&(r[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(e){return new Yo(this,e)}*neighbors(e){const{inedges:t,hull:n,_hullIndex:i,halfedges:a,triangles:r,collinear:s}=this;if(s){const t=s.indexOf(e);return t>0&&(yield s[t-1]),void(t<s.length-1&&(yield s[t+1]))}const o=t[e];if(-1===o)return;let l=o,c=-1;do{if(yield c=r[l],l=l%3==2?l-2:l+1,r[l]!==e)return;if(l=a[l],-1===l){const t=n[(i[e]+1)%n.length];return void(t!==c&&(yield t))}}while(l!==o)}find(e,t,n=0){if((e=+e)!=e||(t=+t)!=t)return-1;const i=n;let a;for(;(a=this._step(n,e,t))>=0&&a!==n&&a!==i;)n=a;return a}_step(e,t,n){const{inedges:i,hull:a,_hullIndex:r,halfedges:s,triangles:o,points:l}=this;if(-1===i[e]||!l.length)return(e+1)%(l.length>>1);let c=e,u=Jo(t-l[2*e],2)+Jo(n-l[2*e+1],2);const h=i[e];let d=h;do{let i=o[d];const h=Jo(t-l[2*i],2)+Jo(n-l[2*i+1],2);if(h<u&&(u=h,c=i),d=d%3==2?d-2:d+1,o[d]!==e)break;if(d=s[d],-1===d){if(d=a[(r[e]+1)%a.length],d!==i&&Jo(t-l[2*d],2)+Jo(n-l[2*d+1],2)<u)return d;break}}while(d!==h);return c}render(e){const t=null==e?e=new Ho:void 0,{points:n,halfedges:i,triangles:a}=this;for(let t=0,r=i.length;t<r;++t){const r=i[t];if(r<t)continue;const s=2*a[t],o=2*a[r];e.moveTo(n[s],n[s+1]),e.lineTo(n[o],n[o+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t){void 0!==t||e&&"function"==typeof e.moveTo||(t=e,e=null),t=null==t?2:+t;const n=null==e?e=new Ho:void 0,{points:i}=this;for(let n=0,a=i.length;n<a;n+=2){const a=i[n],r=i[n+1];e.moveTo(a+t,r),e.arc(a,r,t,0,Vo)}return n&&n.value()}renderHull(e){const t=null==e?e=new Ho:void 0,{hull:n,points:i}=this,a=2*n[0],r=n.length;e.moveTo(i[a],i[a+1]);for(let t=1;t<r;++t){const a=2*n[t];e.lineTo(i[a],i[a+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new Go;return this.renderHull(e),e.value()}renderTriangle(e,t){const n=null==t?t=new Ho:void 0,{points:i,triangles:a}=this,r=2*a[e*=3],s=2*a[e+1],o=2*a[e+2];return t.moveTo(i[r],i[r+1]),t.lineTo(i[s],i[s+1]),t.lineTo(i[o],i[o+1]),t.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,n=e.length/3;t<n;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new Go;return this.renderTriangle(e,t),t.value()}}function tl(e,t,n){const i=e.slice();return i[29]=t[n],i[31]=n,i}function nl(e){let t,n=e[1]&&il(e);return{c(){n&&n.c(),t=C()},m(e,i){n&&n.m(e,i),w(e,t,i)},p(e,i){e[1]?n?n.p(e,i):(n=il(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&_(t)}}}function il(e){let t,n=e[2],i=[];for(let t=0;t<n.length;t+=1)i[t]=al(tl(e,n,t));return{c(){t=A("g");for(let e=0;e<i.length;e+=1)i[e].c();L(t,"class","voronoi-group")},m(e,n){w(e,t,n);for(let e=0;e<i.length;e+=1)i[e].m(t,null)},p(e,a){if(3078&a[0]){let r;for(n=e[2],r=0;r<n.length;r+=1){const s=tl(e,n,r);i[r]?i[r].p(s,a):(i[r]=al(s),i[r].c(),i[r].m(t,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){e&&_(t),M(i,e)}}}function al(e){let t,n,i,a;function s(...t){return e[21](e[31],...t)}function o(...t){return e[23](e[31],...t)}function l(...t){return e[25](e[31],...t)}return{c(){t=A("path"),L(t,"class","voronoi-cell svelte-169satm"),L(t,"d",n=e[1].renderCell(e[31]))},m(n,r){w(n,t,r),i||(a=[E(t,"mouseover",s),E(t,"mouseleave",e[22]),E(t,"focus",o),E(t,"blur",e[24]),E(t,"click",l)],i=!0)},p(i,a){e=i,2&a[0]&&n!==(n=e[1].renderCell(e[31]))&&L(t,"d",n)},d(e){e&&_(t),i=!1,r(a)}}}function rl(t){let n,i=t[0].length==t[2].length&&nl(t);return{c(){i&&i.c(),n=C()},m(e,t){i&&i.m(e,t),w(e,n,t)},p(e,t){e[0].length==e[2].length?i?i.p(e,t):(i=nl(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:e,o:e,d(e){i&&i.d(e),e&&_(n)}}}function sl(e,t,n){let i,a,r,s,o,l,c,u,d;const{data:f,width:p,height:g,custom:m,xScale:y,yScale:v}=G("LayerCake");h(e,f,(e=>n(2,d=e))),h(e,p,(e=>n(18,s=e))),h(e,g,(e=>n(17,r=e))),h(e,m,(e=>n(26,u=e))),h(e,y,(e=>n(20,l=e))),h(e,v,(e=>n(19,o=e)));const x=U();let{hover:$=!1}=t,{hovered:b=null}=t,{select:k=!1}=t,{selected:w=null}=t,_=u.coords;h(e,_,(e=>n(0,c=e)));let M=u.idKey;function T(e,t){$&&(n(12,b=t?t[M]:null),x("hover",{id:b,data:t,event:e}))}function A(e,t){k&&(n(13,w=t?t[M]:null),x("select",{id:w,data:t,event:e}))}return e.$$set=e=>{"hover"in e&&n(14,$=e.hover),"hovered"in e&&n(12,b=e.hovered),"select"in e&&n(15,k=e.select),"selected"in e&&n(13,w=e.selected)},e.$$.update=()=>{1572865&e.$$.dirty[0]&&n(16,i=Array.isArray(c)?c.map((e=>[l(e.x),o(e.y)])):[]),458752&e.$$.dirty[0]&&n(1,a=el.from(i).voronoi([0,0,s,r]))},[c,a,d,f,p,g,m,y,v,_,T,A,b,w,$,k,i,r,s,o,l,(e,t)=>T(t,d[e]),e=>T(e,null),(e,t)=>T(t,d[e]),e=>T(e,null),(e,t)=>A(t,d[e])]}class ol extends _e{constructor(e){super(),we(this,e,sl,rl,o,{hover:14,hovered:12,select:15,selected:13},null,[-1,-1])}}const ll=e=>({}),cl=e=>({}),ul=e=>({}),hl=e=>({}),dl=e=>({}),fl=e=>({}),pl=e=>({}),gl=e=>({});function ml(e){let t,n;return t=new Zs({props:{$$slots:{default:[yl]},$$scope:{ctx:e}}}),{c(){xe(t.$$.fragment)},m(e,i){$e(t,e,i),n=!0},p(e,n){const i={};4194304&n[0]|134217728&n[1]&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function yl(e){let t;return{c(){t=N(e[22])},m(e,n){w(e,t,n)},p(e,n){4194304&n[0]&&R(t,e[22])},d(e){e&&_(t)}}}function vl(e){let t,n,i,a,r,s;t=new Ns({});const o=e[54].back,l=d(o,e,e[58],fl);a=new Pa({props:{pointerEvents:e[30],$$slots:{default:[kl]},$$scope:{ctx:e}}});const c=e[54].front,u=d(c,e,e[58],cl);return{c(){xe(t.$$.fragment),n=S(),l&&l.c(),i=S(),xe(a.$$.fragment),r=S(),u&&u.c()},m(e,o){$e(t,e,o),w(e,n,o),l&&l.m(e,o),w(e,i,o),$e(a,e,o),w(e,r,o),u&&u.m(e,o),s=!0},p(e,t){l&&l.p&&(!s||134217728&t[1])&&g(l,o,e,e[58],s?p(o,e[58],t,dl):m(e[58]),fl);const n={};1073741824&t[0]&&(n.pointerEvents=e[30]),37740609&t[0]|134221487&t[1]&&(n.$$scope={dirty:t,ctx:e}),a.$set(n),u&&u.p&&(!s||134217728&t[1])&&g(u,c,e,e[58],s?p(c,e[58],t,ll):m(e[58]),cl)},i(e){s||(he(t.$$.fragment,e),he(l,e),he(a.$$.fragment,e),he(u,e),s=!0)},o(e){de(t.$$.fragment,e),de(l,e),de(a.$$.fragment,e),de(u,e),s=!1},d(e){be(t,e),e&&_(n),l&&l.d(e),e&&_(i),be(a,e),e&&_(r),u&&u.d(e)}}}function xl(e){let t,n;return t=new zs({props:{ticks:e[17],formatTick:e[13],snapTicks:e[25],prefix:e[31],suffix:e[32],textColor:e[19],tickColor:e[20],tickDashed:e[21]}}),{c(){xe(t.$$.fragment)},m(e,i){$e(t,e,i),n=!0},p(e,n){const i={};131072&n[0]&&(i.ticks=e[17]),8192&n[0]&&(i.formatTick=e[13]),33554432&n[0]&&(i.snapTicks=e[25]),1&n[1]&&(i.prefix=e[31]),2&n[1]&&(i.suffix=e[32]),524288&n[0]&&(i.textColor=e[19]),1048576&n[0]&&(i.tickColor=e[20]),2097152&n[0]&&(i.tickDashed=e[21]),t.$set(i)},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function $l(e){let t,n;return t=new qs({props:{ticks:e[18],formatTick:e[14],prefix:e[33],suffix:e[34],textColor:e[19],tickColor:e[20],tickDashed:e[21]}}),{c(){xe(t.$$.fragment)},m(e,i){$e(t,e,i),n=!0},p(e,n){const i={};262144&n[0]&&(i.ticks=e[18]),16384&n[0]&&(i.formatTick=e[14]),4&n[1]&&(i.prefix=e[33]),8&n[1]&&(i.suffix=e[34]),524288&n[0]&&(i.textColor=e[19]),1048576&n[0]&&(i.tickColor=e[20]),2097152&n[0]&&(i.tickDashed=e[21]),t.$set(i)},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function bl(e){let t,n,i,a;function r(t){e[55](t)}function s(t){e[56](t)}let o={select:e[36],hover:Nl,highlighted:e[38]};return void 0!==e[0]&&(o.selected=e[0]),void 0!==e[41]&&(o.hovered=e[41]),t=new ol({props:o}),J.push((()=>ve(t,"selected",r))),J.push((()=>ve(t,"hovered",s))),t.$on("hover",e[46]),t.$on("select",e[57]),{c(){xe(t.$$.fragment)},m(e,n){$e(t,e,n),a=!0},p(e,a){const r={};32&a[1]&&(r.select=e[36]),128&a[1]&&(r.highlighted=e[38]),!n&&1&a[0]&&(n=!0,r.selected=e[0],ne((()=>n=!1))),!i&&1024&a[1]&&(i=!0,r.hovered=e[41],ne((()=>i=!1))),t.$set(r)},i(e){a||(he(t.$$.fragment,e),a=!0)},o(e){de(t.$$.fragment,e),a=!1},d(e){be(t,e)}}}function kl(e){let t,n,i,a,r,s,o,l=e[15]&&xl(e),c=e[16]&&e[6]&&$l(e);i=new Mo({props:{selected:e[0],hovered:e[41],placeLabel:e[42],highlighted:e[38],overlayFill:e[40]}});let u=(e[36]||Nl)&&bl(e),h=function(e){let t,n;return t=new po({props:{hovered:e[41],placeLabel:e[42],selected:e[0]}}),{c(){xe(t.$$.fragment)},m(e,i){$e(t,e,i),n=!0},p(e,n){const i={};1024&n[1]&&(i.hovered=e[41]),2048&n[1]&&(i.placeLabel=e[42]),1&n[0]&&(i.selected=e[0]),t.$set(i)},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}(e);const f=e[54].svg,y=d(f,e,e[58],hl);return{c(){l&&l.c(),t=S(),c&&c.c(),n=S(),xe(i.$$.fragment),a=S(),u&&u.c(),r=S(),h&&h.c(),s=S(),y&&y.c()},m(e,d){l&&l.m(e,d),w(e,t,d),c&&c.m(e,d),w(e,n,d),$e(i,e,d),w(e,a,d),u&&u.m(e,d),w(e,r,d),h&&h.m(e,d),w(e,s,d),y&&y.m(e,d),o=!0},p(e,a){e[15]?l?(l.p(e,a),32768&a[0]&&he(l,1)):(l=xl(e),l.c(),he(l,1),l.m(t.parentNode,t)):l&&(ce(),de(l,1,1,(()=>{l=null})),ue()),e[16]&&e[6]?c?(c.p(e,a),65600&a[0]&&he(c,1)):(c=$l(e),c.c(),he(c,1),c.m(n.parentNode,n)):c&&(ce(),de(c,1,1,(()=>{c=null})),ue());const s={};1&a[0]&&(s.selected=e[0]),1024&a[1]&&(s.hovered=e[41]),2048&a[1]&&(s.placeLabel=e[42]),128&a[1]&&(s.highlighted=e[38]),512&a[1]&&(s.overlayFill=e[40]),i.$set(s),e[36]||Nl?u?(u.p(e,a),32&a[1]&&he(u,1)):(u=bl(e),u.c(),he(u,1),u.m(r.parentNode,r)):u&&(ce(),de(u,1,1,(()=>{u=null})),ue()),h.p(e,a),y&&y.p&&(!o||134217728&a[1])&&g(y,f,e,e[58],o?p(f,e[58],a,ul):m(e[58]),hl)},i(e){o||(he(l),he(c),he(i.$$.fragment,e),he(u),he(h),he(y,e),o=!0)},o(e){de(l),de(c),de(i.$$.fragment,e),de(u),de(h),de(y,e),o=!1},d(e){l&&l.d(e),e&&_(t),c&&c.d(e),e&&_(n),be(i,e),e&&_(a),u&&u.d(e),e&&_(r),h&&h.d(e),e&&_(s),y&&y.d(e)}}}function wl(e){let t,n,i=e[65]>80&&vl(e);return{c(){i&&i.c(),t=C()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,n){e[65]>80?i?(i.p(e,n),8&n[2]&&he(i,1)):(i=vl(e),i.c(),he(i,1),i.m(t.parentNode,t)):i&&(ce(),de(i,1,1,(()=>{i=null})),ue())},i(e){n||(he(i),n=!0)},o(e){de(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function _l(e){let t,n;return t=new Ys({props:{domain:e[44],colors:e[28],markerLength:13,round:!0}}),{c(){xe(t.$$.fragment)},m(e,i){$e(t,e,i),n=!0},p(e,n){const i={};8192&n[1]&&(i.domain=e[44]),268435456&n[0]&&(i.colors=e[28]),t.$set(i)},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function Ml(e){let t,n;return t=new eo({props:{$$slots:{default:[Tl]},$$scope:{ctx:e}}}),{c(){xe(t.$$.fragment)},m(e,i){$e(t,e,i),n=!0},p(e,n){const i={};8388608&n[0]|134217728&n[1]&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function Tl(e){let t;return{c(){t=N(e[23])},m(e,n){w(e,t,n)},p(e,n){8388608&n[0]&&R(t,e[23])},d(e){e&&_(t)}}}function Al(e){let t,n,i,a,r,s,o,l,c=e[22]&&ml(e);const u=e[54].options,h=d(u,e,e[58],gl);a=new Ma({props:{padding:e[26],x:e[5],y:e[6],z:e[7],r:e[8],xScale:"log"==e[11]?bs():ys(),yScale:"log"==e[12]?bs():ys(),zScale:Xa(),xDomain:e[43],yDomain:e[45],zDomain:e[44],zRange:e[28],rRange:Array.isArray(e[29])?e[29]:[e[29],e[29]],data:e[1],xPadding:[e[27],e[27]],yPadding:e[6]?[e[27],e[27]]:null,custom:{type:"scatter",idKey:e[9],labelKey:e[10],coords:e[47],colorSelect:e[37],colorHover:e[35],colorHighlight:e[39],padding:1,animation:e[3],duration:e[4]},$$slots:{default:[wl,({width:e})=>({65:e}),({width:e})=>[0,0,e?8:0]]},$$scope:{ctx:e}}});let f=e[24]&&e[44]&&_l(e),y=e[23]&&Ml(e);return{c(){c&&c.c(),t=S(),h&&h.c(),n=S(),i=T("div"),xe(a.$$.fragment),r=S(),f&&f.c(),s=S(),y&&y.c(),o=C(),L(i,"class","chart-container svelte-1dnlmiu"),z(i,"height","number"==typeof e[2]?e[2]+"px":e[2])},m(e,u){c&&c.m(e,u),w(e,t,u),h&&h.m(e,u),w(e,n,u),w(e,i,u),$e(a,i,null),w(e,r,u),f&&f.m(e,u),w(e,s,u),y&&y.m(e,u),w(e,o,u),l=!0},p(e,n){e[22]?c?(c.p(e,n),4194304&n[0]&&he(c,1)):(c=ml(e),c.c(),he(c,1),c.m(t.parentNode,t)):c&&(ce(),de(c,1,1,(()=>{c=null})),ue()),h&&h.p&&(!l||134217728&n[1])&&g(h,u,e,e[58],l?p(u,e[58],n,pl):m(e[58]),gl);const r={};67108864&n[0]&&(r.padding=e[26]),32&n[0]&&(r.x=e[5]),64&n[0]&&(r.y=e[6]),128&n[0]&&(r.z=e[7]),256&n[0]&&(r.r=e[8]),2048&n[0]&&(r.xScale="log"==e[11]?bs():ys()),4096&n[0]&&(r.yScale="log"==e[12]?bs():ys()),4096&n[1]&&(r.xDomain=e[43]),16384&n[1]&&(r.yDomain=e[45]),8192&n[1]&&(r.zDomain=e[44]),268435456&n[0]&&(r.zRange=e[28]),536870912&n[0]&&(r.rRange=Array.isArray(e[29])?e[29]:[e[29],e[29]]),2&n[0]&&(r.data=e[1]),134217728&n[0]&&(r.xPadding=[e[27],e[27]]),134217792&n[0]&&(r.yPadding=e[6]?[e[27],e[27]]:null),1560&n[0]|336&n[1]&&(r.custom={type:"scatter",idKey:e[9],labelKey:e[10],coords:e[47],colorSelect:e[37],colorHover:e[35],colorHighlight:e[39],padding:1,animation:e[3],duration:e[4]}),1111482433&n[0]|134221487&n[1]|8&n[2]&&(r.$$scope={dirty:n,ctx:e}),a.$set(r),(!l||4&n[0])&&z(i,"height","number"==typeof e[2]?e[2]+"px":e[2]),e[24]&&e[44]?f?(f.p(e,n),16777216&n[0]|8192&n[1]&&he(f,1)):(f=_l(e),f.c(),he(f,1),f.m(s.parentNode,s)):f&&(ce(),de(f,1,1,(()=>{f=null})),ue()),e[23]?y?(y.p(e,n),8388608&n[0]&&he(y,1)):(y=Ml(e),y.c(),he(y,1),y.m(o.parentNode,o)):y&&(ce(),de(y,1,1,(()=>{y=null})),ue())},i(e){l||(he(c),he(h,e),he(a.$$.fragment,e),he(f),he(y),l=!0)},o(e){de(c),de(h,e),de(a.$$.fragment,e),de(f),de(y),l=!1},d(e){c&&c.d(e),e&&_(t),h&&h.d(e),e&&_(n),e&&_(i),be(a),e&&_(r),f&&f.d(e),e&&_(s),y&&y.d(e),e&&_(o)}}}let Nl=!0;function Sl(e,t,n,i){let a=e.map((e=>e[t]));return[n||(a[0]?Math.min(...a):-1),i||(a[0]?Math.max(...a):1)]}function Cl(e,t,n){let i,a,{$$slots:r={},$$scope:s}=t,{data:o}=t,{height:l=250}=t,{animation:c=!1}=t,{duration:u=800}=t,{xKey:d="x"}=t,{yKey:f=null}=t,{zKey:p=null}=t,{rKey:g=null}=t,{idKey:m=d}=t,{labelKey:y=m}=t,{xScale:v="linear"}=t,{yScale:x="linear"}=t,{xFormatTick:$=(e=>e)}=t,{yFormatTick:b=(e=>e)}=t,{xMax:k=null}=t,{xMin:w=null}=t,{yMax:_=null}=t,{yMin:M=null}=t,{xAxis:T=!0}=t,{yAxis:A=!0}=t,{xTicks:N=4}=t,{yTicks:S=4}=t,{textColor:C="#666"}=t,{tickColor:E="#ccc"}=t,{tickDashed:L=!1}=t,{title:R=null}=t,{footer:j=null}=t,{legend:z=!1}=t,{snapTicks:D=!1}=t,{padding:P={top:0,bottom:20,left:35,right:0}}=t,{buffer:F=5}=t,{color:I=null}=t,{colors:W=(I?[I]:["#3C388E","#DF0667","#00A3A6","#206095","#A8BD3A","#003C57","#27A0CC","#118C7B","#F66068","#746CB1","#22D0B6","lightgrey"])}=t,{r:O=4}=t,{interactive:q=!0}=t,{xPrefix:K=""}=t,{xSuffix:B=""}=t,{yPrefix:U=""}=t,{ySuffix:H=""}=t,{colorHover:G="orange"}=t,{select:V=!1}=t,{selected:J=null}=t,{colorSelect:Z="black"}=t,{highlighted:X=[]}=t,{colorHighlight:Q="black"}=t,{overlayFill:ee=!1}=t,te=null,ne=!0;const ie={duration:u,easing:ks},ae=Ms(void 0,ie),re=(e,t,n)=>n.indexOf(e)==t;let se=Sl(o,d,w,k);const oe=Ms(se,ie);let le=Sl(o,f,M,_);const ce=Ms(le,ie);return h(e,ce,(e=>n(45,a=e))),e.$$set=e=>{"data"in e&&n(1,o=e.data),"height"in e&&n(2,l=e.height),"animation"in e&&n(3,c=e.animation),"duration"in e&&n(4,u=e.duration),"xKey"in e&&n(5,d=e.xKey),"yKey"in e&&n(6,f=e.yKey),"zKey"in e&&n(7,p=e.zKey),"rKey"in e&&n(8,g=e.rKey),"idKey"in e&&n(9,m=e.idKey),"labelKey"in e&&n(10,y=e.labelKey),"xScale"in e&&n(11,v=e.xScale),"yScale"in e&&n(12,x=e.yScale),"xFormatTick"in e&&n(13,$=e.xFormatTick),"yFormatTick"in e&&n(14,b=e.yFormatTick),"xMax"in e&&n(49,k=e.xMax),"xMin"in e&&n(50,w=e.xMin),"yMax"in e&&n(51,_=e.yMax),"yMin"in e&&n(52,M=e.yMin),"xAxis"in e&&n(15,T=e.xAxis),"yAxis"in e&&n(16,A=e.yAxis),"xTicks"in e&&n(17,N=e.xTicks),"yTicks"in e&&n(18,S=e.yTicks),"textColor"in e&&n(19,C=e.textColor),"tickColor"in e&&n(20,E=e.tickColor),"tickDashed"in e&&n(21,L=e.tickDashed),"title"in e&&n(22,R=e.title),"footer"in e&&n(23,j=e.footer),"legend"in e&&n(24,z=e.legend),"snapTicks"in e&&n(25,D=e.snapTicks),"padding"in e&&n(26,P=e.padding),"buffer"in e&&n(27,F=e.buffer),"color"in e&&n(53,I=e.color),"colors"in e&&n(28,W=e.colors),"r"in e&&n(29,O=e.r),"interactive"in e&&n(30,q=e.interactive),"xPrefix"in e&&n(31,K=e.xPrefix),"xSuffix"in e&&n(32,B=e.xSuffix),"yPrefix"in e&&n(33,U=e.yPrefix),"ySuffix"in e&&n(34,H=e.ySuffix),"colorHover"in e&&n(35,G=e.colorHover),"select"in e&&n(36,V=e.select),"selected"in e&&n(0,J=e.selected),"colorSelect"in e&&n(37,Z=e.colorSelect),"highlighted"in e&&n(38,X=e.highlighted),"colorHighlight"in e&&n(39,Q=e.colorHighlight),"overlayFill"in e&&n(40,ee=e.overlayFill),"$$scope"in e&&n(58,s=e.$$scope)},e.$$.update=()=>{34&e.$$.dirty[0]|786432&e.$$.dirty[1]&&function(e,t,i,a){let r=Sl(e,t,i,a);r[0]==se[0]&&r[1]==se[1]||(oe.set(r),n(43,se=r))}(o,d,w,k),66&e.$$.dirty[0]|3145728&e.$$.dirty[1]&&function(e,t,n,i){let a=t?Sl(e,t,n,i):le;a[0]==le[0]&&a[1]==le[1]||(ce.set(a,{duration:c?u:0}),le=a)}(o,f,M,_),130&e.$$.dirty[0]&&n(44,i=p?o.map((e=>e[p])).filter(re):null)},[J,o,l,c,u,d,f,p,g,m,y,v,x,$,b,T,A,N,S,C,E,L,R,j,z,D,P,F,W,O,q,K,B,U,H,G,V,Z,X,Q,ee,te,ne,se,i,a,function(e){n(41,te=e.detail.id),te&&n(42,ne=e.detail.data.unique)},ae,ce,k,w,_,M,I,r,function(e){J=e,n(0,J)},function(e){te=e,n(41,te)},function(t){Y.call(this,e,t)},s]}class El extends _e{constructor(e){super(),we(this,e,Cl,Al,o,{data:1,height:2,animation:3,duration:4,xKey:5,yKey:6,zKey:7,rKey:8,idKey:9,labelKey:10,xScale:11,yScale:12,xFormatTick:13,yFormatTick:14,xMax:49,xMin:50,yMax:51,yMin:52,xAxis:15,yAxis:16,xTicks:17,yTicks:18,textColor:19,tickColor:20,tickDashed:21,title:22,footer:23,legend:24,snapTicks:25,padding:26,buffer:27,color:53,colors:28,r:29,interactive:30,xPrefix:31,xSuffix:32,yPrefix:33,ySuffix:34,colorHover:35,select:36,selected:0,colorSelect:37,highlighted:38,colorHighlight:39,overlayFill:40},null,[-1,-1,-1])}get data(){return this.$$.ctx[1]}set data(e){this.$$set({data:e}),re()}get height(){return this.$$.ctx[2]}set height(e){this.$$set({height:e}),re()}get animation(){return this.$$.ctx[3]}set animation(e){this.$$set({animation:e}),re()}get duration(){return this.$$.ctx[4]}set duration(e){this.$$set({duration:e}),re()}get xKey(){return this.$$.ctx[5]}set xKey(e){this.$$set({xKey:e}),re()}get yKey(){return this.$$.ctx[6]}set yKey(e){this.$$set({yKey:e}),re()}get zKey(){return this.$$.ctx[7]}set zKey(e){this.$$set({zKey:e}),re()}get rKey(){return this.$$.ctx[8]}set rKey(e){this.$$set({rKey:e}),re()}get idKey(){return this.$$.ctx[9]}set idKey(e){this.$$set({idKey:e}),re()}get labelKey(){return this.$$.ctx[10]}set labelKey(e){this.$$set({labelKey:e}),re()}get xScale(){return this.$$.ctx[11]}set xScale(e){this.$$set({xScale:e}),re()}get yScale(){return this.$$.ctx[12]}set yScale(e){this.$$set({yScale:e}),re()}get xFormatTick(){return this.$$.ctx[13]}set xFormatTick(e){this.$$set({xFormatTick:e}),re()}get yFormatTick(){return this.$$.ctx[14]}set yFormatTick(e){this.$$set({yFormatTick:e}),re()}get xMax(){return this.$$.ctx[49]}set xMax(e){this.$$set({xMax:e}),re()}get xMin(){return this.$$.ctx[50]}set xMin(e){this.$$set({xMin:e}),re()}get yMax(){return this.$$.ctx[51]}set yMax(e){this.$$set({yMax:e}),re()}get yMin(){return this.$$.ctx[52]}set yMin(e){this.$$set({yMin:e}),re()}get xAxis(){return this.$$.ctx[15]}set xAxis(e){this.$$set({xAxis:e}),re()}get yAxis(){return this.$$.ctx[16]}set yAxis(e){this.$$set({yAxis:e}),re()}get xTicks(){return this.$$.ctx[17]}set xTicks(e){this.$$set({xTicks:e}),re()}get yTicks(){return this.$$.ctx[18]}set yTicks(e){this.$$set({yTicks:e}),re()}get textColor(){return this.$$.ctx[19]}set textColor(e){this.$$set({textColor:e}),re()}get tickColor(){return this.$$.ctx[20]}set tickColor(e){this.$$set({tickColor:e}),re()}get tickDashed(){return this.$$.ctx[21]}set tickDashed(e){this.$$set({tickDashed:e}),re()}get title(){return this.$$.ctx[22]}set title(e){this.$$set({title:e}),re()}get footer(){return this.$$.ctx[23]}set footer(e){this.$$set({footer:e}),re()}get legend(){return this.$$.ctx[24]}set legend(e){this.$$set({legend:e}),re()}get snapTicks(){return this.$$.ctx[25]}set snapTicks(e){this.$$set({snapTicks:e}),re()}get padding(){return this.$$.ctx[26]}set padding(e){this.$$set({padding:e}),re()}get buffer(){return this.$$.ctx[27]}set buffer(e){this.$$set({buffer:e}),re()}get color(){return this.$$.ctx[53]}set color(e){this.$$set({color:e}),re()}get colors(){return this.$$.ctx[28]}set colors(e){this.$$set({colors:e}),re()}get r(){return this.$$.ctx[29]}set r(e){this.$$set({r:e}),re()}get interactive(){return this.$$.ctx[30]}set interactive(e){this.$$set({interactive:e}),re()}get xPrefix(){return this.$$.ctx[31]}set xPrefix(e){this.$$set({xPrefix:e}),re()}get xSuffix(){return this.$$.ctx[32]}set xSuffix(e){this.$$set({xSuffix:e}),re()}get yPrefix(){return this.$$.ctx[33]}set yPrefix(e){this.$$set({yPrefix:e}),re()}get ySuffix(){return this.$$.ctx[34]}set ySuffix(e){this.$$set({ySuffix:e}),re()}get colorHover(){return this.$$.ctx[35]}set colorHover(e){this.$$set({colorHover:e}),re()}get select(){return this.$$.ctx[36]}set select(e){this.$$set({select:e}),re()}get selected(){return this.$$.ctx[0]}set selected(e){this.$$set({selected:e}),re()}get colorSelect(){return this.$$.ctx[37]}set colorSelect(e){this.$$set({colorSelect:e}),re()}get highlighted(){return this.$$.ctx[38]}set highlighted(e){this.$$set({highlighted:e}),re()}get colorHighlight(){return this.$$.ctx[39]}set colorHighlight(e){this.$$set({colorHighlight:e}),re()}get overlayFill(){return this.$$.ctx[40]}set overlayFill(e){this.$$set({overlayFill:e}),re()}}function Ll(e,t,n){const i=e.slice();return i[23]=t[n],i[25]=n,i}function Rl(e){let t,n,i=e[15],a=[];for(let t=0;t<i.length;t+=1)a[t]=Pl(Ll(e,i,t));return{c(){t=A("g");for(let e=0;e<a.length;e+=1)a[e].c();L(t,"class","axis y-axis"),L(t,"transform",n="translate("+-e[16].left+", 0)")},m(e,n){w(e,t,n);for(let e=0;e<a.length;e+=1)a[e].m(t,null)},p(e,r){if(258047&r){let n;for(i=e[15],n=0;n<i.length;n+=1){const s=Ll(e,i,n);a[n]?a[n].p(s,r):(a[n]=Pl(s),a[n].c(),a[n].m(t,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=i.length}65536&r&&n!==(n="translate("+-e[16].left+", 0)")&&L(t,"transform",n)},d(e){e&&_(t),M(a,e)}}}function jl(e){let t,n,i;return{c(){t=A("line"),L(t,"x2","100%"),L(t,"y1",n=e[5]+(e[13]?e[14].bandwidth()/2:0)),L(t,"y2",i=e[5]+(e[13]?e[14].bandwidth()/2:0)),L(t,"stroke",e[9]),L(t,"class","svelte-1ypvook"),I(t,"baseline",e[11])},m(e,n){w(e,t,n)},p(e,a){24608&a&&n!==(n=e[5]+(e[13]?e[14].bandwidth()/2:0))&&L(t,"y1",n),24608&a&&i!==(i=e[5]+(e[13]?e[14].bandwidth()/2:0))&&L(t,"y2",i),512&a&&L(t,"stroke",e[9]),2048&a&&I(t,"baseline",e[11])},d(e){e&&_(t)}}}function zl(e){let t,n=e[3](e[23])+"";return{c(){t=N(n)},m(e,n){w(e,t,n)},p(e,i){32776&i&&n!==(n=e[3](e[23])+"")&&R(t,n)},d(e){e&&_(t)}}}function Dl(e){let t,n,i,a=e[3](e[23])+"";return{c(){t=N(e[0]),n=N(a),i=N(e[1])},m(e,a){w(e,t,a),w(e,n,a),w(e,i,a)},p(e,r){1&r&&R(t,e[0]),32776&r&&a!==(a=e[3](e[23])+"")&&R(n,a),2&r&&R(i,e[1])},d(e){e&&_(t),e&&_(n),e&&_(i)}}}function Pl(e){let t,n,i,a,r,s,o,l,c=!1!==e[2]&&jl(e);function u(e,t){return e[25]==e[15].length-1?Dl:zl}let h=u(e),d=h(e);return{c(){t=A("g"),c&&c.c(),n=A("text"),d.c(),L(n,"x",i=e[4]-10),L(n,"y",a=e[5]+(e[13]?e[14].bandwidth()/2:0)-3),L(n,"dx",r=e[13]?3:e[6]),L(n,"dy",s=e[13]?4:e[7]),L(n,"fill",e[10]),z(n,"text-anchor",e[13]?"end":e[8]),L(t,"class",o="tick tick-"+e[23]+" svelte-1ypvook"),L(t,"transform",l="translate("+(e[17][0]+(e[13]?e[16].left:0))+", "+e[14](e[23])+")")},m(e,i){w(e,t,i),c&&c.m(t,null),k(t,n),d.m(n,null)},p(e,f){!1!==e[2]?c?c.p(e,f):(c=jl(e),c.c(),c.m(t,n)):c&&(c.d(1),c=null),h===(h=u(e))&&d?d.p(e,f):(d.d(1),d=h(e),d&&(d.c(),d.m(n,null))),16&f&&i!==(i=e[4]-10)&&L(n,"x",i),24608&f&&a!==(a=e[5]+(e[13]?e[14].bandwidth()/2:0)-3)&&L(n,"y",a),8256&f&&r!==(r=e[13]?3:e[6])&&L(n,"dx",r),8320&f&&s!==(s=e[13]?4:e[7])&&L(n,"dy",s),1024&f&&L(n,"fill",e[10]),8448&f&&z(n,"text-anchor",e[13]?"end":e[8]),32768&f&&o!==(o="tick tick-"+e[23]+" svelte-1ypvook")&&L(t,"class",o),253952&f&&l!==(l="translate("+(e[17][0]+(e[13]?e[16].left:0))+", "+e[14](e[23])+")")&&L(t,"transform",l)},d(e){e&&_(t),c&&c.d(),d.d()}}}function Fl(t){let n,i=0==t[12]&&Rl(t);return{c(){i&&i.c(),n=C()},m(e,t){i&&i.m(e,t),w(e,n,t)},p(e,[t]){0==e[12]?i?i.p(e,t):(i=Rl(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:e,o:e,d(e){i&&i.d(e),e&&_(n)}}}function Il(e,t,n){let i,a,r,s,o;const{padding:l,xRange:c,xScale:u,yScale:d}=G("LayerCake");h(e,l,(e=>n(16,s=e))),h(e,c,(e=>n(17,o=e))),h(e,d,(e=>n(14,r=e)));let{ticks:f=4}=t,{prefix:p=""}=t,{suffix:g=""}=t,{gridlines:m=!1}=t,{formatTick:y=(e=>e)}=t,{xTick:v=0}=t,{yTick:x=0}=t,{dxTick:$=0}=t,{dyTick:b=-4}=t,{textAnchor:k="start"}=t,{lineColor:w="#aaa"}=t,{textColor:_="#666"}=t,{solid:M=!1}=t,{nu:T}=t;return e.$$set=e=>{"ticks"in e&&n(21,f=e.ticks),"prefix"in e&&n(0,p=e.prefix),"suffix"in e&&n(1,g=e.suffix),"gridlines"in e&&n(2,m=e.gridlines),"formatTick"in e&&n(3,y=e.formatTick),"xTick"in e&&n(4,v=e.xTick),"yTick"in e&&n(5,x=e.yTick),"dxTick"in e&&n(6,$=e.dxTick),"dyTick"in e&&n(7,b=e.dyTick),"textAnchor"in e&&n(8,k=e.textAnchor),"lineColor"in e&&n(9,w=e.lineColor),"textColor"in e&&n(10,_=e.textColor),"solid"in e&&n(11,M=e.solid),"nu"in e&&n(12,T=e.nu)},e.$$.update=()=>{16384&e.$$.dirty&&n(13,i="function"==typeof r.bandwidth),2121728&e.$$.dirty&&n(15,a=Array.isArray(f)?f:i?r.domain():r.ticks(f))},[p,g,m,y,v,x,$,b,k,w,_,M,T,i,r,a,s,o,l,c,d,f]}class Wl extends _e{constructor(e){super(),we(this,e,Il,Fl,o,{ticks:21,prefix:0,suffix:1,gridlines:2,formatTick:3,xTick:4,yTick:5,dxTick:6,dyTick:7,textAnchor:8,lineColor:9,textColor:10,solid:11,nu:12})}}function Ol(e){let t;return{c(){t=A("line"),L(t,"class","baseline svelte-ej8ad5"),L(t,"y1",e[9]),L(t,"y2","0"),L(t,"x1","0"),L(t,"x2","0"),L(t,"stroke",e[5])},m(e,n){w(e,t,n)},p(e,n){512&n&&L(t,"y1",e[9]),32&n&&L(t,"stroke",e[5])},d(e){e&&_(t)}}}function ql(t){let n,i,a,r,s,o,l,c,u,h,d=!0===t[0]&&Ol(t);return{c(){n=A("g"),i=A("g"),a=A("line"),o=A("text"),l=N("15%\n\t"),d&&d.c(),L(a,"y1",r=-1*t[9]),L(a,"y2",s=-1*t[9]+t[9]),L(a,"x1","0"),L(a,"x2","0"),L(a,"stroke",t[5]),L(a,"class","svelte-ej8ad5"),I(a,"baseline",t[6]),L(o,"x",c=t[1]||t[7]?t[8].bandwidth()/2:0),L(o,"y",t[2]),L(o,"dx",u="start"==t[12](15)?t[3]-2:"end"==t[12](15)?t[3]+2:t[3]),L(o,"dy",t[4]),L(o,"text-anchor",t[12](15)),L(o,"fill",t[5]),L(i,"class","tick svelte-ej8ad5"),L(i,"transform",h="translate("+t[8](15)+","+t[9]+")"),L(n,"class","axis x-axis")},m(e,t){w(e,n,t),k(n,i),k(i,a),k(i,o),k(o,l),d&&d.m(n,null)},p(e,[t]){512&t&&r!==(r=-1*e[9])&&L(a,"y1",r),512&t&&s!==(s=-1*e[9]+e[9])&&L(a,"y2",s),32&t&&L(a,"stroke",e[5]),64&t&&I(a,"baseline",e[6]),386&t&&c!==(c=e[1]||e[7]?e[8].bandwidth()/2:0)&&L(o,"x",c),4&t&&L(o,"y",e[2]),8&t&&u!==(u="start"==e[12](15)?e[3]-2:"end"==e[12](15)?e[3]+2:e[3])&&L(o,"dx",u),16&t&&L(o,"dy",e[4]),32&t&&L(o,"fill",e[5]),768&t&&h!==(h="translate("+e[8](15)+","+e[9]+")")&&L(i,"transform",h),!0===e[0]?d?d.p(e,t):(d=Ol(e),d.c(),d.m(n,null)):d&&(d.d(1),d=null)},i:e,o:e,d(e){e&&_(n),d&&d.d()}}}function Kl(e,t,n){let i,a,r,s;const{data:o,width:l,height:c,xScale:u,yScale:d,yRange:f}=G("LayerCake");h(e,c,(e=>n(9,s=e))),h(e,u,(e=>n(8,r=e)));let{gridlines:p=!0}=t,{formatTick:g=(e=>e)}=t,{baseline:m=!1}=t,{flipped:y=!1}=t,{snapTicks:v=!1}=t,{ticks:x}=t,{prefix:$=""}=t,{suffix:b=""}=t,{xTick:k}=t,{yTick:w=15}=t,{dxTick:_=0}=t,{dyTick:M=0}=t,{lineColor:T="#aaa"}=t,{textColor:A="#666"}=t,{solid:N=!1}=t;return e.$$set=e=>{"gridlines"in e&&n(13,p=e.gridlines),"formatTick"in e&&n(14,g=e.formatTick),"baseline"in e&&n(0,m=e.baseline),"flipped"in e&&n(15,y=e.flipped),"snapTicks"in e&&n(16,v=e.snapTicks),"ticks"in e&&n(17,x=e.ticks),"prefix"in e&&n(18,$=e.prefix),"suffix"in e&&n(19,b=e.suffix),"xTick"in e&&n(1,k=e.xTick),"yTick"in e&&n(2,w=e.yTick),"dxTick"in e&&n(3,_=e.dxTick),"dyTick"in e&&n(4,M=e.dyTick),"lineColor"in e&&n(5,T=e.lineColor),"textColor"in e&&n(20,A=e.textColor),"solid"in e&&n(6,N=e.solid)},e.$$.update=()=>{256&e.$$.dirty&&n(7,i="function"==typeof r.bandwidth),131456&e.$$.dirty&&(a=Array.isArray(x)?x:i?r.domain():r.ticks(x))},[m,k,w,_,M,T,N,i,r,s,c,u,function(e){if(!0===v){if(0===e)return"start";if(e===a.length-1)return"end"}return"middle"},p,g,y,v,x,$,b,A]}class Bl extends _e{constructor(e){super(),we(this,e,Kl,ql,o,{gridlines:13,formatTick:14,baseline:0,flipped:15,snapTicks:16,ticks:17,prefix:18,suffix:19,xTick:1,yTick:2,dxTick:3,dyTick:4,lineColor:5,textColor:20,solid:6})}}function Ul(t){let n,i,a,r,s,o=t[0][t[1]]+"";return{c(){n=A("rect"),i=S(),a=A("foreignObject"),r=T("div"),s=N(o),L(n,"x","0"),L(n,"y","0"),L(n,"width","140"),L(n,"height","20"),L(n,"fill","none"),z(r,"position","absolute"),z(r,"bottom","0"),L(r,"class","svelte-16861pb"),L(a,"x","5"),L(a,"y","-50"),L(a,"width","100"),L(a,"height","40")},m(e,t){w(e,n,t),w(e,i,t),w(e,a,t),k(a,r),k(r,s)},p(e,[t]){3&t&&o!==(o=e[0][e[1]]+"")&&R(s,o)},i:e,o:e,d(e){e&&_(n),e&&_(i),e&&_(a)}}}function Hl(e,t,n){let{labels:i}=t,{nu:a}=t;return G("LayerCake"),i[a].split(" "),e.$$set=e=>{"labels"in e&&n(0,i=e.labels),"nu"in e&&n(1,a=e.nu)},[i,a]}class Gl extends _e{constructor(e){super(),we(this,e,Hl,Ul,o,{labels:0,nu:1})}}function Yl(e){let t,n=e[0].detail.data&&Vl(e);return{c(){n&&n.c(),t=C()},m(e,i){n&&n.m(e,i),w(e,t,i)},p(e,i){e[0].detail.data?n?n.p(e,i):(n=Vl(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&_(t)}}}function Vl(e){let t,n,i,a,r,s,o,l=Math.round(10*e[0].detail.data.y)/10+"% aged "+e[0].detail.data.x+" in "+e[0].detail.data.g;return{c(){t=A("g"),n=A("rect"),a=A("text"),r=N(l),L(n,"fill","rgba(255,255,255,0.9)"),L(n,"x",-20),L(n,"y",i=e[1](e[0].detail.data)+(2021==e[0].detail.data.g?10:0)-10),L(n,"transform","translate(5,-25)"),L(n,"width","170"),L(n,"height","25"),L(n,"rx","15"),L(a,"class","label-bold svelte-gjdahk"),L(a,"transform","translate(0,-7)"),L(a,"fill","#333"),L(a,"x",s=10),L(a,"y",o=e[1](e[0].detail.data)+(2021==e[0].detail.data.g?10:0)-10),L(t,"class","label-group")},m(e,i){w(e,t,i),k(t,n),k(t,a),k(a,r)},p(e,t){3&t&&i!==(i=e[1](e[0].detail.data)+(2021==e[0].detail.data.g?10:0)-10)&&L(n,"y",i),1&t&&l!==(l=Math.round(10*e[0].detail.data.y)/10+"% aged "+e[0].detail.data.x+" in "+e[0].detail.data.g)&&R(r,l),3&t&&o!==(o=e[1](e[0].detail.data)+(2021==e[0].detail.data.g?10:0)-10)&&L(a,"y",o)},d(e){e&&_(t)}}}function Jl(t){let n,i=t[0].detail&&Yl(t);return{c(){i&&i.c(),n=C()},m(e,t){i&&i.m(e,t),w(e,n,t)},p(e,[t]){e[0].detail?i?i.p(e,t):(i=Yl(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:e,o:e,d(e){i&&i.d(e),e&&_(n)}}}function Zl(e,t,n){let i;const{data:a,xScale:r,yScale:s,xDomain:o,y:l,xGet:c,yGet:u,Domain:d,custom:f}=G("LayerCake");h(e,u,(e=>n(1,i=e)));let{hovered:p=null}=t,{ageLabel:g=null}=t;return e.$$set=e=>{"hovered"in e&&n(3,p=e.hovered),"ageLabel"in e&&n(0,g=e.ageLabel)},[g,i,u,p]}class Xl extends _e{constructor(e){super(),we(this,e,Zl,Jl,o,{hovered:3,ageLabel:0})}}function Ql(e,t,n){const i=e.slice();return i[16]=t[n],i[18]=n,i}function ec(e,t,n){const i=e.slice();return i[19]=t[n],i[21]=n,i}function tc(e){let t,n,i,a,s,o,l,c,u;function h(...t){return e[13](e[19],...t)}return{c(){t=A("rect"),L(t,"class","group-rect"),L(t,"data-id",e[21]),L(t,"x",n=e[2].range()[0]),L(t,"y",i=e[18]%2==0?e[3](e[19]):e[3](e[19])+12),L(t,"rx",5),L(t,"height",a=e[4].bandwidth()/2.3),L(t,"width",s=e[5](e[19])),L(t,"fill",e[18]%2==0?"#DF0667":"#3C388E"),L(t,"stroke",o=e[19]==e[0]?"orange":"white"),L(t,"stroke-width",l=e[19]==e[0]?"3":"2")},m(n,i){w(n,t,i),c||(u=[E(t,"mouseover",h),E(t,"mouseleave",e[14])],c=!0)},p(r,c){e=r,4&c&&n!==(n=e[2].range()[0])&&L(t,"x",n),10&c&&i!==(i=e[18]%2==0?e[3](e[19]):e[3](e[19])+12)&&L(t,"y",i),16&c&&a!==(a=e[4].bandwidth()/2.3)&&L(t,"height",a),34&c&&s!==(s=e[5](e[19]))&&L(t,"width",s),3&c&&o!==(o=e[19]==e[0]?"orange":"white")&&L(t,"stroke",o),3&c&&l!==(l=e[19]==e[0]?"3":"2")&&L(t,"stroke-width",l)},d(e){e&&_(t),c=!1,r(u)}}}function nc(e){let t,n=e[16],i=[];for(let t=0;t<n.length;t+=1)i[t]=tc(ec(e,n,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=C()},m(e,n){for(let t=0;t<i.length;t+=1)i[t].m(e,n);w(e,t,n)},p(e,a){if(2111&a){let r;for(n=e[16],r=0;r<n.length;r+=1){const s=ec(e,n,r);i[r]?i[r].p(s,a):(i[r]=tc(s),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){M(i,e),e&&_(t)}}}function ic(t){let n,i=t[1],a=[];for(let e=0;e<i.length;e+=1)a[e]=nc(Ql(t,i,e));return{c(){n=A("g");for(let e=0;e<a.length;e+=1)a[e].c();L(n,"class","bar-group")},m(e,t){w(e,n,t);for(let e=0;e<a.length;e+=1)a[e].m(n,null)},p(e,[t]){if(2111&t){let r;for(i=e[1],r=0;r<i.length;r+=1){const s=Ql(e,i,r);a[r]?a[r].p(s,t):(a[r]=nc(s),a[r].c(),a[r].m(n,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},i:e,o:e,d(e){e&&_(n),M(a,e)}}}function ac(e,t,n){let i,a,r,s,o;const{data:l,xGet:c,yGet:u,xScale:d,yScale:f}=G("LayerCake");h(e,l,(e=>n(1,i=e))),h(e,c,(e=>n(5,o=e))),h(e,u,(e=>n(3,r=e))),h(e,d,(e=>n(2,a=e))),h(e,f,(e=>n(4,s=e)));const p=U();let g,{hovered:m=null}=t;function y(e,t){n(0,g=t),p("hover",{data:t,event:e})}return e.$$set=e=>{"hovered"in e&&n(12,m=e.hovered)},[g,i,a,r,s,o,l,c,u,d,f,y,m,(e,t)=>y(t,e),e=>y(e,null)]}class rc extends _e{constructor(e){super(),we(this,e,ac,ic,o,{hovered:12})}}function sc(e){let t,n,i,a,r,s,o,l,c,u;return t=new Gl({props:{labels:e[1],nu:e[2]}}),i=new Wl({props:{nu:e[2]}}),r=new Bl({}),o=new rc({}),o.$on("hover",e[5]),c=new Xl({props:{hovered:e[3],ageLabel:e[4]}}),{c(){xe(t.$$.fragment),n=S(),xe(i.$$.fragment),a=S(),xe(r.$$.fragment),s=S(),xe(o.$$.fragment),l=S(),xe(c.$$.fragment)},m(e,h){$e(t,e,h),w(e,n,h),$e(i,e,h),w(e,a,h),$e(r,e,h),w(e,s,h),$e(o,e,h),w(e,l,h),$e(c,e,h),u=!0},p(e,n){const a={};2&n&&(a.labels=e[1]),4&n&&(a.nu=e[2]),t.$set(a);const r={};4&n&&(r.nu=e[2]),i.$set(r);const s={};8&n&&(s.hovered=e[3]),16&n&&(s.ageLabel=e[4]),c.$set(s)},i(e){u||(he(t.$$.fragment,e),he(i.$$.fragment,e),he(r.$$.fragment,e),he(o.$$.fragment,e),he(c.$$.fragment,e),u=!0)},o(e){de(t.$$.fragment,e),de(i.$$.fragment,e),de(r.$$.fragment,e),de(o.$$.fragment,e),de(c.$$.fragment,e),u=!1},d(e){be(t,e),e&&_(n),be(i,e),e&&_(a),be(r,e),e&&_(s),be(o,e),e&&_(l),be(c,e)}}}function oc(e){let t,n;return t=new Pa({props:{$$slots:{default:[sc]},$$scope:{ctx:e}}}),{c(){xe(t.$$.fragment)},m(e,i){$e(t,e,i),n=!0},p(e,n){const i={};1054&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function lc(e){let t,n;return t=new Ma({props:{ssr:!0,padding:{top:40,right:6,bottom:2,left:60},x:"y",y:"x",data:e[0],xScale:ys(),yScale:Qa().paddingInner([.05]).round(!0),xDomain:[0,15],yDomain:["0-9","10-19","20-29","30-39","40-49","50-59","60-69","70-79","80plus"].reverse(),height:300,$$slots:{default:[oc]},$$scope:{ctx:e}}}),{c(){xe(t.$$.fragment)},m(e,i){$e(t,e,i),n=!0},p(e,[n]){const i={};1&n&&(i.data=e[0]),1054&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function cc(e,t,n){let{data:i}=t,{labels:a}=t,{nu:r}=t,{fullExtents:s}=t,{scale:o}=t,{extentGetters:l}=t,c=null,u=!0;return Nn(i,l),e.$$set=e=>{"data"in e&&n(0,i=e.data),"labels"in e&&n(1,a=e.labels),"nu"in e&&n(2,r=e.nu),"fullExtents"in e&&n(6,s=e.fullExtents),"scale"in e&&n(7,o=e.scale),"extentGetters"in e&&n(8,l=e.extentGetters)},[i,a,r,c,u,function(e){n(3,c=e.detail.id),n(4,u=e)},s,o,l]}class uc extends _e{constructor(e){super(),we(this,e,cc,lc,o,{data:0,labels:1,nu:2,fullExtents:6,scale:7,extentGetters:8})}}function hc(e,t,n){const i=e.slice();return i[8]=t[n],i[10]=n,i}function dc(e){let t,n,i,a,r,s=e[8]+"";return{c(){t=T("li"),n=T("div"),i=S(),a=N(s),r=S(),L(n,"class","bullet svelte-o1q0c0"),z(n,"background-color",e[1][e[10]]),z(n,"width",(!e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),z(n,"height",(e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),I(n,"round",e[7]),L(t,"class","svelte-o1q0c0")},m(e,s){w(e,t,s),k(t,n),k(t,i),k(t,a),k(t,r)},p(e,t){2&t&&z(n,"background-color",e[1][e[10]]),124&t&&z(n,"width",(!e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),124&t&&z(n,"height",(e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),128&t&&I(n,"round",e[7]),1&t&&s!==(s=e[8]+"")&&R(a,s)},d(e){e&&_(t)}}}function fc(t){let n,i=t[0],a=[];for(let e=0;e<i.length;e+=1)a[e]=dc(hc(t,i,e));return{c(){n=T("ul");for(let e=0;e<a.length;e+=1)a[e].c();L(n,"class","legend svelte-o1q0c0")},m(e,t){w(e,n,t);for(let e=0;e<a.length;e+=1)a[e].m(n,null)},p(e,[t]){if(255&t){let r;for(i=e[0],r=0;r<i.length;r+=1){const s=hc(e,i,r);a[r]?a[r].p(s,t):(a[r]=dc(s),a[r].c(),a[r].m(n,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},i:e,o:e,d(e){e&&_(n),M(a,e)}}}function pc(e,t,n){let{domain:i=null}=t,{colors:a=null}=t,{line:r=!1}=t,{comparison:s=!1}=t,{horizontal:o=!0}=t,{markerWidth:l=2.5}=t,{markerLength:c=13}=t,{round:u=!1}=t;return e.$$set=e=>{"domain"in e&&n(0,i=e.domain),"colors"in e&&n(1,a=e.colors),"line"in e&&n(2,r=e.line),"comparison"in e&&n(3,s=e.comparison),"horizontal"in e&&n(4,o=e.horizontal),"markerWidth"in e&&n(5,l=e.markerWidth),"markerLength"in e&&n(6,c=e.markerLength),"round"in e&&n(7,u=e.round)},[i,a,r,s,o,l,c,u]}class gc extends _e{constructor(e){super(),we(this,e,pc,fc,o,{domain:0,colors:1,line:2,comparison:3,horizontal:4,markerWidth:5,markerLength:6,round:7})}}function mc(e,t,n){const i=e.slice();return i[4]=t[n],i[6]=n,i}function yc(e){let t,n,i,a;return n=new uc({props:{data:e[4],fullExtents:e[3],scale:xc,extentGetters:e[2],nu:e[6],labels:e[1]}}),{c(){t=T("div"),xe(n.$$.fragment),i=S(),L(t,"class","chart-container svelte-5oxew")},m(e,r){w(e,t,r),$e(n,t,null),k(t,i),a=!0},p(e,t){const i={};1&t&&(i.data=e[4]),2&t&&(i.labels=e[1]),n.$set(i)},i(e){a||(he(n.$$.fragment,e),a=!0)},o(e){de(n.$$.fragment,e),a=!1},d(e){e&&_(t),be(n)}}}function vc(e){let t,n,i,a,r=e[0],s=[];for(let t=0;t<r.length;t+=1)s[t]=yc(mc(e,r,t));const o=e=>de(s[e],1,1,(()=>{s[e]=null}));return i=new gc({props:{domain:[2011,2021],colors:["#DF0667","#3C388E"]}}),{c(){t=T("div");for(let e=0;e<s.length;e+=1)s[e].c();n=S(),xe(i.$$.fragment),L(t,"class","group-container svelte-5oxew")},m(e,r){w(e,t,r);for(let e=0;e<s.length;e+=1)s[e].m(t,null);w(e,n,r),$e(i,e,r),a=!0},p(e,[n]){if(15&n){let i;for(r=e[0],i=0;i<r.length;i+=1){const a=mc(e,r,i);s[i]?(s[i].p(a,n),he(s[i],1)):(s[i]=yc(a),s[i].c(),he(s[i],1),s[i].m(t,null))}for(ce(),i=r.length;i<s.length;i+=1)o(i);ue()}},i(e){if(!a){for(let e=0;e<r.length;e+=1)he(s[e]);he(i.$$.fragment,e),a=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)de(s[e]);de(i.$$.fragment,e),a=!1},d(e){e&&_(t),M(s,e),e&&_(n),be(i,e)}}}let xc="individual";function $c(e,t,n){let{chartData:i}=t,{labels:a}=t;const r={x:e=>e.x,y:e=>e.y},s=Nn(function(e){if(Array.isArray(e)&&Array.isArray(e[0])){let t=[];const n=e.length;for(let i=0;i<n;i+=1)t=t.concat(e[i]);return t}return e}(i),r);return i.sort(((e,t)=>t[t.length-1].y-e[e.length-1].y)),e.$$set=e=>{"chartData"in e&&n(0,i=e.chartData),"labels"in e&&n(1,a=e.labels)},[i,a,r,s]}class bc extends _e{constructor(e){super(),we(this,e,$c,vc,o,{chartData:0,labels:1})}}function kc(e,t,n){const i=e.slice();return i[14]=t[n],i}function wc(e,t,n){const i=e.slice();return i[17]=t[n],i[19]=n,i}function _c(e){let t,n,i,a;return{c(){t=A("circle"),L(t,"cx",n=e[17]),L(t,"cy",i=e[4](e[14])+e[1]),L(t,"r",e[0]),L(t,"fill",a=e[5](e[6].x[e[19]])),L(t,"class","svelte-1mc14eq")},m(e,n){w(e,t,n)},p(e,r){12&r&&n!==(n=e[17])&&L(t,"cx",n),22&r&&i!==(i=e[4](e[14])+e[1])&&L(t,"cy",i),1&r&&L(t,"r",e[0]),96&r&&a!==(a=e[5](e[6].x[e[19]]))&&L(t,"fill",a)},d(e){e&&_(t)}}}function Mc(e){let t,n,i,a,r,s,o,l,c,u,h,d,f,p,g=e[3](e[14]),m=[];for(let t=0;t<g.length;t+=1)m[t]=_c(wc(e,g,t));return{c(){t=A("g"),n=A("defs"),i=A("linearGradient"),a=A("stop"),r=A("stop"),s=A("defs"),o=A("linearGradient"),l=A("stop"),c=A("stop"),u=A("rect");for(let e=0;e<m.length;e+=1)m[e].c();L(a,"offset","5%"),L(a,"stop-color","#3C388E10"),L(r,"offset","95%"),L(r,"stop-color","#3C388E80"),L(i,"id","myGradient"),L(i,"gradientTransform","rotate(0)"),L(l,"offset","5%"),L(l,"stop-color","#3C388E80"),L(c,"offset","95%"),L(c,"stop-color","#3C388E10"),L(o,"id","myGradientRev"),L(o,"gradientTransform","rotate(0)"),L(u,"x",h=Math.min(...e[3](e[14]))),L(u,"y",d=e[4](e[14])+e[1]-7),L(u,"width",f=Math.max(...e[3](e[14]))-Math.min(...e[3](e[14]))),L(u,"height","14"),L(u,"fill",p=e[14][2021]-e[14][2011]>0?"url('#myGradient')":"url('#myGradientRev')"),L(u,"opacity","0.85"),L(t,"class","dot-row")},m(e,h){w(e,t,h),k(t,n),k(n,i),k(i,a),k(i,r),k(t,s),k(s,o),k(o,l),k(o,c),k(t,u);for(let e=0;e<m.length;e+=1)m[e].m(t,null)},p(e,n){if(12&n&&h!==(h=Math.min(...e[3](e[14])))&&L(u,"x",h),22&n&&d!==(d=e[4](e[14])+e[1]-7)&&L(u,"y",d),12&n&&f!==(f=Math.max(...e[3](e[14]))-Math.min(...e[3](e[14])))&&L(u,"width",f),4&n&&p!==(p=e[14][2021]-e[14][2011]>0?"url('#myGradient')":"url('#myGradientRev')")&&L(u,"fill",p),127&n){let i;for(g=e[3](e[14]),i=0;i<g.length;i+=1){const a=wc(e,g,i);m[i]?m[i].p(a,n):(m[i]=_c(a),m[i].c(),m[i].m(t,null))}for(;i<m.length;i+=1)m[i].d(1);m.length=g.length}},d(e){e&&_(t),M(m,e)}}}function Tc(t){let n,i=t[2],a=[];for(let e=0;e<i.length;e+=1)a[e]=Mc(kc(t,i,e));return{c(){n=A("g");for(let e=0;e<a.length;e+=1)a[e].c();L(n,"class","dot-plot")},m(e,t){w(e,n,t);for(let e=0;e<a.length;e+=1)a[e].m(n,null)},p(e,[t]){if(127&t){let r;for(i=e[2],r=0;r<i.length;r+=1){const s=kc(e,i,r);a[r]?a[r].p(s,t):(a[r]=Mc(s),a[r].c(),a[r].m(n,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},i:e,o:e,d(e){e&&_(n),M(a,e)}}}function Ac(e,t,n){let i,a,r,s,o,l,c;const{data:u,xGet:d,yGet:f,yScale:p,zScale:g,config:m}=G("LayerCake");h(e,u,(e=>n(2,r=e))),h(e,d,(e=>n(3,s=e))),h(e,f,(e=>n(4,o=e))),h(e,p,(e=>n(13,a=e))),h(e,g,(e=>n(5,l=e))),h(e,m,(e=>n(6,c=e)));let{r:y=7}=t;return e.$$set=e=>{"r"in e&&n(0,y=e.r)},e.$$.update=()=>{8192&e.$$.dirty&&n(1,i=a.bandwidth()/2)},[y,i,r,s,o,l,c,u,d,f,p,g,m,a]}class Nc extends _e{constructor(e){super(),we(this,e,Ac,Tc,o,{r:0})}}function Sc(e,t,n){const i=e.slice();return i[11]=t[n],i}function Cc(e,t,n){const i=e.slice();return i[14]=t[n],i[16]=n,i}function Ec(e){let t,n,i,a=0==e[16]?"least deprived":1==e[16]?"most deprived":"average";return{c(){t=T("div"),n=N(a),L(t,"class",i="label "+(2==e[16]?"below":"above")+" svelte-1cj7kw2"),z(t,"top",e[3](e[11])+e[0]+"px"),z(t,"left",e[14]+"px")},m(e,i){w(e,t,i),k(t,n)},p(e,n){11&n&&z(t,"top",e[3](e[11])+e[0]+"px"),6&n&&z(t,"left",e[14]+"px")},d(e){e&&_(t)}}}function Lc(e){let t,n=e[2](e[11]),i=[];for(let t=0;t<n.length;t+=1)i[t]=Ec(Cc(e,n,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=C()},m(e,n){for(let t=0;t<i.length;t+=1)i[t].m(e,n);w(e,t,n)},p(e,a){if(15&a){let r;for(n=e[2](e[11]),r=0;r<n.length;r+=1){const s=Cc(e,n,r);i[r]?i[r].p(s,a):(i[r]=Ec(s),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){M(i,e),e&&_(t)}}}function Rc(t){let n,i=t[1],a=[];for(let e=0;e<i.length;e+=1)a[e]=Lc(Sc(t,i,e));return{c(){for(let e=0;e<a.length;e+=1)a[e].c();n=C()},m(e,t){for(let n=0;n<a.length;n+=1)a[n].m(e,t);w(e,n,t)},p(e,[t]){if(15&t){let r;for(i=e[1],r=0;r<i.length;r+=1){const s=Sc(e,i,r);a[r]?a[r].p(s,t):(a[r]=Lc(s),a[r].c(),a[r].m(n.parentNode,n))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},i:e,o:e,d(e){M(a,e),e&&_(n)}}}function jc(e,t,n){let i,a,r,s,o;const{data:l,xGet:c,yGet:u,yScale:d,zScale:f,config:p}=G("LayerCake");return h(e,l,(e=>n(1,r=e))),h(e,c,(e=>n(2,s=e))),h(e,u,(e=>n(3,o=e))),h(e,d,(e=>n(8,a=e))),e.$$.update=()=>{256&e.$$.dirty&&n(0,i=a.bandwidth()/2)},[i,r,s,o,l,c,u,d,a]}class zc extends _e{constructor(e){super(),we(this,e,jc,Rc,o,{})}}function Dc(e,t,n){const i=e.slice();return i[27]=t[n],i[29]=n,i}function Pc(e){let t,n;return{c(){t=A("line"),L(t,"y1",n=-1*e[17]),L(t,"y2",e[9]),L(t,"x1","0"),L(t,"x2","0"),L(t,"stroke",e[10]),L(t,"class","svelte-1u7vzrc"),I(t,"baseline",e[12])},m(e,n){w(e,t,n)},p(e,i){131072&i&&n!==(n=-1*e[17])&&L(t,"y1",n),512&i&&L(t,"y2",e[9]),1024&i&&L(t,"stroke",e[10]),4096&i&&I(t,"baseline",e[12])},d(e){e&&_(t)}}}function Fc(e){let t,n=e[1](e[27])+"";return{c(){t=N(n)},m(e,n){w(e,t,n)},p(e,i){32770&i&&n!==(n=e[1](e[27])+"")&&R(t,n)},d(e){e&&_(t)}}}function Ic(e){let t,n,i,a=e[1](e[27])+"";return{c(){t=N(e[4]),n=N(a),i=N(e[5])},m(e,a){w(e,t,a),w(e,n,a),w(e,i,a)},p(e,r){16&r&&R(t,e[4]),32770&r&&a!==(a=e[1](e[27])+"")&&R(n,a),32&r&&R(i,e[5])},d(e){e&&_(t),e&&_(n),e&&_(i)}}}function Wc(e){let t,n,i,a,r,s,o,l,c=!1!==e[0]&&Pc(e);function u(e,t){return e[29]==e[15].length-1?Ic:Fc}let h=u(e),d=h(e);return{c(){t=A("g"),c&&c.c(),n=A("text"),d.c(),L(n,"x",i=e[6]||e[13]?e[14].bandwidth()/2:0),L(n,"y",a=e[3]?-1*e[17]-6:e[7]),L(n,"dx",r="start"==e[21](e[29])?e[8]-2:"end"==e[21](e[29])?e[8]+2:e[8]),L(n,"dy",e[9]),L(n,"text-anchor",s=e[21](e[29])),L(n,"fill",e[11]),L(t,"class",o="tick tick-"+e[27]+" svelte-1u7vzrc"),L(t,"transform",l="translate("+e[14](e[27])+","+e[16][0]+")")},m(e,i){w(e,t,i),c&&c.m(t,null),k(t,n),d.m(n,null)},p(e,s){!1!==e[0]?c?c.p(e,s):(c=Pc(e),c.c(),c.m(t,n)):c&&(c.d(1),c=null),h===(h=u(e))&&d?d.p(e,s):(d.d(1),d=h(e),d&&(d.c(),d.m(n,null))),24640&s&&i!==(i=e[6]||e[13]?e[14].bandwidth()/2:0)&&L(n,"x",i),131208&s&&a!==(a=e[3]?-1*e[17]-6:e[7])&&L(n,"y",a),256&s&&r!==(r="start"==e[21](e[29])?e[8]-2:"end"==e[21](e[29])?e[8]+2:e[8])&&L(n,"dx",r),512&s&&L(n,"dy",e[9]),2048&s&&L(n,"fill",e[11]),32768&s&&o!==(o="tick tick-"+e[27]+" svelte-1u7vzrc")&&L(t,"class",o),114688&s&&l!==(l="translate("+e[14](e[27])+","+e[16][0]+")")&&L(t,"transform",l)},d(e){e&&_(t),c&&c.d(),d.d()}}}function Oc(e){let t;return{c(){t=A("line"),L(t,"class","baseline svelte-1u7vzrc"),L(t,"y1",e[17]),L(t,"y2","0"),L(t,"x1","0"),L(t,"x2","0"),L(t,"stroke",e[10])},m(e,n){w(e,t,n)},p(e,n){131072&n&&L(t,"y1",e[17]),1024&n&&L(t,"stroke",e[10])},d(e){e&&_(t)}}}function qc(t){let n,i,a=t[15],r=[];for(let e=0;e<a.length;e+=1)r[e]=Wc(Dc(t,a,e));let s=!0===t[2]&&Oc(t);return{c(){n=A("g");for(let e=0;e<r.length;e+=1)r[e].c();i=C(),s&&s.c(),L(n,"class","axis x-axis")},m(e,t){w(e,n,t);for(let e=0;e<r.length;e+=1)r[e].m(n,null);k(n,i),s&&s.m(n,null)},p(e,[t]){if(2359291&t){let s;for(a=e[15],s=0;s<a.length;s+=1){const o=Dc(e,a,s);r[s]?r[s].p(o,t):(r[s]=Wc(o),r[s].c(),r[s].m(n,i))}for(;s<r.length;s+=1)r[s].d(1);r.length=a.length}!0===e[2]?s?s.p(e,t):(s=Oc(e),s.c(),s.m(n,null)):s&&(s.d(1),s=null)},i:e,o:e,d(e){e&&_(n),M(r,e),s&&s.d()}}}function Kc(e,t,n){let i,a,r,s,o;const{data:l,width:c,height:u,xScale:d,yScale:f,yRange:p}=G("LayerCake");h(e,u,(e=>n(17,o=e))),h(e,d,(e=>n(14,r=e))),h(e,p,(e=>n(16,s=e)));let{gridlines:g=!0}=t,{formatTick:m=(e=>e)}=t,{baseline:y=!1}=t,{flipped:v=!1}=t,{snapTicks:x=!1}=t,{ticks:$}=t,{prefix:b=""}=t,{suffix:k=""}=t,{xTick:w}=t,{yTick:_=15}=t,{dxTick:M=0}=t,{dyTick:T=0}=t,{lineColor:A="#aaa"}=t,{textColor:N="#666"}=t,{solid:S=!1}=t;return e.$$set=e=>{"gridlines"in e&&n(0,g=e.gridlines),"formatTick"in e&&n(1,m=e.formatTick),"baseline"in e&&n(2,y=e.baseline),"flipped"in e&&n(3,v=e.flipped),"snapTicks"in e&&n(22,x=e.snapTicks),"ticks"in e&&n(23,$=e.ticks),"prefix"in e&&n(4,b=e.prefix),"suffix"in e&&n(5,k=e.suffix),"xTick"in e&&n(6,w=e.xTick),"yTick"in e&&n(7,_=e.yTick),"dxTick"in e&&n(8,M=e.dxTick),"dyTick"in e&&n(9,T=e.dyTick),"lineColor"in e&&n(10,A=e.lineColor),"textColor"in e&&n(11,N=e.textColor),"solid"in e&&n(12,S=e.solid)},e.$$.update=()=>{16384&e.$$.dirty&&n(13,i="function"==typeof r.bandwidth),8413184&e.$$.dirty&&n(15,a=Array.isArray($)?$:i?r.domain():r.ticks($))},[g,m,y,v,b,k,w,_,M,T,A,N,S,i,r,a,s,o,u,d,p,function(e){if(!0===x){if(0===e)return"start";if(e===a.length-1)return"end"}return"middle"},x,$]}class Bc extends _e{constructor(e){super(),we(this,e,Kc,qc,o,{gridlines:0,formatTick:1,baseline:2,flipped:3,snapTicks:22,ticks:23,prefix:4,suffix:5,xTick:6,yTick:7,dxTick:8,dyTick:9,lineColor:10,textColor:11,solid:12})}}function Uc(e,t,n){const i=e.slice();return i[22]=t[n],i[24]=n,i}function Hc(e){let t,n,i;return{c(){t=A("line"),L(t,"x2","100%"),L(t,"y1",n=e[5]+(e[12]?e[13].bandwidth()/2:0)),L(t,"y2",i=e[5]+(e[12]?e[13].bandwidth()/2:0)),L(t,"stroke",e[9]),L(t,"class","svelte-e79qfe"),I(t,"baseline",e[11])},m(e,n){w(e,t,n)},p(e,a){12320&a&&n!==(n=e[5]+(e[12]?e[13].bandwidth()/2:0))&&L(t,"y1",n),12320&a&&i!==(i=e[5]+(e[12]?e[13].bandwidth()/2:0))&&L(t,"y2",i),512&a&&L(t,"stroke",e[9]),2048&a&&I(t,"baseline",e[11])},d(e){e&&_(t)}}}function Gc(e){let t,n=e[3](e[22])+"";return{c(){t=N(n)},m(e,n){w(e,t,n)},p(e,i){16392&i&&n!==(n=e[3](e[22])+"")&&R(t,n)},d(e){e&&_(t)}}}function Yc(e){let t,n,i,a=e[3](e[22])+"";return{c(){t=N(e[0]),n=N(a),i=N(e[1])},m(e,a){w(e,t,a),w(e,n,a),w(e,i,a)},p(e,r){1&r&&R(t,e[0]),16392&r&&a!==(a=e[3](e[22])+"")&&R(n,a),2&r&&R(i,e[1])},d(e){e&&_(t),e&&_(n),e&&_(i)}}}function Vc(e){let t,n,i,a,r,s,o,l=!1!==e[2]&&Hc(e);function c(e,t){return e[24]==e[14].length-1?Yc:Gc}let u=c(e),h=u(e);return{c(){t=A("g"),l&&l.c(),n=A("text"),h.c(),L(n,"x",e[4]),L(n,"y",i=e[5]+(e[12]?e[13].bandwidth()/2:0)),L(n,"dx",a=e[12]?3:e[6]),L(n,"dy",r=e[12]?4:e[7]),L(n,"fill",e[10]),z(n,"text-anchor",e[12]?"end":e[8]),L(t,"class",s="tick tick-"+e[22]+" svelte-e79qfe"),L(t,"transform",o="translate("+(e[16][0]+(e[12]?e[15].left:0))+", "+e[13](e[22])+")")},m(e,i){w(e,t,i),l&&l.m(t,null),k(t,n),h.m(n,null)},p(e,d){!1!==e[2]?l?l.p(e,d):(l=Hc(e),l.c(),l.m(t,n)):l&&(l.d(1),l=null),u===(u=c(e))&&h?h.p(e,d):(h.d(1),h=u(e),h&&(h.c(),h.m(n,null))),16&d&&L(n,"x",e[4]),12320&d&&i!==(i=e[5]+(e[12]?e[13].bandwidth()/2:0))&&L(n,"y",i),4160&d&&a!==(a=e[12]?3:e[6])&&L(n,"dx",a),4224&d&&r!==(r=e[12]?4:e[7])&&L(n,"dy",r),1024&d&&L(n,"fill",e[10]),4352&d&&z(n,"text-anchor",e[12]?"end":e[8]),16384&d&&s!==(s="tick tick-"+e[22]+" svelte-e79qfe")&&L(t,"class",s),126976&d&&o!==(o="translate("+(e[16][0]+(e[12]?e[15].left:0))+", "+e[13](e[22])+")")&&L(t,"transform",o)},d(e){e&&_(t),l&&l.d(),h.d()}}}function Jc(t){let n,i,a=t[14],r=[];for(let e=0;e<a.length;e+=1)r[e]=Vc(Uc(t,a,e));return{c(){n=A("g");for(let e=0;e<r.length;e+=1)r[e].c();L(n,"class","axis y-axis"),L(n,"transform",i="translate("+-t[15].left+", 0)")},m(e,t){w(e,n,t);for(let e=0;e<r.length;e+=1)r[e].m(n,null)},p(e,[t]){if(131071&t){let i;for(a=e[14],i=0;i<a.length;i+=1){const s=Uc(e,a,i);r[i]?r[i].p(s,t):(r[i]=Vc(s),r[i].c(),r[i].m(n,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=a.length}32768&t&&i!==(i="translate("+-e[15].left+", 0)")&&L(n,"transform",i)},i:e,o:e,d(e){e&&_(n),M(r,e)}}}function Zc(e,t,n){let i,a,r,s,o;const{padding:l,xRange:c,xScale:u,yScale:d}=G("LayerCake");h(e,l,(e=>n(15,s=e))),h(e,c,(e=>n(16,o=e))),h(e,d,(e=>n(13,r=e)));let{ticks:f=4}=t,{prefix:p=""}=t,{suffix:g=""}=t,{gridlines:m=!0}=t,{formatTick:y=(e=>e)}=t,{xTick:v=0}=t,{yTick:x=0}=t,{dxTick:$=0}=t,{dyTick:b=-4}=t,{textAnchor:k="start"}=t,{lineColor:w="#aaa"}=t,{textColor:_="#666"}=t,{solid:M=!1}=t;return e.$$set=e=>{"ticks"in e&&n(20,f=e.ticks),"prefix"in e&&n(0,p=e.prefix),"suffix"in e&&n(1,g=e.suffix),"gridlines"in e&&n(2,m=e.gridlines),"formatTick"in e&&n(3,y=e.formatTick),"xTick"in e&&n(4,v=e.xTick),"yTick"in e&&n(5,x=e.yTick),"dxTick"in e&&n(6,$=e.dxTick),"dyTick"in e&&n(7,b=e.dyTick),"textAnchor"in e&&n(8,k=e.textAnchor),"lineColor"in e&&n(9,w=e.lineColor),"textColor"in e&&n(10,_=e.textColor),"solid"in e&&n(11,M=e.solid)},e.$$.update=()=>{8192&e.$$.dirty&&n(12,i="function"==typeof r.bandwidth),1060864&e.$$.dirty&&n(14,a=Array.isArray(f)?f:i?r.domain():r.ticks(f))},[p,g,m,y,v,x,$,b,k,w,_,M,i,r,a,s,o,l,c,d,f]}class Xc extends _e{constructor(e){super(),we(this,e,Zc,Jc,o,{ticks:20,prefix:0,suffix:1,gridlines:2,formatTick:3,xTick:4,yTick:5,dxTick:6,dyTick:7,textAnchor:8,lineColor:9,textColor:10,solid:11})}}function Qc(e,t,n){const i=e.slice();return i[8]=t[n],i[10]=n,i}function eu(e){let t,n,i,a,r,s=e[8]+"";return{c(){t=T("li"),n=T("div"),i=S(),a=N(s),r=S(),L(n,"class","bullet svelte-o1q0c0"),z(n,"background-color",e[1][e[10]]),z(n,"width",(!e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),z(n,"height",(e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),I(n,"round",e[7]),L(t,"class","svelte-o1q0c0")},m(e,s){w(e,t,s),k(t,n),k(t,i),k(t,a),k(t,r)},p(e,t){2&t&&z(n,"background-color",e[1][e[10]]),124&t&&z(n,"width",(!e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),124&t&&z(n,"height",(e[4]&&(e[2]||e[3]&&0!=e[10])?e[5]:e[6])+"px"),128&t&&I(n,"round",e[7]),1&t&&s!==(s=e[8]+"")&&R(a,s)},d(e){e&&_(t)}}}function tu(t){let n,i=t[0],a=[];for(let e=0;e<i.length;e+=1)a[e]=eu(Qc(t,i,e));return{c(){n=T("ul");for(let e=0;e<a.length;e+=1)a[e].c();L(n,"class","legend svelte-o1q0c0")},m(e,t){w(e,n,t);for(let e=0;e<a.length;e+=1)a[e].m(n,null)},p(e,[t]){if(255&t){let r;for(i=e[0],r=0;r<i.length;r+=1){const s=Qc(e,i,r);a[r]?a[r].p(s,t):(a[r]=eu(s),a[r].c(),a[r].m(n,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},i:e,o:e,d(e){e&&_(n),M(a,e)}}}function nu(e,t,n){let{domain:i=null}=t,{colors:a=null}=t,{line:r=!1}=t,{comparison:s=!1}=t,{horizontal:o=!0}=t,{markerWidth:l=2.5}=t,{markerLength:c=13}=t,{round:u=!1}=t;return e.$$set=e=>{"domain"in e&&n(0,i=e.domain),"colors"in e&&n(1,a=e.colors),"line"in e&&n(2,r=e.line),"comparison"in e&&n(3,s=e.comparison),"horizontal"in e&&n(4,o=e.horizontal),"markerWidth"in e&&n(5,l=e.markerWidth),"markerLength"in e&&n(6,c=e.markerLength),"round"in e&&n(7,u=e.round)},[i,a,r,s,o,l,c,u]}class iu extends _e{constructor(e){super(),we(this,e,nu,tu,o,{domain:0,colors:1,line:2,comparison:3,horizontal:4,markerWidth:5,markerLength:6,round:7})}}function au(t){let n,i,a,r,s,o;return n=new Bc({}),a=new Xc({props:{gridlines:!1}}),s=new Nc({}),{c(){xe(n.$$.fragment),i=S(),xe(a.$$.fragment),r=S(),xe(s.$$.fragment)},m(e,t){$e(n,e,t),w(e,i,t),$e(a,e,t),w(e,r,t),$e(s,e,t),o=!0},p:e,i(e){o||(he(n.$$.fragment,e),he(a.$$.fragment,e),he(s.$$.fragment,e),o=!0)},o(e){de(n.$$.fragment,e),de(a.$$.fragment,e),de(s.$$.fragment,e),o=!1},d(e){be(n,e),e&&_(i),be(a,e),e&&_(r),be(s,e)}}}function ru(e){let t,n;return t=new Ca({props:{$$slots:{default:[su]},$$scope:{ctx:e}}}),{c(){xe(t.$$.fragment)},m(e,i){$e(t,e,i),n=!0},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function su(e){let t,n;return t=new zc({}),{c(){xe(t.$$.fragment)},m(e,i){$e(t,e,i),n=!0},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function ou(e){let t,n,i,a;t=new Pa({props:{$$slots:{default:[au]},$$scope:{ctx:e}}});let r=e[2]&&ru(e);return{c(){xe(t.$$.fragment),n=S(),r&&r.c(),i=C()},m(e,s){$e(t,e,s),w(e,n,s),r&&r.m(e,s),w(e,i,s),a=!0},p(e,n){const a={};64&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a),e[2]?r?4&n&&he(r,1):(r=ru(e),r.c(),he(r,1),r.m(i.parentNode,i)):r&&(ce(),de(r,1,1,(()=>{r=null})),ue())},i(e){a||(he(t.$$.fragment,e),he(r),a=!0)},o(e){de(t.$$.fragment,e),de(r),a=!1},d(e){be(t,e),e&&_(n),r&&r.d(e),e&&_(i)}}}function lu(e){let t,n,i,a,r;return n=new Ma({props:{padding:{right:0,bottom:20,left:0},x:e[3],y:cu,yScale:Qa().paddingInner([.05]).round(!0),yDomain:e[0].map(e[5]),xPadding:[15,0],zScale:Xa(),zDomain:e[3],zRange:e[4],data:e[0],$$slots:{default:[ou]},$$scope:{ctx:e}}}),a=new iu({props:{domain:e[3],colors:e[4]}}),{c(){t=T("div"),xe(n.$$.fragment),i=S(),xe(a.$$.fragment),L(t,"class","chart-container svelte-ivcd9i"),z(t,"height",e[1]+"px")},m(e,s){w(e,t,s),$e(n,t,null),w(e,i,s),$e(a,e,s),r=!0},p(e,[i]){const a={};1&i&&(a.yDomain=e[0].map(e[5])),1&i&&(a.data=e[0]),68&i&&(a.$$scope={dirty:i,ctx:e}),n.$set(a),(!r||2&i)&&z(t,"height",e[1]+"px")},i(e){r||(he(n.$$.fragment,e),he(a.$$.fragment,e),r=!0)},o(e){de(n.$$.fragment,e),de(a.$$.fragment,e),r=!1},d(e){e&&_(t),be(n),e&&_(i),be(a,e)}}}const cu="label";function uu(e,t,n){let{data:i}=t,{height:a=400}=t,{labels:r=!1}=t;const s=Object.keys(i[0]).filter((e=>e!==cu));i.forEach((e=>{s.forEach((t=>{e[t]=+e[t]}))}));return e.$$set=e=>{"data"in e&&n(0,i=e.data),"height"in e&&n(1,a=e.height),"labels"in e&&n(2,r=e.labels)},[i,a,r,s,["#DF0667","#3C388E","#2166ac","#b2182b","grey"],e=>e[cu]]}class hu extends _e{constructor(e){super(),we(this,e,uu,lu,o,{data:0,height:1,labels:2})}}const{document:du}=fe;function fu(e,t,n){const i=e.slice();return i[40]=t[n],i[42]=n,i}function pu(e){let t,n,i=e[6]&&gu(e);return{c(){i&&i.c(),t=C()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,n){e[6]?i?(i.p(e,n),64&n[0]&&he(i,1)):(i=gu(e),i.c(),he(i,1),i.m(t.parentNode,t)):i&&(ce(),de(i,1,1,(()=>{i=null})),ue())},i(e){n||(he(i),n=!0)},o(e){de(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function gu(e){let t,n,i=e[8]&&mu(e);return{c(){i&&i.c(),t=C()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,n){e[8]?i?(i.p(e,n),256&n[0]&&he(i,1)):(i=mu(e),i.c(),he(i,1),i.m(t.parentNode,t)):i&&(ce(),de(i,1,1,(()=>{i=null})),ue())},i(e){n||(he(i),n=!0)},o(e){de(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function mu(e){let t,n,i=e[3]&&yu(e);return{c(){i&&i.c(),t=C()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,n){e[3]?i?(i.p(e,n),8&n[0]&&he(i,1)):(i=yu(e),i.c(),he(i,1),i.m(t.parentNode,t)):i&&(ce(),de(i,1,1,(()=>{i=null})),ue())},i(e){n||(he(i),n=!0)},o(e){de(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function yu(e){let t,n,i=e[4]&&vu(e);return{c(){i&&i.c(),t=C()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,n){e[4]?i?(i.p(e,n),16&n[0]&&he(i,1)):(i=vu(e),i.c(),he(i,1),i.m(t.parentNode,t)):i&&(ce(),de(i,1,1,(()=>{i=null})),ue())},i(e){n||(he(i),n=!0)},o(e){de(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function vu(e){let t,n,i,a,s,o,l,c,u,h,d,f,p,g,m,y,v,x,$,b,M,C,j,D,P,F,I,O,q,K,B,U,H,G,Y,V,Z,X,Q,ee,te,ie=wu(e[2].name)+"",ae=e[12](e[2],e[5])+"",re=(e[2].gss?e[2].gss.long:"local authority district")+"",se=[],oe=new Map,le=e[7]?"Read less":"Read more";function fe(t){e[16](t)}let me={options:e[0],group:"typenm",search:!0};void 0!==e[1]&&(me.selected=e[1]),h=new Nt({props:me}),J.push((()=>ve(h,"selected",fe))),h.$on("select",e[17]);let ye=e[9](e[4],e[2],e[5]);const ke=e=>e[42];for(let t=0;t<ye.length;t+=1){let n=fu(e,ye,t),i=ke(n);oe.set(i,se[t]=xu(i,n))}function we(e,t){return e[7]?bu:$u}let _e=we(e),Me=_e(e);return{c(){t=T("div"),n=T("div"),i=T("h1"),a=N(ie),s=N(": "),o=T("span"),o.textContent="Changes over time",l=S(),c=T("div"),u=T("div"),xe(h.$$.fragment),f=S(),p=new W,g=S(),m=T("p"),y=N("Here are some of the "),v=T("span"),v.textContent="most notable changes",x=N(" from across the "),$=N(re),b=N("."),M=S(),C=T("main");for(let e=0;e<se.length;e+=1)se[e].c();j=S(),D=T("button"),P=T("div"),F=A("svg"),Me.c(),I=S(),O=N(le),q=S(),K=T("hr"),B=S(),U=T("h2"),U.textContent="Creating this article",H=S(),G=T("p"),G.textContent="This article was generated using some automation. Topics are selected based on the most notable changes seen in each local authority.",Y=S(),V=T("p"),V.textContent="Notable changes include a high percentage point shift, a pattern of change that differs from the pattern seen at the regional or national level, and the shifting of a variable for which the area ranks considerably high or low.",Z=S(),X=T("div"),z(o,"font-weight","400"),L(i,"class","svelte-1eybmbe"),z(u,"width","640px"),z(u,"margin","50px auto"),p.a=g,L(v,"class","back-to-top svelte-1eybmbe"),z(n,"width","640px"),z(n,"margin","0 auto"),L(t,"id","sf"),L(t,"class","svelte-1eybmbe"),L(F,"height","25"),L(F,"width","50"),L(P,"class","triangle-container svelte-1eybmbe"),L(D,"class","svelte-1eybmbe"),L(K,"class","svelte-1eybmbe"),L(U,"id","create"),z(X,"height","200px"),L(C,"class","svelte-1eybmbe")},m(r,d){w(r,t,d),k(t,n),k(n,i),k(i,a),k(i,s),k(i,o),k(n,l),k(n,c),k(c,u),$e(h,u,null),k(n,f),p.m(ae,n),k(n,g),k(n,m),k(m,y),k(m,v),k(m,x),k(m,$),k(m,b),w(r,M,d),w(r,C,d);for(let e=0;e<se.length;e+=1)se[e].m(C,null);k(C,j),k(C,D),k(D,P),k(P,F),Me.m(F,null),k(D,I),k(D,O),k(C,q),k(C,K),k(C,B),k(C,U),k(C,H),k(C,G),k(C,Y),k(C,V),k(C,Z),k(C,X),Q=!0,ee||(te=[E(v,"click",_u),E(D,"click",e[15])],ee=!0)},p(e,t){(!Q||4&t[0])&&ie!==(ie=wu(e[2].name)+"")&&R(a,ie);const n={};1&t[0]&&(n.options=e[0]),!d&&2&t[0]&&(d=!0,n.selected=e[1],ne((()=>d=!1))),h.$set(n),(!Q||36&t[0])&&ae!==(ae=e[12](e[2],e[5])+"")&&p.p(ae),(!Q||4&t[0])&&re!==(re=(e[2].gss?e[2].gss.long:"local authority district")+"")&&R($,re),25140&t[0]&&(ye=e[9](e[4],e[2],e[5]),ce(),se=ge(se,t,ke,1,e,ye,oe,C,pe,xu,j,fu),ue()),_e!==(_e=we(e))&&(Me.d(1),Me=_e(e),Me&&(Me.c(),Me.m(F,null))),(!Q||128&t[0])&&le!==(le=e[7]?"Read less":"Read more")&&R(O,le)},i(e){if(!Q){he(h.$$.fragment,e);for(let e=0;e<ye.length;e+=1)he(se[e]);Q=!0}},o(e){de(h.$$.fragment,e);for(let e=0;e<se.length;e+=1)de(se[e]);Q=!1},d(e){e&&_(t),be(h),e&&_(M),e&&_(C);for(let e=0;e<se.length;e+=1)se[e].d();Me.d(),ee=!1,r(te)}}}function xu(e,t){let i,a,r,s,o,l,c=t[40]+"";const u=[t[13](t[42])];var h=t[14](t[42]);function d(e){let t={};for(let e=0;e<u.length;e+=1)t=n(t,u[e]);return{props:t}}return h&&(o=new h(d())),{key:e,first:null,c(){i=C(),a=new W,r=S(),s=T("div"),o&&xe(o.$$.fragment),a.a=r,z(s,"width","100%"),this.first=i},m(e,t){w(e,i,t),a.m(c,e,t),w(e,r,t),w(e,s,t),o&&$e(o,s,null),l=!0},p(e,n){t=e,(!l||564&n[0])&&c!==(c=t[40]+"")&&a.p(c);const i=8756&n[0]?me(u,[ye(t[13](t[42]))]):{};if(h!==(h=t[14](t[42]))){if(o){ce();const e=o;de(e.$$.fragment,1,0,(()=>{be(e,1)})),ue()}h?(o=new h(d()),xe(o.$$.fragment),he(o.$$.fragment,1),$e(o,s,null)):o=null}else h&&o.$set(i)},i(e){l||(o&&he(o.$$.fragment,e),l=!0)},o(e){o&&de(o.$$.fragment,e),l=!1},d(e){e&&_(i),e&&a.d(),e&&_(r),e&&_(s),o&&be(o)}}}function $u(e){let t;return{c(){t=A("polygon"),L(t,"points","25,20 15,10 25,20 35,10"),L(t,"class","triangle svelte-1eybmbe")},m(e,n){w(e,t,n)},d(e){e&&_(t)}}}function bu(e){let t;return{c(){t=A("polygon"),L(t,"points","25,10 15,20 25,10 35,20"),L(t,"class","triangle svelte-1eybmbe")},m(e,n){w(e,t,n)},d(e){e&&_(t)}}}function ku(e){let t,n,i,a,r,s,o,l,u,h=e[2]&&pu(e);return{c(){t=T("script"),i=T("script"),r=S(),s=T("div"),h&&h.c(),c(t.src,n="https://d3js.org/d3.v3.min.js")||L(t,"src","https://d3js.org/d3.v3.min.js"),L(t,"charset","utf-8"),c(i.src,a="https://unpkg.com/rosaenlg@3.0.1/dist/rollup/rosaenlg_tiny_en_US_3.0.1_comp.js")||L(i,"src","https://unpkg.com/rosaenlg@3.0.1/dist/rollup/rosaenlg_tiny_en_US_3.0.1_comp.js")},m(n,a){k(du.head,t),k(du.head,i),w(n,r,a),w(n,s,a),h&&h.m(s,null),o=!0,l||(u=E(i,"load",e[10]),l=!0)},p(e,t){e[2]?h?(h.p(e,t),4&t[0]&&he(h,1)):(h=pu(e),h.c(),he(h,1),h.m(s,null)):h&&(ce(),de(h,1,1,(()=>{h=null})),ue())},i(e){o||(he(h),o=!0)},o(e){de(h),o=!1},d(e){_(t),_(i),e&&_(r),e&&_(s),h&&h.d(),l=!1,u()}}}function wu(e){return e.charAt(0).toUpperCase()+e.slice(1)}function _u(){document.getElementById("create").scrollIntoView()}function Mu(e){return Number.parseFloat(Number.parseFloat(.714*e).toPrecision(2))}function Tu(e,t,n){function i(e,t){return!(new kn([e],{includeScore:!0}).search(t).length>0)}var a,r,s,o,l,c,u,h,d,f,p,g,m,y,v,x,$;const b=(e,t)=>t.some((t=>e.includes(t)));var k,w,_,M=!1;fetch("./archie.aml").then((e=>e.text())).then((e=>n(5,k=Et.load(e)))),fetch("./puggy.pug").then((e=>e.text())).then((e=>w=e)),fetch("./standf.pug").then((e=>e.text())).then((e=>_=e));let T=!1;Ie("https://raw.githubusercontent.com/theojolliffe/census-data/main/laddata.csv").then((e=>{e.forEach((e=>{e.code=e[""],delete e[""]})),m=e,n(6,x=!0)}));var A={};Ie("https://raw.githubusercontent.com/theojolliffe/census-data/main/csv/lists/Corresponding%20Local%20Authorities-Table%201.csv").then((e=>{e.forEach((e=>{A[e.Name]=e["Region/Country"]}))}));var N={};function S(e){fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/"+e+".json").then((e=>e.json())).then((t=>{t.children=a.filter((t=>t.parent==e)),t.siblings=a.filter((e=>e.parent==t.parents[0].code)),n(2,s=t),u=s.parents[0].code,fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/"+u+".json").then((e=>e.json())).then((t=>{t.children=a.filter((t=>t.parent==e)),t.siblings=a.filter((e=>e.parent==t.parents[0].code)),n(4,h=t),console.log("rgn",h)})),v=s.data.population.value.change.all>8?"expanded":s.data.population.value.change.all>3?"grew":s.data.population.value.change.all>0?"did not change much":"shrunk",s.data.health.perc.change.good>0?y="improved":s.data.health.perc.change.good<0&&(y="deteriorated"),(d=s.stories.map((e=>e.label.split("_")))).forEach((e=>{e.length>4&&(e[3]=e[3]+"_"+e[4],e.pop())})),o=d.map((e=>parseInt(s.data[e[0]][e[1]+"_rank_local"][e[2]][e[3]]))),f=d.map((e=>parseInt(s.data[e[0]][e[1]+"_rank"][e[2]][e[3]]))),l=d.map((e=>parseInt(s.data[e[0]][e[1]+"_rank_local"][2011][e[3]]))),p=d.map((e=>parseInt(s.data[e[0]][e[1]+"_rank"][2011][e[3]])))})),fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/E92000001.json").then((e=>e.json())).then((t=>{t.children=a.filter((t=>t.parent==e)),t.siblings=a.filter((e=>e.parent==t.parents[0].code)),n(3,c=t)})),fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/W92000004.json").then((e=>e.json())).then((t=>{t.children=a.filter((t=>t.parent==e)),t.siblings=a.filter((e=>e.parent==t.parents[0].code)),g=t}))}Ie("https://raw.githubusercontent.com/theojolliffe/census-data/main/csv/lists/Local_Authority_District_to_County_(April_2021)_Lookup_in_England.csv").then((e=>{e.forEach((e=>{N[e.LAD21NM]=e.CTY21NM}))})),Ie("https://raw.githubusercontent.com/theojolliffe/census-data/main/csv/lists/Local_Authority_Districts_(May_2021)_UK_BFE_V3.csv").then((e=>{e.forEach((e=>{e.code=e.LAD21CD,e.name=e.LAD21NM})),e=e.filter((e=>"S"!=e.LAD21CD.substring(0,1)&"N"!=e.LAD21CD.substring(0,1))),n(0,a=e.sort(((e,t)=>e.LAD21NM.localeCompare(t.LAD21NM))));let t=a[Math.round(331*Math.random())].LAD21NM;t="Somerset West and Taunton",console.log(t),n(1,r=a.find((e=>e.LAD21NM==t))),console.log(r.LAD21CD),S(r.LAD21CD)}));let C={1:"expanded",2:"grew",3:"grew",4:"remained relatively stable",5:"fell"};function E(e,t){Object.keys(e).forEach((n=>{"object"==typeof e[n]?E(e[n],t):e[n]=Fe(e[n],{health:y,health:y,expanded:v,plcname:t})}))}function L(e,t,n){var a=JSON.parse(JSON.stringify(n));return E(a,t.name),console.log("topics",a),$="Wales"==t.parents[0].name?g:c,rosaenlg_en_US.render(w,{language:"en_UK",place:t,data:t.data,cou:$,eng:c,rgn:e,uncap1:Ke,regionThe:qe,parent:Ke(qe(t.parents[0].name)),parentNT:Ke(qe(t.parents[0].name,"NT")),s:d,stories:t.stories,priorities:t.Priorities,grewSyn:C,locRankCha:o,natRankCha:f,locRankCur:l,natRankCur:p,hiRank:t.hiRank,topic:function(e,t){let n;return n=t||d[e][3],a[d[e][0]][n]},topics:a,chains:We,country:"Wales"==t.parents[0].name?"Wales":"England",get_word:Ge,figs:Ye,otherEst:Qe,cur:Je,cha:Ze,qui:Xe,cap:wu,cap:wu,otherRank:et,ud:tt,city:nt,drop:Be,drop:Be,ord:ot,ageBandLU:lt,eq:ct,nuword:st,sign:it,udord:ut,near:t.nearbyArea.nearTops,simi:t.similar,adv:ht,uds:dt,more:M,pluralize:Lt,pluralize:Lt,countyLU:N,fuzz:i,prev:Ve,regionLU:A,findOne:b}).split('<div id="esc123"></div>')}K((()=>{setInterval((function(){d3.selectAll("div#visph").attr("style","\n\t\t\tbackground-color: #f6f6f6; \n\t\t\tcolor: #e1e7ea; \n\t\t\theight: 240px;\n\t\t\tpadding: 80px;\n\t\t\tfont-size: 2.8rem;\n\t\t\tfont-weight: 600;\n\t\t\tmargin-bottom: 80px;")}),1e3)}));return[a,r,s,c,h,k,x,M,T,L,()=>{n(8,T=!0)},S,function(e,t){var n=JSON.parse(JSON.stringify(t));E(n,e.name);let i=[],a=0;return e.stories.forEach((e=>{i.length<4&Math.abs(e.value)>3&&(i.push(e.label.split("_")),a+=Math.abs(e.value))})),rosaenlg_en_US.render(_,{language:"en_UK",place:e,topics:n,s:d,sf:i,changeMag:a,grewSyn:C,qui:Xe,natRankCha:f})},function(e){let t=s.stories[e].label.split("_");if(t.length>4&&(t[3]=t[3]+"_"+t[4],t.pop()),"agemed"==t[0]){function e(e,t){let n=[];return Object.keys(e).forEach((i=>{n.push({x:i,y:e[i],g:t})})),n}return{legend:!0,height:120,chartData:[[e($.data.age10yr.perc[2001],2011),e($.data.age10yr.perc[2011],2021)],[e(h.data.age10yr.perc[2001],2011),e(h.data.age10yr.perc[2011],2021)],[e(s.data.age10yr.perc[2001],2011),e(s.data.age10yr.perc[2011],2021)]],labels:[$.name,h.name,s.name],xKey:"value",yKey:"year"}}return s.stories[e].type.includes("size")?"population"==t[0]?"Wales"==h.name?{height:120,data:[{label:c.name,2011:Mu(c.data.density.value[2001].all),2021:Mu(c.data.density.value[2011].all)},{label:h.name,2011:Mu(h.data.density.value[2001].all),2021:Mu(h.data.density.value[2011].all)},{label:s.name,2011:Mu(s.data.density.value[2001].all),2021:Mu(s.data.density.value[2011].all)}]}:{height:120,data:[{label:h.name,2011:Mu(h.data.density.value[2001].all),2021:Mu(h.data.density.value[2011].all)},{label:s.nearbyArea.nearTops.name.name,2011:Mu(s.nearbyArea.nearTops.name.data.density.value[2001].all),2021:Mu(s.nearbyArea.nearTops.name.data.density.value[2011].all)},{label:s.name,2011:Mu(s.data.density.value[2001].all),2021:Mu(s.data.density.value[2011].all)}]}:"Wales"==h.name?{legend:!0,height:120,data:[{label:h.name,2011:h.data[t[0]][t[1]][2001][t[3]],2021:h.data[t[0]][t[1]][2011][t[3]]},{label:s.nearbyArea.nearTops.name,2011:s.nearbyArea.nearTops.data[t[0]][t[1]][2001][t[3]],2021:s.nearbyArea.nearTops.data[t[0]][t[1]][2011][t[3]]},{label:s.name,2011:s.data[t[0]][t[1]][2001][t[3]],2021:s.data[t[0]][t[1]][2011][t[3]]}]}:{legend:!0,height:120,data:[{label:c.name,2011:c.data[t[0]][t[1]][2001][t[3]],2021:c.data[t[0]][t[1]][2011][t[3]]},{label:s.parents[0].name,2011:h.data[t[0]][t[1]][2001][t[3]],2021:h.data[t[0]][t[1]][2011][t[3]]},{label:s.name,2011:s.data[t[0]][t[1]][2001][t[3]],2021:s.data[t[0]][t[1]][2011][t[3]]}]}:("population"==t[0]&&(t[0]="density",t[3]="all"),(n=(n=m.filter((e=>e.parent==s.parents[0].name&e.topic==t[0]+"_"+t[3]))).map((e=>({change:e.change,value:"density"==t[0]?.714*parseFloat(e[2011]):parseFloat(e[2011]),unique:e.lad,id:e.parent})))).forEach(((e,t)=>{e.unique==s.name?e.id=s.name:e.id==s.parents[0].name?e.id="Rest of "+Ke(qe(s.parents[0].name)):e.id="Rest of England"})),n.push({change:+$.data[t[0]][t[1]].change[t[3]],value:+$.data[t[0]][t[1]][2011][t[3]],unique:"Average across "+$.name,id:"Average across "+$.name}),{mode:"stacked",line:!1,legend:!0,data:n,xKey:"value",yKey:null,rKey:"change",r:[3,9],zKey:"id"});var n},function(e){let t=s.stories[e].label.split("_");return t.length>4&&(t[3]=t[3]+"_"+t[4],t.pop()),"agemed"==t[0]?bc:s.stories[e].type.includes("size")?hu:El},function(){n(7,M=!M),n(9,L)},function(e){n(1,r=e)},()=>{r&&S(r.code)}]}class Au extends _e{constructor(e){super(),we(this,e,Tu,ku,o,{},null,[-1,-1])}}const{document:Nu}=fe;function Su(e,t,n){const i=e.slice();return i[40]=t[n],i[42]=n,i}function Cu(e){let t,n,i=e[6]&&Eu(e);return{c(){i&&i.c(),t=C()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,n){e[6]?i?(i.p(e,n),64&n[0]&&he(i,1)):(i=Eu(e),i.c(),he(i,1),i.m(t.parentNode,t)):i&&(ce(),de(i,1,1,(()=>{i=null})),ue())},i(e){n||(he(i),n=!0)},o(e){de(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function Eu(e){let t,n,i=e[8]&&Lu(e);return{c(){i&&i.c(),t=C()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,n){e[8]?i?(i.p(e,n),256&n[0]&&he(i,1)):(i=Lu(e),i.c(),he(i,1),i.m(t.parentNode,t)):i&&(ce(),de(i,1,1,(()=>{i=null})),ue())},i(e){n||(he(i),n=!0)},o(e){de(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function Lu(e){let t,n,i=e[3]&&Ru(e);return{c(){i&&i.c(),t=C()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,n){e[3]?i?(i.p(e,n),8&n[0]&&he(i,1)):(i=Ru(e),i.c(),he(i,1),i.m(t.parentNode,t)):i&&(ce(),de(i,1,1,(()=>{i=null})),ue())},i(e){n||(he(i),n=!0)},o(e){de(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function Ru(e){let t,n,i=e[4]&&ju(e);return{c(){i&&i.c(),t=C()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,n){e[4]?i?(i.p(e,n),16&n[0]&&he(i,1)):(i=ju(e),i.c(),he(i,1),i.m(t.parentNode,t)):i&&(ce(),de(i,1,1,(()=>{i=null})),ue())},i(e){n||(he(i),n=!0)},o(e){de(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function ju(e){let t,n,i,a,s,o,l,c,u,h,d,f,p,g,m,y,v,x,$,b,M,C,j,D,P,F,I,O,q,K,B,U,H,G,Y,V,Z,X,Q,ee,te,ie=Iu(e[2].name)+"",ae=e[12](e[2],e[5])+"",re=(e[2].gss?e[2].gss.long:"local authority district")+"",se=[],oe=new Map,le=e[7]?"Read less":"Read more";function fe(t){e[16](t)}let me={options:e[0],group:"typenm",search:!0};void 0!==e[1]&&(me.selected=e[1]),h=new Nt({props:me}),J.push((()=>ve(h,"selected",fe))),h.$on("select",e[17]);let ye=e[9](e[4],e[2],e[5]);const ke=e=>e[42];for(let t=0;t<ye.length;t+=1){let n=Su(e,ye,t),i=ke(n);oe.set(i,se[t]=zu(i,n))}function we(e,t){return e[7]?Pu:Du}let _e=we(e),Me=_e(e);return{c(){t=T("div"),n=T("div"),i=T("h1"),a=N(ie),s=N(": "),o=T("span"),o.textContent="Changes over time",l=S(),c=T("div"),u=T("div"),xe(h.$$.fragment),f=S(),p=new W,g=S(),m=T("p"),y=N("Here are some of the "),v=T("span"),v.textContent="most notable changes",x=N(" from across the "),$=N(re),b=N("."),M=S(),C=T("main");for(let e=0;e<se.length;e+=1)se[e].c();j=S(),D=T("button"),P=T("div"),F=A("svg"),Me.c(),I=S(),O=N(le),q=S(),K=T("hr"),B=S(),U=T("h2"),U.textContent="Creating this article",H=S(),G=T("p"),G.textContent="This article was generated using some automation. Topics are selected based on the most notable changes seen in each local authority.",Y=S(),V=T("p"),V.textContent="Notable changes include a high percentage point shift, a pattern of change that differs from the pattern seen at the regional or national level, and the shifting of a variable for which the area ranks considerably high or low.",Z=S(),X=T("div"),z(o,"font-weight","400"),L(i,"class","svelte-179svd2"),z(u,"width","640px"),z(u,"margin","50px auto"),p.a=g,L(v,"class","back-to-top svelte-179svd2"),z(n,"width","640px"),z(n,"margin","0 auto"),L(t,"id","sf"),L(t,"class","svelte-179svd2"),L(F,"height","25"),L(F,"width","50"),L(P,"class","triangle-container svelte-179svd2"),L(D,"class","svelte-179svd2"),L(K,"class","svelte-179svd2"),L(U,"id","create"),z(X,"height","200px"),L(C,"class","svelte-179svd2")},m(r,d){w(r,t,d),k(t,n),k(n,i),k(i,a),k(i,s),k(i,o),k(n,l),k(n,c),k(c,u),$e(h,u,null),k(n,f),p.m(ae,n),k(n,g),k(n,m),k(m,y),k(m,v),k(m,x),k(m,$),k(m,b),w(r,M,d),w(r,C,d);for(let e=0;e<se.length;e+=1)se[e].m(C,null);k(C,j),k(C,D),k(D,P),k(P,F),Me.m(F,null),k(D,I),k(D,O),k(C,q),k(C,K),k(C,B),k(C,U),k(C,H),k(C,G),k(C,Y),k(C,V),k(C,Z),k(C,X),Q=!0,ee||(te=[E(v,"click",Wu),E(D,"click",e[15])],ee=!0)},p(e,t){(!Q||4&t[0])&&ie!==(ie=Iu(e[2].name)+"")&&R(a,ie);const n={};1&t[0]&&(n.options=e[0]),!d&&2&t[0]&&(d=!0,n.selected=e[1],ne((()=>d=!1))),h.$set(n),(!Q||36&t[0])&&ae!==(ae=e[12](e[2],e[5])+"")&&p.p(ae),(!Q||4&t[0])&&re!==(re=(e[2].gss?e[2].gss.long:"local authority district")+"")&&R($,re),25140&t[0]&&(ye=e[9](e[4],e[2],e[5]),ce(),se=ge(se,t,ke,1,e,ye,oe,C,pe,zu,j,Su),ue()),_e!==(_e=we(e))&&(Me.d(1),Me=_e(e),Me&&(Me.c(),Me.m(F,null))),(!Q||128&t[0])&&le!==(le=e[7]?"Read less":"Read more")&&R(O,le)},i(e){if(!Q){he(h.$$.fragment,e);for(let e=0;e<ye.length;e+=1)he(se[e]);Q=!0}},o(e){de(h.$$.fragment,e);for(let e=0;e<se.length;e+=1)de(se[e]);Q=!1},d(e){e&&_(t),be(h),e&&_(M),e&&_(C);for(let e=0;e<se.length;e+=1)se[e].d();Me.d(),ee=!1,r(te)}}}function zu(e,t){let i,a,r,s,o,l,c=t[40]+"";const u=[t[13](t[42])];var h=t[14](t[42]);function d(e){let t={};for(let e=0;e<u.length;e+=1)t=n(t,u[e]);return{props:t}}return h&&(o=new h(d())),{key:e,first:null,c(){i=C(),a=new W,r=S(),s=T("div"),o&&xe(o.$$.fragment),a.a=r,z(s,"width","100%"),this.first=i},m(e,t){w(e,i,t),a.m(c,e,t),w(e,r,t),w(e,s,t),o&&$e(o,s,null),l=!0},p(e,n){t=e,(!l||564&n[0])&&c!==(c=t[40]+"")&&a.p(c);const i=8756&n[0]?me(u,[ye(t[13](t[42]))]):{};if(h!==(h=t[14](t[42]))){if(o){ce();const e=o;de(e.$$.fragment,1,0,(()=>{be(e,1)})),ue()}h?(o=new h(d()),xe(o.$$.fragment),he(o.$$.fragment,1),$e(o,s,null)):o=null}else h&&o.$set(i)},i(e){l||(o&&he(o.$$.fragment,e),l=!0)},o(e){o&&de(o.$$.fragment,e),l=!1},d(e){e&&_(i),e&&a.d(),e&&_(r),e&&_(s),o&&be(o)}}}function Du(e){let t;return{c(){t=A("polygon"),L(t,"points","25,20 15,10 25,20 35,10"),L(t,"class","triangle svelte-179svd2")},m(e,n){w(e,t,n)},d(e){e&&_(t)}}}function Pu(e){let t;return{c(){t=A("polygon"),L(t,"points","25,10 15,20 25,10 35,20"),L(t,"class","triangle svelte-179svd2")},m(e,n){w(e,t,n)},d(e){e&&_(t)}}}function Fu(e){let t,n,i,a,r,s,o,l,u,h=e[2]&&Cu(e);return{c(){t=T("script"),i=T("script"),r=S(),s=T("div"),h&&h.c(),c(t.src,n="https://d3js.org/d3.v3.min.js")||L(t,"src","https://d3js.org/d3.v3.min.js"),L(t,"charset","utf-8"),c(i.src,a="https://unpkg.com/rosaenlg@3.0.1/dist/rollup/rosaenlg_tiny_en_US_3.0.1_comp.js")||L(i,"src","https://unpkg.com/rosaenlg@3.0.1/dist/rollup/rosaenlg_tiny_en_US_3.0.1_comp.js")},m(n,a){k(Nu.head,t),k(Nu.head,i),w(n,r,a),w(n,s,a),h&&h.m(s,null),o=!0,l||(u=E(i,"load",e[10]),l=!0)},p(e,t){e[2]?h?(h.p(e,t),4&t[0]&&he(h,1)):(h=Cu(e),h.c(),he(h,1),h.m(s,null)):h&&(ce(),de(h,1,1,(()=>{h=null})),ue())},i(e){o||(he(h),o=!0)},o(e){de(h),o=!1},d(e){_(t),_(i),e&&_(r),e&&_(s),h&&h.d(),l=!1,u()}}}function Iu(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Wu(){document.getElementById("create").scrollIntoView()}function Ou(e){return Number.parseFloat(Number.parseFloat(.714*e).toPrecision(2))}function qu(e,t,n){function i(e,t){return!(new kn([e],{includeScore:!0}).search(t).length>0)}var a,r,s,o,l,c,u,h,d,f,p,g,m,y,v,x,$;const b=(e,t)=>t.some((t=>e.includes(t)));var k,w=!1;fetch("./archie.aml").then((e=>e.text())).then((e=>n(5,k=Et.load(e))));var _;fetch("./standf.pug").then((e=>e.text())).then((e=>_=e));let M=!1;Ie("https://raw.githubusercontent.com/theojolliffe/census-data/main/laddata.csv").then((e=>{e.forEach((e=>{e.code=e[""],delete e[""]})),m=e,n(6,x=!0)}));var T={};Ie("https://raw.githubusercontent.com/theojolliffe/census-data/main/csv/lists/Corresponding%20Local%20Authorities-Table%201.csv").then((e=>{e.forEach((e=>{T[e.Name]=e["Region/Country"]}))}));var A={};function N(e){fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/"+e+".json").then((e=>e.json())).then((t=>{t.children=a.filter((t=>t.parent==e)),t.siblings=a.filter((e=>e.parent==t.parents[0].code)),n(2,s=t),u=s.parents[0].code,fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/"+u+".json").then((e=>e.json())).then((t=>{t.children=a.filter((t=>t.parent==e)),t.siblings=a.filter((e=>e.parent==t.parents[0].code)),n(4,h=t),console.log("rgn",h)})),v=s.data.population.value.change.all>8?"expanded":s.data.population.value.change.all>3?"grew":s.data.population.value.change.all>0?"did not change much":"shrunk",s.data.health.perc.change.good>0?y="improved":s.data.health.perc.change.good<0&&(y="deteriorated"),(d=s.stories.map((e=>e.label.split("_")))).forEach((e=>{e.length>4&&(e[3]=e[3]+"_"+e[4],e.pop())})),o=d.map((e=>parseInt(s.data[e[0]][e[1]+"_rank_local"][e[2]][e[3]]))),f=d.map((e=>parseInt(s.data[e[0]][e[1]+"_rank"][e[2]][e[3]]))),l=d.map((e=>parseInt(s.data[e[0]][e[1]+"_rank_local"][2011][e[3]]))),p=d.map((e=>parseInt(s.data[e[0]][e[1]+"_rank"][2011][e[3]])))})),fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/E92000001.json").then((e=>e.json())).then((t=>{t.children=a.filter((t=>t.parent==e)),t.siblings=a.filter((e=>e.parent==t.parents[0].code)),n(3,c=t)})),fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/W92000004.json").then((e=>e.json())).then((t=>{t.children=a.filter((t=>t.parent==e)),t.siblings=a.filter((e=>e.parent==t.parents[0].code)),g=t}))}Ie("https://raw.githubusercontent.com/theojolliffe/census-data/main/csv/lists/Local_Authority_District_to_County_(April_2021)_Lookup_in_England.csv").then((e=>{e.forEach((e=>{A[e.LAD21NM]=e.CTY21NM}))})),Ie("https://raw.githubusercontent.com/theojolliffe/census-data/main/csv/lists/Local_Authority_Districts_(May_2021)_UK_BFE_V3.csv").then((e=>{e.forEach((e=>{e.code=e.LAD21CD,e.name=e.LAD21NM})),e=e.filter((e=>"S"!=e.LAD21CD.substring(0,1)&"N"!=e.LAD21CD.substring(0,1))),n(0,a=e.sort(((e,t)=>e.LAD21NM.localeCompare(t.LAD21NM))));let t=a[Math.round(331*Math.random())].LAD21NM;t="Somerset West and Taunton",console.log(t),n(1,r=a.find((e=>e.LAD21NM==t))),console.log(r.LAD21CD),N(r.LAD21CD)}));let S={1:"expanded",2:"grew",3:"grew",4:"remained relatively stable",5:"fell"};function C(e,t){Object.keys(e).forEach((n=>{"object"==typeof e[n]?C(e[n],t):e[n]=Fe(e[n],{health:y,health:y,expanded:v,plcname:t})}))}function E(e,t,n){var a=JSON.parse(JSON.stringify(n));return C(a,t.name),console.log("topics",a),$="Wales"==t.parents[0].name?g:c,rosaenlg_en_US.render("\n// Population passes half a million\nmixin subheadVal(i)\n    if (Math.round(data[s[i][0]][s[i][1]][2001][s[i][3]]/1000) == Math.round(data[s[i][0]][s[i][1]][2011][s[i][3]]/1000))\n        | Population plateaus\n    else if (cha(s, place, i)<0)\n        | Population drops\n    else if ((data[s[i][0]][s[i][1]]['2001'][s[i][3]]<100000)&(data[s[i][0]][s[i][1]]['2011'][s[i][3]]>100000))\n        | Population passes #[+value(100000)]\n    else if ((data[s[i][0]][s[i][1]]['2001'][s[i][3]]<200000)&(data[s[i][0]][s[i][1]]['2011'][s[i][3]]>200000))\n        | Population passes #[+value(200000)]\n    else if ((data[s[i][0]][s[i][1]]['2001'][s[i][3]]<50000)&(data[s[i][0]][s[i][1]]['2011'][s[i][3]]>50000))\n        | Population passes #[+value(50000)]\n    else if ((data[s[i][0]][s[i][1]]['2001'][s[i][3]]<250000)&(data[s[i][0]][s[i][1]]['2011'][s[i][3]]>250000))\n        | Population passes quarter of a million\n    else if ((data[s[i][0]][s[i][1]]['2001'][s[i][3]]<500000)&(data[s[i][0]][s[i][1]]['2011'][s[i][3]]>500000))\n        | Population passes half a million\n    else if ((data[s[i][0]][s[i][1]]['2001'][s[i][3]]<1000000)&(data[s[i][0]][s[i][1]]['2011'][s[i][3]]>1000000))\n        | Population passes a million\n    else if ([250000, 500000, 1000000].includes(Number.parseFloat(Number.parseFloat(cur(s, place, i)).toPrecision(2))))\n        | Population\n        if (get_word(data[s[i][0]][s[i][1]]['2011'][s[i][3]], \"num\")[0]==\"just under\")\n            | nears \n        else\n            | passes\n        | #[+value(get_word(data[s[i][0]][s[i][1]]['2011'][s[i][3]], \"num\")[1])]\n    else\n        | Population\n        if ((cur(s, place, i)<(Number.parseFloat(Number.parseFloat(cur(s, place, i)).toPrecision(2)))))\n            | nears\n        else if (cur(s, place, i)>(Number.parseFloat(Number.parseFloat(cur(s, place, i))).toPrecision(2)))\n            | passes\n        else \n            | reaches\n        |  #[+value(Number.parseFloat(Number.parseFloat(cur(s, place, i)).toPrecision(2)))]\n\n\n// A younger Manchester\nmixin subheadAge(i)\n    | #[+value(ud(cha(s, place, i), place.name + ' grows older', 'A younger ' + place.name))]\n\nmixin tenYears\n  synz {mode:'sequence'}\n    syn\n      | in the decade to 2021\n    syn\n      | between the last two censuses\n    syn\n      | in the 10 years leading up to 2021\n    syn\n      | in the decade leading up to the last census\n    syn\n      | in the 10 years leading up to the last census\n\n// Between the last two censuses, the average age in Manchester fell by two years, from 34 to 32 years of age.\nmixin sent1Age(i)\n    p\n        | Census 2021 data also shows a #[+value(topics[s[i][0]].synonym)].\n        p\n            | Between the last two censuses, the median age\n            | of #[+value(place.name)] \n            | #[+value(ud(cha(s, place, i), 'rose by', 'fell by'))]\n            | #[+value(Math.abs(cha(s, place, i)), {'TEXTUAL':true })] \n            | #[+value(Math.abs(cha(s, place, i))==1?'year':'years')],\n            | from #[+value(data[s[i][0]][s[i][1]][2001][s[i][3]])]\n            | to #[+value(data[s[i][0]][s[i][1]][2011][s[i][3]])] years of age.\n\n// Manchester's average age is the lowest in the North West and remains considerably lower than the average age across England (38 years of age).\nmixin sent2Age(i)        \n    - let lra = data[s[i][0]][s[i][1]+\"_rank_local\"][2011][s[i][3]]\n    - let agediff = data[s[i][0]][s[i][1]][2011][s[i][3]]-cou.data.agemed.value[2011].all\n    - let agediff01 = data[s[i][0]][s[i][1]][2001][s[i][3]]-cou.data.agemed.value[2001].all\n    if (country==\"England\")\n        | This #[+value((place.classification!='unk')?place.classification:'area')] has \n        if (Math.abs(lra)<4)\n            | the #[+value(ud(lra, ord(lra) + \"highest\", ord(lra) + \"lowest\"))]\n            | average age in #[+value(parent)] and \n        else\n            | a #[+value(adv(cur(s, place, i), cur(s, rgn, i)))] \n            | #[+value(ud(cur(s, place, i)-cur(s, rgn, i), 'higher', 'lower'))]\n            | average age than #[+value(parent)] and\n        if (data[s[i][0]][s[i][1]][2011][s[i][3]]==eng.data.agemed.value[2011].all)\n            | has a similar age to the average local authority area across England (#[+value(eng.data.agemed.value[2011].all)] years of age).\n        else\n            | #[+value((Math.sign(agediff) == Math.sign(agediff01)?'remains':'has become'))] \n            | #[+value(Math.abs(agediff)>4?'': Math.abs(agediff)>2?'somewhat':'slightly')] \n            | #[+value(ud(agediff, 'older', 'younger'))] \n            | than the average local authority area across England (#[+value(eng.data.agemed.value[2011].all)] years of age).\n    else\n        | This #[+value((place.classification!='unk')?place.classification:'area')] has\n        | a #[+value(adv(cur(s, place, i), cur(s, simi, i)))] \n        | #[+value(ud(cur(s, place, i)-cur(s, simi, i), 'higher', 'lower'))]\n        | average age than #[+similarname] (#[+value(cur(s, simi, i))] years of age) and\n        if (Math.abs(lra)<4)\n            | the #[+value(ud(lra, ord(lra) + \"highest\", ord(lra) + \"lowest\"))]\n            | average age in #[+value(parent)].\n        else if (cur(s, place, i)==cur(s, rgn, i))\n            | has a similar age to the average local authority area across Wales (#[+value(rgn.data.agemed.value[2011].all)] years of age).\n        else\n            | #[+value((Math.sign(agediff) == Math.sign(agediff01)?'remains':'has become'))] \n            | #[+value(Math.abs(agediff)>4?'': Math.abs(agediff)>2?'somewhat':'slightly')] \n            | #[+value(ud(agediff, 'older', 'younger'))] \n            | than the average local authority area across Wales (#[+value(rgn.data.agemed.value[2011].all)] years of age).\n\n\n// The drop in age was largely driven by an increase of nearly 50,000 people between the ages of 20 and 29 years, while the population over the age of 70 years decreased by almost two thousand.\nmixin sent3Age(i)\n    - let agediff = data[s[i][0]][s[i][1]][2011][s[i][3]]-cou.data.agemed.value[2011].all\n    | The #[+value(ud(agediff, 'rise', 'drop'))] in age was because of an increase of \n    | #[+value(figs(data.age10yr.absChange['pos'][0][1])[0])]  \n    | #[+value(figs(data.age10yr.absChange['pos'][0][1])[1])]  \n    | #[+value(ageBandLU[data.age10yr.absChange['pos'][0][0]][0])]\n    if (data.age10yr.absChange['neg'][0])\n        | , while the population #[+value(ageBandLU[data.age10yr.absChange['neg'][0][0]][1])] decreased by \n        | #[+value(figs(data.age10yr.absChange['neg'][0][1])[0])]  \n        | #[+value(Math.abs(figs(data.age10yr.absChange['neg'][0][1])[1]))]  \n    | . \n\nmixin rou(x)\n    if (Math.abs(x)<10)\n        | #[+value(Math.round(x*10)/10)]\n    else \n        | #[+value(Math.round(x))]\n\nmixin pc(x)\n    if (Math.abs(x)<10)\n        | #[+value((x/100), {'FORMAT': '0.0%'})]\n    else \n        | #[+value((x/100), {'FORMAT': '0%'})] \n\n// In the decade to 2021, the population of Manchester rose by over 28% from 391,221 to 503,127, giving it the largest headcount of any local authority area in the North West of England.\nmixin sent1pop(i)\n    | #[+tenYears],\n    | the population\n    | of #[+value(place.name)]\n    if (Math.round(data[s[i][0]][s[i][1]][2001][s[i][3]]/1000) == Math.round(data[s[i][0]][s[i][1]][2011][s[i][3]]/1000))\n        | remained close to #[+value(figs(data[s[i][0]][s[i][1]][2011][s[i][3]], 3)[1])].\n    else\n        | #[+value(ud(cha(s, place, i), 'rose', 'fell by'))]\n        | #[+pc(Math.abs(data[s[i][0]][s[i][1]]['change'][s[i][3]]))],\n        | from #[+value(figs(data[s[i][0]][s[i][1]][2001][s[i][3]], 3)[0])]\n        | #[+value(figs(data[s[i][0]][s[i][1]][2001][s[i][3]], 3)[1])]\n        | to #[+value(figs(data[s[i][0]][s[i][1]][2011][s[i][3]], 3)[1])].\n\nmixin geog \n    if (country==\"Wales\")\n        | Wales\n    else\n        | #[+value((parent==\"London\")?\"Greater London\":\"the region\")]\n\n// The addition of over 100,000 people means Manchester's population is also the fastest-growing in the North West and the second-fastest-growing across England. Only Tower Hamlets in London, with an increase of almost 30%, has a faster-growing population.\nmixin sent2pop(i)\n    - var lra = data[s[i][0]][s[i][1]+'_rank_local']['change'][s[i][3]]\n    | The \n    | #[+value(ud(cha(s, place, i), \"addition\", \"loss\"))]\n    | of about\n    | #[+value(Math.abs(figs(data[s[i][0]][s[i][1]][2011][s[i][3]]-data[s[i][0]][s[i][1]][2001][s[i][3]], \"num\")[1]))]\n    | people means this area's population\n    //- If population decreased but not at a high rank\n    if ((cha(s, place, i)<0)&(Math.abs(lra)>3))\n        | decreased by #[+pc(Math.abs(cha(s, place, i)))] between that last two censuses, \n        | while the population of !{cou.name} increased by #[+pc(Math.abs(cha(s, cou, i)))]\n    else\n        | is\n        if (rgn.name!='Wales')\n            if ((Math.abs(lra)<4) & (sign(lra, cha(s, place, i))))\n                | the #[+value(ud(lra, (ord(Math.abs(lra))+\"fastest-growing\"), (ord(Math.abs(lra))+\"most rapidly-declining\")))]\n                | in !{parent}\n                | #[+value((Math.sign(data[s[i][0]][s[i][1]+'_rank']['change'][s[i][3]])!=(Math.sign(data[s[i][0]][s[i][1]+'_rank_local']['change'][s[i][3]])))?\"but\":\"and\")]\n            if (Math.abs(data[s[i][0]][s[i][1]+'_rank']['change'][s[i][3]])<6)\n                if (Math.abs(data[s[i][0]][s[i][1]+'_rank']['change'][s[i][3]])>1)\n                    | the #[+value(Math.abs(data[s[i][0]][s[i][1]+'_rank']['change'][s[i][3]]), {'ORDINAL_TEXTUAL':true})]\n                | #[+value(ud(cha(s, place, i), 'fastest-growing', 'most rapidly-declining'))]\n                | across \n                | #[+value(country)].\n            else\n                if (place.stories[i].value<(eng.data[s[i][0]][s[i][1]]['change'][s[i][3]]-1))\n                    | increasing at a slower rate than the total population of \n                else if (place.stories[i].value>(eng.data[s[i][0]][s[i][1]]['change'][s[i][3]]+1))\n                    | increasing faster than the rate of growth across \n                else\n                    | increasing at a similar rate to the overall population of\n                | #[+value(country)] (#[+value((cha(s, place, i)==cha(s, eng, i))?'also':'')]\n                | up #[+pc(eng.data[s[i][0]][s[i][1]]['change'][s[i][3]])] since the 2011 census).\n        else\n            if ((Math.abs(lra)<4) & (sign(lra, cha(s, place, i))))\n                | the #[+value(ud(lra, (ord(Math.abs(lra))+\"fastest-growing\"), (ord(Math.abs(lra))+\"most rapidly-declining\")))]\n                | in #[+geog]\n                | , while #[+value(place.name)] #[+value(data.population.value_rank[2011].all==data.population.value_rank[2001].all?\"remains\":\"becomes\")] the \n                | #[+value(udord(data.population.value_rank[2011].all, \"most\", \"least\"))] populous\n                | local authority area in the country. \n            else\n                if (place.stories[i].value<(rgn.data[s[i][0]][s[i][1]]['change'][s[i][3]]-1))\n                    | increasing at a slower rate than the total population of \n                else if (place.stories[i].value>(rgn.data[s[i][0]][s[i][1]]['change'][s[i][3]]+1))\n                    | increasing faster than the rate of growth across \n                else\n                    | increasing at a similar rate to the overall population of\n                | Wales (\n                | #[+value((cha(s, place, i)==cha(s, rgn, i))?'also':'')]\n                |up #[+pc(rgn.data[s[i][0]][s[i][1]]['change'][s[i][3]])] since the 2011 census).\n\nmixin val(x)\n    if (Math.abs(x)<10)\n        | #[+value(x, {'FORMAT': '0.0'})]\n    else\n        | #[+value(x, {'FORMAT': '0'})] \n\n// For each football pitch-sized piece of land (about 7,140 square metres), Manchester is now home to, on average, about 31 people, compared to 24 in 2011.\nmixin density \n    if (rgn.name=='Wales')\n        - country = 'Wales'\n    - let ppfp = Number.parseFloat(Number.parseFloat(0.714*data.density.value[2011].all).toPrecision(2))\n    if (ppfp==ppfp)\n        | #[+value(place.name)] is home to, on average, #[+value(ppfp)] #[+value(pluralize('person', ppfp))] per football pitch-sized piece of land (about #[+value(7140)] square metres).\n    else\n        | #[+value(place.name)] is now home to, on average, \n        | #[+value(ppfp)] #[+value(pluralize('person', ppfp))]\n        | per football pitch-sized piece of land (about #[+value(7140)] square metres), compared to \n        | #[+value(Number.parseFloat(Number.parseFloat(0.714*data.density.value[2001].all).toPrecision(2)))] in 2011.\n    if (Math.abs(data.density.value_rank[2011].all)==1)\n        | This makes it #[+value(country)]'s #[+value(udord(data.density.value_rank[2011].all, \"most densely-populated\", \"least densely-populated\"))] #[+value(place.gss.short)].\n    else if (Math.abs(data.density.value_rank_local[2011].all)==1)\n        | This makes it #[+value(parent)]'s #[+value(udord(data.density.value_rank_local[2011].all, \"most densely-populated\", \"least densely-populated\"))] #[+value(place.gss.short)].\n    else if (Math.abs(data.density.value_rank[2011].all)<4)\n        | This makes it #[+value(country)]'s #[+value(udord(data.density.value_rank[2011].all, \"most densely-populated\", \"least densely-populated\"))] #[+value(place.gss.short)].\n    else if (Math.abs(data.density.value_rank_local[2011].all)<4)\n        | This makes it #[+value(parent)]'s #[+value(udord(data.density.value_rank_local[2011].all, \"most densely-populated\", \"least densely-populated\"))] #[+value(place.gss.short)].\n\n// Between 2011 and 2021, Manchester overtook Wiltshire and Liverpool to become England's eighth-most populated local authority.\nmixin sent4Pop(i)\n    | Between 2011 and 2021, this #[+value(place.gss.short)] overtook \n    if (data['density'][s[i][1]+'_rank']['overtake'][s[i][3]].length<4)\n        eachz item in data['density'][s[i][1]+'_rank']['overtake'][s[i][3]] with { separator: ',', last_separator: 'and' }\n            | #{item}\n    else if (data['density'][s[i][1]+'_rank']['overtake'][s[i][3]].length>3)\n        | #[+value(data['density'][s[i][1]+'_rank']['overtake'][s[i][3]].length)] areas, \n        | including #[+value(data['density'][s[i][1]+'_rank']['overtake'][s[i][3]][0])] \n        | and #[+value(data['density'][s[i][1]+'_rank']['overtake'][s[i][3]][1])],\n    | to become England's #[+value(Math.abs(data.density.value_rank[2011].all), {'ORDINAL_TEXTUAL':true})]\n    | most densely populated local authority area.\n\n\nmixin overtake(i, loc)\n    | During this period, !{place.name} \n    if (rgn.name=='Wales')\n        - loc = \"_local\"\n    - var ove = data[s[i][0]][s[i][1]+\"_rank\"+loc]['overtake'][s[i][3]]\n    - var ra = data[s[i][0]][s[i][1]+\"_rank\"+loc][2011][s[i][3]]\n    if (Math.abs(ra)<11)\n        | #[+value(ud(ra, 'overtook', 'fell below'))] \n        if (ove.length<4)\n            eachz item in ove with { separator: ',', last_separator: 'and' }\n                | #{item}\n        else if (ove.length>3)\n            | #[+value(nuword(ove.length))] \n            | local authorities, \n            | including #[+value(ove[0])] \n            | and #[+value(ove[1])],\n        | to become the #[+value((loc == \"_local\") ? parentNT : (country==\"Wales\")?\"Welsh\":\"English\")] local authority area with the\n        | #[+value(ud(ra, (ord(Math.abs(ra))+\"highest\"), (ord(Math.abs(ra))+\"lowest\")))]\n        | percentage of #[+value(topics[s[i][0]][s[i][3]].adj_noun_s)].\n    else\n        | went from having the\n        | #[+value(ord(Math.abs(data[s[i][0]][s[i][1]+\"_rank\"+loc][2001][s[i][3]]))+ud(data[s[i][0]][s[i][1]+\"_rank\"+loc][2001][s[i][3]],\"highest\", \"lowest\"))]\n        | to the #[+value(ud(ra, (ord(Math.abs(ra))+\"highest\"), (ord(Math.abs(ra))+\"lowest\")))] percentage of #[+value(topics[s[i][0]][s[i][3]].adj_noun_s)] out of \n        | #[+value((country==\"England\")?\"309 English\":\"22 Welsh\")] local authorities.\n\n//- mixin percOfRes(place)\n//-     synz {mode:'sequence'}\n//-         syn\n//-             | the percentage of #[+value(place.name)] residents\n//-         syn\n//-             | the percentage of people living in #[+value(place.name)] \n\n// In the 10 years leading up to the last census, the percentage of Manchester residents describing their health as good increased from just over 66% to about 80%.\nmixin sent1Perc(i)\n    if (i==1)\n        p Census 2021 data also shows a #[+value(topics[s[i][0]].synonym)].\n    p the percentage of\n        | #[+value(topic(i).clausal_modifier)] \n        if (cha(s, place, i)<0)\n            | decreased\n        else\n            | increased \n        | from \n        | #[+pc(data[s[i][0]][s[i][1]][2001][s[i][3]])]\n        if (i==1)\n            | in 2011\n        | to \n        | #[+pc(cur(s, place, i))] \n        if (i!=1)\n            | #[+tenYears]\n        | .\n\n// About one in eight (13%) described their health as fair, compared with just over 23% in 2011. The percentage reporting bad health decreased from just under 13% to just over 7%.\nmixin sent2Perc(i, chain0_01, chain0_11, chain1_01, chain1_11)\n    if (Math.round(chain0_01)==Math.round(chain0_11))\n        | The proportion \n        | #[+value((topics[s[i][0]].measure_s=='households')?'that':'who')] \n        | #[+value(topic(i, chains[s[i][3]][0]).verb_past_samp)]\n        | remained close to #[+pc(chain0_01)], while\n    else\n        | In 2021,\n        if (data[s[i][0]][s[i][1]][2011][chains[s[i][3]][0]]<1.7)\n            | #[+pc(data[s[i][0]][s[i][1]][2011][chains[s[i][3]][0]])] of\n        else \n            | #[+value(get_word((data[s[i][0]][s[i][1]][2011][chains[s[i][3]][0]])/100, 'frac')[0])]\n            | #[+value(get_word((data[s[i][0]][s[i][1]][2011][chains[s[i][3]][0]])/100, 'frac')[1])]\n            | (#[+pc(data[s[i][0]][s[i][1]][2011][chains[s[i][3]][0]])])\n        | #[+value(topics[s[i][0]].measure_s)]\n        | #[+value(topic(i, chains[s[i][3]][0]).verb_past_samp)],\n        | compared with\n        | #[+pc(chain0_01)]\n        | in 2011. \n    if (chains[s[i][3]].length>1)\n        | the percentage of\n        | #[+value(topic(i, chains[s[i][3]][1]).clausal_modifier)] \n        | #[+value(ud(chain1_11-chain1_01, 'increased', 'decreased'))]\n        | from \n        | #[+pc(chain1_01)]\n        | to \n        | #[+pc(chain1_11)]\n        | .\n\nmixin inRegion\n    synz {mode:'sequence'}\n        syn \n            | in any other local authority district across\n        syn\n            | anywhere else in\n\n// The proportion of healthy residents in Manchester is growing at the third fastest rate of all local authority disricts across England.\n// The population of Manchester is becoming more healthy at the third fastest of all local authority districts across England.\nmixin topRank(i)\n    | The proportion of #[+value(topic(i).adj_noun)] is \n    | #[+value(ud(cha(s, place, i, \"r\"), 'growing', 'falling'))]\n    if (Math.abs(cha(s, place, i, \"r\"))==1)\n        | faster here than #[+inRegion] #[+value(country)]\n    else \n        | at the third fastest rate of all local authority districts across #[+value(country)]\n    if ((Math.abs(otherRank(s, place, i, 'cou'))==1)&(!hasSaid('OtherChange')))\n        | , while the percentage of \n        | #[+value(topic(i, otherEst(s, place, i, cha(s, place, i, \"r\"), 'change')).adj_noun)] is \n        | #[+value(ud(otherRank(s, place, i, 'cou'), 'increasing', 'decreasing'))]\n        | faster than anywhere else in the #[+value(city)].\n        if ((i!=hiRank.rankIn)&(s[i][0]!='health'))\n            p #[+nowHasReg(i)] \n        recordSaid('OtherChange')\n    else\n        | .\n        if (Math.abs(cur(s, place, i, \"r\"))<11)\n            | #[+nowHasCou(i)]\n        else\n            | #[+considImprov(i)]\n\n// The proportion of healthy residents is increasing faster here than in any other local authority district across the region.\nmixin topRankLoc(i)\n    | The proportion of #[+value(topic(i).adj_noun)] is \n    if (cha(s, place, i, \"rl\")<0)\n        | decreasing\n    else\n        | increasing\n    | faster here than #[+inRegion] #[+value(parent)]\n    if ((Math.abs(otherRank(s, place, i, \"rl\"))==1)&(!hasSaid('OtherChange')))\n        | , while the percentage of \n        | #[+value(topic(i, otherEst(s, place, i, cha(s, place, i, \"rl\"), 'change')).adj_noun)] is \n        | #[+value(ud(otherRank(s, place, i, \"rl\"), 'growing', 'falling'))]\n        | faster than anywhere else in the #[+value(city)]\n        if ((i!=hiRank.rankIn)&(s[i][0]!='health'))\n            p #[+nowHasReg(i)] \n        recordSaid('OtherChange')\n    else\n        | .\n        if (Math.abs(cur(s, place, i, \"rl\"))<4)\n            | As a result, #[+nowHasReg(i)]\n            if ((i!=hiRank.rankIn)&(s[i][0]!='health'))\n                p #[+nextHighest(i)]\n        else\n            | #[+considImprov(i)]\n\n// This mixin determines how the rest of the section will be generated\nmixin sent3Perc(i)\n    if (Math.abs(cha(s, place, i, \"r\"))<4)\n        | #[+topRank(i)]\n    else if (Math.abs(cha(s, place, i, \"rl\"))==1)\n        | #[+topRankLoc(i)] \n    else\n        | The proportion of  #[+value(topic(i).adj_noun)] has been\n        | #[+value(ud(cha(s, place, i), 'growing', 'falling'))]\n        if (country==\"England\")\n            if ((cha(s, place, i)>cha(s, near, i)-1)&(cha(s, place, i)<cha(s, near, i)+1))\n                | at a similar rate to \n            else\n                | #[+value(uds((Math.abs(cha(s, place, i)) - Math.abs(cha(s, rgn, i))), 'faster here than', 'at a slower rate here than', 'here at a similar rate to'))]\n            | the figure for the whole of #[+value(parent)]\n            | (from #[+pc((rgn.data[s[i][0]][s[i][1]][2001][s[i][3]]))] in 2011 to \n            | #[+pc((cur(s, rgn, i)))] in 2021)\n            if ((sign(Math.abs(cha(s, place, i))-Math.abs(cha(s, rgn, i))), sign(Math.abs(cha(s, place, i))-Math.abs(cha(s, eng, i)))))\n                | and across #[+value(country)] \n                | (from #[+pc((eng.data[s[i][0]][s[i][1]][2001][s[i][3]]))] to \n                | #[+pc((eng.data[s[i][0]][s[i][1]][2011][s[i][3]]))]).\n            else\n                | . Across #[+value(country)], the proportion #[+value(ud(cha(s, rgn, i), 'rose', 'fell'))]\n                | from #[+pc((eng.data[s[i][0]][s[i][1]][2001][s[i][3]]))] to \n                | #[+pc((eng.data[s[i][0]][s[i][1]][2011][s[i][3]]))].\n        else\n            if ((cha(s, place, i)>cha(s, near, i)-1)&(cha(s, place, i)<cha(s, near, i)+1))\n                | at a similar rate to \n            else\n                | #[+value(ud(Math.abs(cha(s, place, i))-Math.abs(cha(s, near, i)), 'faster', 'at a slower rate'))]\n                | here than in \n            | #[+nearbyname]\n            | (from #[+pc((near.data[s[i][0]][s[i][1]][2001][s[i][3]]))] in 2011 to \n            | #[+pc((near.data[s[i][0]][s[i][1]][2011][s[i][3]]))] in 2021)\n            if ((sign(Math.abs(cha(s, place, i))-Math.abs(cha(s, near, i))), sign(Math.abs(cha(s, place, i))-Math.abs(cha(s, rgn, i)))))\n                | and across #[+value(parent)]\n                | (from #[+pc((rgn.data[s[i][0]][s[i][1]][2001][s[i][3]]))] to \n                | #[+pc((rgn.data[s[i][0]][s[i][1]][2011][s[i][3]]))]) .\n            else \n                | . Across Wales, the proportion #[+value(ud(cha(s, rgn, i), 'rose', 'fell'))]\n                | from #[+pc((rgn.data[s[i][0]][s[i][1]][2001][s[i][3]]))] to \n                | #[+pc((rgn.data[s[i][0]][s[i][1]][2011][s[i][3]]))].\n\n// Blackburn with Darwen has the region's next lowest proportion of residents from a White ethnic group (69.2%), while 90.1% in nearby Salford are from a White ethnic group.\nmixin nextHighest(i)\n    if (cur(s, place, i, \"rl\")<0)\n        | #[+value(data[s[i][0]][s[i][1]+\"_rank_local\"]['above_below'][s[i][3]].above.name)] \n        | has the region's next lowest proportion of \n        | #[+value(topic(i).adj_noun)]\n        | (#[+pc((data[s[i][0]][s[i][1]+\"_rank_local\"]['above_below'][s[i][3]].above.value))]), \n    else\n        | #[+value(data[s[i][0]][s[i][1]+\"_rank_local\"]['above_below'][s[i][3]].below.name)] \n        | has the region's next highest proportion of \n        | #[+value(topic(i).adj_noun)]\n        | (#[+pc((data[s[i][0]][s[i][1]+\"_rank_local\"]['above_below'][s[i][3]].below.value))]),\n    | while the proportion is\n    | #[+pc((near.data[s[i][0]][s[i][1]][2011][s[i][3]]))]\n    | in #[+value(near.name)].\n\n// As a result, this area now has the country's highest proportion of private renters and the lowest proportion of homeowners.\nmixin nowHasCou(i)\n    | As a result, this area now has the country's \n    if (Math.abs(data[s[i][0]][s[i][1]+'_rank']['2011'][s[i][3]])!=1)\n        | #[+value(data[s[i][0]][s[i][1]+'_rank']['2011'][s[i][3]], {'ORDINAL_TEXTUAL':true})]\n    if (data[s[i][0]][s[i][1]+'_rank']['2011'][s[i][3]]<0)\n        | lowest\n    else\n        | highest \n    | proportion of \n    | #[+value(topic(i).adj_noun)]\n    | and the lowest proportion of homeowners\n    | .\n\n// As a result, this area now has the region’s highest proportion of private renters and the lowest proportion of homeowners.\nmixin nowHasReg(i)\n    | this area now has \n    if (parent==\"London\")\n        | Greater London's\n    else\n        | the region’s \n    if (Math.abs(data[s[i][0]][s[i][1]+'_rank_local']['2011'][s[i][3]])!=1)\n        | #[+value(Math.abs(data[s[i][0]][s[i][1]+'_rank_local']['2011'][s[i][3]]), {'ORDINAL_TEXTUAL':true})]\n    if (data[s[i][0]][s[i][1]+'_rank_local']['2011'][s[i][3]]<0)\n        | lowest proportion of #[+value(topic(i).adj_noun)]\n        if (data[s[i][0]][s[i][1]+'_rank_local']['2011'][otherEst(s, place, i, 'highest', '2011')]==1)\n            | and the \n            | highest proportion of \n            | #[+value(topic(i, otherEst(s, place, i, 'highest', '2011')).adj_noun)]\n    else\n        | highest proportion of #[+value(topic(i).adj_noun)]\n        if (data[s[i][0]][s[i][1]+'_rank_local']['2011'][otherEst(s, place, i, 'lowest', '2011')]==-1)\n            | and the \n            | lowest proportion of\n            | #[+value(topic(i, otherEst(s, place, i, 'lowest', '2011')).adj_noun)]\n    | .\n\n// The considerable improvement has brought health in Manchester close to the national average (about 81% in England described their health as good in 2021).\nmixin considImprov(i)\n    if (data[s[i][0]][s[i][1]+'_rank_local']['change'][s[i][3]]==1)\n        if (data[s[i][0]][s[i][1]][2011][s[i][3]]<(eng.data[s[i][0]][s[i][1]][2011][s[i][3]]-2))\n            | But despite the improvement, \n            | #[+value(place.name)] \n            | remains \n            | less healthy than \n        else if (data[s[i][0]][s[i][1]][2011][s[i][3]]>(eng.data[s[i][0]][s[i][1]][2011][s[i][3]]+2))\n            | As a result, #[+value(place.name)] \n            | has become more healthy than\n        else\n            | The improvement has brought health in \n            | #[+value(place.name)] close to \n        | the national average\n        | #[+pc(eng.data[s[i][0]][s[i][1]][2011][s[i][3]])]\n        | in #[+value(country)] described their health as good in 2021).\n    else\n        if (data[s[i][0]][s[i][1]][2011][s[i][3]]<(eng.data[s[i][0]][s[i][1]][2011][s[i][3]]-2))\n            | But despite the improvement, \n            | #[+value(place.name)] \n            | remains \n            | less healthy than \n        else if (data[s[i][0]][s[i][1]][2011][s[i][3]]>(eng.data[s[i][0]][s[i][1]][2011][s[i][3]]+2))\n            | As a result, #[+value(place.name)] \n            | has become more healthy than   \n        else\n            | The improvement has brought health in \n            | #[+value(place.name)] close to \n        | the regional average\n        | #[+pc(rgn.data[s[i][0]][s[i][1]][2011][s[i][3]])]\n        | in #[+value(parent)] described their health as good in 2021).\n\nmixin healthExplain\n    | These data are people’s own opinions in describing their overall health. They may be inconsistent with other measures of health, such as NHS records.\n\n//- The rate of self-employment rose in Darlington, but at a slower rate than all other local authorities in the the North East.\n//- Private renting rose in Maldon, but at a slower rate than all other local authorities in East England, except Luton and Watford.\nmixin butSlower(i, loc)\n    p \n        | #[+value(topic(i, s[i][3]).sample)] \n        | #[+value(ud(cha(s, place, i), 'rose', 'fell'))]\n        | in #[+value(place.name)], but at\n        if (data[s[i][0]][s[i][1]+'_rank'+loc][s[i][2]][s[i][3]]>3)|(rgn.name==\"Wales\")\n            - loc = \"_local\"\n        if (data[s[i][0]][s[i][1]+'_rank'+loc][s[i][2]][s[i][3]]>3)\n            | the #[+value(ord(data[s[i][0]][s[i][1]+'_rank'+loc][s[i][2]][s[i][3]]))] \n            | slowest rate of any local authority are across #[+value(country)]. \n        else\n            | a slower rate than all other\n            | #[+value((loc!=\"_local\")? (\"local authority areas across \" + country): (parent==\"London\")? place.gss.long+\"s\" :\"local authorities in \"+parent)]\n            if (Math.abs(data[s[i][0]][s[i][1]+'_rank'+loc][s[i][2]][s[i][3]])!=1)\n                | , except #[+value(data[s[i][0]][s[i][1]+'_rank'+loc].top_bottom[s[i][3]][1].name)]\n                if (Math.abs(data[s[i][0]][s[i][1]+'_rank'+loc][s[i][2]][s[i][3]])!=2)\n                    | and #[+value(data[s[i][0]][s[i][1]+'_rank'+loc].top_bottom[s[i][3]][2].name)] \n        | .\n\n\nmixin rank1reg(i)\n    // In the rare occasion that the bottom rank is a positive change, vice versa\n    if (Math.sign(data[s[i][0]][s[i][1]+'_rank_local'][s[i][2]][s[i][3]]) != Math.sign(cha(s, place, i)))\n        | #[+butSlower(i, \"_local\")]\n    else\n        | This area saw #[+value(parent)]'s \n        | #[+value(drop(data[s[i][0]][s[i][1]+'_rank_local'][s[i][2]][s[i][3]], 'largest drop', 'largest rise'))]\n        | in the proportion of #[+value(topic(i, s[i][3]).adj_noun)].\n        p #[+acrossRegion(i)]\n\n//- This district saw England's second-largest drop in the proportion of people who describe themselves as Christian.\nmixin rank1nat(i)\n    // In the rare occasion that the bottom rank is a positive change, vice versa\n    if (Math.sign(data[s[i][0]][s[i][1]+'_rank'][s[i][2]][s[i][3]]) != Math.sign(cha(s, place, i)))\n        | #[+butSlower(i, \"\")]\n    else\n        | This area saw #[+value(country)]'s \n        | #[+value(drop(data[s[i][0]][s[i][1]+'_rank'][s[i][2]][s[i][3]], 'largest drop', 'largest rise'))]\n        | in the proportion of #[+value(topic(i, s[i][3]).adj_noun)].\n        p #[+acrossCountry(i)]\n\nmixin rank2(i)\n    | In 2021,\n    if (data[s[i][0]][s[i][1]][2011][s[i][3]]<1.7)\n        | #[+pc(data[s[i][0]][s[i][1]][2011][s[i][3]])] of\n    else \n        | #[+value(get_word((data[s[i][0]][s[i][1]][2011][s[i][3]])/100, 'frac')[0])]\n        | #[+value(get_word((data[s[i][0]][s[i][1]][2011][s[i][3]])/100, 'frac')[1])]\n        | (#[+pc(data[s[i][0]][s[i][1]][2011][s[i][3]])])\n    | #[+value(topics[s[i][0]].measure_s)] in !{place.name}\n    | #[+value(topic(i, s[i][3]).verb_past_samp)],\n    | compared with\n    | #[+pc(data[s[i][0]][s[i][1]][2001][s[i][3]])]\n    | in 2011. \n    | The percentage\n    | #[+value(topic(i, chains[s[i][3]][0]).verb)] \n    if (data[s[i][0]][s[i][1]][2001][chains[s[i][3]][0]]>data[s[i][0]][s[i][1]][2011][chains[s[i][3]][0]])\n        | decreased \n    else\n        | increased\n    | from \n    | #[+pc(data[s[i][0]][s[i][1]][2001][chains[s[i][3]][0]])]\n    | to \n    | #[+pc(data[s[i][0]][s[i][1]][2011][chains[s[i][3]][0]])]\n    | .\n\nmixin regional \n    if (parent==\"Wales\")\n        | Welsh\n    else\n        | regional\n\nmixin region\n    if (parent==\"Wales\")\n        | Wales\n    else if (parent==\"London\")\n        | Greater London\n    else\n        | the region\n\n//- Across the North East, Manchester (from 50% in 2011 to 30% in 2021) saw the next greatest drop in the proportion of people working long hours, while the regional average decreased from 40% to 20%.\nmixin acrossRegion(i)\n    | Across the region, \n    - var rl = data[s[i][0]][s[i][1]+'_rank_local'][s[i][2]][s[i][3]]\n    if (Math.abs(rl)==1)\n        | #[+value(data[s[i][0]][s[i][1]+'_rank_local'].top_bottom[s[i][3]][rl<0?\"-2\":\"2\"].name)] \n        | #[+county(data[s[i][0]][s[i][1]+'_rank_local'].top_bottom[s[i][3]][rl<0?\"-2\":\"2\"].name)]\n        | saw the next greatest #[+value([rl<0?\"decrease\":\"increase\"])] in the proportion of #[+value(topic(i).adj_noun)]\n        | (from #[+pc((data[s[i][0]][s[i][1]+'_rank_local'].top_bottom[s[i][3]][rl<0?\"-2\":\"2\"][2001]))] in 2011 \n        | to #[+pc((data[s[i][0]][s[i][1]+'_rank_local'].top_bottom[s[i][3]][rl<0?\"-2\":\"2\"][2011]))] in 2021) \n        | .\n    else if (Math.abs(data[s[i][0]][s[i][1]+'_rank_local'][s[i][2]][s[i][3]])==2)\n        | only \n        | #[+value(data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-1\":\"1\"]['name'])]\n        | #[+county(data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-1\":\"1\"]['name'])]\n        | saw a greater #[+value((rl<0)?'fall':'rise')] in the proportion of #[+value(topic(i).adj_noun)]\n        | (from \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-1\":\"1\"]['2001']))] to \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-1\":\"1\"]['2011']))]) \n        | .\n    else if (Math.abs(data[s[i][0]][s[i][1]+'_rank_local'][s[i][2]][s[i][3]])==3)\n        | only \n        | #[+value(data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-1\":\"1\"]['name'])]\n        | #[+county(data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-1\":\"1\"]['name'])]\n        | (from \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-1\":\"1\"]['2001']))] to \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-1\":\"1\"]['2011']))]) \n        | and \n        | #[+value(data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-2\":\"2\"]['name'])]\n        | #[+county(data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-2\":\"2\"]['name'])]\n        | (from \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-2\":\"2\"]['2001']))] to \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank_local']['top_bottom'][s[i][3]][(rl<0)?\"-2\":\"2\"]['2011']))]) \n        | saw a greater #[+value(cha(s, place, i)<0?\"decrease\":\"increase\")] in the proportion of #[+value(topic(i).adj_noun)].\n\n//- Across the North East, the proportion of self-employed people rose from 10% in 2011 to 15% in 2021, while the proportion in nearby Middlesborough rose from 11% to 14%.\nmixin acrossRegionExcept(i)\n    | Across #[+value(parent)], the proportion of #[+value(topic(i).adj_noun)]\n    | #[+value(ud(cha(s, rgn, i), 'rose', 'fell'))]\n    | from #[+pc((rgn.data[s[i][0]][s[i][1]]['2001'][s[i][3]]))] to \n    | #[+pc((rgn.data[s[i][0]][s[i][1]]['2011'][s[i][3]]))] between the last two censuses,\n    | while the proportion in #[+nearbyname]\n    | #[+value(ud(cha(s, near, i), 'rose', 'fell'))]\n    | from #[+pc((near.data[s[i][0]][s[i][1]]['2001'][s[i][3]]))] to \n    | #[+pc((near.data[s[i][0]][s[i][1]]['2011'][s[i][3]]))].\n\nmixin county(p)\n    if (countyLU[p])\n        if (fuzz(countyLU[p], p))\n            if (countyLU[p]!=countyLU[place.name])\n                | in #[+value(countyLU[p])]\n        else if ((regionLU[p])&(regionLU[place.name]))\n            if (regionLU[p]!=regionLU[place.name])\n                | in #[+value(uncap1(regionThe(regionLU[p])))]\n    else if (regionLU[p]&(regionLU[place.name]))\n        if (regionLU[p]!=regionLU[place.name])\n            | in #[+value(uncap1(regionThe(regionLU[p])))]\n\n\nmixin acrossCountry(i)\n    - let loc\n    if (rgn.name=='Wales')\n        - loc = \"_local\"\n    else \n        - loc = \"\"\n    - var r = data[s[i][0]][s[i][1]+'_rank'][s[i][2]][s[i][3]]\n    if (Math.abs(r)==1)\n        | #[+value(data[s[i][0]][s[i][1]+'_rank'+loc].top_bottom[s[i][3]][r<0?\"-2\":\"2\"].name)] \n        | #[+county(data[s[i][0]][s[i][1]+'_rank'+loc].top_bottom[s[i][3]][r<0?\"-2\":\"2\"].name)]\n        | saw the next greatest #[+value((r<0)?\"drop\":\"rise\")]\n        | (from #[+pc((data[s[i][0]][s[i][1]+'_rank'+loc].top_bottom[s[i][3]][r<0?\"-2\":\"2\"][2001]))] \n        | to #[+pc((data[s[i][0]][s[i][1]+'_rank'+loc].top_bottom[s[i][3]][r<0?\"-2\":\"2\"][2011]))])\n        | .\n    else if (Math.abs(data[s[i][0]][s[i][1]+'_rank'][s[i][2]][s[i][3]])==2)\n        | The greatest #[+value((r<0)?\"decrease\":\"increase\")] occurred in \n        | #[+value(data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-1\":\"1\"]['name'])]\n        | #[+county(data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-1\":\"1\"]['name'])]\n        | (from \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-1\":\"1\"]['2001']))] to \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-1\":\"1\"]['2011']))]) \n        | .\n    else if (Math.abs(data[s[i][0]][s[i][1]+'_rank'][s[i][2]][s[i][3]])==3)\n        | The greatest #[+value((r<0)?\"decrease\":\"increase\")] occurred in \n        | #[+value(data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-1\":\"1\"]['name'])]\n        | #[+county(data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-1\":\"1\"]['name'])]\n        | (from \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-1\":\"1\"]['2001']))] to \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-1\":\"1\"]['2011']))]) \n        | followed by\n        | #[+value(data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-2\":\"2\"]['name'])]\n        | #[+county(data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-2\":\"2\"]['name'])]\n        | (from \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-2\":\"2\"]['2001']))] to \n        | #[+pc((data[s[i][0]][s[i][1]+'_rank'+loc]['top_bottom'][s[i][3]][r<0?\"-2\":\"2\"]['2011']))]).\n\nmixin despiteRegion(i)\n    | Despite the shift in #[+value(topics[s[i][0]].general)], #[+value(place.name)] still has #[+value(parent)]'s \n    | #[+value(udord(data[s[i][0]][s[i][1]+'_rank_local'][s[i][2]][s[i][3]], 'highest propotion', 'lowest propotion'))]\n    | of #[+value(topic(i)['adj_noun'])], \n    | behind\n    | #[+value(data[s[i][0]][s[i][1]+'_rank_local']['above_below'][s[i][3]].above.name)]\n    | (#[+pc(data[s[i][0]][s[i][1]+'_rank_local']['above_below'][s[i][3]].above.value)]).\n\nmixin despiteCountry(i)\n    | Despite the shift in #[+value(topics[s[i][0]].general)], #[+value(place.name)] still has #[+value(country)]'s \n    | #[+value(udord(data[s[i][0]][s[i][1]+'_rank'][s[i][2]][s[i][3]], 'highest propotion', 'lowest propotion'))]\n    | of #[+value(topic(i)['adj_noun'])], \n    | behind \n    | #[+value(data[s[i][0]][s[i][1]+'_rank']['above_below'][s[i][3]].above.name)]\n    | (#[+pc(data[s[i][0]][s[i][1]+'_rank']['above_below'][s[i][3]].above.value)]).\n\nmixin ppoint\n    if !hasSaid('PP')\n        | percentage points (pp)\n        recordSaid('PP')\n    else\n        | pp\n\nmixin sent2Diff(i, chain0_01, chain0_11, chain1_01, chain1_11)\n    | #[+value(topic(i, chains[s[i][3]][0]).sample)] in \n    | #[+value(place.name)]\n    if (Math.round(chain0_11)==Math.round(chain0_01))\n        | remained close to #[+pc((chain0_11))]\n    else\n        | #[+value(ud(chain0_11-chain0_01, 'rose', 'fell'))]\n        | from \n        | #[+pc(chain0_01)]\n        | to \n        | #[+pc(chain0_11)]\n    if (chains[s[i][3]].length>1)\n        | , while #[+value(topic(i, chains[s[i][3]][1]).sample)]\n        if (Math.round(chain1_11*10)/10==Math.round(chain1_01*10)/10)\n            | remained close to #[+pc((chain1_11))]\n        else\n            | #[+value(ud(chain1_11-chain1_01, 'increased', 'decreased'))]\n            | from \n            | #[+pc(chain1_01)]\n            | to \n            | #[+pc(chain1_11)]\n    | .\n\n//- The percentage of residents from a Black ethnic group changed very little in Lambeth, while the proportion rose across London.\nmixin difference(i, chain0_01, chain0_11, chain1_01, chain1_11)\n    | The percentage of #[+value(topic(i).adj_noun)] \n    if (Math.abs(cha(s, place, i))<1)\n        | changed very little\n        //- if ((cur(s, place, i)-cur(s, eng, i))<-2)\n        //-     if ((prev(s, place, i)-prev(s, eng, i))<0)\n        //-         | remained lower than average\n        //-     else\n        //-         | became lower the average\n        //- else if ((cur(s, place, i)-cur(s, eng, i))>2)\n        //-     if ((prev(s, place, i)-prev(s, eng, i))>0)\n        //-         | remained higher than average\n        //-     else\n        //-         | became higher than average\n        //- else \n        //-     if ((prev(s, place, i)-prev(s, eng, i))>2)|((prev(s, place, i)-prev(s, eng, i))<-2)\n        //-         | became close to average\n        //-     else\n        //-         | remained close to average \n    else\n        | is #[+value(ud(cha(s, place, i), 'rising', 'falling'))] \n    synz {mode:'sequence'}\n        syn\n            | in #[+value(place.name)]\n        syn\n            | here\n        syn\n            | in this #[+value((place.classification!='unk')?place.classification:'area')]\n        syn\n            | in this area\n    - var curDif\n    if ((stories[i].type.includes('nearDiff'))&(!hasSaid('nearDiff'))|(eq(stories[i].type, ['nearDiff'])))\n        recordSaid('nearDiff')\n        - curDif = 'nearDiff'\n        if (Math.abs(cha(s, place, i))<1)\n            | , while the proportion #[+value(ud(cha(s, near, i), 'rose', 'fell'))] in\n        else\n            if (Math.abs(cha(s, place, i)) < Math.abs(cha(s, near, i)))\n                | , but at a slower rate than in\n            else\n                | at a faster rate than in\n        | #[+nearbyname].\n    else if ((stories[i].type.includes('simiDiff'))&(!hasSaid('simiDiff'))|(eq(stories[i].type, ['simiDiff'])))\n        recordSaid('simiDiff')\n        - curDif = 'simiDiff'\n        if (Math.abs(cha(s, place, i))<1)\n            | , while the proportion #[+value(ud(cha(s, place.similar, i), 'rose', 'fell'))] in\n        else\n            if (Math.abs(cha(s, place, i)) < Math.abs(cha(s, place.similar, i)))\n                | , but at a slower rate than in\n            else\n                | at a faster rate than in\n        | #[+similarname].\n    else if (stories[i].type.includes('regDiff')&(!hasSaid('regDiff'))|(eq(stories[i].type, ['regDiff'])))\n        recordSaid('regDiff')\n        - curDif = 'regDiff'\n        if (Math.abs(cha(s, place, i))<1)\n            | , while the proportion #[+value(ud(cha(s, rgn, i), 'rose', 'fell'))] \n        else\n            if (Math.abs(cha(s, place, i)) < Math.abs(cha(s, rgn, i)))\n                | , but at a slower rate than\n            else\n                | at a faster rate than\n        | across #[+value(parent)].\n    else if (stories[i].type.includes('couDiff')&(!hasSaid('couDiff'))|(eq(stories[i].type, ['couDiff'])))\n        recordSaid('couDiff')\n        - curDif = 'couDiff'\n        if (Math.abs(cha(s, place, i))<1)\n            | , while the proportion #[+value(ud(cha(s, eng, i), 'rose', 'fell'))] \n        else\n            if (Math.abs(cha(s, place, i)) < Math.abs(cha(s, eng, i)))\n                | , but at a slower rate than\n            else\n                | at a faster rate than\n        | across #[+value(country)].\n    p \n        | In #[+value(place.name)], the proportion of #[+value(topic(i).adj_noun_s)] \n        if (Math.abs(cha(s, place, i))<0.5)\n            | stayed close to #[+pc((data[s[i][0]][s[i][1]][2011][s[i][3]]))] between the last two censuses.\n        else\n            | #[+value(ud(cha(s, place, i), 'increased', 'decreased'))] \n            | from \n            | #[+pc((data[s[i][0]][s[i][1]][2001][s[i][3]]))]\n            | in 2011 to \n            | #[+pc((data[s[i][0]][s[i][1]][2011][s[i][3]]))]\n            | in 2021. \n        | During the same period, the \n        if (curDif == 'nearDiff')\n            | proportion in #[+nearbyname]\n            | #[+value(ud(cha(s, near, i), 'increased', 'decreased'))]  from \n            | #[+pc((near.data[s[i][0]][s[i][1]][2001][s[i][3]]))] to \n            | #[+pc((near.data[s[i][0]][s[i][1]][2011][s[i][3]]))] \n        else if (curDif == 'simiDiff')\n            | proportion in #[+similarname]\n            | #[+value(ud(cha(s, place.similar, i), 'increased', 'decreased'))]  from \n            | #[+pc((place.similar.data[s[i][0]][s[i][1]][2001][s[i][3]]))] to \n            | #[+pc((place.similar.data[s[i][0]][s[i][1]][2011][s[i][3]]))] \n        else if (curDif == 'regDiff')\n            | regional proportion\n            | #[+value(ud(cha(s, rgn, i), 'increased', 'decreased'))]  from \n            | #[+pc((rgn.data[s[i][0]][s[i][1]][2001][s[i][3]]))] to \n            | #[+pc((rgn.data[s[i][0]][s[i][1]][2011][s[i][3]]))] \n        else if (curDif == 'couDiff')\n            | proportion across #[+value(country)]\n            | #[+value(ud(cha(s, eng, i), 'increased', 'decreased'))]  from \n            | #[+pc((eng.data[s[i][0]][s[i][1]][2001][s[i][3]]))] to \n            | #[+pc((eng.data[s[i][0]][s[i][1]][2011][s[i][3]]))] \n        | .\n    | #[+sent2Diff(i, chain0_01, chain0_11, chain1_01, chain1_11)]\n\nmixin similarname\n    | #[+value(place.similar.name)]\n    if (!hasSaid('SIMILAR'))\n        recordSaid('SIMILAR')\n        | , a statistically similar local authority area\n        | #[+county(place.similar.name)]\n\nmixin nearbyname\n    if (!hasSaid('NEARBY'))\n        recordSaid('NEARBY')\n        | nearby\n    | #[+value(near.name)]\n\nmixin buck(i, curBuck, chain0_01, chain0_11, chain1_01, chain1_11)\n    | The percentage of #[+value(topic(i).adj_noun)] \n    | is #[+value(ud(cha(s, place, i), 'rising', 'falling'))] \n    synz {mode:'sequence'}\n        syn\n            | in #[+value(place.name)]\n        syn\n            | here\n        syn\n            | in this #[+value((place.classification!='unk')?place.classification:'area')]\n        syn\n            | in this area\n    | #[+value(ud(cha(s, place, i), ', while falling', ', while rising'))]\n    if (stories[i].type.includes('regBuck')&stories[i].type.includes('couBuck'))\n        | across #[+value(parent)] and #[+value(country)]\n    else if (curBuck=='regBuck')\n        | across #[+value(parent)]\n    else if (curBuck=='couBuck')\n        | across #[+value(country)]\n    else if (curBuck==\"simiBuck\")\n        | in #[+similarname]\n    else if (curBuck==\"nearBuck\")\n        | in #[+nearbyname]\n    | .\n    p \n        | In #[+value(place.name)], the proportion \n        | #[+value(ud(cha(s, place, i), 'went up', 'came down'))]\n        | from \n        | #[+pc((data[s[i][0]][s[i][1]][2001][s[i][3]]))]\n        | in 2011 to \n        | #[+pc((data[s[i][0]][s[i][1]][2011][s[i][3]]))]\n        | in 2021\n        if (curBuck=='couBuck')\n            | , while across #[+value(country)] it\n            | #[+value(ud(cha(s, place, i), 'fell', 'went up'))]\n            | from #[+pc((eng.data[s[i][0]][s[i][1]][2001][s[i][3]]))]\n            | to #[+pc((eng.data[s[i][0]][s[i][1]][2011][s[i][3]]))]\n        else if (curBuck==\"simiBuck\")\n            | , while across #[+value(country)] it\n            | #[+value(ud(cha(s, place, i), 'fell', 'went up'))]\n            | from #[+pc((place.similar.data[s[i][0]][s[i][1]][2001][s[i][3]]))]\n            | to #[+pc((place.similar.data[s[i][0]][s[i][1]][2011][s[i][3]]))]\n        else if (curBuck==\"nearBuck\")\n            | , while across #[+value(country)] it\n            | #[+value(ud(cha(s, place, i), 'fell', 'went up'))]\n            | from #[+pc((near.data[s[i][0]][s[i][1]][2001][s[i][3]]))]\n            | to #[+pc((near.data[s[i][0]][s[i][1]][2011][s[i][3]]))]\n        | .\n        | During the same period, the regional proportion #[+value(ud(cha(s, rgn, i), 'rose', 'fell'))] from \n        | #[+pc((rgn.data[s[i][0]][s[i][1]][2001][s[i][3]]))] to \n        | #[+pc((rgn.data[s[i][0]][s[i][1]][2011][s[i][3]]))].\n    | #[+sent2Diff(i, chain0_01, chain0_11, chain1_01, chain1_11)]\n\nmixin allOthers(i, r, updo)\n    | Every local authority area across #[+value(parent)] saw a #[+value((updo==\"d\")?\"fall\":\"rise\")]\n    | in the proportion of #[+value(topic(i).adj_noun)], as the regional average\n    | #[+value((updo==\"d\")?\"dropped\":\"grew\")] from #[+pc((rgn.data[s[i][0]][s[i][1]][2001][s[i][3]]))]\n    | to #[+pc((rgn.data[s[i][0]][s[i][1]][2011][s[i][3]]))].\n\nmixin welsh(i)\n    p\n        | The proportion of Welsh speakers in !{place.name} \n        | #[+value(ud(cha(s, place, i), 'rose', 'fell'))] \n        | from #[+pc((place.data[s[i][0]][s[i][1]][2001][s[i][3]]))]\n        | to #[+pc((place.data[s[i][0]][s[i][1]][2011][s[i][3]]))]\n        | in the 10 years leading up to the last census. \n    if (Math.abs(place.data[s[i][0]][s[i][1]+'_rank_local']['change'][s[i][3]])<4)\n        p \n            | This amounts to the \n            | #[+value(drop(data[s[i][0]][s[i][1]+'_rank_local']['change'][s[i][3]], 'largest decline', 'largest increase'))]\n            | in the porportion of Welsh speakers of any local authority area in the country.\n            if (data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[1].name!=place.name)\n                | Of the few areas where knowledge of the Welsh language increased, !{data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[1].name} saw the greatest change\n                | (from \n                | #[+pc((data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[1][2001]))]\n                | to \n                | #[+pc((data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[1][2011]))]).\n            else \n                | The next greatest increase was seen in !{data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[2].name} \n                | (from #[+pc((data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[2][2001]))] in 2011 to \n                | #[+pc((data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[2][2011]))] in 2021), \n                | while !{data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[\"-1\"].name} saw the greatest decline\n                | (from #[+pc((data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[\"-1\"][2001]))] to \n                | #[+pc((data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[\"-1\"][2011]))]).\n    p \n        - let v11speak = place.data[s[i][0]]['value'][2011][s[i][3]]\n        - let v01speak = place.data[s[i][0]]['value'][2001][s[i][3]]\n        - let v11nosp = place.data[s[i][0]]['value'][2011]['NoWelsh']\n        - let v01nosp = place.data[s[i][0]]['value'][2001]['NoWelsh']\n        - let difnosp = v11nosp - v01nosp\n        - let difspeak = v11speak - v01speak\n        | There are \n        | #[+value(Math.abs(difspeak))]  \n        | #[+value((difspeak)<0?'fewer':'more')] people living \n        if (Math.abs(place.data[s[i][0]][s[i][1]+'_rank_local']['change'][s[i][3]])>3)\n            | here \n        else\n            | in !{place.name} \n        | who speak Welsh compared with 2011, \n        | while the number of people who do not speak Welsh #[+value((difnosp)>0?'increased':'decreased')] by #[+value(Math.abs(difnosp))].\n    p\n        if (Math.round(place.nearbyArea.nearTops.data[s[i][0]][s[i][1]][2011][s[i][3]]*10) == Math.round(place.nearbyArea.nearTops.data[s[i][0]][s[i][1]][2001][s[i][3]]*10))\n            | In #[+nearbyname], the proportion of people over the age of three\n            | who can speak some Welsh remained close to #[+pc((place.nearbyArea.nearTops.data[s[i][0]][s[i][1]][2011][s[i][3]]))].\n        else\n            | In #[+nearbyname], #[+pc((place.nearbyArea.nearTops.data[s[i][0]][s[i][1]][2011][s[i][3]]))] of people over the age of three\n            | can speak some Welsh\n            | , #[+value(ud(cha(s, place.nearbyArea.nearTops, i), 'up', 'down'))]\n            | from #[+pc((place.nearbyArea.nearTops.data[s[i][0]][s[i][1]][2001][s[i][3]]))] at the 2011 census.\n            | .\n        | Across Wales, the proportion \n        | #[+value(ud(cha(s, rgn, i), 'rose', 'fell'))] from\n        | #[+pc((rgn.data[s[i][0]][s[i][1]][2001][s[i][3]]))] \n        | to\n        | #[+pc((rgn.data[s[i][0]][s[i][1]][2011][s[i][3]]))] \n        | .\n    if (Math.abs(place.data[s[i][0]][s[i][1]+'_rank_local'][2011][s[i][3]])>3) & (Math.abs(place.data[s[i][0]][s[i][1]+'_rank_local']['change'][s[i][3]])>3)\n        p\n            | !{data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[1].name} \n            | was one of the few areas that saw an increase in the proportion of Welsh speakers (from \n            | #[+pc((data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[1][2001]))] \n            | in 2011 to \n            | #[+pc((data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[1][2011]))] \n            | in 2021)\n            | , while !{data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[\"-1\"].name} saw the greatest fall (from \n            | #[+pc((data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[\"-1\"][2001]))] \n            | to \n            | #[+pc((data.welsh.perc_rank_local.top_bottom.SpeaksWelsh[\"-1\"][2011]))]\n            | ). \n\n//- Deals with all percentage based variables\nmixin percPara(i, chain0_01, chain0_11, chain1_01, chain1_11)\n    if ((findOne(stories[i].type, ['couBuck', 'regBuck']))&(!stories[i].type.includes('natRank')))\n        h2 #[+value(topic(i).subhead.buc)]\n    else if ((cha(s, place, i)<-1)&(data[s[i][0]]['value'][2011][s[i][3]]<data[s[i][0]]['value'][2001][s[i][3]]))\n        h2 #[+value(topic(i).subhead.neg)]\n    else if ((cha(s, place, i)>1)&(data[s[i][0]]['value'][2011][s[i][3]]>data[s[i][0]]['value'][2001][s[i][3]]))\n        h2 #[+value(topic(i).subhead.pos)]\n    else if (findOne(stories[i].type, ['nearDiff', 'couDiff', 'regDiff']))\n        h2 #[+value(topic(i).subhead.sta)]\n    else \n        h2 #[+value(topic(i).subhead.neu)]\n    if (s[i][0] == 'welsh')\n        | #[+welsh(i)]\n    else\n        - var chain0_11 = data[s[i][0]][s[i][1]][2011][chains[s[i][3]][0]]\n        - var chain0_01 = data[s[i][0]][s[i][1]][2001][chains[s[i][3]][0]] \n        - var chain1_11 = data[s[i][0]][s[i][1]][2011][chains[s[i][3]][1]] \n        - var chain1_01 = data[s[i][0]][s[i][1]][2001][chains[s[i][3]][1]] \n        if (stories[i].type.includes('natRank'))\n            | #[+rank1nat(i)]\n            if (data[s[i][0]][s[i][1]+\"_rank\"].top_bottom[s[i][3]][1].change<0)\n                p #[+allOthers(i, \"\", \"d\")]\n            else if (data[s[i][0]][s[i][1]+\"_rank\"].top_bottom[s[i][3]][\"-1\"].change>0)\n                p #[+allOthers(i, \"\", \"u\")]\n            else if ((data[s[i][0]][s[i][1]+'_rank']['overtake'][s[i][3]].length>0)&(Math.abs(cur(s, place, i, 'r'))<10))\n                p #[+overtake(i, \"\")]\n            else\n                if (Math.sign(data[s[i][0]][s[i][1]+'_rank_local'][s[i][2]][s[i][3]]) != Math.sign(cha(s, place, i)))\n                    p #[+acrossRegionExcept(i)]\n                else\n                    if ((sign(cha(s, place, i)))!=(sign(cur(s, place, i, 'rl'))))\n                        p #[+despiteRegion(i)]\n            p #[+rank2(i)]\n        else if ((stories[i].type.includes('regBuck'))|(eq(stories[i].type, ['regBuck'])))\n            - var curBuck = 'regBuck'\n            | #[+buck(i, curBuck, chain0_01, chain0_11, chain1_01, chain1_11)]\n        else if ((stories[i].type.includes('couBuck'))|(eq(stories[i].type, ['couBuck'])))\n            - var curBuck = 'couBuck'\n            | #[+buck(i, curBuck, chain0_01, chain0_11, chain1_01, chain1_11)]\n        else if ((stories[i].type.includes('size'))&(!hasSaid('SIZE'))|(eq(stories[i].type, ['size'])))\n            recordSaid('SIZE')\n            | #[+sent1Perc(i)]\n            p #[+sent2Perc(i, chain0_01, chain0_11, chain1_01, chain1_11)]\n            p #[+sent3Perc(i)]\n        else if (stories[i].type.includes('locRank'))\n            deleteSaid('SIZE')\n            | #[+rank1reg(i)]\n            if (data[s[i][0]][s[i][1]+\"_rank_local\"].top_bottom[s[i][3]][1].change<0)\n                p #[+allOthers(i, \"_local\", \"d\")]\n            if (data[s[i][0]][s[i][1]+\"_rank_local\"].top_bottom[s[i][3]][\"-1\"].change>0)\n                p #[+allOthers(i, \"_local\", \"u\")]\n            else if ((data[s[i][0]][s[i][1]+'_rank_local']['overtake'][s[i][3]].length>0)&(Math.abs(cur(s, place, i, 'rl'))<20))\n                p #[+overtake(i, \"_local\")]\n            else\n                if (Math.sign(data[s[i][0]][s[i][1]+'_rank_local'][s[i][2]][s[i][3]]) != Math.sign(cha(s, place, i)))\n                    p #[+acrossRegionExcept(i)]\n                else\n                    if ((sign(cha(s, place, i)))!=(sign(cur(s, place, i, 'rl'))))\n                        p #[+despiteRegion(i)]\n            p #[+rank2(i)]\n        else if ((stories[i].type.includes('simiBuck'))&(!hasSaid('BUCK'))|(eq(stories[i].type, ['simiBuck'])))\n            recordSaid('BUCK')\n            - var curBuck = 'simiBuck'\n            | #[+buck(i, curBuck, chain0_01, chain0_11, chain1_01, chain1_11)]\n        else if ((stories[i].type.includes('nearBuck'))&(!hasSaid('BUCK'))|(eq(stories[i].type, ['nearBuck'])))\n            recordSaid('BUCK')\n            - var curBuck = 'nearBuck'\n            | #[+buck(i, curBuck, chain0_01, chain0_11, chain1_01, chain1_11)]\n        else\n            deleteSaid('SIZE')\n            | #[+difference(i, chain0_01, chain0_11, chain1_01, chain1_11)]\n        if (s[i][0]=='health')\n            p #[+healthExplain]\n\nmixin para(i)\n    -console.log('S -', i,  stories[i])\n    if (s[i][1] == 'value')\n        if (s[i][0] == 'agemed')\n            h2 #[+subheadAge(i)]\n            | #[+sent1Age(i)]\n            p #[+sent2Age(i)]\n            p #[+sent3Age(i)]\n        else\n            h2 #[+subheadVal(i)]\n            p #[+sent1pop(i)]\n            p #[+sent2pop(i)]\n            if (s[i][0]=='population')\n                p #[+density]\n            //- if ((data['density'][s[i][1]+'_rank'].overtake[s[i][3]].length>0)&(Math.abs(cur(s, place, i, \"r\"))<30))\n            //-     p #[+sent4Pop(i)]\n    if (s[i][1] == 'perc')\n        | #[+percPara(i)]\n\nmixin chartTitleSize(i)\n    if (s[i][0]==\"population\")\n        h4 \n            | Population density is increasing here at a \n            | #[+value(uds(data.density.value.change.all-rgn.data.density.value.change.all, \"faster rate than\", \"slower rate than\", \"similar rate to\"))]\n            | #[+value(parent)]\n        h5 \n            | Population density (usual residents per 7,140 square metres) across #[+value(place.name)], #[+value((country==\"Wales\")?simi.name:parent)] and #[+value(country)], March 2011, March 2021\n    else if (s[i][0]==\"agemed\")\n        h4 \n            - let agegroup = data.age10yr.absChange['pos'][0][0]\n            | About #[+pc(Math.round(place.data.age10yr.perc[2011][agegroup]))]\n            | of people in !{place.name} are aged\n            | #[+value(ageBandLU[agegroup][1])]\n        h5 \n            | The percentage of #[+value(topics[s[i][0]].measure)] in #[+value(place.name)] by 10 year age band, March 2011, March 2021\n    else\n        h4 \n            | #[+value(topic(i).sample)] in \n            | #[+value(place.name)]\n            | #[+value((cha(s, place, i)<0)?\"decreased\":\"increased\")] by\n            | #[+rou(Math.abs(cha(s, place, i)))]\n            | #[+ppoint]\n        h5 \n            | The percentage of #[+value(topics[s[i][0]].measure)] in #[+value(place.name)], #[+value(parent)] and #[+value(country)] that #[+value(topic(i).verb_past)], March 2011, March 2021\n\nmixin chartTitleOther(i)\n    if (s[i][0]==\"population\")\n        h4 \n            | Population density is\n            | #[+value(uds(data.density.value[2011].all-rgn.data.density.value[2011].all, \"higher than\", \"lower than\", \"similar to\"))]\n            | the average across #[+value(parent)]\n        h5 \n            | Population density (usual residents per #[+value(7140)] square metres) across #[+value(parent)], March 2021 (larger dots represent greater increase since 2011)\n    else if (s[i][0]==\"agemed\")\n        h4 \n            - let agegroup = data.age10yr.absChange['pos'][0][0]\n            | About #[+pc(Math.round(place.data.age10yr.perc[2011][agegroup]))]\n            | of people in !{place.name} are aged\n            | #[+value(ageBandLU[agegroup][1])]\n        h5 \n            | The percentage of #[+value(topics[s[i][0]].measure)] in #[+value(place.name)] by 10 year age band, March 2011, March 2021\n    else\n        h4 \n            | #[+value(topic(i).sample)] \n            | #[+value((cur(s, place, i)-cur(s, rgn, i)<0)?\"is lower than\":\"is higher than\")] across #[+value(parent)]\n        h5 \n            | The percentage of #[+value(topics[s[i][0]].measure)] that #[+value(topic(i).verb_past)] across local authority areas in #[+value(parent)] and the average across #[+value(cou.name)], March 2021\n\nmixin chartTitle(i)\n    if !(isTopic)\n        if (stories[i].type.includes('size'))\n            | #[+chartTitleSize(i)]\n        else\n            | #[+chartTitleOther(i)]\n\n\n-console.log(\"eng\", eng)\n-console.log(\"rgn\", rgn)\n-console.log(\"place\", place)\n\n// Start of th article /\n| #[+para(0)]\n| #[+chartTitle(0)]\ndiv#esc123\n\nif (s.length>2)\n    | #[+para(1)]\n    | #[+chartTitle(1)]\n    div#esc123\n\nif (s.length>3)\n    | #[+para(2)]\n    | #[+chartTitle(2)]\n    div#esc123\n\nif (s.length>4)\n    | #[+para(3)]\n    | #[+chartTitle(3)]\n    div#esc123\n\nif (s.length>5)\n    | #[+para(4)]\n    | #[+chartTitle(4)]\n    div#esc123\n\nif (s.length>6)\n    | #[+para(5)]\n    | #[+chartTitle(5)]\n\nif (more==true)\n    if (s.length>7)\n        div#esc123\n        | #[+para(6)]\n        | #[+chartTitle(6)]\n    if (s.length>8)\n        div#esc123\n        | #[+para(7)]\n        | #[+chartTitle(7)]\n    if (s.length>9)\n        div#esc123\n        | #[+para(8)]\n        | #[+chartTitle(8)]\n    if (s.length>10)\n        div#esc123\n        | #[+para(9)]\n        | #[+chartTitle(9)]\n    if (s.length>11)\n        div#esc123\n        | #[+para(10)]\n        | #[+chartTitle(10)]\n    if (s.length>12)\n        div#esc123\n        | #[+para(11)]\n        | #[+chartTitle(11)]\n    if (s.length>13)\n        div#esc123\n        | #[+para(12)]\n        | #[+chartTitle(12)]\n\t",{language:"en_UK",place:t,data:t.data,cou:$,eng:c,rgn:e,uncap1:Ke,regionThe:qe,parent:Ke(qe(t.parents[0].name)),parentNT:Ke(qe(t.parents[0].name,"NT")),s:d,stories:t.stories,priorities:t.Priorities,grewSyn:S,locRankCha:o,natRankCha:f,locRankCur:l,natRankCur:p,hiRank:t.hiRank,topic:function(e,t){let n;return n=t||d[e][3],a[d[e][0]][n]},topics:a,chains:We,country:"Wales"==t.parents[0].name?"Wales":"England",get_word:Ge,figs:Ye,otherEst:Qe,cur:Je,cha:Ze,qui:Xe,cap:Iu,cap:Iu,otherRank:et,ud:tt,city:nt,drop:Be,drop:Be,ord:ot,ageBandLU:lt,eq:ct,nuword:st,sign:it,udord:ut,near:t.nearbyArea.nearTops,simi:t.similar,adv:ht,uds:dt,more:w,pluralize:Lt,pluralize:Lt,countyLU:A,fuzz:i,prev:Ve,regionLU:T,findOne:b}).split('<div id="esc123"></div>')}K((()=>{setInterval((function(){d3.selectAll("div#visph").attr("style","\n\t\t\tbackground-color: #f6f6f6; \n\t\t\tcolor: #e1e7ea; \n\t\t\theight: 240px;\n\t\t\tpadding: 80px;\n\t\t\tfont-size: 2.8rem;\n\t\t\tfont-weight: 600;\n\t\t\tmargin-bottom: 80px;")}),1e3)}));return[a,r,s,c,h,k,x,w,M,E,()=>{n(8,M=!0)},N,function(e,t){var n=JSON.parse(JSON.stringify(t));C(n,e.name);let i=[],a=0;return e.stories.forEach((e=>{i.length<4&Math.abs(e.value)>3&&(i.push(e.label.split("_")),a+=Math.abs(e.value))})),rosaenlg_en_US.render(_,{language:"en_UK",place:e,topics:n,s:d,sf:i,changeMag:a,grewSyn:S,qui:Xe,natRankCha:f})},function(e){let t=s.stories[e].label.split("_");if(t.length>4&&(t[3]=t[3]+"_"+t[4],t.pop()),"agemed"==t[0]){function e(e,t){let n=[];return Object.keys(e).forEach((i=>{n.push({x:i,y:e[i],g:t})})),n}return{legend:!0,height:120,chartData:[[e($.data.age10yr.perc[2001],2011),e($.data.age10yr.perc[2011],2021)],[e(h.data.age10yr.perc[2001],2011),e(h.data.age10yr.perc[2011],2021)],[e(s.data.age10yr.perc[2001],2011),e(s.data.age10yr.perc[2011],2021)]],labels:[$.name,h.name,s.name],xKey:"value",yKey:"year"}}return s.stories[e].type.includes("size")?"population"==t[0]?"Wales"==h.name?{height:120,data:[{label:c.name,2011:Ou(c.data.density.value[2001].all),2021:Ou(c.data.density.value[2011].all)},{label:h.name,2011:Ou(h.data.density.value[2001].all),2021:Ou(h.data.density.value[2011].all)},{label:s.name,2011:Ou(s.data.density.value[2001].all),2021:Ou(s.data.density.value[2011].all)}]}:{height:120,data:[{label:h.name,2011:Ou(h.data.density.value[2001].all),2021:Ou(h.data.density.value[2011].all)},{label:s.nearbyArea.nearTops.name.name,2011:Ou(s.nearbyArea.nearTops.name.data.density.value[2001].all),2021:Ou(s.nearbyArea.nearTops.name.data.density.value[2011].all)},{label:s.name,2011:Ou(s.data.density.value[2001].all),2021:Ou(s.data.density.value[2011].all)}]}:"Wales"==h.name?{legend:!0,height:120,data:[{label:h.name,2011:h.data[t[0]][t[1]][2001][t[3]],2021:h.data[t[0]][t[1]][2011][t[3]]},{label:s.nearbyArea.nearTops.name,2011:s.nearbyArea.nearTops.data[t[0]][t[1]][2001][t[3]],2021:s.nearbyArea.nearTops.data[t[0]][t[1]][2011][t[3]]},{label:s.name,2011:s.data[t[0]][t[1]][2001][t[3]],2021:s.data[t[0]][t[1]][2011][t[3]]}]}:{legend:!0,height:120,data:[{label:c.name,2011:c.data[t[0]][t[1]][2001][t[3]],2021:c.data[t[0]][t[1]][2011][t[3]]},{label:s.parents[0].name,2011:h.data[t[0]][t[1]][2001][t[3]],2021:h.data[t[0]][t[1]][2011][t[3]]},{label:s.name,2011:s.data[t[0]][t[1]][2001][t[3]],2021:s.data[t[0]][t[1]][2011][t[3]]}]}:("population"==t[0]&&(t[0]="density",t[3]="all"),(n=(n=m.filter((e=>e.parent==s.parents[0].name&e.topic==t[0]+"_"+t[3]))).map((e=>({change:e.change,value:"density"==t[0]?.714*parseFloat(e[2011]):parseFloat(e[2011]),unique:e.lad,id:e.parent})))).forEach(((e,t)=>{e.unique==s.name?e.id=s.name:e.id==s.parents[0].name?e.id="Rest of "+Ke(qe(s.parents[0].name)):e.id="Rest of England"})),n.push({change:+$.data[t[0]][t[1]].change[t[3]],value:+$.data[t[0]][t[1]][2011][t[3]],unique:"Average across "+$.name,id:"Average across "+$.name}),{mode:"stacked",line:!1,legend:!0,data:n,xKey:"value",yKey:null,rKey:"change",r:[3,9],zKey:"id"});var n},function(e){let t=s.stories[e].label.split("_");return t.length>4&&(t[3]=t[3]+"_"+t[4],t.pop()),"agemed"==t[0]?bc:s.stories[e].type.includes("size")?hu:El},function(){n(7,w=!w),n(9,E)},function(e){n(1,r=e)},()=>{r&&N(r.code)}]}class Ku extends _e{constructor(e){super(),we(this,e,qu,Fu,o,{},null,[-1,-1])}}function Bu(t){let n,i,a,r;return{c(){n=T("div"),n.innerHTML="<p>Click on a phrase type (e.g. &#39;clausal modifier&#39;) to see the various phrases used across different topics.</p> \n\t<p>Click on a phrase to see it used in context.</p> \n\t<p>Note that when a phrase is selected, only the bold text is dynamic so may not provide perfect context.</p>",i=S(),a=T("iframe"),z(n,"width","80%"),z(n,"margin","auto"),L(a,"width","100%"),L(a,"height","5212"),L(a,"frameborder","0"),c(a.src,r="https://observablehq.com/embed/cc9449078bb7b9ae?cells=chart%2Csent")||L(a,"src","https://observablehq.com/embed/cc9449078bb7b9ae?cells=chart%2Csent")},m(e,t){w(e,n,t),w(e,i,t),w(e,a,t)},p:e,i:e,o:e,d(e){e&&_(n),e&&_(i),e&&_(a)}}}function Uu(e){return fetch("./archie.aml").then((e=>e.text())).then((e=>Et.load(e))),[]}class Hu extends _e{constructor(e){super(),we(this,e,Uu,Bu,o,{})}}function Gu(e){let t,n;const i=e[1].default,a=d(i,e,e[0],null);return{c(){t=T("div"),a&&a.c(),L(t,"class","tabs")},m(e,i){w(e,t,i),a&&a.m(t,null),n=!0},p(e,[t]){a&&a.p&&(!n||1&t)&&g(a,i,e,e[0],n?p(i,e[0],t,null):m(e[0]),null)},i(e){n||(he(a,e),n=!0)},o(e){de(a,e),n=!1},d(e){e&&_(t),a&&a.d(e)}}}const Yu={};function Vu(e,t,n){let{$$slots:i={},$$scope:a}=t;const r=[],s=[],o=_n(null),l=_n(null);return H(Yu,{registerTab:e=>{r.push(e),o.update((t=>t||e)),B((()=>{const t=r.indexOf(e);r.splice(t,1),o.update((n=>n===e?r[t]||r[r.length-1]:n))}))},registerPanel:e=>{s.push(e),l.update((t=>t||e)),B((()=>{const t=s.indexOf(e);s.splice(t,1),l.update((n=>n===e?s[t]||s[s.length-1]:n))}))},selectTab:e=>{const t=r.indexOf(e);o.set(e),l.set(s[t])},selectedTab:o,selectedPanel:l}),e.$$set=e=>{"$$scope"in e&&n(0,a=e.$$scope)},[a,i]}class Ju extends _e{constructor(e){super(),we(this,e,Vu,Gu,o,{})}}function Zu(e){let t,n;const i=e[1].default,a=d(i,e,e[0],null);return{c(){t=T("div"),a&&a.c(),L(t,"class","tab-list svelte-1qgay6m")},m(e,i){w(e,t,i),a&&a.m(t,null),n=!0},p(e,[t]){a&&a.p&&(!n||1&t)&&g(a,i,e,e[0],n?p(i,e[0],t,null):m(e[0]),null)},i(e){n||(he(a,e),n=!0)},o(e){de(a,e),n=!1},d(e){e&&_(t),a&&a.d(e)}}}function Xu(e,t,n){let{$$slots:i={},$$scope:a}=t;return e.$$set=e=>{"$$scope"in e&&n(0,a=e.$$scope)},[a,i]}class Qu extends _e{constructor(e){super(),we(this,e,Xu,Zu,o,{})}}function eh(e){let t;const n=e[4].default,i=d(n,e,e[3],null);return{c(){i&&i.c()},m(e,n){i&&i.m(e,n),t=!0},p(e,a){i&&i.p&&(!t||8&a)&&g(i,n,e,e[3],t?p(n,e[3],a,null):m(e[3]),null)},i(e){t||(he(i,e),t=!0)},o(e){de(i,e),t=!1},d(e){i&&i.d(e)}}}function th(e){let t,n,i=e[0]===e[1]&&eh(e);return{c(){i&&i.c(),t=C()},m(e,a){i&&i.m(e,a),w(e,t,a),n=!0},p(e,[n]){e[0]===e[1]?i?(i.p(e,n),1&n&&he(i,1)):(i=eh(e),i.c(),he(i,1),i.m(t.parentNode,t)):i&&(ce(),de(i,1,1,(()=>{i=null})),ue())},i(e){n||(he(i),n=!0)},o(e){de(i),n=!1},d(e){i&&i.d(e),e&&_(t)}}}function nh(e,t,n){let i,{$$slots:a={},$$scope:r}=t;const s={},{registerPanel:o,selectedPanel:l}=G(Yu);return h(e,l,(e=>n(0,i=e))),o(s),e.$$set=e=>{"$$scope"in e&&n(3,r=e.$$scope)},[i,s,l,r,a]}class ih extends _e{constructor(e){super(),we(this,e,nh,th,o,{})}}function ah(e){let t,n,i,a;const r=e[5].default,s=d(r,e,e[4],null);return{c(){t=T("button"),s&&s.c(),L(t,"class","svelte-b9uj0r"),I(t,"selected",e[0]===e[1])},m(r,o){w(r,t,o),s&&s.m(t,null),n=!0,i||(a=E(t,"click",e[6]),i=!0)},p(e,[i]){s&&s.p&&(!n||16&i)&&g(s,r,e,e[4],n?p(r,e[4],i,null):m(e[4]),null),3&i&&I(t,"selected",e[0]===e[1])},i(e){n||(he(s,e),n=!0)},o(e){de(s,e),n=!1},d(e){e&&_(t),s&&s.d(e),i=!1,a()}}}function rh(e,t,n){let i,{$$slots:a={},$$scope:r}=t;const s={},{registerTab:o,selectTab:l,selectedTab:c}=G(Yu);h(e,c,(e=>n(0,i=e))),o(s);return e.$$set=e=>{"$$scope"in e&&n(4,r=e.$$scope)},[i,s,l,c,r,a,()=>l(s)]}class sh extends _e{constructor(e){super(),we(this,e,rh,ah,o,{})}}function oh(e){let t;return{c(){t=N("Area Reports")},m(e,n){w(e,t,n)},d(e){e&&_(t)}}}function lh(e){let t;return{c(){t=N("Topic QA")},m(e,n){w(e,t,n)},d(e){e&&_(t)}}}function ch(e){let t;return{c(){t=N("Word Selection")},m(e,n){w(e,t,n)},d(e){e&&_(t)}}}function uh(e){let t,n,i,a,r,s;return t=new sh({props:{$$slots:{default:[oh]},$$scope:{ctx:e}}}),i=new sh({props:{$$slots:{default:[lh]},$$scope:{ctx:e}}}),r=new sh({props:{$$slots:{default:[ch]},$$scope:{ctx:e}}}),{c(){xe(t.$$.fragment),n=S(),xe(i.$$.fragment),a=S(),xe(r.$$.fragment)},m(e,o){$e(t,e,o),w(e,n,o),$e(i,e,o),w(e,a,o),$e(r,e,o),s=!0},p(e,n){const a={};1&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a);const s={};1&n&&(s.$$scope={dirty:n,ctx:e}),i.$set(s);const o={};1&n&&(o.$$scope={dirty:n,ctx:e}),r.$set(o)},i(e){s||(he(t.$$.fragment,e),he(i.$$.fragment,e),he(r.$$.fragment,e),s=!0)},o(e){de(t.$$.fragment,e),de(i.$$.fragment,e),de(r.$$.fragment,e),s=!1},d(e){be(t,e),e&&_(n),be(i,e),e&&_(a),be(r,e)}}}function hh(e){let t,n;return t=new Au({}),{c(){xe(t.$$.fragment)},m(e,i){$e(t,e,i),n=!0},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function dh(e){let t,n;return t=new Ku({}),{c(){xe(t.$$.fragment)},m(e,i){$e(t,e,i),n=!0},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function fh(e){let t,n;return t=new Hu({}),{c(){xe(t.$$.fragment)},m(e,i){$e(t,e,i),n=!0},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function ph(e){let t,n,i,a,r,s,o,l;return t=new Qu({props:{$$slots:{default:[uh]},$$scope:{ctx:e}}}),i=new ih({props:{$$slots:{default:[hh]},$$scope:{ctx:e}}}),r=new ih({props:{$$slots:{default:[dh]},$$scope:{ctx:e}}}),o=new ih({props:{$$slots:{default:[fh]},$$scope:{ctx:e}}}),{c(){xe(t.$$.fragment),n=S(),xe(i.$$.fragment),a=S(),xe(r.$$.fragment),s=S(),xe(o.$$.fragment)},m(e,c){$e(t,e,c),w(e,n,c),$e(i,e,c),w(e,a,c),$e(r,e,c),w(e,s,c),$e(o,e,c),l=!0},p(e,n){const a={};1&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a);const s={};1&n&&(s.$$scope={dirty:n,ctx:e}),i.$set(s);const l={};1&n&&(l.$$scope={dirty:n,ctx:e}),r.$set(l);const c={};1&n&&(c.$$scope={dirty:n,ctx:e}),o.$set(c)},i(e){l||(he(t.$$.fragment,e),he(i.$$.fragment,e),he(r.$$.fragment,e),he(o.$$.fragment,e),l=!0)},o(e){de(t.$$.fragment,e),de(i.$$.fragment,e),de(r.$$.fragment,e),de(o.$$.fragment,e),l=!1},d(e){be(t,e),e&&_(n),be(i,e),e&&_(a),be(r,e),e&&_(s),be(o,e)}}}function gh(e){let t,n,i,a;return t=new Te({}),i=new Ju({props:{$$slots:{default:[ph]},$$scope:{ctx:e}}}),{c(){xe(t.$$.fragment),n=S(),xe(i.$$.fragment)},m(e,r){$e(t,e,r),w(e,n,r),$e(i,e,r),a=!0},p(e,[t]){const n={};1&t&&(n.$$scope={dirty:t,ctx:e}),i.$set(n)},i(e){a||(he(t.$$.fragment,e),he(i.$$.fragment,e),a=!0)},o(e){de(t.$$.fragment,e),de(i.$$.fragment,e),a=!1},d(e){be(t,e),e&&_(n),be(i,e)}}}return new class extends _e{constructor(e){super(),we(this,e,null,gh,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
