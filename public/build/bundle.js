var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function l(e){e.forEach(t)}function r(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let a,s;function i(e,t){return a||(a=document.createElement("a")),a.href=t,e===a.href}function c(t,n,l){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const l=t.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}(n,l))}function u(e,t,n,l){if(e){const r=d(e,t,n,l);return e[0](r)}}function d(e,t,n,l){return e[1]&&l?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](l(t))):n.ctx}function p(e,t,n,l){if(e[2]&&l){const r=e[2](l(n));if(void 0===t.dirty)return r;if("object"==typeof r){const e=[],n=Math.max(t.dirty.length,r.length);for(let l=0;l<n;l+=1)e[l]=t.dirty[l]|r[l];return e}return t.dirty|r}return t.dirty}function f(e,t,n,l,r,o){if(r){const a=d(t,n,l,o);e.p(a,r)}}function h(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function g(e,t){e.appendChild(t)}function m(e,t,n){e.insertBefore(t,n||null)}function E(e){e.parentNode.removeChild(e)}function $(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function v(e){return document.createElement(e)}function b(e){return document.createTextNode(e)}function y(){return b(" ")}function w(){return b("")}function x(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function _(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function k(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function C(e,t){e.value=null==t?"":t}function j(e,t,n,l){e.style.setProperty(t,n,l?"important":"")}function N(e,t,n){e.classList[n?"add":"remove"](t)}class T{constructor(){this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.e=v(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)m(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(E)}}function M(e){s=e}function S(){if(!s)throw new Error("Function called outside component initialization");return s}function q(e){S().$$.on_destroy.push(e)}function z(){const e=S();return(t,n)=>{const l=e.$$.callbacks[t];if(l){const r=function(e,t,n=!1){const l=document.createEvent("CustomEvent");return l.initCustomEvent(e,n,!1,t),l}(t,n);l.slice().forEach((t=>{t.call(e,r)}))}}}function A(e){return S().$$.context.get(e)}const W=[],O=[],R=[],P=[],F=Promise.resolve();let U=!1;function K(e){R.push(e)}function H(e){P.push(e)}let B=!1;const I=new Set;function D(){if(!B){B=!0;do{for(let e=0;e<W.length;e+=1){const t=W[e];M(t),L(t.$$)}for(M(null),W.length=0;O.length;)O.pop()();for(let e=0;e<R.length;e+=1){const t=R[e];I.has(t)||(I.add(t),t())}R.length=0}while(W.length);for(;P.length;)P.pop()();U=!1,B=!1,I.clear()}}function L(e){if(null!==e.fragment){e.update(),l(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(K)}}const J=new Set;let V;function Z(){V={r:0,c:[],p:V}}function G(){V.r||l(V.c),V=V.p}function Q(e,t){e&&e.i&&(J.delete(e),e.i(t))}function X(e,t,n,l){if(e&&e.o){if(J.has(e))return;J.add(e),V.c.push((()=>{J.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}}const Y="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function ee(e,t){e.d(1),t.delete(e.key)}function te(e,t,n){const l=e.$$.props[t];void 0!==l&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function ne(e){e&&e.c()}function le(e,n,o,a){const{fragment:s,on_mount:i,on_destroy:c,after_update:u}=e.$$;s&&s.m(n,o),a||K((()=>{const n=i.map(t).filter(r);c?c.push(...n):l(n),e.$$.on_mount=[]})),u.forEach(K)}function re(e,t){const n=e.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function oe(e,t){-1===e.$$.dirty[0]&&(W.push(e),U||(U=!0,F.then(D)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ae(t,r,o,a,i,c,u,d=[-1]){const p=s;M(t);const f=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(p?p.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:r.target||p.$$.root};u&&u(f.root);let h=!1;if(f.ctx=o?o(t,r.props||{},((e,n,...l)=>{const r=l.length?l[0]:n;return f.ctx&&i(f.ctx[e],f.ctx[e]=r)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](r),h&&oe(t,e)),n})):[],f.update(),h=!0,l(f.before_update),f.fragment=!!a&&a(f.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);f.fragment&&f.fragment.l(e),e.forEach(E)}else f.fragment&&f.fragment.c();r.intro&&Q(t.$$.fragment),le(t,r.target,r.anchor,r.customElement),D()}M(p)}class se{$destroy(){re(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function ie(t){let n;return{c(){n=v("div"),n.innerHTML="<strong>Warning!</strong> This is a prototype. Data likely to contain inaccuracies.",_(n,"class","warning svelte-srzfvi")},m(e,t){m(e,n,t)},p:e,i:e,o:e,d(e){e&&E(n)}}}class ce extends se{constructor(e){super(),ae(this,e,null,ie,o,{})}}var ue={},de={};function pe(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function fe(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var l in e)l in t||n.push(t[l]=l)})),n}function he(e,t){var n=e+"",l=n.length;return l<t?new Array(t-l+1).join(0)+n:n}function ge(e){var t,n=e.getUTCHours(),l=e.getUTCMinutes(),r=e.getUTCSeconds(),o=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+he(-t,6):t>9999?"+"+he(t,6):he(t,4))+"-"+he(e.getUTCMonth()+1,2)+"-"+he(e.getUTCDate(),2)+(o?"T"+he(n,2)+":"+he(l,2)+":"+he(r,2)+"."+he(o,3)+"Z":r?"T"+he(n,2)+":"+he(l,2)+":"+he(r,2)+"Z":l||n?"T"+he(n,2)+":"+he(l,2)+"Z":"")}var me=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function l(e,t){var l,r=[],o=e.length,a=0,s=0,i=o<=0,c=!1;function u(){if(i)return de;if(c)return c=!1,ue;var t,l,r=a;if(34===e.charCodeAt(r)){for(;a++<o&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=o?i=!0:10===(l=e.charCodeAt(a++))?c=!0:13===l&&(c=!0,10===e.charCodeAt(a)&&++a),e.slice(r+1,t-1).replace(/""/g,'"')}for(;a<o;){if(10===(l=e.charCodeAt(t=a++)))c=!0;else if(13===l)c=!0,10===e.charCodeAt(a)&&++a;else if(l!==n)continue;return e.slice(r,t)}return i=!0,e.slice(r,o)}for(10===e.charCodeAt(o-1)&&--o,13===e.charCodeAt(o-1)&&--o;(l=u())!==de;){for(var d=[];l!==ue&&l!==de;)d.push(l),l=u();t&&null==(d=t(d,s++))||r.push(d)}return r}function r(t,n){return t.map((function(t){return n.map((function(e){return a(t[e])})).join(e)}))}function o(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?ge(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,r,o=l(e,(function(e,l){if(n)return n(e,l-1);r=e,n=t?function(e,t){var n=pe(e);return function(l,r){return t(n(l),r,e)}}(e,t):pe(e)}));return o.columns=r||[],o},parseRows:l,format:function(t,n){return null==n&&(n=fe(t)),[n.map(a).join(e)].concat(r(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=fe(e)),r(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")},formatRow:o,formatValue:a}}(","),Ee=me.parse;function $e(e){for(var t in e){var n,l,r=e[t].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(n=+r)){if(!(l=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;ve&&l[4]&&!l[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r)}else r=n;else r=null;e[t]=r}return e}const ve=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),be=e=>{if(e<10)return["","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth"][e];const t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"},ye=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string, got "+typeof e);let n=1,l=e.charAt(0);const r=function(){return l},o=function(t){throw JSON.stringify({name:"Robo-journalist error",message:t,at:n,text:e})},a=function(t){return t&&t!==l&&o("Expected '"+t+"' instead of '"+l+"'"),l=e.charAt(n),n+=1,l},s=function(e){const n=e.split(".");let l=t;for(const t of n)try{l=l[t]}catch{o(`${e} is not in the data dictionary.`)}return l},i=function(e){const t=e.split(" "),n={"+":(e,t)=>e+t,"-":(e,t)=>e-t,"*":(e,t)=>e*t,"/":(e,t)=>e/t,"<":(e,t)=>e<t,">":(e,t)=>e>t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t},l=[];for(const e of t)if(/^-?\d+$/.test(e))l.push(Number(e));else if(e in n){const t=Number(l.pop()),r=Number(l.pop());l.push(n[e](r,t))}else if("'"===e)l[l.length-1]="s"===(r=l[l.length-1])[r.length-1]?r+"'":r+"'s";else if(","===e)l[l.length-1]=l[l.length-1].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");else if(".0"===e)l[l.length-1]=l[l.length-1].toFixed(0);else if(".1"===e)l[l.length-1]=l[l.length-1].toFixed(1);else if(".2"===e)l[l.length-1]=l[l.length-1].toFixed(2);else if("~abs"===e)l[l.length-1]=Math.abs(l[l.length-1]);else if("~ord"===e)l[l.length-1]=be(Number(l[l.length-1]));else if("~ord'"===e){let e=be(Number(l.pop()));"first"===e?e="":e+=" ",l.push(e)}else"^"===e.charAt(0)?l[l.length-1]=s(e.slice(1))(l[l.length-1]):l.push(s(e));var r;return 1!==l.length&&o("Invalid RPN"),l[0]},c=function(e){a("?");const t=d();a(":");const n=d();return a("}"),e?t:n},u=function(){if(a("{"),":"===l)return a(":"),a("}"),":";let e="";for(;r();){if("}"===l)return a("}"),i(e);if("?"===l)return c(i(e));e+=l,a()}o("Braces not closed")},d=function(){let e="";for(;r();){if(":"===l||"}"===l)return e;"{"!==l?(e+=l,a()):e+=u()}return e},p=d();return""!==l&&o(`Didn't expect '${l}'`),p};let we={good:["bad","fair"],bad:["good","fair"],white:["black","asian"],black:["white","asian"],asian:["white","black"],rented_private:["rented_social","owned"],rented_social:["rented_private","owned"],owned:["rented_private","rented_social"],student:["employee","unemployed","self-employed"],"self-employed":["employee","unemployed","student"],employee:["unemployed","self-employed","student"],unemployed:["employee","self-employed","student"],car_van:["bus","train_metro","foot","home"],bus:["car_van","train_metro","foot","home"],train_metro:["bus","car_van","foot","home"],foot:["bus","train_metro","car_van","home"],home:["bus","train_metro","foot","car_van"],OnePerson:["Cohabiting","Married"],Cohabiting:["OnePerson","Married"],LoneParent:["Married","Cohabiting"],Christian:["Muslim","Noreligion"],Muslim:["Christian","Noreligion"],Noreligion:["Christian","Muslim"],Buddhist:["Hindu","Sikh"],Hindu:["Sikh","Buddhist"],Jewish:["Christian","Muslim"],Sikh:["Hindu","Buddhist"],Single:["Married","Seperated"],Married:["Single","Seperated"],Seperated:["Married","Single"],"40PlushoursWeek":["20to49hoursWeek","1to19hoursWeek"],"20to49hoursWeek":["40PlushoursWeek","1to19hoursWeek"],"1to19hoursWeek":["40PlushoursWeek","20to49hoursWeek"],Kids:["NoKids","NonDepKids"],NoKids:["Kids","NonDepKids"],NonDepKids:["Kids","NoKids"],"Male1-15":["Male49plus"],Male49plus:["Male1-15"],"Female1-15":["Female49plus"],Female49plus:["Female1-15"]},xe=["South East","South West","East","West Midlands","East Midlands","North East","North West"];function _e(e,t){return"East"==e&&(e+=" England"),!xe.includes(e)|"NT"==t?e:"The "+e}function ke(e){return"The"==e.slice(0,3)?e.charAt(0).toLowerCase()+e.slice(1):e}function Ce(e,t,n){return{1:"",2:"second-",3:"third-",4:"fourth-",5:"fifth-"}[Math.abs(e)]+(e<0?t:n)}let je={"quarter of a million":25e4,"half a million":5e5,"three quarters of a million":75e4,"one million":1e6},Ne={"one in two":.5,"one in three":.333,"one in four":.25,"one in five":.2,"one in six":.167,"one in seven":.143,"one in eight":.125,"one in nine":.111,"1 in 10":.1,"1 in 11":.09,"1 in 12":.083,"1 in 13":.077,"1 in 14":.071,"1 in 15":.067,"1 in 16":.063,"1 in 17":.059,"1 in 18":.056,"1 in 19":.053,"1 in 20":.05,"2 in 10":.2,"3 in 10":.3,"4 in 10":.4,"6 in 10":.6,"7 in 10":.7,"8 in 10":.8,"9 in 10":.9,all:1};function Te(e,t){let n;"frac"==t?t=Ne:"num"==t&&(t=je);let l,r=2e6;for(const o in t)Math.abs(e-t[o])<r&&(r=Math.abs(e-t[o]),l=o,e-t[o]==0?n="about":e-t[o]>0?n="just over":e-t[o]<0&&(n="just under"));return[n,l]}function Me(e,t){3!=t&&(t=2);let n,l=Number.parseFloat(Number.parseFloat(e).toPrecision(t));return e-l<-e/100&&(n="under "),n=e-l<-e/800?1==Math.round(Math.random())?"almost ":"just under ":e-l>e/100?" just over ":e-l>e/800?"just over ":"about",[n,l]}function Se(e,t,n,l){return l="rl"==l?"_rank_local":"r"==l?"_rank":"",t.data[e[n][0]][e[n][1]+l][2011][e[n][3]]}function qe(e,t,n,l){return l="rl"==l?"_rank_local":"r"==l?"_rank":"",t.data[e[n][0]][e[n][1]+l].change[e[n][3]]}function ze(e){return Math.ceil(5*e/331)}function Ae(e,t,n,l,r){"number"==typeof l&l<0?l="highest":"number"==typeof l&&(l="lowest");let o,a=Object.assign({},t.data[e[n][0]][e[n][1]+"_rank_local"][r]),s=new Set(we[e[n][3]]);for(let e of Object.keys(a))s.has(e)||delete a[e];if(Object.keys(a).length>1){if("lowest"==l){for(let[e,t]of Object.entries(a))t>0&&delete a[e];o=a.length>0?Object.keys(a).reduce(((e,t)=>a[e]>a[t]?e:t)):void 0}if("highest"==l){for(let[e,t]of Object.entries(a))t<0&&delete a[e];o=a.length>0?Object.keys(a).reduce(((e,t)=>a[e]<a[t]?e:t)):void 0}}else o=Object.keys(a);return o}function We(e,t,n,l="r"){let r="";return"rl"==l&&(r="_local"),t.data[e[n][0]][e[n][1]+"_rank"+r].change[Ae(e,t,n,qe(e,t,n,l),"change")]}function Oe(e,t,n){return e<0?n:t}var Re;function Pe(e,t){return Math.sign(e)==Math.sign(t)}Re="London"==parent?"city":"region";var Fe=["","","second-","third-","fourth-","fifth-","sixth-","seventh-","eighth-","ninth-"],Ue=["no","one","two","three","four","five","six","seven","eight","nine"];function Ke(e){return e<10?Ue[e]:e}function He(e){let t;return console.log("X",e),t=Math.abs(e)<10?Fe[Math.abs(e)]:function(e){let t;if(12==e)t="twelfth";else if(e>10&e<20)t=e+"th";else{let n=Math.round(e)%10;t=1==n?e+"st":2==n?e+"nd":3==n?e+"rd":e+"th"}return t}(Math.abs(e))+"-",t}var Be={"0-9":["children under the age of nine years","under nine years"],"10-19":["people between the ages of 10 and 19 years","between 10 and 19 years"],"20-29":["people between the ages of 20 and 29 years","between 20 and 29 years"],"30-39":["people between the ages of 30 and 39 years","between 30 and 39 years"],"40-49":["people between the ages of 40 and 49 years","between 40 and 49 years"],"50-59":["people between the ages of 50 and 59 years","between 50 and 59 years"],"60-69":["people between the ages of 60 and 69 years","between 60 and 69 years"],"70-79":["people between the ages of 70 and 79 years","between 70 and 79 years"],"80plus":["people aged 80 years or over","over the age of 80 years"]};function Ie(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every(((e,n)=>e===t[n]))}function De(e,t,n){let l=Oe(e,t,n);return He(e)+l}function Le(e,t,n){const l=e.slice();return l[32]=t[n],l[35]=t,l[34]=n,l}function Je(e,t,n){const l=e.slice();return l[32]=t[n],l[33]=t,l[34]=n,l}function Ve(e){let t,n,l,r,o,a,s,i=(e[0]?e[0]:"Select one")+"";return{c(){t=v("a"),n=v("span"),l=b(i),r=y(),o=v("span"),o.textContent=" ",_(n,"class","svelte-qdzmwx"),_(o,"class","button svelte-qdzmwx"),N(o,"search",e[3]),N(o,"down",!e[3]),_(t,"id","toggle"),_(t,"class","svelte-qdzmwx")},m(i,c){m(i,t,c),g(t,n),g(n,l),g(t,r),g(t,o),a||(s=x(t,"click",e[12]),a=!0)},p(e,t){1&t[0]&&i!==(i=(e[0]?e[0]:"Select one")+"")&&k(l,i),8&t[0]&&N(o,"search",e[3]),8&t[0]&&N(o,"down",!e[3])},d(e){e&&E(t),a=!1,s()}}}function Ze(e){let t,n,r,o,a,s,i,c,u=e[6][e[1]]+"",d=e[2]&&Ge(e);return{c(){t=v("a"),n=v("span"),r=b(u),o=y(),d&&d.c(),a=y(),s=v("span"),s.textContent=" ",_(n,"class","selection svelte-qdzmwx"),_(s,"class","button close svelte-qdzmwx"),_(t,"id","toggle"),_(t,"class","selected svelte-qdzmwx")},m(l,u){m(l,t,u),g(t,n),g(n,r),g(n,o),d&&d.m(n,null),g(t,a),g(t,s),i||(c=[x(s,"click",e[14]),x(t,"click",e[12])],i=!0)},p(e,t){66&t[0]&&u!==(u=e[6][e[1]]+"")&&k(r,u),e[2]?d?d.p(e,t):(d=Ge(e),d.c(),d.m(n,null)):d&&(d.d(1),d=null)},d(e){e&&E(t),d&&d.d(),i=!1,l(c)}}}function Ge(e){let t,n,l=e[6][e[2]]+"";return{c(){t=v("small"),n=b(l),_(t,"class","svelte-qdzmwx")},m(e,l){m(e,t,l),g(t,n)},p(e,t){68&t[0]&&l!==(l=e[6][e[2]]+"")&&k(n,l)},d(e){e&&E(t)}}}function Qe(e){let t,n,r,o,a,s;function i(e,t){return e[4].length<0?tt:e[9][0]&&e[2]?et:e[9][0]?Ye:Xe}let c=i(e),u=c(e);return{c(){t=v("div"),n=v("input"),r=y(),o=v("ul"),u.c(),_(n,"type","text"),_(n,"placeholder",""),_(n,"autocomplete","false"),_(n,"class","svelte-qdzmwx"),_(o,"class","svelte-qdzmwx"),_(t,"id","dropdown"),j(t,"top","0"),_(t,"class","svelte-qdzmwx")},m(l,i){m(l,t,i),g(t,n),C(n,e[4]),e[23](n),g(t,r),g(t,o),u.m(o,null),e[30](t),a||(s=[x(n,"input",e[22]),x(n,"keyup",e[16])],a=!0)},p(e,t){16&t[0]&&n.value!==e[4]&&C(n,e[4]),c===(c=i(e))&&u?u.p(e,t):(u.d(1),u=c(e),u&&(u.c(),u.m(o,null)))},d(n){n&&E(t),e[23](null),u.d(),e[30](null),a=!1,l(s)}}}function Xe(t){let n;return{c(){n=v("li"),n.textContent="No results",_(n,"class","svelte-qdzmwx")},m(e,t){m(e,n,t)},p:e,d(e){e&&E(n)}}}function Ye(e){let t,n=e[9],l=[];for(let t=0;t<n.length;t+=1)l[t]=nt(Le(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=w()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);m(e,t,n)},p(e,r){if(11010&r[0]){let o;for(n=e[9],o=0;o<n.length;o+=1){const a=Le(e,n,o);l[o]?l[o].p(a,r):(l[o]=nt(a),l[o].c(),l[o].m(t.parentNode,t))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(e){$(l,e),e&&E(t)}}}function et(e){let t,n=e[9],l=[];for(let t=0;t<n.length;t+=1)l[t]=lt(Je(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=w()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);m(e,t,n)},p(e,r){if(11014&r[0]){let o;for(n=e[9],o=0;o<n.length;o+=1){const a=Je(e,n,o);l[o]?l[o].p(a,r):(l[o]=lt(a),l[o].c(),l[o].m(t.parentNode,t))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(e){$(l,e),e&&E(t)}}}function tt(t){let n;return{c(){n=v("li"),n.textContent="Type a name...",_(n,"class","svelte-qdzmwx")},m(e,t){m(e,n,t)},p:e,d(e){e&&E(n)}}}function nt(e){let t,n,r,o,a,s=e[32][e[1]]+"",i=e[34];function c(){return e[27](e[32])}function u(){return e[28](e[34])}const d=()=>e[29](t,i),p=()=>e[29](null,i);return{c(){t=v("li"),n=b(s),r=y(),_(t,"class","svelte-qdzmwx"),N(t,"highlight",e[8]==e[34])},m(e,l){m(e,t,l),g(t,n),g(t,r),d(),o||(a=[x(t,"click",c),x(t,"mouseover",u)],o=!0)},p(l,r){e=l,514&r[0]&&s!==(s=e[32][e[1]]+"")&&k(n,s),i!==e[34]&&(p(),i=e[34],d()),256&r[0]&&N(t,"highlight",e[8]==e[34])},d(e){e&&E(t),p(),o=!1,l(a)}}}function lt(e){let t,n,r,o,a,s,i,c,u=e[32][e[1]]+"",d=e[32][e[2]]+"",p=e[34];function f(){return e[24](e[32])}function h(){return e[25](e[34])}const $=()=>e[26](t,p),w=()=>e[26](null,p);return{c(){t=v("li"),n=b(u),r=y(),o=v("small"),a=b(d),s=y(),_(o,"class","svelte-qdzmwx"),_(t,"class","svelte-qdzmwx"),N(t,"highlight",e[8]==e[34])},m(e,l){m(e,t,l),g(t,n),g(t,r),g(t,o),g(o,a),g(t,s),$(),i||(c=[x(t,"click",f),x(t,"mouseover",h)],i=!0)},p(l,r){e=l,514&r[0]&&u!==(u=e[32][e[1]]+"")&&k(n,u),516&r[0]&&d!==(d=e[32][e[2]]+"")&&k(a,d),p!==e[34]&&(w(),p=e[34],$()),256&r[0]&&N(t,"highlight",e[8]==e[34])},d(e){e&&E(t),w(),i=!1,l(c)}}}function rt(t){let n,l,r,o;function a(e,t){return e[6]&&!e[3]?Ze:Ve}let s=a(t),i=s(t),c=t[7]&&Qe(t);return{c(){n=v("div"),i.c(),l=y(),c&&c.c(),_(n,"id","select"),_(n,"class","svelte-qdzmwx"),N(n,"active",t[7])},m(e,a){m(e,n,a),i.m(n,null),g(n,l),c&&c.m(n,null),r||(o=x(n,"keydown",t[15]),r=!0)},p(e,t){s===(s=a(e))&&i?i.p(e,t):(i.d(1),i=s(e),i&&(i.c(),i.m(n,l))),e[7]?c?c.p(e,t):(c=Qe(e),c.c(),c.m(n,null)):c&&(c.d(1),c=null),128&t[0]&&N(n,"active",e[7])},i:e,o:e,d(e){e&&E(n),i.d(),c&&c.d(),r=!1,o()}}}function ot(e,t,n){let l;const r=z();let o,a,s,{options:i}=t,{selected:c=null}=t,{placeholder:u="Find an area..."}=t,{value:d="code"}=t,{label:p="name"}=t,{group:f=null}=t,{search:h=!1}=t,g=c,m=c?i.find((e=>{e[d],c[d]})):null,E=!1,$="",v=null,b=[];function y(e){n(17,c=e),n(7,E=!1),r("select",{selected:e,value:e[d]})}return e.$$set=e=>{"options"in e&&n(18,i=e.options),"selected"in e&&n(17,c=e.selected),"placeholder"in e&&n(0,u=e.placeholder),"value"in e&&n(19,d=e.value),"label"in e&&n(1,p=e.label),"group"in e&&n(2,f=e.group),"search"in e&&n(3,h=e.search)},e.$$.update=()=>{16&e.$$.dirty[0]&&n(21,l=$?new RegExp($,"i"):null),2359298&e.$$.dirty[0]&&(n(9,o=l?i.filter((e=>l.test(e[p]))):i),n(8,v=0)),32&e.$$.dirty[0]&&(document.onclick=function(e){e.target!==a&&(n(7,E=!1),n(8,v=0))}),1966080&e.$$.dirty[0]&&g!=c&&(n(6,m=i.find((e=>e[d]==c[d]))),n(20,g=c))},[u,p,f,h,$,a,m,E,v,o,s,b,function(e){var t;e.stopPropagation(),n(4,$=""),n(7,E=!E),(t=10,new Promise((e=>setTimeout(e,t)))).then((()=>{s&&E&&s.focus()}))},y,function(e){e.stopPropagation(),n(17,c=null),n(20,g=null),n(6,m=null),r("select",{selected:null,value:null})},function(e){E&&o[0]&&Number.isInteger(v)&&(38===e.keyCode?(n(8,v-=v>0?1:0),b[v].scrollIntoView({block:"nearest",inline:"start"})):40===e.keyCode&&(n(8,v+=v<o.length-1?1:0),b[v].scrollIntoView({block:"nearest",inline:"end"})))},function(e){o[0]&&Number.isInteger(v)&&13===e.keyCode&&y(o[v])},c,i,d,g,l,function(){$=this.value,n(4,$)},function(e){O[e?"unshift":"push"]((()=>{s=e,n(10,s)}))},e=>y(e),e=>n(8,v=e),function(e,t){O[e?"unshift":"push"]((()=>{b[t]=e,n(11,b)}))},e=>y(e),e=>n(8,v=e),function(e,t){O[e?"unshift":"push"]((()=>{b[t]=e,n(11,b)}))},function(e){O[e?"unshift":"push"]((()=>{a=e,n(5,a)}))}]}class at extends se{constructor(e){super(),ae(this,e,ot,rt,o,{options:18,selected:17,placeholder:0,value:19,label:1,group:2,search:3},null,[-1,-1])}}var st="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var it,ct,ut=(it=function(e,t){(function(){var n={load:function(e,t){var n,l,r,o="\\u0000\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u200B\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF\\u005B\\u005C\\u005D\\u007B\\u007D\\u003A",a=new RegExp(".*((\r|\n)+)"),s=new RegExp("^\\s*([^"+o+"]+)[ \t\r]*:[ \t\r]*(.*(?:\n|\r|$))"),i=new RegExp("^\\s*:[ \t\r]*(endskip|ignore|skip|end).*?(\n|\r|$)","i"),c=new RegExp("^\\s*\\*[ \t\r]*(.*(?:\n|\r|$))"),u=new RegExp("^\\s*(\\[|\\{)[ \t\r]*([+.]*)[ \t\r]*([^"+o+"]*)[ \t\r]*(?:\\]|\\}).*?(\n|\r|$)"),d={},p=d,f=[],h=void 0,g=null,m=null,E="",$=!1;for(!0!==(t=t||{}).comments&&(t.comments=!1);e;){var v;i.exec(e)?b((v=i.exec(e))[1].toLowerCase()):$||!s.exec(e)||h&&"simple"===h.arrayType?!$&&c.exec(e)&&h&&h.array&&"complex"!==h.arrayType&&"freeform"!==h.arrayType&&h.flags.indexOf("+")<0?(r=(v=c.exec(e))[1],k(),h.arrayType=h.arrayType||"simple",h.array.push(""),m=h.array,E=r,C(h.array,{replace:!0})):!$&&u.exec(e)?y((v=u.exec(e))[1],v[2],v[3]):a.exec(e)?w((v=a.exec(e))[0]):(w(e),e=""):(n=(v=s.exec(e))[1],l=v[2]||"",k(),x(n),h&&h.flags.indexOf("+")>-1&&(n="value"),m=n,E=l,C(n,{replace:!0})),v&&(e=e.substring(v[0].length))}function b(t){if($&&"endskip"!==t&&"ignore"!==t)return k();switch(t){case"end":return void(m&&C(m,{replace:!1}));case"ignore":e="";break;case"skip":$=!0;break;case"endskip":$=!1}k()}function y(e,t,n){if(k(),""==n){var l=f.pop();p=(l?l.scope:d)||d,h=f[f.length-1]}else if("["===e||"{"===e){var r=!1,o=d;if(t.indexOf(".")>-1?(x(n),r=!0,h&&(o=p)):(p=d,f=[]),h&&h.flags.indexOf("+")>-1)var a=n;else{for(var s=n.split("."),i=0;i<s.length-1;i++)o=o[s[i]]=o[s[i]]||{};a=s[s.length-1]}var c={array:null,arrayType:null,arrayFirstKey:null,flags:t,scope:p},u=h&&h.flags.indexOf("+")>-1&&t.indexOf(".")>-1;"["==e?(u&&(a="value"),c.array=o[a]=[],t.indexOf("+")>-1&&(c.arrayType="freeform"),r?f.push(c):f=[c],h=f[f.length-1]):"{"==e&&(r?(p=u?p.value={}:o[a]=o={},f.push(c)):(p=o[a]="object"==typeof o[a]?o[a]:{},f=[c]),h=f[f.length-1])}}function w(t){h&&h.flags.indexOf("+")>-1&&t.match(/[^\n\r\s]/)?h.array.push({type:"text",value:t.replace(/(^\s*)|(\s*$)/g,"")}):E+=e.substring(0,t.length)}function x(e){if(h&&h.array){if(h.arrayType=h.arrayType||"complex","simple"===h.arrayType)return;null!==h.arrayFirstKey&&h.arrayFirstKey!==e||h.array.push(p={}),h.flags.indexOf("+")>-1?p.type=e:h.arrayFirstKey=h.arrayFirstKey||e}}function _(e,n){return t.comments&&(e=(e=e.replace(/(?:^\\)?\[[^\[\]\n\r]*\](?!\])/gm,"")).replace(/\[\[([^\[\]\n\r]*)\]\]/g,"[$1]")),"append"==n&&(e=e.replace(new RegExp("^(\\s*)\\\\","gm"),"$1")),e}function k(){var e=E+"";return E="",m=null,e}function C(e,t){t=t||{};var n=m,l=k();if(t.replace?(l=_(l,"replace").replace(new RegExp("^\\s*"),""),E=new RegExp("\\s*$").exec(l)[0],m=n):l=_(l,"append"),"object"==typeof e)t.replace&&(e[e.length-1]=""),e[e.length-1]+=l.replace(new RegExp("\\s*$"),"");else{var r=e.split(".");g=p;for(var o=0;o<r.length-1;o++)"string"==typeof g[r[o]]&&(g[r[o]]={}),g=g[r[o]]=g[r[o]]||{};t.replace&&(g[r[r.length-1]]=""),g[r[r.length-1]]+=l.replace(new RegExp("\\s*$"),"")}}return k(),d}};e.exports&&(t=e.exports=n),t.archieml=n}).call(st)},it(ct={exports:{}},ct.exports),ct.exports);const{document:dt}=Y;function pt(e){let t,n,l=e[6]&&ft(e);return{c(){l&&l.c(),t=w()},m(e,r){l&&l.m(e,r),m(e,t,r),n=!0},p(e,n){e[6]?l?(l.p(e,n),64&n&&Q(l,1)):(l=ft(e),l.c(),Q(l,1),l.m(t.parentNode,t)):l&&(Z(),X(l,1,1,(()=>{l=null})),G())},i(e){n||(Q(l),n=!0)},o(e){X(l),n=!1},d(e){l&&l.d(e),e&&E(t)}}}function ft(e){let t,n,l=e[3]&&ht(e);return{c(){l&&l.c(),t=w()},m(e,r){l&&l.m(e,r),m(e,t,r),n=!0},p(e,n){e[3]?l?(l.p(e,n),8&n&&Q(l,1)):(l=ht(e),l.c(),Q(l,1),l.m(t.parentNode,t)):l&&(Z(),X(l,1,1,(()=>{l=null})),G())},i(e){n||(Q(l),n=!0)},o(e){X(l),n=!1},d(e){l&&l.d(e),e&&E(t)}}}function ht(e){let t,n,l=e[4]&&gt(e);return{c(){l&&l.c(),t=w()},m(e,r){l&&l.m(e,r),m(e,t,r),n=!0},p(e,n){e[4]?l?(l.p(e,n),16&n&&Q(l,1)):(l=gt(e),l.c(),Q(l,1),l.m(t.parentNode,t)):l&&(Z(),X(l,1,1,(()=>{l=null})),G())},i(e){n||(Q(l),n=!0)},o(e){X(l),n=!1},d(e){l&&l.d(e),e&&E(t)}}}function gt(e){let t,n,l,r,o,a,s,i,c,u,d,p,f,h,$,w,C,N,M,S,q,z,A,W,R,P,F,U,K,B,I,D,L,J,V=e[2].name+"",Z=e[9](e[2],e[5])+"",G=(e[2].gss?e[2].gss.long:"local authority district")+"",Y=e[10](e[2],e[5])+"";function ee(t){e[11](t)}let oe={options:e[0],group:"typenm",search:!0};return void 0!==e[1]&&(oe.selected=e[1]),u=new at({props:oe}),O.push((()=>te(u,"selected",ee))),u.$on("select",e[12]),{c(){t=v("div"),n=v("div"),l=v("h1"),r=b(V),o=b(": "),a=v("span"),a.textContent="What's changed",s=y(),i=v("div"),c=v("div"),ne(u.$$.fragment),p=y(),f=new T,h=y(),$=v("p"),w=b("Here are some of the "),C=v("span"),C.textContent="most notable changes",N=b(" from across the "),M=b(G),S=b("."),q=y(),z=v("main"),A=new T,W=y(),R=v("hr"),P=y(),F=v("h2"),F.textContent="Creating this article",U=y(),K=v("p"),K.textContent="This article was generated using some automation. Topics are automatically chosen based on how relevant they are for each area.",B=y(),I=v("div"),j(a,"font-weight","400"),_(l,"class","svelte-15qyx5z"),j(c,"width","640px"),j(c,"margin","50px auto"),f.a=h,_(C,"class","back-to-top svelte-15qyx5z"),j(n,"width","640px"),j(n,"margin","0 auto"),_(t,"id","sf"),_(t,"class","svelte-15qyx5z"),A.a=W,j(R,"width","40%"),j(R,"margin","60px auto 30px auto"),_(F,"id","create"),j(I,"height","200px"),_(z,"class","svelte-15qyx5z")},m(e,d){m(e,t,d),g(t,n),g(n,l),g(l,r),g(l,o),g(l,a),g(n,s),g(n,i),g(i,c),le(u,c,null),g(n,p),f.m(Z,n),g(n,h),g(n,$),g($,w),g($,C),g($,N),g($,M),g($,S),m(e,q,d),m(e,z,d),A.m(Y,z),g(z,W),g(z,R),g(z,P),g(z,F),g(z,U),g(z,K),g(z,B),g(z,I),D=!0,L||(J=x(C,"click",Et),L=!0)},p(e,t){(!D||4&t)&&V!==(V=e[2].name+"")&&k(r,V);const n={};1&t&&(n.options=e[0]),!d&&2&t&&(d=!0,n.selected=e[1],H((()=>d=!1))),u.$set(n),(!D||36&t)&&Z!==(Z=e[9](e[2],e[5])+"")&&f.p(Z),(!D||4&t)&&G!==(G=(e[2].gss?e[2].gss.long:"local authority district")+"")&&k(M,G),(!D||36&t)&&Y!==(Y=e[10](e[2],e[5])+"")&&A.p(Y)},i(e){D||(Q(u.$$.fragment,e),D=!0)},o(e){X(u.$$.fragment,e),D=!1},d(e){e&&E(t),re(u),e&&E(q),e&&E(z),L=!1,J()}}}function mt(e){let t,n,l,r,o,a,s,c,u,d=e[2]&&pt(e);return{c(){t=v("script"),l=v("script"),o=y(),a=v("div"),d&&d.c(),i(t.src,n="https://d3js.org/d3.v3.min.js")||_(t,"src","https://d3js.org/d3.v3.min.js"),_(t,"charset","utf-8"),i(l.src,r="https://unpkg.com/rosaenlg@3.0.1/dist/rollup/rosaenlg_tiny_en_US_3.0.1_comp.js")||_(l,"src","https://unpkg.com/rosaenlg@3.0.1/dist/rollup/rosaenlg_tiny_en_US_3.0.1_comp.js")},m(n,r){g(dt.head,t),g(dt.head,l),m(n,o,r),m(n,a,r),d&&d.m(a,null),s=!0,c||(u=x(l,"load",e[7]),c=!0)},p(e,[t]){e[2]?d?(d.p(e,t),4&t&&Q(d,1)):(d=pt(e),d.c(),Q(d,1),d.m(a,null)):d&&(Z(),X(d,1,1,(()=>{d=null})),G())},i(e){s||(Q(d),s=!0)},o(e){X(d),s=!1},d(e){E(t),E(l),e&&E(o),e&&E(a),d&&d.d(),c=!1,u()}}}function Et(){document.getElementById("create").scrollIntoView()}function $t(e,t,n){var l,r,o,a,s,i,c,u,d,p,f,h,g,m,E,$;fetch("./archie.aml").then((e=>e.text())).then((e=>n(5,m=ut.load(e)))),fetch("./puggy.pug").then((e=>e.text())).then((e=>E=e)),fetch("./standf.pug").then((e=>e.text())).then((e=>$=e));const v={ew:{name:"",pl:""},wd:{name:"Ward",pl:"Wards"},lad:{name:"District",pl:"Districts"},rgn:{name:"Region",pl:"Regions"},ctry:{name:"Country",pl:"Countries"}};let b=!1;function y(e){fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/"+e+".json").then((e=>e.json())).then((t=>{t.children=l.filter((t=>t.parent==e)),t.siblings=l.filter((e=>e.parent==t.parents[0].code)),n(2,o=t),g=o.data.population.value.change.all>8?"expanded":o.data.population.value.change.all>3?"grew":o.data.population.value.change.all>0?"did not change much":"shrunk",o.data.health.perc.change.good>0?h="improved":o.data.health.perc.change.good<0&&(h="deteriorated"),(d=o.stories.map((e=>e.label.split("_")))).forEach((e=>{e.length>4&&(e[3]=e[3]+"_"+e[4],e.pop())})),c=o.parents[0].code,a=d.map((e=>parseInt(o.data[e[0]][e[1]+"_rank_local"][e[2]][e[3]]))),p=d.map((e=>parseInt(o.data[e[0]][e[1]+"_rank"][e[2]][e[3]]))),s=d.map((e=>parseInt(o.data[e[0]][e[1]+"_rank_local"][2011][e[3]]))),f=d.map((e=>parseInt(o.data[e[0]][e[1]+"_rank"][2011][e[3]]))),fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/"+c+".json").then((e=>e.json())).then((t=>{t.children=l.filter((t=>t.parent==e)),t.siblings=l.filter((e=>e.parent==t.parents[0].code)),n(4,u=t)}))})),fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/E92000001.json").then((e=>e.json())).then((t=>{t.children=l.filter((t=>t.parent==e)),t.siblings=l.filter((e=>e.parent==t.parents[0].code)),n(3,i=t)}))}(async function(e){let t=await fetch(e),n=await t.text();return await Ee(n,$e)})("https://raw.githubusercontent.com/theojolliffe/census-data/main/csv/lists/places_2020.csv").then((e=>{e.forEach((e=>{e.typepl=v[e.type].pl,e.typenm=v[e.type].name})),e=e.filter((e=>"lad"==e.type)),n(0,l=e.sort(((e,t)=>e.name.localeCompare(t.name))));let t=l[Math.round(336*Math.random())].name;t="Cardiff",console.log(t),n(1,r=l.find((e=>e.name==t))),console.log(r.code),y(r.code)}));let w={1:"expanded",2:"grew",3:"grew",4:"remained relatively stable",5:"fell"};function x(e,t){Object.keys(e).forEach((n=>{"object"==typeof e[n]?x(e[n],t):e[n]=ye(e[n],{health:h,health:h,expanded:g,plcname:t})}))}!function(e){S().$$.on_mount.push(e)}((()=>{setInterval((function(){d3.selectAll("div#visph").attr("style","\n\t\t\tbackground-color: #f6f6f6; \n\t\t\tcolor: #e1e7ea; \n\t\t\theight: 240px;\n\t\t\tpadding: 80px;\n\t\t\tfont-size: 2.8rem;\n\t\t\tfont-weight: 600;\n\t\t\tmargin-bottom: 80px;")}),1e3)}));return[l,r,o,i,u,m,b,()=>{n(6,b=!0)},y,function(e,t){var n=JSON.parse(JSON.stringify(t));x(n,e.name),console.log("o000ooo",n);let l=[],r=0;return e.stories.forEach((e=>{l.length<4&Math.abs(e.value)>3&&(l.push(e.label.split("_")),r+=Math.abs(e.value))})),rosaenlg_en_US.render($,{language:"en_UK",place:e,topics:n,s:d,sf:l,changeMag:r,grewSyn:w,qui:ze,natRankCha:p})},function(e,t){var n=JSON.parse(JSON.stringify(t));function l(e){return e.charAt(0).toUpperCase()+e.slice(1)}return x(n,e.name),rosaenlg_en_US.render(E,{language:"en_UK",place:e,data:e.data,eng:i,rgn:u,parent:ke(_e(e.parents[0].name)),parentNT:ke(_e(e.parents[0].name,"NT")),s:d,stories:e.stories,priorities:e.Priorities,grewSyn:w,locRankCha:a,natRankCha:p,locRankCur:s,natRankCur:f,hiRank:e.hiRank,topic:function(e,t){let l;return l=t||d[e][3],n[d[e][0]][l]},topics:n,chains:we,country:"Wales"==e.parents[0].name?"Wales":"England",get_word:Te,figs:Me,otherEst:Ae,cur:Se,cha:qe,qui:ze,cap:l,cap:l,otherRank:We,ud:Oe,city:Re,drop:Ce,drop:Ce,ord:He,ageBandLU:Be,eq:Ie,nuword:Ke,sign:Pe,udord:De})},function(e){n(1,r=e)},()=>{r&&y(r.code)}]}class vt extends se{constructor(e){super(),ae(this,e,$t,mt,o,{})}}function bt(e,t,n){const l=e.slice();return l[32]=t[n],l[35]=t,l[34]=n,l}function yt(e,t,n){const l=e.slice();return l[32]=t[n],l[33]=t,l[34]=n,l}function wt(e){let t,n,l,r,o,a,s,i=(e[0]?e[0]:"Select one")+"";return{c(){t=v("a"),n=v("span"),l=b(i),r=y(),o=v("span"),o.textContent=" ",_(n,"class","svelte-qdzmwx"),_(o,"class","button svelte-qdzmwx"),N(o,"search",e[3]),N(o,"down",!e[3]),_(t,"id","toggle"),_(t,"class","svelte-qdzmwx")},m(i,c){m(i,t,c),g(t,n),g(n,l),g(t,r),g(t,o),a||(s=x(t,"click",e[12]),a=!0)},p(e,t){1&t[0]&&i!==(i=(e[0]?e[0]:"Select one")+"")&&k(l,i),8&t[0]&&N(o,"search",e[3]),8&t[0]&&N(o,"down",!e[3])},d(e){e&&E(t),a=!1,s()}}}function xt(e){let t,n,r,o,a,s,i,c,u=e[6][e[1]]+"",d=e[2]&&_t(e);return{c(){t=v("a"),n=v("span"),r=b(u),o=y(),d&&d.c(),a=y(),s=v("span"),s.textContent=" ",_(n,"class","selection svelte-qdzmwx"),_(s,"class","button close svelte-qdzmwx"),_(t,"id","toggle"),_(t,"class","selected svelte-qdzmwx")},m(l,u){m(l,t,u),g(t,n),g(n,r),g(n,o),d&&d.m(n,null),g(t,a),g(t,s),i||(c=[x(s,"click",e[14]),x(t,"click",e[12])],i=!0)},p(e,t){66&t[0]&&u!==(u=e[6][e[1]]+"")&&k(r,u),e[2]?d?d.p(e,t):(d=_t(e),d.c(),d.m(n,null)):d&&(d.d(1),d=null)},d(e){e&&E(t),d&&d.d(),i=!1,l(c)}}}function _t(e){let t,n,l=e[6][e[2]]+"";return{c(){t=v("small"),n=b(l),_(t,"class","svelte-qdzmwx")},m(e,l){m(e,t,l),g(t,n)},p(e,t){68&t[0]&&l!==(l=e[6][e[2]]+"")&&k(n,l)},d(e){e&&E(t)}}}function kt(e){let t,n,r,o,a,s;function i(e,t){return e[4].length<0?Tt:e[9][0]&&e[2]?Nt:e[9][0]?jt:Ct}let c=i(e),u=c(e);return{c(){t=v("div"),n=v("input"),r=y(),o=v("ul"),u.c(),_(n,"type","text"),_(n,"placeholder",""),_(n,"autocomplete","false"),_(n,"class","svelte-qdzmwx"),_(o,"class","svelte-qdzmwx"),_(t,"id","dropdown"),j(t,"top","0"),_(t,"class","svelte-qdzmwx")},m(l,i){m(l,t,i),g(t,n),C(n,e[4]),e[23](n),g(t,r),g(t,o),u.m(o,null),e[30](t),a||(s=[x(n,"input",e[22]),x(n,"keyup",e[16])],a=!0)},p(e,t){16&t[0]&&n.value!==e[4]&&C(n,e[4]),c===(c=i(e))&&u?u.p(e,t):(u.d(1),u=c(e),u&&(u.c(),u.m(o,null)))},d(n){n&&E(t),e[23](null),u.d(),e[30](null),a=!1,l(s)}}}function Ct(t){let n;return{c(){n=v("li"),n.textContent="No results",_(n,"class","svelte-qdzmwx")},m(e,t){m(e,n,t)},p:e,d(e){e&&E(n)}}}function jt(e){let t,n=e[9],l=[];for(let t=0;t<n.length;t+=1)l[t]=Mt(bt(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=w()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);m(e,t,n)},p(e,r){if(11010&r[0]){let o;for(n=e[9],o=0;o<n.length;o+=1){const a=bt(e,n,o);l[o]?l[o].p(a,r):(l[o]=Mt(a),l[o].c(),l[o].m(t.parentNode,t))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(e){$(l,e),e&&E(t)}}}function Nt(e){let t,n=e[9],l=[];for(let t=0;t<n.length;t+=1)l[t]=St(yt(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=w()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);m(e,t,n)},p(e,r){if(11014&r[0]){let o;for(n=e[9],o=0;o<n.length;o+=1){const a=yt(e,n,o);l[o]?l[o].p(a,r):(l[o]=St(a),l[o].c(),l[o].m(t.parentNode,t))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(e){$(l,e),e&&E(t)}}}function Tt(t){let n;return{c(){n=v("li"),n.textContent="Type a name...",_(n,"class","svelte-qdzmwx")},m(e,t){m(e,n,t)},p:e,d(e){e&&E(n)}}}function Mt(e){let t,n,r,o,a,s=e[32][e[1]]+"",i=e[34];function c(){return e[27](e[32])}function u(){return e[28](e[34])}const d=()=>e[29](t,i),p=()=>e[29](null,i);return{c(){t=v("li"),n=b(s),r=y(),_(t,"class","svelte-qdzmwx"),N(t,"highlight",e[8]==e[34])},m(e,l){m(e,t,l),g(t,n),g(t,r),d(),o||(a=[x(t,"click",c),x(t,"mouseover",u)],o=!0)},p(l,r){e=l,514&r[0]&&s!==(s=e[32][e[1]]+"")&&k(n,s),i!==e[34]&&(p(),i=e[34],d()),256&r[0]&&N(t,"highlight",e[8]==e[34])},d(e){e&&E(t),p(),o=!1,l(a)}}}function St(e){let t,n,r,o,a,s,i,c,u=e[32][e[1]]+"",d=e[32][e[2]]+"",p=e[34];function f(){return e[24](e[32])}function h(){return e[25](e[34])}const $=()=>e[26](t,p),w=()=>e[26](null,p);return{c(){t=v("li"),n=b(u),r=y(),o=v("small"),a=b(d),s=y(),_(o,"class","svelte-qdzmwx"),_(t,"class","svelte-qdzmwx"),N(t,"highlight",e[8]==e[34])},m(e,l){m(e,t,l),g(t,n),g(t,r),g(t,o),g(o,a),g(t,s),$(),i||(c=[x(t,"click",f),x(t,"mouseover",h)],i=!0)},p(l,r){e=l,514&r[0]&&u!==(u=e[32][e[1]]+"")&&k(n,u),516&r[0]&&d!==(d=e[32][e[2]]+"")&&k(a,d),p!==e[34]&&(w(),p=e[34],$()),256&r[0]&&N(t,"highlight",e[8]==e[34])},d(e){e&&E(t),w(),i=!1,l(c)}}}function qt(t){let n,l,r,o;function a(e,t){return e[6]&&!e[3]?xt:wt}let s=a(t),i=s(t),c=t[7]&&kt(t);return{c(){n=v("div"),i.c(),l=y(),c&&c.c(),_(n,"id","select"),_(n,"class","svelte-qdzmwx"),N(n,"active",t[7])},m(e,a){m(e,n,a),i.m(n,null),g(n,l),c&&c.m(n,null),r||(o=x(n,"keydown",t[15]),r=!0)},p(e,t){s===(s=a(e))&&i?i.p(e,t):(i.d(1),i=s(e),i&&(i.c(),i.m(n,l))),e[7]?c?c.p(e,t):(c=kt(e),c.c(),c.m(n,null)):c&&(c.d(1),c=null),128&t[0]&&N(n,"active",e[7])},i:e,o:e,d(e){e&&E(n),i.d(),c&&c.d(),r=!1,o()}}}function zt(e,t,n){let l;const r=z();let o,a,s,{options:i}=t,{selectedb:c=null}=t,{placeholder:u="Find an area..."}=t,{value:d="code"}=t,{label:p="name"}=t,{group:f=null}=t,{search:h=!1}=t,g=c,m=c?i.find((e=>{e[d],c[d]})):null,E=!1,$="",v=null,b=[];function y(e){n(17,c=e),n(7,E=!1),r("select",{selectedb:e,value:e[d]})}return e.$$set=e=>{"options"in e&&n(18,i=e.options),"selectedb"in e&&n(17,c=e.selectedb),"placeholder"in e&&n(0,u=e.placeholder),"value"in e&&n(19,d=e.value),"label"in e&&n(1,p=e.label),"group"in e&&n(2,f=e.group),"search"in e&&n(3,h=e.search)},e.$$.update=()=>{16&e.$$.dirty[0]&&n(21,l=$?new RegExp($,"i"):null),2359298&e.$$.dirty[0]&&(n(9,o=l?i.filter((e=>l.test(e[p]))):i),n(8,v=0)),32&e.$$.dirty[0]&&(document.onclick=function(e){e.target!==a&&(n(7,E=!1),n(8,v=0))}),1966080&e.$$.dirty[0]&&g!=c&&(n(6,m=i.find((e=>e[d]==c[d]))),n(20,g=c))},[u,p,f,h,$,a,m,E,v,o,s,b,function(e){var t;e.stopPropagation(),n(4,$=""),n(7,E=!E),(t=10,new Promise((e=>setTimeout(e,t)))).then((()=>{s&&E&&s.focus()}))},y,function(e){e.stopPropagation(),n(17,c=null),n(20,g=null),n(6,m=null),r("select",{selectedb:null,value:null})},function(e){E&&o[0]&&Number.isInteger(v)&&(38===e.keyCode?(n(8,v-=v>0?1:0),b[v].scrollIntoView({block:"nearest",inline:"start"})):40===e.keyCode&&(n(8,v+=v<o.length-1?1:0),b[v].scrollIntoView({block:"nearest",inline:"end"})))},function(e){o[0]&&Number.isInteger(v)&&13===e.keyCode&&y(o[v])},c,i,d,g,l,function(){$=this.value,n(4,$)},function(e){O[e?"unshift":"push"]((()=>{s=e,n(10,s)}))},e=>y(e),e=>n(8,v=e),function(e,t){O[e?"unshift":"push"]((()=>{b[t]=e,n(11,b)}))},e=>y(e),e=>n(8,v=e),function(e,t){O[e?"unshift":"push"]((()=>{b[t]=e,n(11,b)}))},function(e){O[e?"unshift":"push"]((()=>{a=e,n(5,a)}))}]}class At extends se{constructor(e){super(),ae(this,e,zt,qt,o,{options:18,selectedb:17,placeholder:0,value:19,label:1,group:2,search:3},null,[-1,-1])}}function Wt(e,t,n){const l=e.slice();return l[38]=t[n],l[40]=n,l}function Ot(e){let t,n,l,r;const o=[Pt,Rt],a=[];function s(e,t){return e[7]?0:1}return t=s(e),n=a[t]=o[t](e),{c(){n.c(),l=w()},m(e,n){a[t].m(e,n),m(e,l,n),r=!0},p(e,r){let i=t;t=s(e),t===i?a[t].p(e,r):(Z(),X(a[i],1,1,(()=>{a[i]=null})),G(),n=a[t],n?n.p(e,r):(n=a[t]=o[t](e),n.c()),Q(n,1),n.m(l.parentNode,l))},i(e){r||(Q(n),r=!0)},o(e){X(n),r=!1},d(e){a[t].d(e),e&&E(l)}}}function Rt(t){let n;return{c(){n=v("div"),n.textContent="Loading...",j(n,"padding","50px"),j(n,"padding-left","40%"),j(n,"font-size","x-large")},m(e,t){m(e,n,t)},p:e,i:e,o:e,d(e){e&&E(n)}}}function Pt(e){let t,n,l=e[9]&&Ft(e);return{c(){l&&l.c(),t=w()},m(e,r){l&&l.m(e,r),m(e,t,r),n=!0},p(e,n){e[9]?l?(l.p(e,n),512&n[0]&&Q(l,1)):(l=Ft(e),l.c(),Q(l,1),l.m(t.parentNode,t)):l&&(Z(),X(l,1,1,(()=>{l=null})),G())},i(e){n||(Q(l),n=!0)},o(e){X(l),n=!1},d(e){l&&l.d(e),e&&E(t)}}}function Ft(e){let t,n,l=e[4]&&Ut(e);return{c(){l&&l.c(),t=w()},m(e,r){l&&l.m(e,r),m(e,t,r),n=!0},p(e,n){e[4]?l?(l.p(e,n),16&n[0]&&Q(l,1)):(l=Ut(e),l.c(),Q(l,1),l.m(t.parentNode,t)):l&&(Z(),X(l,1,1,(()=>{l=null})),G())},i(e){n||(Q(l),n=!0)},o(e){X(l),n=!1},d(e){l&&l.d(e),e&&E(t)}}}function Ut(e){let t,n,l=e[3]&&Kt(e);return{c(){l&&l.c(),t=w()},m(e,r){l&&l.m(e,r),m(e,t,r),n=!0},p(e,n){e[3]?l?(l.p(e,n),8&n[0]&&Q(l,1)):(l=Kt(e),l.c(),Q(l,1),l.m(t.parentNode,t)):l&&(Z(),X(l,1,1,(()=>{l=null})),G())},i(e){n||(Q(l),n=!0)},o(e){X(l),n=!1},d(e){l&&l.d(e),e&&E(t)}}}function Kt(e){let t,n,l,r,o,a,s,i,c,u,d,p,f,h,$,w=e[0].label+"",x=[],C=new Map,N=e[2]&&Ht(e),T=e[10];const M=e=>e[40];for(let t=0;t<T.length;t+=1){let n=Wt(e,T,t),l=M(n);C.set(l,x[t]=It(l,n))}return{c(){t=v("div"),n=v("h1"),l=b(w),r=y(),N&&N.c(),o=y(),a=v("main");for(let e=0;e<x.length;e+=1)x[e].c();s=y(),i=v("hr"),c=y(),u=v("h2"),u.textContent="Creating this article",d=y(),p=v("p"),p.textContent="This article was generated using some automation. Topics are automatically chosen based on how relevant they are for each area.",f=y(),h=v("div"),_(n,"class","svelte-15qyx5z"),j(t,"width","640px"),j(t,"margin","0 auto"),j(i,"width","40%"),j(i,"margin","60px auto 30px auto"),_(u,"id","create"),j(h,"height","200px"),_(a,"class","svelte-15qyx5z")},m(e,E){m(e,t,E),g(t,n),g(n,l),m(e,r,E),N&&N.m(e,E),m(e,o,E),m(e,a,E);for(let e=0;e<x.length;e+=1)x[e].m(a,null);g(a,s),g(a,i),g(a,c),g(a,u),g(a,d),g(a,p),g(a,f),g(a,h),$=!0},p(e,t){(!$||1&t[0])&&w!==(w=e[0].label+"")&&k(l,w),e[2]?N?(N.p(e,t),4&t[0]&&Q(N,1)):(N=Ht(e),N.c(),Q(N,1),N.m(o.parentNode,o)):N&&(Z(),X(N,1,1,(()=>{N=null})),G()),33824&t[0]&&(T=e[10],x=function(e,t,n,l,r,o,a,s,i,c,u,d){let p=e.length,f=o.length,h=p;const g={};for(;h--;)g[e[h].key]=h;const m=[],E=new Map,$=new Map;for(h=f;h--;){const e=d(r,o,h),s=n(e);let i=a.get(s);i?l&&i.p(e,t):(i=c(s,e),i.c()),E.set(s,m[h]=i),s in g&&$.set(s,Math.abs(h-g[s]))}const v=new Set,b=new Set;function y(e){Q(e,1),e.m(s,u),a.set(e.key,e),u=e.first,f--}for(;p&&f;){const t=m[f-1],n=e[p-1],l=t.key,r=n.key;t===n?(u=t.first,p--,f--):E.has(r)?!a.has(l)||v.has(l)?y(t):b.has(r)?p--:$.get(l)>$.get(r)?(b.add(l),y(t)):(v.add(r),p--):(i(n,a),p--)}for(;p--;){const t=e[p];E.has(t.key)||i(t,a)}for(;f;)y(m[f-1]);return m}(x,t,M,1,e,T,C,a,ee,It,s,Wt))},i(e){$||(Q(N),$=!0)},o(e){X(N),$=!1},d(e){e&&E(t),e&&E(r),N&&N.d(e),e&&E(o),e&&E(a);for(let e=0;e<x.length;e+=1)x[e].d()}}}function Ht(e){let t,n,l,r,o,a,s;function i(t){e[18](t)}let c={options:e[2],placeholder:"Search a subtopic",value:"value",label:"label",search:!0};void 0!==e[1]&&(c.selectedb=e[1]),l=new At({props:c}),O.push((()=>te(l,"selectedb",i))),l.$on("select",e[19]);let u=e[8]&&Bt(e);return{c(){t=v("div"),n=v("div"),ne(l.$$.fragment),o=y(),u&&u.c(),a=w(),j(n,"width","640px"),j(n,"margin","50px auto")},m(e,r){m(e,t,r),g(t,n),le(l,n,null),m(e,o,r),u&&u.m(e,r),m(e,a,r),s=!0},p(e,t){const n={};4&t[0]&&(n.options=e[2]),!r&&2&t[0]&&(r=!0,n.selectedb=e[1],H((()=>r=!1))),l.$set(n),e[8]?u?u.p(e,t):(u=Bt(e),u.c(),u.m(a.parentNode,a)):u&&(u.d(1),u=null)},i(e){s||(Q(l.$$.fragment,e),s=!0)},o(e){X(l.$$.fragment,e),s=!1},d(e){e&&E(t),re(l),e&&E(o),u&&u.d(e),e&&E(a)}}}function Bt(e){let t,n,l,r=e[1].label+"";return{c(){t=v("div"),n=v("h1"),l=b(r),_(n,"class","svelte-15qyx5z"),j(t,"width","640px"),j(t,"margin","0 auto")},m(e,r){m(e,t,r),g(t,n),g(n,l)},p(e,t){2&t[0]&&r!==(r=e[1].label+"")&&k(l,r)},d(e){e&&E(t)}}}function It(e,t){let n,l,r,o,a,s=t[38].place.name+"",i=t[15](t[38].place,t[38].region,t[5],t[38].s,t[38].story)+"";return{key:e,first:null,c(){n=v("h2"),l=b(s),r=y(),o=new T,a=w(),j(n,"text-decoration","underline"),o.a=a,this.first=n},m(e,t){m(e,n,t),g(n,l),m(e,r,t),o.m(i,e,t),m(e,a,t)},p(e,n){t=e,1024&n[0]&&s!==(s=t[38].place.name+"")&&k(l,s),1056&n[0]&&i!==(i=t[15](t[38].place,t[38].region,t[5],t[38].s,t[38].story)+"")&&o.p(i)},d(e){e&&E(n),e&&E(r),e&&E(a),e&&o.d()}}}function Dt(e){let t,n,l,r,o,a,s,c,u,d,p,f,h,$;function b(t){e[16](t)}let w={options:e[11],placeholder:"Search a topic",value:"value",label:"label",search:!0};void 0!==e[0]&&(w.selected=e[0]),c=new at({props:w}),O.push((()=>te(c,"selected",b))),c.$on("select",e[17]);let k=e[6]&&Ot(e);return{c(){t=v("script"),l=v("script"),o=y(),a=v("div"),s=v("div"),ne(c.$$.fragment),d=y(),p=v("div"),k&&k.c(),i(t.src,n="https://d3js.org/d3.v3.min.js")||_(t,"src","https://d3js.org/d3.v3.min.js"),_(t,"charset","utf-8"),i(l.src,r="https://unpkg.com/rosaenlg@3.0.1/dist/rollup/rosaenlg_tiny_en_US_3.0.1_comp.js")||_(l,"src","https://unpkg.com/rosaenlg@3.0.1/dist/rollup/rosaenlg_tiny_en_US_3.0.1_comp.js"),j(s,"width","640px"),j(s,"margin","50px auto")},m(n,r){g(document.head,t),g(document.head,l),m(n,o,r),m(n,a,r),g(a,s),le(c,s,null),m(n,d,r),m(n,p,r),k&&k.m(p,null),f=!0,h||($=x(l,"load",e[12]),h=!0)},p(e,t){const n={};!u&&1&t[0]&&(u=!0,n.selected=e[0],H((()=>u=!1))),c.$set(n),e[6]?k?(k.p(e,t),64&t[0]&&Q(k,1)):(k=Ot(e),k.c(),Q(k,1),k.m(p,null)):k&&(Z(),X(k,1,1,(()=>{k=null})),G())},i(e){f||(Q(c.$$.fragment,e),Q(k),f=!0)},o(e){X(c.$$.fragment,e),X(k),f=!1},d(e){E(t),E(l),e&&E(o),e&&E(a),re(c),e&&E(d),e&&E(p),k&&k.d(),h=!1,$()}}}function Lt(e,t,n){let l;var r,o,a,s,i,c;let u=[{label:"Average age",value:"agemed_value_change"},{label:"Employment status",value:"economic_perc_change"},{label:"Ethnicity",value:"ethnicity_perc_change"},{label:"Health",value:"health_perc_change"},{label:"Hours worked",value:"hoursworked_perc_change"},{label:"Households with children",value:"children_perc_change"},{label:"Households by family",value:"household_perc_change"},{label:"Marital status",value:"marital_perc_change"},{label:"Population",value:"population_value_change"},{label:"Religion",value:"religion_perc_change"},{label:"Tenure",value:"tenure_perc_change"}];r=u.find((e=>"agemed_value_change"==e.value)),console.log("topicOptions",u);var d={agemed_value_change:!1,economic_perc_change:[{label:"All",value:"all"},{label:"Employed",value:"employee"},{label:"Self-employed",value:"self-employed"},{label:"Student",value:"student"},{label:"Unemployed",value:"unemployed"}],ethnicity_perc_change:[{label:"All",value:"all"},{label:"Asian",value:"asian"},{label:"Black",value:"black"},{label:"White",value:"white"}],health_perc_change:[{label:"All",value:"all"},{label:"Good",value:"good"},{label:"Fair",value:"fair"},{label:"Bad",value:"bad"}],hoursworked_perc_change:[{label:"All",value:"all"},{label:"1-15 hours per week",value:"Male1-15"},{label:"Over 49 hours per week",value:"Male49plus"}],children_perc_change:[{label:"All",value:"all"},{label:"Households with children",value:"Kids"},{label:"Households without children",value:"NoKids"},{label:"Households with only non-dependent children",value:"NonDepKids"}],household_perc_change:[{label:"All",value:"all"},{label:"Cohabiting",value:"Cohabiting"},{label:"Married couple",value:"Married"},{label:"Single parent",value:"LoneParent"},{label:"Single person",value:"OnePerson"}],marital_perc_change:[{label:"All",value:"all"},{label:"Married",value:"Married"},{label:"Seperated",value:"Seperated"},{label:"Single",value:"Single"}],population_value_change:!1,religion_perc_change:[{label:"All",value:"all"},{label:"Buddhist",value:"Buddhist"},{label:"Christian",value:"Christian"},{label:"Hindu",value:"Hindu"},{label:"Jewish",value:"Jewish"},{label:"Muslim",value:"Muslim"},{label:"No religion",value:"Noreligion"}],tenure_perc_change:[{label:"All",value:"all"},{label:"Homeownership",value:"owned"},{label:"Private renting",value:"rented_private"},{label:"Social renting",value:"rented_social"}]},p=["E12000001","E12000002","E12000003","E12000004","E12000005","E12000006","E12000007","E12000008","E12000009","W92000004"],f=[];fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/E92000001.json").then((e=>e.json())).then((e=>{n(3,a=e),console.log("eng",a),n(7,m=!0)})).then((e=>{p.forEach((e=>{fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/"+e+".json").then((e=>e.json())).then((e=>{f.push(e)}))}))})).then((e=>{n(4,s=!0)})),console.log("regions",f);var h,g,m=!1,E=!1,$=[];["E06000047","E06000005","E06000001","E06000002","E06000057","E06000003","E06000004","E08000037","E08000021","E08000022","E08000023","E08000024","E06000008","E06000009","E06000049","E06000050","E06000006","E06000007","E07000026","E07000027","E07000028","E07000029","E07000030","E07000031","E08000001","E08000002","E08000003","E08000004","E08000005","E08000006","E08000007","E08000008","E08000009","E08000010","E07000117","E07000118","E07000119","E07000120","E07000121","E07000122","E07000123","E07000124","E07000125","E07000126","E07000127","E07000128","E08000011","E08000012","E08000014","E08000013","E08000015","E06000011","E06000010","E06000012","E06000013","E06000014","E07000163","E07000164","E07000165","E07000166","E07000167","E07000168","E07000169","E08000016","E08000017","E08000018","E08000019","E08000032","E08000033","E08000034","E08000035","E08000036","E06000015","E06000016","E06000018","E06000017","E07000032","E07000033","E07000034","E07000035","E07000036","E07000037","E07000038","E07000039","E07000129","E07000130","E07000131","E07000132","E07000133","E07000134","E07000135","E07000136","E07000137","E07000138","E07000139","E07000140","E07000141","E07000142","E07000170","E07000171","E07000172","E07000173","E07000174","E07000175","E07000176","E06000019","E06000051","E06000021","E06000020","E07000192","E07000193","E07000194","E07000195","E07000196","E07000197","E07000198","E07000199","E07000218","E07000219","E07000220","E07000221","E07000222","E08000025","E08000026","E08000027","E08000028","E08000029","E08000030","E08000031","E07000234","E07000235","E07000236","E07000237","E07000238","E07000239","E06000055","E06000056","E06000032","E06000031","E06000033","E06000034","E07000008","E07000009","E07000010","E07000011","E07000012","E07000066","E07000067","E07000068","E07000069","E07000070","E07000071","E07000072","E07000073","E07000074","E07000075","E07000076","E07000077","E07000095","E07000096","E07000242","E07000098","E07000099","E07000240","E07000243","E07000102","E07000103","E07000241","E07000143","E07000144","E07000145","E07000146","E07000147","E07000148","E07000149","E07000200","E07000202","E07000203","E09000007","E09000012","E09000013","E09000014","E09000019","E09000020","E09000022","E09000023","E09000025","E09000028","E09000030","E09000032","E09000001","E09000033","E09000002","E09000003","E09000004","E09000005","E09000006","E09000008","E09000009","E09000010","E09000011","E09000015","E09000016","E09000017","E09000018","E09000021","E09000024","E09000026","E09000027","E09000029","E09000031","E06000036","E06000043","E06000046","E06000035","E06000042","E06000044","E06000038","E06000039","E06000045","E06000037","E06000040","E06000041","E07000061","E07000062","E07000063","E07000064","E07000065","E07000084","E07000085","E07000086","E07000087","E07000088","E07000089","E07000090","E07000091","E07000092","E07000093","E07000094","E07000105","E07000106","E07000107","E07000108","E07000109","E07000110","E07000111","E07000112","E07000113","E07000114","E07000115","E07000116","E07000177","E07000178","E07000179","E07000180","E07000181","E07000207","E07000208","E07000209","E07000210","E07000211","E07000212","E07000213","E07000214","E07000215","E07000216","E07000217","E07000223","E07000224","E07000225","E07000226","E07000227","E07000228","E07000229","E06000022","E06000023","E06000052","E06000024","E06000026","E06000025","E06000030","E06000027","E06000054","E07000040","E07000041","E07000042","E07000043","E07000044","E07000045","E07000046","E07000047","E07000078","E07000079","E07000080","E07000081","E07000082","E07000083","E07000187","E07000188","E07000189","W06000001","W06000002","W06000003","W06000004","W06000005","W06000006","W06000023","W06000008","W06000009","W06000010","W06000011","W06000012","W06000013","W06000014","W06000015","W06000016","W06000024","W06000018","W06000019","W06000020","W06000021","W06000022"].forEach((e=>{fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/"+e+".json").then((e=>e.json())).then((e=>{$.push(e)}))})),fetch("./archie.aml").then((e=>e.text())).then((e=>n(5,h=ut.load(e)))),fetch("./puggy.pug").then((e=>e.text())).then((e=>g=e));var v=!1;let b={1:"expanded",2:"grew",3:"grew",4:"remained relatively stable",5:"fell"};var y=[],w=[];function x(e){if("all"==e)_(r.value);else{e=r.value+"_"+e,console.log("codesub",e),w=[];for(let t=0;t<$.length;t++){let n,l=$[t].stories.filter((t=>t.label==e));l.length>0&&(n=l[0].label.split("_"),n.length>4&&(n[3]=n[3]+"_"+n[4],n.pop()));let r={place:$[t],story:l,region:f.find((e=>e.code==$[t].parents[0].code)),s:[n]};w=[...w,r]}for(let e=0;e<w.length;e++)0==w[e].story.length&&(w.splice(e,1),e-=1);let t=w.sort((function(e,t){return e.story[0].value-t.story[0].value})).slice(0,3),l=w.sort((function(e,t){return t.story[0].value-e.story[0].value})).slice(0,3),o=w.sort((function(e,t){return Math.abs(e.story[0].value)-Math.abs(t.story[0].value)})).slice(0,3);w=l.concat(o,t),console.log("subplacesOb",w),n(10,y=w),n(10,y=[...new Set(y)])}n(8,E=!0)}function _(e){console.log("code",e),n(10,y=[]);for(let t=0;t<$.length;t++){let l,r=$[t].stories.filter((t=>t.label.split("_")[0]+"_"+t.label.split("_")[1]+"_"+t.label.split("_")[2]==e));r.length>0&&(l=r[0].label.split("_"),l.length>4&&(l[3]=l[3]+"_"+l[4],l.pop())),console.log("thisReg",f[2]);let o={place:$[t],story:r,region:f.find((e=>e.code==$[t].parents[0].code)),s:[l]};n(10,y=[...y,o])}for(let e=0;e<y.length;e++)0==y[e].story.length&&(y.splice(e,1),e-=1);let t=y.sort((function(e,t){return e.story[0].value-t.story[0].value})).slice(0,3),l=y.sort((function(e,t){return t.story[0].value-e.story[0].value})).slice(0,3),r=y.sort((function(e,t){return Math.abs(e.story[0].value)-Math.abs(t.story[0].value)})).slice(0,3);n(10,y=l.concat(r,t)),n(10,y=[...new Set(y)]),console.log("places: sort ",y),n(6,i=!0)}function k(e,t){Object.keys(e).forEach((n=>{"object"==typeof e[n]?k(e[n],t):e[n]=ye(e[n],{health:c,health:c,plcname:t})}))}setTimeout((function(){setInterval((function(){d3.selectAll("div#visph").attr("style","\n\t\t\tbackground-color: #f6f6f6; \n\t\t\tcolor: #e1e7ea; \n\t\t\theight: 240px;\n\t\t\tpadding: 80px;\n\t\t\tfont-size: 2.8rem;\n\t\t\tfont-weight: 600;\n\t\t\tmargin-bottom: 80px;")}),1e3)}),2e3);return e.$$.update=()=>{1&e.$$.dirty[0]&&n(2,l=d[r.value]),4&e.$$.dirty[0]&&console.log("subTopicOpt",l),1&e.$$.dirty[0]&&console.log("*****selected",r),2&e.$$.dirty[0]&&console.log("*****selectedb",o)},[r,o,l,a,s,h,i,m,E,v,y,u,()=>{n(9,v=!0)},x,_,function(e,t,n,l,r){e.data.population.value.change.all>8||e.data.population.value.change.all>3||e.data.population.value.change.all,e.data.health.perc.change.good>0?c="improved":e.data.health.perc.change.good<0&&(c="deteriorated"),console.log("RGNNin",t);var o=JSON.parse(JSON.stringify(n));function s(e){return e.charAt(0).toUpperCase()+e.slice(1)}return k(o),rosaenlg_en_US.render(g,{language:"en_UK",place:e,data:e.data,eng:a,rgn:t,parent:ke(_e(e.parents[0].name)),parentNT:ke(_e(e.parents[0].name,"NT")),s:l,stories:r,priorities:e.Priorities,grewSyn:b,locRankCha:undefined,natRankCha:undefined,locRankCur:undefined,natRankCur:undefined,hiRank:e.hiRank,topic:function(e,t){let n;return n=t||l[e][3],o[l[e][0]][n]},topics:o,chains:we,country:"England",get_word:Te,figs:Me,otherEst:Ae,cur:Se,cha:qe,qui:ze,cap:s,cap:s,otherRank:We,ud:Oe,city:Re,drop:Ce,drop:Ce,ord:He,ageBandLU:Be,nuword:Ke,sign:Pe,udord:De,eq:Ie,eq:Ie})},function(e){n(0,r=e)},()=>{r&&_(r.value)},function(e){n(1,o=e)},()=>{o&&x(o.value)}]}class Jt extends se{constructor(e){super(),ae(this,e,Lt,Dt,o,{},null,[-1,-1])}}function Vt(t){let n,l;return{c(){n=v("iframe"),_(n,"width","100%"),_(n,"height","6494"),_(n,"frameborder","0"),i(n.src,l="https://observablehq.com/embed/cc9449078bb7b9ae?cells=chart")||_(n,"src","https://observablehq.com/embed/cc9449078bb7b9ae?cells=chart")},m(e,t){m(e,n,t)},p:e,i:e,o:e,d(e){e&&E(n)}}}function Zt(e){return fetch("./archie.aml").then((e=>e.text())).then((e=>ut.load(e))),[]}class Gt extends se{constructor(e){super(),ae(this,e,Zt,Vt,o,{})}}const Qt=[];function Xt(t,n=e){let l;const r=new Set;function a(e){if(o(t,e)&&(t=e,l)){const e=!Qt.length;for(const e of r)e[1](),Qt.push(e,t);if(e){for(let e=0;e<Qt.length;e+=2)Qt[e][0](Qt[e+1]);Qt.length=0}}}return{set:a,update:function(e){a(e(t))},subscribe:function(o,s=e){const i=[o,s];return r.add(i),1===r.size&&(l=n(a)||e),o(t),()=>{r.delete(i),0===r.size&&(l(),l=null)}}}}function Yt(e){let t,n;const l=e[1].default,r=u(l,e,e[0],null);return{c(){t=v("div"),r&&r.c(),_(t,"class","tabs")},m(e,l){m(e,t,l),r&&r.m(t,null),n=!0},p(e,[t]){r&&r.p&&(!n||1&t)&&f(r,l,e,e[0],n?p(l,e[0],t,null):h(e[0]),null)},i(e){n||(Q(r,e),n=!0)},o(e){X(r,e),n=!1},d(e){e&&E(t),r&&r.d(e)}}}const en={};function tn(e,t,n){let{$$slots:l={},$$scope:r}=t;const o=[],a=[],s=Xt(null),i=Xt(null);var c,u;return c=en,u={registerTab:e=>{o.push(e),s.update((t=>t||e)),q((()=>{const t=o.indexOf(e);o.splice(t,1),s.update((n=>n===e?o[t]||o[o.length-1]:n))}))},registerPanel:e=>{a.push(e),i.update((t=>t||e)),q((()=>{const t=a.indexOf(e);a.splice(t,1),i.update((n=>n===e?a[t]||a[a.length-1]:n))}))},selectTab:e=>{const t=o.indexOf(e);s.set(e),i.set(a[t])},selectedTab:s,selectedPanel:i},S().$$.context.set(c,u),e.$$set=e=>{"$$scope"in e&&n(0,r=e.$$scope)},[r,l]}class nn extends se{constructor(e){super(),ae(this,e,tn,Yt,o,{})}}function ln(e){let t,n;const l=e[1].default,r=u(l,e,e[0],null);return{c(){t=v("div"),r&&r.c(),_(t,"class","tab-list svelte-1qgay6m")},m(e,l){m(e,t,l),r&&r.m(t,null),n=!0},p(e,[t]){r&&r.p&&(!n||1&t)&&f(r,l,e,e[0],n?p(l,e[0],t,null):h(e[0]),null)},i(e){n||(Q(r,e),n=!0)},o(e){X(r,e),n=!1},d(e){e&&E(t),r&&r.d(e)}}}function rn(e,t,n){let{$$slots:l={},$$scope:r}=t;return e.$$set=e=>{"$$scope"in e&&n(0,r=e.$$scope)},[r,l]}class on extends se{constructor(e){super(),ae(this,e,rn,ln,o,{})}}function an(e){let t;const n=e[4].default,l=u(n,e,e[3],null);return{c(){l&&l.c()},m(e,n){l&&l.m(e,n),t=!0},p(e,r){l&&l.p&&(!t||8&r)&&f(l,n,e,e[3],t?p(n,e[3],r,null):h(e[3]),null)},i(e){t||(Q(l,e),t=!0)},o(e){X(l,e),t=!1},d(e){l&&l.d(e)}}}function sn(e){let t,n,l=e[0]===e[1]&&an(e);return{c(){l&&l.c(),t=w()},m(e,r){l&&l.m(e,r),m(e,t,r),n=!0},p(e,[n]){e[0]===e[1]?l?(l.p(e,n),1&n&&Q(l,1)):(l=an(e),l.c(),Q(l,1),l.m(t.parentNode,t)):l&&(Z(),X(l,1,1,(()=>{l=null})),G())},i(e){n||(Q(l),n=!0)},o(e){X(l),n=!1},d(e){l&&l.d(e),e&&E(t)}}}function cn(e,t,n){let l,{$$slots:r={},$$scope:o}=t;const a={},{registerPanel:s,selectedPanel:i}=A(en);return c(e,i,(e=>n(0,l=e))),s(a),e.$$set=e=>{"$$scope"in e&&n(3,o=e.$$scope)},[l,a,i,o,r]}class un extends se{constructor(e){super(),ae(this,e,cn,sn,o,{})}}function dn(e){let t,n,l,r;const o=e[5].default,a=u(o,e,e[4],null);return{c(){t=v("button"),a&&a.c(),_(t,"class","svelte-b9uj0r"),N(t,"selected",e[0]===e[1])},m(o,s){m(o,t,s),a&&a.m(t,null),n=!0,l||(r=x(t,"click",e[6]),l=!0)},p(e,[l]){a&&a.p&&(!n||16&l)&&f(a,o,e,e[4],n?p(o,e[4],l,null):h(e[4]),null),3&l&&N(t,"selected",e[0]===e[1])},i(e){n||(Q(a,e),n=!0)},o(e){X(a,e),n=!1},d(e){e&&E(t),a&&a.d(e),l=!1,r()}}}function pn(e,t,n){let l,{$$slots:r={},$$scope:o}=t;const a={},{registerTab:s,selectTab:i,selectedTab:u}=A(en);c(e,u,(e=>n(0,l=e))),s(a);return e.$$set=e=>{"$$scope"in e&&n(4,o=e.$$scope)},[l,a,i,u,o,r,()=>i(a)]}class fn extends se{constructor(e){super(),ae(this,e,pn,dn,o,{})}}function hn(e){let t;return{c(){t=b("Area Reports")},m(e,n){m(e,t,n)},d(e){e&&E(t)}}}function gn(e){let t;return{c(){t=b("Topic QA")},m(e,n){m(e,t,n)},d(e){e&&E(t)}}}function mn(e){let t;return{c(){t=b("Word Selection")},m(e,n){m(e,t,n)},d(e){e&&E(t)}}}function En(e){let t,n,l,r,o,a;return t=new fn({props:{$$slots:{default:[hn]},$$scope:{ctx:e}}}),l=new fn({props:{$$slots:{default:[gn]},$$scope:{ctx:e}}}),o=new fn({props:{$$slots:{default:[mn]},$$scope:{ctx:e}}}),{c(){ne(t.$$.fragment),n=y(),ne(l.$$.fragment),r=y(),ne(o.$$.fragment)},m(e,s){le(t,e,s),m(e,n,s),le(l,e,s),m(e,r,s),le(o,e,s),a=!0},p(e,n){const r={};1&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r);const a={};1&n&&(a.$$scope={dirty:n,ctx:e}),l.$set(a);const s={};1&n&&(s.$$scope={dirty:n,ctx:e}),o.$set(s)},i(e){a||(Q(t.$$.fragment,e),Q(l.$$.fragment,e),Q(o.$$.fragment,e),a=!0)},o(e){X(t.$$.fragment,e),X(l.$$.fragment,e),X(o.$$.fragment,e),a=!1},d(e){re(t,e),e&&E(n),re(l,e),e&&E(r),re(o,e)}}}function $n(e){let t,n;return t=new vt({}),{c(){ne(t.$$.fragment)},m(e,l){le(t,e,l),n=!0},i(e){n||(Q(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){re(t,e)}}}function vn(e){let t,n;return t=new Jt({}),{c(){ne(t.$$.fragment)},m(e,l){le(t,e,l),n=!0},i(e){n||(Q(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){re(t,e)}}}function bn(e){let t,n;return t=new Gt({}),{c(){ne(t.$$.fragment)},m(e,l){le(t,e,l),n=!0},i(e){n||(Q(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){re(t,e)}}}function yn(e){let t,n,l,r,o,a,s,i;return t=new on({props:{$$slots:{default:[En]},$$scope:{ctx:e}}}),l=new un({props:{$$slots:{default:[$n]},$$scope:{ctx:e}}}),o=new un({props:{$$slots:{default:[vn]},$$scope:{ctx:e}}}),s=new un({props:{$$slots:{default:[bn]},$$scope:{ctx:e}}}),{c(){ne(t.$$.fragment),n=y(),ne(l.$$.fragment),r=y(),ne(o.$$.fragment),a=y(),ne(s.$$.fragment)},m(e,c){le(t,e,c),m(e,n,c),le(l,e,c),m(e,r,c),le(o,e,c),m(e,a,c),le(s,e,c),i=!0},p(e,n){const r={};1&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r);const a={};1&n&&(a.$$scope={dirty:n,ctx:e}),l.$set(a);const i={};1&n&&(i.$$scope={dirty:n,ctx:e}),o.$set(i);const c={};1&n&&(c.$$scope={dirty:n,ctx:e}),s.$set(c)},i(e){i||(Q(t.$$.fragment,e),Q(l.$$.fragment,e),Q(o.$$.fragment,e),Q(s.$$.fragment,e),i=!0)},o(e){X(t.$$.fragment,e),X(l.$$.fragment,e),X(o.$$.fragment,e),X(s.$$.fragment,e),i=!1},d(e){re(t,e),e&&E(n),re(l,e),e&&E(r),re(o,e),e&&E(a),re(s,e)}}}function wn(e){let t,n,l,r;return t=new ce({}),l=new nn({props:{$$slots:{default:[yn]},$$scope:{ctx:e}}}),{c(){ne(t.$$.fragment),n=y(),ne(l.$$.fragment)},m(e,o){le(t,e,o),m(e,n,o),le(l,e,o),r=!0},p(e,[t]){const n={};1&t&&(n.$$scope={dirty:t,ctx:e}),l.$set(n)},i(e){r||(Q(t.$$.fragment,e),Q(l.$$.fragment,e),r=!0)},o(e){X(t.$$.fragment,e),X(l.$$.fragment,e),r=!1},d(e){re(t,e),e&&E(n),re(l,e)}}}return new class extends se{constructor(e){super(),ae(this,e,null,wn,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
