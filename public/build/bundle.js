var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function o(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let a,l;function s(e,t){return a||(a=document.createElement("a")),a.href=t,e===a.href}function c(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function d(e){e.parentNode.removeChild(e)}function f(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function h(e){return document.createTextNode(e)}function g(){return h(" ")}function m(){return h("")}function y(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function v(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function x(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function b(e,t){e.value=null==t?"":t}function w(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function $(e,t,n){e.classList[n?"add":"remove"](t)}class k{constructor(){this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.e=p(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)u(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(d)}}function _(e){l=e}function C(){if(!l)throw new Error("Function called outside component initialization");return l}function j(){const e=C();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const o=function(e,t,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,!1,t),r}(t,n);r.slice().forEach((t=>{t.call(e,o)}))}}}const E=[],N=[],T=[],M=[],O=Promise.resolve();let R=!1;function S(e){T.push(e)}let A=!1;const q=new Set;function F(){if(!A){A=!0;do{for(let e=0;e<E.length;e+=1){const t=E[e];_(t),z(t.$$)}for(_(null),E.length=0;N.length;)N.pop()();for(let e=0;e<T.length;e+=1){const t=T[e];q.has(t)||(q.add(t),t())}T.length=0}while(E.length);for(;M.length;)M.pop()();R=!1,A=!1,q.clear()}}function z(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(S)}}const D=new Set;let K;function P(){K={r:0,c:[],p:K}}function W(){K.r||r(K.c),K=K.p}function U(e,t){e&&e.i&&(D.delete(e),e.i(t))}function B(e,t,n,r){if(e&&e.o){if(D.has(e))return;D.add(e),K.c.push((()=>{D.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}const I="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function L(e){e&&e.c()}function H(e,n,i,a){const{fragment:l,on_mount:s,on_destroy:c,after_update:u}=e.$$;l&&l.m(n,i),a||S((()=>{const n=s.map(t).filter(o);c?c.push(...n):r(n),e.$$.on_mount=[]})),u.forEach(S)}function V(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Z(e,t){-1===e.$$.dirty[0]&&(E.push(e),R||(R=!0,O.then(F)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function J(t,o,i,a,s,c,u,f=[-1]){const p=l;_(t);const h=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(p?p.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:o.target||p.$$.root};u&&u(h.root);let g=!1;if(h.ctx=i?i(t,o.props||{},((e,n,...r)=>{const o=r.length?r[0]:n;return h.ctx&&s(h.ctx[e],h.ctx[e]=o)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](o),g&&Z(t,e)),n})):[],h.update(),g=!0,r(h.before_update),h.fragment=!!a&&a(h.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);h.fragment&&h.fragment.l(e),e.forEach(d)}else h.fragment&&h.fragment.c();o.intro&&U(t.$$.fragment),H(t,o.target,o.anchor,o.customElement),F()}_(p)}class Y{$destroy(){V(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var G={},Q={};function X(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function ee(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function te(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function ne(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),o=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+te(-t,6):t>9999?"+"+te(t,6):te(t,4))+"-"+te(e.getUTCMonth()+1,2)+"-"+te(e.getUTCDate(),2)+(i?"T"+te(n,2)+":"+te(r,2)+":"+te(o,2)+"."+te(i,3)+"Z":o?"T"+te(n,2)+":"+te(r,2)+":"+te(o,2)+"Z":r||n?"T"+te(n,2)+":"+te(r,2)+"Z":"")}var re=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,o=[],i=e.length,a=0,l=0,s=i<=0,c=!1;function u(){if(s)return Q;if(c)return c=!1,G;var t,r,o=a;if(34===e.charCodeAt(o)){for(;a++<i&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=i?s=!0:10===(r=e.charCodeAt(a++))?c=!0:13===r&&(c=!0,10===e.charCodeAt(a)&&++a),e.slice(o+1,t-1).replace(/""/g,'"')}for(;a<i;){if(10===(r=e.charCodeAt(t=a++)))c=!0;else if(13===r)c=!0,10===e.charCodeAt(a)&&++a;else if(r!==n)continue;return e.slice(o,t)}return s=!0,e.slice(o,i)}for(10===e.charCodeAt(i-1)&&--i,13===e.charCodeAt(i-1)&&--i;(r=u())!==Q;){for(var d=[];r!==G&&r!==Q;)d.push(r),r=u();t&&null==(d=t(d,l++))||o.push(d)}return o}function o(t,n){return t.map((function(t){return n.map((function(e){return a(t[e])})).join(e)}))}function i(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?ne(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,o,i=r(e,(function(e,r){if(n)return n(e,r-1);o=e,n=t?function(e,t){var n=X(e);return function(r,o){return t(n(r),o,e)}}(e,t):X(e)}));return i.columns=o||[],i},parseRows:r,format:function(t,n){return null==n&&(n=ee(t)),[n.map(a).join(e)].concat(o(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=ee(e)),o(e,t).join("\n")},formatRows:function(e){return e.map(i).join("\n")},formatRow:i,formatValue:a}}(","),oe=re.parse;function ie(e){for(var t in e){var n,r,o=e[t].trim();if(o)if("true"===o)o=!0;else if("false"===o)o=!1;else if("NaN"===o)o=NaN;else if(isNaN(n=+o)){if(!(r=o.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;ae&&r[4]&&!r[7]&&(o=o.replace(/-/g,"/").replace(/T/," ")),o=new Date(o)}else o=n;else o=null;e[t]=o}return e}const ae=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();let le=["South East","South West","East","West Midlands","East Midlands","North East","North West"],se=e=>le.includes(e)?"The "+e:e;function ce(e,t,n){const r=e.slice();return r[32]=t[n],r[35]=t,r[34]=n,r}function ue(e,t,n){const r=e.slice();return r[32]=t[n],r[33]=t,r[34]=n,r}function de(e){let t,n,r,o,i,a,l,s=(e[0]?e[0]:"Select one")+"";return{c(){t=p("a"),n=p("span"),r=h(s),o=g(),i=p("span"),i.textContent=" ",v(n,"class","svelte-qdzmwx"),v(i,"class","button svelte-qdzmwx"),$(i,"search",e[3]),$(i,"down",!e[3]),v(t,"id","toggle"),v(t,"class","svelte-qdzmwx")},m(s,d){u(s,t,d),c(t,n),c(n,r),c(t,o),c(t,i),a||(l=y(t,"click",e[12]),a=!0)},p(e,t){1&t[0]&&s!==(s=(e[0]?e[0]:"Select one")+"")&&x(r,s),8&t[0]&&$(i,"search",e[3]),8&t[0]&&$(i,"down",!e[3])},d(e){e&&d(t),a=!1,l()}}}function fe(e){let t,n,o,i,a,l,s,f,m=e[6][e[1]]+"",b=e[2]&&pe(e);return{c(){t=p("a"),n=p("span"),o=h(m),i=g(),b&&b.c(),a=g(),l=p("span"),l.textContent=" ",v(n,"class","selection svelte-qdzmwx"),v(l,"class","button close svelte-qdzmwx"),v(t,"id","toggle"),v(t,"class","selected svelte-qdzmwx")},m(r,d){u(r,t,d),c(t,n),c(n,o),c(n,i),b&&b.m(n,null),c(t,a),c(t,l),s||(f=[y(l,"click",e[14]),y(t,"click",e[12])],s=!0)},p(e,t){66&t[0]&&m!==(m=e[6][e[1]]+"")&&x(o,m),e[2]?b?b.p(e,t):(b=pe(e),b.c(),b.m(n,null)):b&&(b.d(1),b=null)},d(e){e&&d(t),b&&b.d(),s=!1,r(f)}}}function pe(e){let t,n,r=e[6][e[2]]+"";return{c(){t=p("small"),n=h(r),v(t,"class","svelte-qdzmwx")},m(e,r){u(e,t,r),c(t,n)},p(e,t){68&t[0]&&r!==(r=e[6][e[2]]+"")&&x(n,r)},d(e){e&&d(t)}}}function he(e){let t,n,o,i,a,l;function s(e,t){return e[4].length<3?ve:e[9][0]&&e[2]?ye:e[9][0]?me:ge}let f=s(e),h=f(e);return{c(){t=p("div"),n=p("input"),o=g(),i=p("ul"),h.c(),v(n,"type","text"),v(n,"placeholder",""),v(n,"autocomplete","false"),v(n,"class","svelte-qdzmwx"),v(i,"class","svelte-qdzmwx"),v(t,"id","dropdown"),w(t,"top","0"),v(t,"class","svelte-qdzmwx")},m(r,s){u(r,t,s),c(t,n),b(n,e[4]),e[23](n),c(t,o),c(t,i),h.m(i,null),e[30](t),a||(l=[y(n,"input",e[22]),y(n,"keyup",e[16])],a=!0)},p(e,t){16&t[0]&&n.value!==e[4]&&b(n,e[4]),f===(f=s(e))&&h?h.p(e,t):(h.d(1),h=f(e),h&&(h.c(),h.m(i,null)))},d(n){n&&d(t),e[23](null),h.d(),e[30](null),a=!1,r(l)}}}function ge(t){let n;return{c(){n=p("li"),n.textContent="No results",v(n,"class","svelte-qdzmwx")},m(e,t){u(e,n,t)},p:e,d(e){e&&d(n)}}}function me(e){let t,n=e[9],r=[];for(let t=0;t<n.length;t+=1)r[t]=xe(ce(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=m()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);u(e,t,n)},p(e,o){if(11010&o[0]){let i;for(n=e[9],i=0;i<n.length;i+=1){const a=ce(e,n,i);r[i]?r[i].p(a,o):(r[i]=xe(a),r[i].c(),r[i].m(t.parentNode,t))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(e){f(r,e),e&&d(t)}}}function ye(e){let t,n=e[9],r=[];for(let t=0;t<n.length;t+=1)r[t]=be(ue(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=m()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);u(e,t,n)},p(e,o){if(11014&o[0]){let i;for(n=e[9],i=0;i<n.length;i+=1){const a=ue(e,n,i);r[i]?r[i].p(a,o):(r[i]=be(a),r[i].c(),r[i].m(t.parentNode,t))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(e){f(r,e),e&&d(t)}}}function ve(t){let n;return{c(){n=p("li"),n.textContent="Type a name...",v(n,"class","svelte-qdzmwx")},m(e,t){u(e,n,t)},p:e,d(e){e&&d(n)}}}function xe(e){let t,n,o,i,a,l=e[32][e[1]]+"",s=e[34];function f(){return e[27](e[32])}function m(){return e[28](e[34])}const b=()=>e[29](t,s),w=()=>e[29](null,s);return{c(){t=p("li"),n=h(l),o=g(),v(t,"class","svelte-qdzmwx"),$(t,"highlight",e[8]==e[34])},m(e,r){u(e,t,r),c(t,n),c(t,o),b(),i||(a=[y(t,"click",f),y(t,"mouseover",m)],i=!0)},p(r,o){e=r,514&o[0]&&l!==(l=e[32][e[1]]+"")&&x(n,l),s!==e[34]&&(w(),s=e[34],b()),256&o[0]&&$(t,"highlight",e[8]==e[34])},d(e){e&&d(t),w(),i=!1,r(a)}}}function be(e){let t,n,o,i,a,l,s,f,m=e[32][e[1]]+"",b=e[32][e[2]]+"",w=e[34];function k(){return e[24](e[32])}function _(){return e[25](e[34])}const C=()=>e[26](t,w),j=()=>e[26](null,w);return{c(){t=p("li"),n=h(m),o=g(),i=p("small"),a=h(b),l=g(),v(i,"class","svelte-qdzmwx"),v(t,"class","svelte-qdzmwx"),$(t,"highlight",e[8]==e[34])},m(e,r){u(e,t,r),c(t,n),c(t,o),c(t,i),c(i,a),c(t,l),C(),s||(f=[y(t,"click",k),y(t,"mouseover",_)],s=!0)},p(r,o){e=r,514&o[0]&&m!==(m=e[32][e[1]]+"")&&x(n,m),516&o[0]&&b!==(b=e[32][e[2]]+"")&&x(a,b),w!==e[34]&&(j(),w=e[34],C()),256&o[0]&&$(t,"highlight",e[8]==e[34])},d(e){e&&d(t),j(),s=!1,r(f)}}}function we(t){let n,r,o,i;function a(e,t){return e[6]&&!e[3]?fe:de}let l=a(t),s=l(t),f=t[7]&&he(t);return{c(){n=p("div"),s.c(),r=g(),f&&f.c(),v(n,"id","select"),v(n,"class","svelte-qdzmwx"),$(n,"active",t[7])},m(e,a){u(e,n,a),s.m(n,null),c(n,r),f&&f.m(n,null),o||(i=y(n,"keydown",t[15]),o=!0)},p(e,t){l===(l=a(e))&&s?s.p(e,t):(s.d(1),s=l(e),s&&(s.c(),s.m(n,r))),e[7]?f?f.p(e,t):(f=he(e),f.c(),f.m(n,null)):f&&(f.d(1),f=null),128&t[0]&&$(n,"active",e[7])},i:e,o:e,d(e){e&&d(n),s.d(),f&&f.d(),o=!1,i()}}}function $e(e,t,n){let r;const o=j();let i,a,l,{options:s}=t,{selected:c=null}=t,{placeholder:u="Find an area..."}=t,{value:d="code"}=t,{label:f="name"}=t,{group:p=null}=t,{search:h=!1}=t,g=c,m=c?s.find((e=>{e[d],c[d]})):null,y=!1,v="",x=null,b=[];function w(e){n(17,c=e),n(7,y=!1),o("select",{selected:e,value:e[d]})}return e.$$set=e=>{"options"in e&&n(18,s=e.options),"selected"in e&&n(17,c=e.selected),"placeholder"in e&&n(0,u=e.placeholder),"value"in e&&n(19,d=e.value),"label"in e&&n(1,f=e.label),"group"in e&&n(2,p=e.group),"search"in e&&n(3,h=e.search)},e.$$.update=()=>{16&e.$$.dirty[0]&&n(21,r=v?new RegExp(v,"i"):null),2359298&e.$$.dirty[0]&&(n(9,i=r?s.filter((e=>r.test(e[f]))):s),n(8,x=0)),32&e.$$.dirty[0]&&(document.onclick=function(e){e.target!==a&&(n(7,y=!1),n(8,x=0))}),1966080&e.$$.dirty[0]&&g!=c&&(n(6,m=s.find((e=>e[d]==c[d]))),n(20,g=c))},[u,f,p,h,v,a,m,y,x,i,l,b,function(e){var t;e.stopPropagation(),n(4,v=""),n(7,y=!y),(t=10,new Promise((e=>setTimeout(e,t)))).then((()=>{l&&y&&l.focus()}))},w,function(e){e.stopPropagation(),n(17,c=null),n(20,g=null),n(6,m=null),o("select",{selected:null,value:null})},function(e){y&&i[0]&&Number.isInteger(x)&&(38===e.keyCode?(n(8,x-=x>0?1:0),b[x].scrollIntoView({block:"nearest",inline:"start"})):40===e.keyCode&&(n(8,x+=x<i.length-1?1:0),b[x].scrollIntoView({block:"nearest",inline:"end"})))},function(e){i[0]&&Number.isInteger(x)&&13===e.keyCode&&w(i[x])},c,s,d,g,r,function(){v=this.value,n(4,v)},function(e){N[e?"unshift":"push"]((()=>{l=e,n(10,l)}))},e=>w(e),e=>n(8,x=e),function(e,t){N[e?"unshift":"push"]((()=>{b[t]=e,n(11,b)}))},e=>w(e),e=>n(8,x=e),function(e,t){N[e?"unshift":"push"]((()=>{b[t]=e,n(11,b)}))},function(e){N[e?"unshift":"push"]((()=>{a=e,n(5,a)}))}]}class ke extends Y{constructor(e){super(),J(this,e,$e,we,i,{options:18,selected:17,placeholder:0,value:19,label:1,group:2,search:3},null,[-1,-1])}}function _e(t){let n;return{c(){n=p("div"),n.innerHTML="<strong>Warning!</strong> This is a prototype. Data likely to contain inaccuracies.",v(n,"class","warning svelte-srzfvi")},m(e,t){u(e,n,t)},p:e,i:e,o:e,d(e){e&&d(n)}}}class Ce extends Y{constructor(e){super(),J(this,e,null,_e,i,{})}}var je="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var Ee,Ne,Te=(Ee=function(e,t){(function(){var n={load:function(e,t){var n,r,o,i="\\u0000\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u200B\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF\\u005B\\u005C\\u005D\\u007B\\u007D\\u003A",a=new RegExp(".*((\r|\n)+)"),l=new RegExp("^\\s*([^"+i+"]+)[ \t\r]*:[ \t\r]*(.*(?:\n|\r|$))"),s=new RegExp("^\\s*:[ \t\r]*(endskip|ignore|skip|end).*?(\n|\r|$)","i"),c=new RegExp("^\\s*\\*[ \t\r]*(.*(?:\n|\r|$))"),u=new RegExp("^\\s*(\\[|\\{)[ \t\r]*([+.]*)[ \t\r]*([^"+i+"]*)[ \t\r]*(?:\\]|\\}).*?(\n|\r|$)"),d={},f=d,p=[],h=void 0,g=null,m=null,y="",v=!1;for(!0!==(t=t||{}).comments&&(t.comments=!1);e;){var x;s.exec(e)?b((x=s.exec(e))[1].toLowerCase()):v||!l.exec(e)||h&&"simple"===h.arrayType?!v&&c.exec(e)&&h&&h.array&&"complex"!==h.arrayType&&"freeform"!==h.arrayType&&h.flags.indexOf("+")<0?(o=(x=c.exec(e))[1],C(),h.arrayType=h.arrayType||"simple",h.array.push(""),m=h.array,y=o,j(h.array,{replace:!0})):!v&&u.exec(e)?w((x=u.exec(e))[1],x[2],x[3]):a.exec(e)?$((x=a.exec(e))[0]):($(e),e=""):(n=(x=l.exec(e))[1],r=x[2]||"",C(),k(n),h&&h.flags.indexOf("+")>-1&&(n="value"),m=n,y=r,j(n,{replace:!0})),x&&(e=e.substring(x[0].length))}function b(t){if(v&&"endskip"!==t&&"ignore"!==t)return C();switch(t){case"end":return void(m&&j(m,{replace:!1}));case"ignore":e="";break;case"skip":v=!0;break;case"endskip":v=!1}C()}function w(e,t,n){if(C(),""==n){var r=p.pop();f=(r?r.scope:d)||d,h=p[p.length-1]}else if("["===e||"{"===e){var o=!1,i=d;if(t.indexOf(".")>-1?(k(n),o=!0,h&&(i=f)):(f=d,p=[]),h&&h.flags.indexOf("+")>-1)var a=n;else{for(var l=n.split("."),s=0;s<l.length-1;s++)i=i[l[s]]=i[l[s]]||{};a=l[l.length-1]}var c={array:null,arrayType:null,arrayFirstKey:null,flags:t,scope:f},u=h&&h.flags.indexOf("+")>-1&&t.indexOf(".")>-1;"["==e?(u&&(a="value"),c.array=i[a]=[],t.indexOf("+")>-1&&(c.arrayType="freeform"),o?p.push(c):p=[c],h=p[p.length-1]):"{"==e&&(o?(f=u?f.value={}:i[a]=i={},p.push(c)):(f=i[a]="object"==typeof i[a]?i[a]:{},p=[c]),h=p[p.length-1])}}function $(t){h&&h.flags.indexOf("+")>-1&&t.match(/[^\n\r\s]/)?h.array.push({type:"text",value:t.replace(/(^\s*)|(\s*$)/g,"")}):y+=e.substring(0,t.length)}function k(e){if(h&&h.array){if(h.arrayType=h.arrayType||"complex","simple"===h.arrayType)return;null!==h.arrayFirstKey&&h.arrayFirstKey!==e||h.array.push(f={}),h.flags.indexOf("+")>-1?f.type=e:h.arrayFirstKey=h.arrayFirstKey||e}}function _(e,n){return t.comments&&(e=(e=e.replace(/(?:^\\)?\[[^\[\]\n\r]*\](?!\])/gm,"")).replace(/\[\[([^\[\]\n\r]*)\]\]/g,"[$1]")),"append"==n&&(e=e.replace(new RegExp("^(\\s*)\\\\","gm"),"$1")),e}function C(){var e=y+"";return y="",m=null,e}function j(e,t){t=t||{};var n=m,r=C();if(t.replace?(r=_(r,"replace").replace(new RegExp("^\\s*"),""),y=new RegExp("\\s*$").exec(r)[0],m=n):r=_(r,"append"),"object"==typeof e)t.replace&&(e[e.length-1]=""),e[e.length-1]+=r.replace(new RegExp("\\s*$"),"");else{var o=e.split(".");g=f;for(var i=0;i<o.length-1;i++)"string"==typeof g[o[i]]&&(g[o[i]]={}),g=g[o[i]]=g[o[i]]||{};t.replace&&(g[o[o.length-1]]=""),g[o[o.length-1]]+=r.replace(new RegExp("\\s*$"),"")}}return C(),d}};e.exports&&(t=e.exports=n),t.archieml=n}).call(je)},Ee(Ne={exports:{}},Ne.exports),Ne.exports);const Me=e=>{if(e<10)return["","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth"][e];const t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"},{document:Oe}=I;function Re(e){let t,n,r=e[5]&&Se(e);return{c(){r&&r.c(),t=m()},m(e,o){r&&r.m(e,o),u(e,t,o),n=!0},p(e,n){e[5]?r?(r.p(e,n),32&n[0]&&U(r,1)):(r=Se(e),r.c(),U(r,1),r.m(t.parentNode,t)):r&&(P(),B(r,1,1,(()=>{r=null})),W())},i(e){n||(U(r),n=!0)},o(e){B(r),n=!1},d(e){r&&r.d(e),e&&d(t)}}}function Se(e){let t,n,r=e[3]&&Ae(e);return{c(){r&&r.c(),t=m()},m(e,o){r&&r.m(e,o),u(e,t,o),n=!0},p(e,n){e[3]?r?(r.p(e,n),8&n[0]&&U(r,1)):(r=Ae(e),r.c(),U(r,1),r.m(t.parentNode,t)):r&&(P(),B(r,1,1,(()=>{r=null})),W())},i(e){n||(U(r),n=!0)},o(e){B(r),n=!1},d(e){r&&r.d(e),e&&d(t)}}}function Ae(e){let t,n,r=e[4]&&qe(e);return{c(){r&&r.c(),t=m()},m(e,o){r&&r.m(e,o),u(e,t,o),n=!0},p(e,n){e[4]?r?(r.p(e,n),16&n[0]&&U(r,1)):(r=qe(e),r.c(),U(r,1),r.m(t.parentNode,t)):r&&(P(),B(r,1,1,(()=>{r=null})),W())},i(e){n||(U(r),n=!0)},o(e){B(r),n=!1},d(e){r&&r.d(e),e&&d(t)}}}function qe(e){let t,n,r,o,i,a,l,s,f,m,b,$,_,C,j,E,T,O,R,S,A,q,F,z,D,K,P,W,I,Z,J,Y,G,Q,X,ee,te,ne,re,oe=e[2].name+"",ie=e[8](e[2])+"",ae=(e[2].gss.long?e[2].gss.long:"local authority district")+"",le=e[9](e[2])+"";function se(t){e[10](t)}let ce={options:e[0],group:"typenm",search:!0};return void 0!==e[1]&&(ce.selected=e[1]),f=new ke({props:ce}),N.push((()=>function(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}(f,"selected",se))),f.$on("select",e[11]),{c(){t=p("div"),n=p("div"),r=p("h1"),o=h(oe),i=h(": What's changed"),a=g(),l=p("div"),s=p("div"),L(f.$$.fragment),b=g(),$=new k,_=g(),C=p("p"),j=h("Here are some of the "),E=p("span"),E.textContent="most notable changes",T=h(" from across the "),O=h(ae),R=h("."),S=g(),A=p("main"),q=new k,F=g(),z=p("hr"),D=g(),K=p("h2"),K.textContent="Creating this article",P=g(),W=p("p"),W.textContent="This article has been generated using a semi-automated system for story selection and data-to-text templating.",I=g(),Z=p("p"),Z.textContent="The system relies upon a computer programme to decide which topics are relevant to specific areas and describe the data in words.",J=g(),Y=p("p"),Y.textContent="For each local authority district, the variables that have changed the most since 2011 are selected automatically. Variables that have experienced a considerably larger or smaller change than the regional or national averages are also selected.",G=g(),Q=p("p"),Q.textContent="The decisions made by the computer programme were coded by staff in the ONS Digital Publishing team in advance of the release of Census 2021 data.",X=g(),ee=p("div"),v(r,"class","svelte-15qyx5z"),w(s,"width","640px"),w(s,"margin","50px auto"),$.a=_,v(E,"class","back-to-top svelte-15qyx5z"),w(n,"width","640px"),w(n,"margin","0 auto"),v(t,"id","sf"),v(t,"class","svelte-15qyx5z"),q.a=F,w(z,"width","40%"),w(z,"margin","60px auto 30px auto"),v(K,"id","create"),w(ee,"height","200px"),v(A,"class","svelte-15qyx5z")},m(e,d){u(e,t,d),c(t,n),c(n,r),c(r,o),c(r,i),c(n,a),c(n,l),c(l,s),H(f,s,null),c(n,b),$.m(ie,n),c(n,_),c(n,C),c(C,j),c(C,E),c(C,T),c(C,O),c(C,R),u(e,S,d),u(e,A,d),q.m(le,A),c(A,F),c(A,z),c(A,D),c(A,K),c(A,P),c(A,W),c(A,I),c(A,Z),c(A,J),c(A,Y),c(A,G),c(A,Q),c(A,X),c(A,ee),te=!0,ne||(re=y(E,"click",Pe),ne=!0)},p(e,t){(!te||4&t[0])&&oe!==(oe=e[2].name+"")&&x(o,oe);const n={};1&t[0]&&(n.options=e[0]),!m&&2&t[0]&&(m=!0,n.selected=e[1],function(e){M.push(e)}((()=>m=!1))),f.$set(n),(!te||4&t[0])&&ie!==(ie=e[8](e[2])+"")&&$.p(ie),(!te||4&t[0])&&ae!==(ae=(e[2].gss.long?e[2].gss.long:"local authority district")+"")&&x(O,ae),(!te||4&t[0])&&le!==(le=e[9](e[2])+"")&&q.p(le)},i(e){te||(U(f.$$.fragment,e),te=!0)},o(e){B(f.$$.fragment,e),te=!1},d(e){e&&d(t),V(f),e&&d(S),e&&d(A),ne=!1,re()}}}function Fe(e){let t,n,r,o,i,a,l,f,h,m,x;a=new Ce({});let b=e[2]&&Re(e);return{c(){t=p("script"),r=p("script"),i=g(),L(a.$$.fragment),l=g(),f=p("div"),b&&b.c(),s(t.src,n="https://d3js.org/d3.v3.min.js")||v(t,"src","https://d3js.org/d3.v3.min.js"),v(t,"charset","utf-8"),s(r.src,o="https://unpkg.com/rosaenlg@3.0.1/dist/rollup/rosaenlg_tiny_en_US_3.0.1_comp.js")||v(r,"src","https://unpkg.com/rosaenlg@3.0.1/dist/rollup/rosaenlg_tiny_en_US_3.0.1_comp.js")},m(n,o){c(Oe.head,t),c(Oe.head,r),u(n,i,o),H(a,n,o),u(n,l,o),u(n,f,o),b&&b.m(f,null),h=!0,m||(x=y(r,"load",e[6]),m=!0)},p(e,t){e[2]?b?(b.p(e,t),4&t[0]&&U(b,1)):(b=Re(e),b.c(),U(b,1),b.m(f,null)):b&&(P(),B(b,1,1,(()=>{b=null})),W())},i(e){h||(U(a.$$.fragment,e),U(b),h=!0)},o(e){B(a.$$.fragment,e),B(b),h=!1},d(e){d(t),d(r),e&&d(i),V(a,e),e&&d(l),e&&d(f),b&&b.d(),m=!1,x()}}}function ze(e){let t,n=Number.parseFloat(Number.parseFloat(e).toPrecision(3));return e-n<-e/100&&(t="under "),t=e-n<-e/800?1==Math.round(Math.random())?"almost ":"just under ":e-n>e/100?" just over ":e-n>e/800?"just over ":"",[t,n]}function De(e){return Math.ceil(5*e/331)}function Ke(e,t,n){return e<0?n:t}function Pe(){document.getElementById("create").scrollIntoView()}function We(e,t,n){let r="Barnet";var o,i,a,l,s,c,u,d,f,p,h,g,m,y;fetch("./archie.aml").then((e=>e.text())).then((e=>g=Te.load(e))),fetch("./puggy.pug").then((e=>e.text())).then((e=>m=e)),fetch("./standf.pug").then((e=>e.text())).then((e=>y=e));const v={ew:{name:"",pl:""},wd:{name:"Ward",pl:"Wards"},lad:{name:"District",pl:"Districts"},rgn:{name:"Region",pl:"Regions"},ctry:{name:"Country",pl:"Countries"}};let x=!1;function b(e){fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/"+e+".json").then((e=>e.json())).then((t=>{t.children=o.filter((t=>t.parent==e)),t.siblings=o.filter((e=>e.parent==t.parents[0].code)),n(2,a=t),(f=a.stories.map((e=>e.label.split("_")))).forEach((e=>{e.length>4&&(e[3]=e[3]+"_"+e[4],e.pop())})),u=a.parents[0].code,console.log("Place",a),console.log("s",f),l=f.map((e=>parseInt(a.data[e[0]][e[1]+"_rank_local"][e[2]][e[3]]))),p=f.map((e=>parseInt(a.data[e[0]][e[1]+"_rank"][e[2]][e[3]]))),s=f.map((e=>parseInt(a.data[e[0]][e[1]+"_rank_local"][2011][e[3]]))),h=f.map((e=>parseInt(a.data[e[0]][e[1]+"_rank"][2011][e[3]]))),fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/"+u+".json").then((e=>e.json())).then((t=>{t.children=o.filter((t=>t.parent==e)),t.siblings=o.filter((e=>e.parent==t.parents[0].code)),n(4,d=t)}))})),fetch("https://raw.githubusercontent.com/theojolliffe/census-data/main/json/place/E92000001.json").then((e=>e.json())).then((t=>{t.children=o.filter((t=>t.parent==e)),t.siblings=o.filter((e=>e.parent==t.parents[0].code)),n(3,c=t)}))}(async function(e){let t=await fetch(e),n=await t.text();return await oe(n,ie)})("https://raw.githubusercontent.com/theojolliffe/census-data/main/csv/lists/places_2020.csv").then((e=>{e.forEach((e=>{e.typepl=v[e.type].pl,e.typenm=v[e.type].name})),e=e.filter((e=>"lad"==e.type)),n(0,o=e.sort(((e,t)=>e.name.localeCompare(t.name)))),r=o[Math.round(336*Math.random())].name,console.log("defaultLoc",r),n(1,i=o.find((e=>e.name==r))),console.log("selected.code",i.code),b(i.code)}));let w={1:"ballooned",2:"grew",3:"remained relatively stable",4:"shrunk",5:"fell sharply"},$={"quarter of a million":25e4,"half a million":5e5,"three quarters of a million":75e4,"one million":1e6},k={"one in two":.5,"one in three":.333,"one in four":.25,"one in five":.2,"one in six":.167,"one in seven":.143,"one in eight":.125,"one in nine":.111,"1 in 10":.1,"1 in 11":.09,"1 in 12":.083,"1 in 13":.077,"1 in 14":.071,"1 in 15":.067,"1 in 16":.063,"1 in 17":.059,"1 in 18":.056,"1 in 19":.053,"1 in 20":.05,"2 in 10":.2,"3 in 10":.3,"4 in 10":.4,"6 in 10":.6,"7 in 10":.7,"8 in 10":.8,"9 in 10":.9,all:1};function _(e,t){let n;"frac"==t?t=k:"num"==t&&(t=$);let r,o=2e6;for(const i in t)Math.abs(e-t[i])<o&&(o=Math.abs(e-t[i]),r=i,e-t[i]==0?n="about":e-t[i]>0?n="just over":e-t[i]<0&&(n="just under"));return[n,r]}let j={good:["bad","fair"],bad:["good","fair"],white:["black","asian"],black:["white","asian"],asian:["white","black"],rented_private:["rented_social","owned"],rented_social:["rented_private","owned"],owned:["rented_private","rented_social"],student:["employee","unemployed","self-employed"],"self-employed":["employee","unemployed","student"],employee:["unemployed","self-employed","student"],unemployed:["employee","self-employed","student"],car_van:["bus","train_metro","foot","home"],bus:["car_van","train_metro","foot","home"],train_metro:["bus","car_van","foot","home"],foot:["bus","train_metro","car_van","home"],home:["bus","train_metro","foot","car_van"],OnePerson:["Cohabiting","Married"],Cohabiting:["OnePerson","Married"],LoneParent:["Married","Cohabiting"],Christian:["Muslim","Noreligion"],Muslim:["Christian","Noreligion"],Noreligion:["Christian","Muslim"],Buddhist:["Hindu","Sikh"],Hindu:["Sikh","Buddhist"],Jewish:["Christian","Muslim"],Sikh:["Hindu","Buddhist"],Single:["Married","Seperated"],Married:["Single","Seperated"],Seperated:["Married","Single"],"40PlushoursWeek":["20to49hoursWeek","1to19hoursWeek"],"20to49hoursWeek":["40PlushoursWeek","1to19hoursWeek"],"1to19hoursWeek":["40PlushoursWeek","20to49hoursWeek"],Kids:["NoKids","NonDepKids"],NoKids:["Kids","NonDepKids"],NonDepKids:["Kids","NoKids"],"Male1-15":["Male49plus"],Male49plus:["Male1-15"],"Female1-15":["Female49plus"],Female49plus:["Female1-15"]};function E(e,t){return t="rl"==t?"_rank_local":"r"==t?"_rank":"",a.data[f[e][0]][f[e][1]+t][2011][f[e][3]]}function N(e,t){return t="rl"==t?"_rank_local":"r"==t?"_rank":"",a.data[f[e][0]][f[e][1]+t].change[f[e][3]]}function T(e,t,n){"number"==typeof t&t<0?t="highest":"number"==typeof t&&(t="lowest");let r,o=Object.assign({},a.data[f[e][0]][f[e][1]+"_rank_local"][n]),i=new Set(j[f[e][3]]);for(let e of Object.keys(o))i.has(e)||delete o[e];if(Object.keys(o).length>1){if("lowest"==t){for(let[e,t]of Object.entries(o))t>0&&delete o[e];r=o.length>0?Object.keys(o).reduce(((e,t)=>o[e]>o[t]?e:t)):void 0}if("highest"==t){for(let[e,t]of Object.entries(o))t<0&&delete o[e];r=o.length>0?Object.keys(o).reduce(((e,t)=>o[e]<o[t]?e:t)):void 0}}else r=Object.keys(o);return r}function M(e,t="r"){let n="";return"rl"==t&&(n="_local"),a.data[f[e][0]][f[e][1]+"_rank"+n].change[T(e,N(e,t),"change")]}var O;O="London"==parent?"city":"region",function(e){C().$$.on_mount.push(e)}((()=>{setInterval((function(){d3.selectAll("div#visph").attr("style","\n\t\t\tbackground-color: #f6f6f6; \n\t\t\tcolor: #e1e7ea; \n\t\t\theight: 240px;\n\t\t\tpadding: 80px;\n\t\t\tfont-size: 2.8rem;\n\t\t\tfont-weight: 600;\n\t\t\tmargin-bottom: 80px;")}),1e3)}));return[o,i,a,c,d,x,()=>{n(5,x=!0)},b,function(e){let t=[],n=0;return e.stories.forEach((e=>{t.length<4&Math.abs(e.value)>4&&(t.push(e.label.split("_")),n+=Math.abs(e.value))})),rosaenlg_en_US.render(y,{language:"en_UK",place:e,topics:g,s:f,sf:t,grewSyn:w,qui:De,natRankCha:p})},function(e){function t(e,n){Object.keys(e).forEach((r=>{"object"==typeof e[r]?t(e[r]):e[r]=((e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string, got "+typeof e);let n=1,r=e.charAt(0);const o=function(){return r},i=function(t){throw JSON.stringify({name:"Robo-journalist error",message:t,at:n,text:e})},a=function(t){return t&&t!==r&&i("Expected '"+t+"' instead of '"+r+"'"),r=e.charAt(n),n+=1,r},l=function(e){const n=e.split(".");let r=t;for(const t of n)try{r=r[t]}catch{i(`${e} is not in the data dictionary.`)}return r},s=function(e){const t=e.split(" "),n={"+":(e,t)=>e+t,"-":(e,t)=>e-t,"*":(e,t)=>e*t,"/":(e,t)=>e/t,"<":(e,t)=>e<t,">":(e,t)=>e>t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t},r=[];for(const e of t)if(/^-?\d+$/.test(e))r.push(Number(e));else if(e in n){const t=Number(r.pop()),o=Number(r.pop());r.push(n[e](o,t))}else if("'"===e)r[r.length-1]="s"===(o=r[r.length-1])[o.length-1]?o+"'":o+"'s";else if(","===e)r[r.length-1]=r[r.length-1].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");else if(".0"===e)r[r.length-1]=r[r.length-1].toFixed(0);else if(".1"===e)r[r.length-1]=r[r.length-1].toFixed(1);else if(".2"===e)r[r.length-1]=r[r.length-1].toFixed(2);else if("~abs"===e)r[r.length-1]=Math.abs(r[r.length-1]);else if("~ord"===e)r[r.length-1]=Me(Number(r[r.length-1]));else if("~ord'"===e){let e=Me(Number(r.pop()));"first"===e?e="":e+=" ",r.push(e)}else"^"===e.charAt(0)?r[r.length-1]=l(e.slice(1))(r[r.length-1]):r.push(l(e));var o;return 1!==r.length&&i("Invalid RPN"),r[0]},c=function(e){a("?");const t=d();a(":");const n=d();return a("}"),e?t:n},u=function(){if(a("{"),":"===r)return a(":"),a("}"),":";let e="";for(;o();){if("}"===r)return a("}"),s(e);if("?"===r)return c(s(e));e+=r,a()}i("Braces not closed")},d=function(){let e="";for(;o();){if(":"===r||"}"===r)return e;"{"!==r?(e+=r,a()):e+=u()}return e},f=d();return""!==r&&i(`Didn't expect '${r}'`),f})(e[r],{plcname:n})}))}function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}return console.log("topics",g),rosaenlg_en_US.render(m,{language:"en_UK",place:e,data:e.data,eng:c,rgn:d,parent:(r=se(e.parents[0].name),"The"==r.slice(0,3)?r.charAt(0).toLowerCase()+r.slice(1):r),s:f,priorities:e.Priorities,grewSyn:w,locRankCha:l,natRankCha:p,locRankCur:s,natRankCur:h,hiRank:e.hiRank,topic:function(e,t){let n;return n=t||f[e][3],g[f[e][0]][n]},topics:function(e,n){let r=Object.assign({},e);return t(r,n),r}(g,e.name),chains:j,country:"England",get_word:_,figs:ze,otherEst:T,cur:E,cha:N,qui:De,cap:n,cap:n,otherRank:M,ud:Ke,city:O});var r},function(e){n(1,i=e)},()=>{i&&b(i.code)}]}return new class extends Y{constructor(e){super(),J(this,e,We,Fe,i,{},null,[-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
